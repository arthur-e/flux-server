<!DOCTYPE html><html><head><title>d3.js</title><meta http-equiv="Content-Type" content="text/html" charset="UTF-8"><link rel="stylesheet" media="all" href="../../../docco.css"></head><body><div id="container"><div id="background"></div><div id="jump_to">Jump To &hellip;<div id="jump_wrapper"><div id="jump_page"><a href="../../../index.html" class="source"><span class="file_name">README</span></a><a href="../../.././api/uncertainty.js.html" class="source "><span class="base_path">. / api / </span><span class="file_name">uncertainty.js</span></a><a href="../../.././api/grid.js.html" class="source "><span class="base_path">. / api / </span><span class="file_name">grid.js</span></a><a href="../../.././api/stats.js.html" class="source "><span class="base_path">. / api / </span><span class="file_name">stats.js</span></a><a href="../../.././api/xy.js.html" class="source "><span class="base_path">. / api / </span><span class="file_name">xy.js</span></a><a href="../../.././api/scenario.js.html" class="source "><span class="base_path">. / api / </span><span class="file_name">scenario.js</span></a><a href="../../.././api/t.js.html" class="source "><span class="base_path">. / api / </span><span class="file_name">t.js</span></a><a href="../../.././core.js.html" class="source "><span class="base_path">. / </span><span class="file_name">core.js</span></a><a href="../../.././flux-server.js.html" class="source "><span class="base_path">. / </span><span class="file_name">flux-server.js</span></a><a href="../../.././node_modules/d3/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/d3.js.html" class="source selected"><span class="base_path">. / node_modules / d3 / </span><span class="file_name">d3.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/request.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / </span><span class="file_name">request.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/aws-sign2/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / aws-sign2 / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/ctype/ctio.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / ctype / </span><span class="file_name">ctio.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/ctype/ctf.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / ctype / </span><span class="file_name">ctf.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/ctype/ctype.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / ctype / </span><span class="file_name">ctype.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/ctype/tst/ctype/tst.endian.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / ctype / tst / ctype / </span><span class="file_name">tst.endian.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/ctype/tst/ctype/tst.writeStruct.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / ctype / tst / ctype / </span><span class="file_name">tst.writeStruct.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/ctype/tst/ctype/tst.structw.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / ctype / tst / ctype / </span><span class="file_name">tst.structw.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/ctype/tst/ctype/tst.char.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / ctype / tst / ctype / </span><span class="file_name">tst.char.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/ctype/tst/ctype/tst.readSize.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / ctype / tst / ctype / </span><span class="file_name">tst.readSize.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/ctype/tst/ctype/tst.basicw.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / ctype / tst / ctype / </span><span class="file_name">tst.basicw.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/ctype/tst/ctype/tst.basicr.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / ctype / tst / ctype / </span><span class="file_name">tst.basicr.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/ctype/tst/ctype/tst.oldwrite.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / ctype / tst / ctype / </span><span class="file_name">tst.oldwrite.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/ctype/tst/ctf/tst.fail.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / ctype / tst / ctf / </span><span class="file_name">tst.fail.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/ctype/tst/ctf/tst.float.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / ctype / tst / ctf / </span><span class="file_name">tst.float.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/ctype/tst/ctf/tst.psinfo.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / ctype / tst / ctf / </span><span class="file_name">tst.psinfo.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/ctype/tst/ctf/tst.int.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / ctype / tst / ctf / </span><span class="file_name">tst.int.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/ctype/tst/ctf/tst.typedef.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / ctype / tst / ctf / </span><span class="file_name">tst.typedef.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/ctype/tst/ctf/tst.struct.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / ctype / tst / ctf / </span><span class="file_name">tst.struct.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/ctype/tst/ctio/float/tst.rfloat.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / ctype / tst / ctio / float / </span><span class="file_name">tst.rfloat.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/ctype/tst/ctio/float/tst.wfloat.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / ctype / tst / ctio / float / </span><span class="file_name">tst.wfloat.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/ctype/tst/ctio/int/tst.64.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / ctype / tst / ctio / int / </span><span class="file_name">tst.64.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/ctype/tst/ctio/int/tst.wint.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / ctype / tst / ctio / int / </span><span class="file_name">tst.wint.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/ctype/tst/ctio/int/tst.rint.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / ctype / tst / ctio / int / </span><span class="file_name">tst.rint.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/ctype/tst/ctio/int/tst.wbounds.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / ctype / tst / ctio / int / </span><span class="file_name">tst.wbounds.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/ctype/tst/ctio/uint/tst.ruint.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / ctype / tst / ctio / uint / </span><span class="file_name">tst.ruint.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/ctype/tst/ctio/uint/tst.64.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / ctype / tst / ctio / uint / </span><span class="file_name">tst.64.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/ctype/tst/ctio/uint/tst.wuint.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / ctype / tst / ctio / uint / </span><span class="file_name">tst.wuint.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/ctype/tst/ctio/uint/tst.roundtrip.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / ctype / tst / ctio / uint / </span><span class="file_name">tst.roundtrip.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/asn1/tst/ber/writer.test.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / asn1 / tst / ber / </span><span class="file_name">writer.test.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/asn1/tst/ber/reader.test.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / asn1 / tst / ber / </span><span class="file_name">reader.test.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/asn1/lib/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / asn1 / lib / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/asn1/lib/ber/reader.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / asn1 / lib / ber / </span><span class="file_name">reader.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/asn1/lib/ber/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / asn1 / lib / ber / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/asn1/lib/ber/errors.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / asn1 / lib / ber / </span><span class="file_name">errors.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/asn1/lib/ber/types.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / asn1 / lib / ber / </span><span class="file_name">types.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/asn1/lib/ber/writer.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / asn1 / lib / ber / </span><span class="file_name">writer.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/node_modules/assert-plus/assert.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / node_modules / assert-plus / </span><span class="file_name">assert.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/lib/util.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / lib / </span><span class="file_name">util.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/lib/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / lib / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/lib/parser.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / lib / </span><span class="file_name">parser.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/lib/signer.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / lib / </span><span class="file_name">signer.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/http-signature/lib/verify.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / http-signature / lib / </span><span class="file_name">verify.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/mime/test.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / mime / </span><span class="file_name">test.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/mime/mime.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / mime / </span><span class="file_name">mime.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/test/client.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / test / </span><span class="file_name">client.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/test/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / test / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/test/readme.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / test / </span><span class="file_name">readme.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/test/crypto.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / test / </span><span class="file_name">crypto.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/test/utils.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / test / </span><span class="file_name">utils.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/test/uri.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / test / </span><span class="file_name">uri.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/test/browser.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / test / </span><span class="file_name">browser.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/test/message.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / test / </span><span class="file_name">message.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/test/server.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / test / </span><span class="file_name">server.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/node_modules/cryptiles/test/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / node_modules / cryptiles / test / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/node_modules/cryptiles/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / node_modules / cryptiles / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/node_modules/cryptiles/lib/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / node_modules / cryptiles / lib / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/node_modules/hoek/test/escaper.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / node_modules / hoek / test / </span><span class="file_name">escaper.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/node_modules/hoek/test/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / node_modules / hoek / test / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/node_modules/hoek/test/modules/test3.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / node_modules / hoek / test / modules / </span><span class="file_name">test3.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/node_modules/hoek/test/modules/test2.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / node_modules / hoek / test / modules / </span><span class="file_name">test2.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/node_modules/hoek/test/modules/test1.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / node_modules / hoek / test / modules / </span><span class="file_name">test1.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/node_modules/hoek/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / node_modules / hoek / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/node_modules/hoek/lib/escape.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / node_modules / hoek / lib / </span><span class="file_name">escape.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/node_modules/hoek/lib/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / node_modules / hoek / lib / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/node_modules/sntp/test/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / node_modules / sntp / test / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/node_modules/sntp/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / node_modules / sntp / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/node_modules/sntp/examples/offset.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / node_modules / sntp / examples / </span><span class="file_name">offset.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/node_modules/sntp/examples/time.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / node_modules / sntp / examples / </span><span class="file_name">time.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/node_modules/sntp/lib/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / node_modules / sntp / lib / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/node_modules/boom/test/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / node_modules / boom / test / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/node_modules/boom/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / node_modules / boom / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/node_modules/boom/lib/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / node_modules / boom / lib / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/lib/client.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / lib / </span><span class="file_name">client.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/lib/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / lib / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/lib/crypto.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / lib / </span><span class="file_name">crypto.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/lib/utils.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / lib / </span><span class="file_name">utils.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/lib/browser.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / lib / </span><span class="file_name">browser.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/lib/server.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / lib / </span><span class="file_name">server.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/hawk/example/usage.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / hawk / example / </span><span class="file_name">usage.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/form-data/node_modules/combined-stream/node_modules/delayed-stream/test/integration/test-delayed-stream-auto-pause.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / form-data / node_modules / combined-stream / node_modules / delayed-stream / test / integration / </span><span class="file_name">test-delayed-stream-auto-pause.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/form-data/node_modules/combined-stream/node_modules/delayed-stream/test/integration/test-delayed-stream.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / form-data / node_modules / combined-stream / node_modules / delayed-stream / test / integration / </span><span class="file_name">test-delayed-stream.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/form-data/node_modules/combined-stream/node_modules/delayed-stream/test/integration/test-delayed-stream-pause.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / form-data / node_modules / combined-stream / node_modules / delayed-stream / test / integration / </span><span class="file_name">test-delayed-stream-pause.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/form-data/node_modules/combined-stream/node_modules/delayed-stream/test/integration/test-proxy-readable.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / form-data / node_modules / combined-stream / node_modules / delayed-stream / test / integration / </span><span class="file_name">test-proxy-readable.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/form-data/node_modules/combined-stream/node_modules/delayed-stream/test/integration/test-handle-source-errors.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / form-data / node_modules / combined-stream / node_modules / delayed-stream / test / integration / </span><span class="file_name">test-handle-source-errors.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/form-data/node_modules/combined-stream/node_modules/delayed-stream/test/integration/test-delayed-http-upload.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / form-data / node_modules / combined-stream / node_modules / delayed-stream / test / integration / </span><span class="file_name">test-delayed-http-upload.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/form-data/node_modules/combined-stream/node_modules/delayed-stream/test/integration/test-max-data-size.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / form-data / node_modules / combined-stream / node_modules / delayed-stream / test / integration / </span><span class="file_name">test-max-data-size.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/form-data/node_modules/combined-stream/node_modules/delayed-stream/test/integration/test-pipe-resumes.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / form-data / node_modules / combined-stream / node_modules / delayed-stream / test / integration / </span><span class="file_name">test-pipe-resumes.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/form-data/node_modules/combined-stream/node_modules/delayed-stream/test/common.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / form-data / node_modules / combined-stream / node_modules / delayed-stream / test / </span><span class="file_name">common.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/form-data/node_modules/combined-stream/node_modules/delayed-stream/test/run.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / form-data / node_modules / combined-stream / node_modules / delayed-stream / test / </span><span class="file_name">run.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/form-data/node_modules/combined-stream/node_modules/delayed-stream/lib/delayed_stream.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / form-data / node_modules / combined-stream / node_modules / delayed-stream / lib / </span><span class="file_name">delayed_stream.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/form-data/node_modules/combined-stream/lib/combined_stream.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / form-data / node_modules / combined-stream / lib / </span><span class="file_name">combined_stream.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/form-data/node_modules/async/lib/async.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / form-data / node_modules / async / lib / </span><span class="file_name">async.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/form-data/lib/form_data.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / form-data / lib / </span><span class="file_name">form_data.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/oauth-sign/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / oauth-sign / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/oauth-sign/test.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / oauth-sign / </span><span class="file_name">test.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/qs/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / qs / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/forever-agent/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / forever-agent / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/json-stringify-safe/test.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / json-stringify-safe / </span><span class="file_name">test.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/json-stringify-safe/stringify.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / json-stringify-safe / </span><span class="file_name">stringify.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/tunnel-agent/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / tunnel-agent / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/node-uuid/test/compare_v1.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / node-uuid / test / </span><span class="file_name">compare_v1.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/node-uuid/test/test.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / node-uuid / test / </span><span class="file_name">test.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/node-uuid/benchmark/benchmark.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / node-uuid / benchmark / </span><span class="file_name">benchmark.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/node-uuid/uuid.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / node-uuid / </span><span class="file_name">uuid.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/tough-cookie/generate-pubsuffix.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / tough-cookie / </span><span class="file_name">generate-pubsuffix.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/tough-cookie/node_modules/punycode/punycode.min.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / tough-cookie / node_modules / punycode / </span><span class="file_name">punycode.min.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/tough-cookie/node_modules/punycode/punycode.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / tough-cookie / node_modules / punycode / </span><span class="file_name">punycode.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/tough-cookie/test.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / tough-cookie / </span><span class="file_name">test.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/tough-cookie/lib/store.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / tough-cookie / lib / </span><span class="file_name">store.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/tough-cookie/lib/cookie.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / tough-cookie / lib / </span><span class="file_name">cookie.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/tough-cookie/lib/pubsuffix.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / tough-cookie / lib / </span><span class="file_name">pubsuffix.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/node_modules/tough-cookie/lib/memstore.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / node_modules / tough-cookie / lib / </span><span class="file_name">memstore.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/lib/debug.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / lib / </span><span class="file_name">debug.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/lib/optional.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / lib / </span><span class="file_name">optional.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/lib/copy.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / lib / </span><span class="file_name">copy.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/lib/cookies.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / lib / </span><span class="file_name">cookies.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/request/lib/getSafe.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / request / lib / </span><span class="file_name">getSafe.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssom/lib/MediaList.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssom / lib / </span><span class="file_name">MediaList.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssom/lib/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssom / lib / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssom/lib/CSSStyleRule.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssom / lib / </span><span class="file_name">CSSStyleRule.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssom/lib/CSSStyleSheet.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssom / lib / </span><span class="file_name">CSSStyleSheet.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssom/lib/CSSImportRule.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssom / lib / </span><span class="file_name">CSSImportRule.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssom/lib/CSSStyleDeclaration.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssom / lib / </span><span class="file_name">CSSStyleDeclaration.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssom/lib/clone.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssom / lib / </span><span class="file_name">clone.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssom/lib/CSSKeyframesRule.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssom / lib / </span><span class="file_name">CSSKeyframesRule.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssom/lib/StyleSheet.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssom / lib / </span><span class="file_name">StyleSheet.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssom/lib/parse.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssom / lib / </span><span class="file_name">parse.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssom/lib/CSSFontFaceRule.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssom / lib / </span><span class="file_name">CSSFontFaceRule.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssom/lib/CSSMediaRule.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssom / lib / </span><span class="file_name">CSSMediaRule.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssom/lib/CSSKeyframeRule.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssom / lib / </span><span class="file_name">CSSKeyframeRule.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssom/lib/CSSRule.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssom / lib / </span><span class="file_name">CSSRule.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/nwmatcher/src/nwmatcher-base.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / nwmatcher / src / </span><span class="file_name">nwmatcher-base.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/nwmatcher/src/nwmatcher.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / nwmatcher / src / </span><span class="file_name">nwmatcher.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/nwmatcher/src/nwmatcher-noqsa.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / nwmatcher / src / </span><span class="file_name">nwmatcher-noqsa.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/nwmatcher/src/modules/nwmatcher-pseudos.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / nwmatcher / src / modules / </span><span class="file_name">nwmatcher-pseudos.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/nwmatcher/src/modules/nwmatcher-webforms.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / nwmatcher / src / modules / </span><span class="file_name">nwmatcher-webforms.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/nwmatcher/src/modules/nwmatcher-traversal.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / nwmatcher / src / modules / </span><span class="file_name">nwmatcher-traversal.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/nwmatcher/src/modules/nwmatcher-shortcuts.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / nwmatcher / src / modules / </span><span class="file_name">nwmatcher-shortcuts.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/nwmatcher/src/modules/nwmatcher-cache.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / nwmatcher / src / modules / </span><span class="file_name">nwmatcher-cache.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/nwmatcher/src/modules/nwmatcher-jquery.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / nwmatcher / src / modules / </span><span class="file_name">nwmatcher-jquery.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/htmlparser/utils_example.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / htmlparser / </span><span class="file_name">utils_example.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/htmlparser/runtests.min.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / htmlparser / </span><span class="file_name">runtests.min.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/htmlparser/json2.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / htmlparser / </span><span class="file_name">json2.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/htmlparser/tests/03-single_tag_2.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / htmlparser / tests / </span><span class="file_name">03-single_tag_2.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/htmlparser/tests/09-unquoted_attrib.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / htmlparser / tests / </span><span class="file_name">09-unquoted_attrib.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/htmlparser/tests/21-atom.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / htmlparser / tests / </span><span class="file_name">21-atom.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/htmlparser/tests/05-tags_in_comment.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / htmlparser / tests / </span><span class="file_name">05-tags_in_comment.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/htmlparser/tests/04-unescaped_in_script.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / htmlparser / tests / </span><span class="file_name">04-unescaped_in_script.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/htmlparser/tests/02-single_tag_1.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / htmlparser / tests / </span><span class="file_name">02-single_tag_1.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/htmlparser/tests/22-position_data.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / htmlparser / tests / </span><span class="file_name">22-position_data.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/htmlparser/tests/17-xml_namespace.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / htmlparser / tests / </span><span class="file_name">17-xml_namespace.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/htmlparser/tests/10-singular_attribute.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / htmlparser / tests / </span><span class="file_name">10-singular_attribute.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/htmlparser/tests/13-comment_in_text.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / htmlparser / tests / </span><span class="file_name">13-comment_in_text.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/htmlparser/tests/01-basic.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / htmlparser / tests / </span><span class="file_name">01-basic.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/htmlparser/tests/15-non-verbose.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / htmlparser / tests / </span><span class="file_name">15-non-verbose.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/htmlparser/tests/06-comment_in_script.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / htmlparser / tests / </span><span class="file_name">06-comment_in_script.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/htmlparser/tests/11-text_outside_tags.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / htmlparser / tests / </span><span class="file_name">11-text_outside_tags.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/htmlparser/tests/16-ignore_whitespace.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / htmlparser / tests / </span><span class="file_name">16-ignore_whitespace.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/htmlparser/tests/12-text_only.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / htmlparser / tests / </span><span class="file_name">12-text_only.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/htmlparser/tests/07-unescaped_in_style.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / htmlparser / tests / </span><span class="file_name">07-unescaped_in_style.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/htmlparser/tests/14-comment_in_text_in_script.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / htmlparser / tests / </span><span class="file_name">14-comment_in_text_in_script.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/htmlparser/tests/19-ignore_empty_tags.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / htmlparser / tests / </span><span class="file_name">19-ignore_empty_tags.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/htmlparser/tests/20-rss.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / htmlparser / tests / </span><span class="file_name">20-rss.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/htmlparser/tests/08-extra_spaces_in_tag.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / htmlparser / tests / </span><span class="file_name">08-extra_spaces_in_tag.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/htmlparser/tests/18-enforce_empty_tags.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / htmlparser / tests / </span><span class="file_name">18-enforce_empty_tags.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/htmlparser/lib/node-htmlparser.min.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / htmlparser / lib / </span><span class="file_name">node-htmlparser.min.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/htmlparser/lib/htmlparser.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / htmlparser / lib / </span><span class="file_name">htmlparser.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/htmlparser/lib/node-htmlparser.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / htmlparser / lib / </span><span class="file_name">node-htmlparser.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/htmlparser/lib/htmlparser.min.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / htmlparser / lib / </span><span class="file_name">htmlparser.min.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/htmlparser/runtests.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / htmlparser / </span><span class="file_name">runtests.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/contextify/test/contextify.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / contextify / test / </span><span class="file_name">contextify.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/contextify/node_modules/bindings/bindings.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / contextify / node_modules / bindings / </span><span class="file_name">bindings.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/contextify/node_modules/nan/include_dirs.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / contextify / node_modules / nan / </span><span class="file_name">include_dirs.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/contextify/lib/contextify.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / contextify / lib / </span><span class="file_name">contextify.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/node_modules/cssom/lib/CSSDocumentRule.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / node_modules / cssom / lib / </span><span class="file_name">CSSDocumentRule.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/node_modules/cssom/lib/MediaList.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / node_modules / cssom / lib / </span><span class="file_name">MediaList.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/node_modules/cssom/lib/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / node_modules / cssom / lib / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/node_modules/cssom/lib/CSSStyleRule.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / node_modules / cssom / lib / </span><span class="file_name">CSSStyleRule.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/node_modules/cssom/lib/CSSStyleSheet.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / node_modules / cssom / lib / </span><span class="file_name">CSSStyleSheet.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/node_modules/cssom/lib/CSSImportRule.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / node_modules / cssom / lib / </span><span class="file_name">CSSImportRule.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/node_modules/cssom/lib/MatcherList.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / node_modules / cssom / lib / </span><span class="file_name">MatcherList.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/node_modules/cssom/lib/CSSStyleDeclaration.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / node_modules / cssom / lib / </span><span class="file_name">CSSStyleDeclaration.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/node_modules/cssom/lib/clone.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / node_modules / cssom / lib / </span><span class="file_name">clone.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/node_modules/cssom/lib/CSSKeyframesRule.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / node_modules / cssom / lib / </span><span class="file_name">CSSKeyframesRule.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/node_modules/cssom/lib/StyleSheet.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / node_modules / cssom / lib / </span><span class="file_name">StyleSheet.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/node_modules/cssom/lib/parse.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / node_modules / cssom / lib / </span><span class="file_name">parse.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/node_modules/cssom/lib/CSSFontFaceRule.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / node_modules / cssom / lib / </span><span class="file_name">CSSFontFaceRule.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/node_modules/cssom/lib/CSSValueExpression.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / node_modules / cssom / lib / </span><span class="file_name">CSSValueExpression.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/node_modules/cssom/lib/CSSMediaRule.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / node_modules / cssom / lib / </span><span class="file_name">CSSMediaRule.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/node_modules/cssom/lib/CSSKeyframeRule.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / node_modules / cssom / lib / </span><span class="file_name">CSSKeyframeRule.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/node_modules/cssom/lib/CSSRule.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / node_modules / cssom / lib / </span><span class="file_name">CSSRule.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/node_modules/cssom/lib/CSSValue.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / node_modules / cssom / lib / </span><span class="file_name">CSSValue.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/tests/tests.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / tests / </span><span class="file_name">tests.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/boxShadow.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">boxShadow.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/src.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">src.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/fillRule.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">fillRule.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/borderBottomLeftRadius.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">borderBottomLeftRadius.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/textOverflow.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">textOverflow.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/borderLeftStyle.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">borderLeftStyle.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/marginBottom.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">marginBottom.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMaskSize.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMaskSize.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/fill.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">fill.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitTransition.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitTransition.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/borderRadius.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">borderRadius.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitPerspectiveOrigin.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitPerspectiveOrigin.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/marker.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">marker.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitFlowInto.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitFlowInto.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBoxShadow.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBoxShadow.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/counterReset.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">counterReset.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/overflowY.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">overflowY.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitLineClamp.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitLineClamp.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/opacity.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">opacity.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/emptyCells.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">emptyCells.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/maxHeight.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">maxHeight.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/borderRightColor.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">borderRightColor.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitHighlight.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitHighlight.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/borderImageSlice.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">borderImageSlice.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/captionSide.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">captionSide.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/textAnchor.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">textAnchor.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/fontVariant.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">fontVariant.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/strokeLinecap.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">strokeLinecap.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/markerOffset.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">markerOffset.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/azimuth.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">azimuth.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitWrapMargin.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitWrapMargin.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/strokeDashoffset.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">strokeDashoffset.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/wordSpacing.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">wordSpacing.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/speakPunctuation.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">speakPunctuation.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/listStyleImage.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">listStyleImage.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/lineHeight.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">lineHeight.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/strokeWidth.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">strokeWidth.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMarginBefore.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMarginBefore.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBorderStartColor.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBorderStartColor.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMarginCollapse.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMarginCollapse.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitAnimationName.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitAnimationName.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitTextStroke.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitTextStroke.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitPerspectiveOriginY.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitPerspectiveOriginY.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/baselineShift.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">baselineShift.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/borderStyle.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">borderStyle.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMarginAfterCollapse.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMarginAfterCollapse.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/strokeOpacity.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">strokeOpacity.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitColumnRuleStyle.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitColumnRuleStyle.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBorderImage.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBorderImage.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/borderTopRightRadius.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">borderTopRightRadius.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/outline.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">outline.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/playDuring.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">playDuring.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitTextEmphasis.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitTextEmphasis.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/borderLeft.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">borderLeft.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/enableBackground.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">enableBackground.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/textUnderline.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">textUnderline.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitPaddingBefore.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitPaddingBefore.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/borderRightStyle.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">borderRightStyle.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/fontStretch.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">fontStretch.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitTextFillColor.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitTextFillColor.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBoxOrient.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBoxOrient.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMatchNearestMailBlockquoteColor.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMatchNearestMailBlockquoteColor.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitFontKerning.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitFontKerning.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitFlexPack.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitFlexPack.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitWrap.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitWrap.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/textLineThroughMode.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">textLineThroughMode.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/voiceFamily.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">voiceFamily.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/color.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">color.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitTextEmphasisPosition.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitTextEmphasisPosition.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMaxLogicalWidth.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMaxLogicalWidth.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/borderLeftWidth.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">borderLeftWidth.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitFlowFrom.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitFlowFrom.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitTransformOriginZ.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitTransformOriginZ.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/volume.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">volume.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitWrapShapeInside.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitWrapShapeInside.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/stress.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">stress.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/borderLeftColor.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">borderLeftColor.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMarqueeIncrement.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMarqueeIncrement.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/backgroundClip.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">backgroundClip.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitColumnWidth.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitColumnWidth.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMarginAfter.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMarginAfter.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/borderImageWidth.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">borderImageWidth.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitColumnBreakBefore.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitColumnBreakBefore.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitTextStrokeWidth.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitTextStrokeWidth.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMaskBoxImageWidth.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMaskBoxImageWidth.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitRegionBreakBefore.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitRegionBreakBefore.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/listStyle.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">listStyle.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/marginLeft.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">marginLeft.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/unicodeBidi.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">unicodeBidi.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMaskAttachment.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMaskAttachment.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitFontFeatureSettings.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitFontFeatureSettings.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/markerEnd.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">markerEnd.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/right.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">right.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/pitch.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">pitch.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitTransformOriginY.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitTransformOriginY.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/zoom.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">zoom.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBorderRadius.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBorderRadius.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitTransitionDuration.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitTransitionDuration.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBorderEndColor.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBorderEndColor.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitTextCombine.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitTextCombine.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitAspectRatio.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitAspectRatio.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/backgroundRepeat.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">backgroundRepeat.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/pauseAfter.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">pauseAfter.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/textLineThroughWidth.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">textLineThroughWidth.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/overflow.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">overflow.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/backgroundOrigin.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">backgroundOrigin.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/writingMode.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">writingMode.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/borderRightWidth.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">borderRightWidth.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/width.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">width.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBoxOrdinalGroup.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBoxOrdinalGroup.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitPerspectiveOriginX.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitPerspectiveOriginX.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitPrintColorAdjust.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitPrintColorAdjust.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitLocale.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitLocale.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/pauseBefore.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">pauseBefore.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMarqueeDirection.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMarqueeDirection.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitHyphenateLimitAfter.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitHyphenateLimitAfter.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/filter.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">filter.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/listStyleType.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">listStyleType.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitPaddingAfter.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitPaddingAfter.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/left.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">left.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBoxPack.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBoxPack.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBorderVerticalSpacing.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBorderVerticalSpacing.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/textTransform.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">textTransform.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitTextOrientation.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitTextOrientation.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBorderStart.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBorderStart.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/markerMid.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">markerMid.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBoxReflect.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBoxReflect.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBorderStartStyle.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBorderStartStyle.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/borderImage.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">borderImage.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/strokeMiterlimit.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">strokeMiterlimit.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/resize.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">resize.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/border.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">border.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/speakHeader.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">speakHeader.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/markerStart.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">markerStart.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/pitchRange.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">pitchRange.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMinLogicalWidth.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMinLogicalWidth.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/colorRendering.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">colorRendering.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBorderHorizontalSpacing.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBorderHorizontalSpacing.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/backgroundRepeatX.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">backgroundRepeatX.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBorderStartWidth.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBorderStartWidth.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/clear.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">clear.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/stopColor.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">stopColor.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitFontSmoothing.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitFontSmoothing.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/textAlign.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">textAlign.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMaskPositionY.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMaskPositionY.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/background.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">background.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMaxLogicalHeight.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMaxLogicalHeight.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitTextSecurity.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitTextSecurity.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/colorInterpolationFilters.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">colorInterpolationFilters.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitAnimationTimingFunction.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitAnimationTimingFunction.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBoxLines.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBoxLines.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitTextStrokeColor.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitTextStrokeColor.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBorderBeforeWidth.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBorderBeforeWidth.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitColumnBreakAfter.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitColumnBreakAfter.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/backgroundPosition.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">backgroundPosition.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitWrapShapeOutside.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitWrapShapeOutside.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/listStylePosition.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">listStylePosition.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMaskBoxImageSlice.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMaskBoxImageSlice.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/textUnderlineColor.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">textUnderlineColor.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/direction.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">direction.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/strokeLinejoin.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">strokeLinejoin.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitHyphenateLimitLines.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitHyphenateLimitLines.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/borderTopStyle.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">borderTopStyle.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitColumnBreakInside.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitColumnBreakInside.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/textOverlineColor.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">textOverlineColor.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitTransitionDelay.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitTransitionDelay.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/whiteSpace.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">whiteSpace.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/fontStyle.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">fontStyle.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMaskBoxImageSource.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMaskBoxImageSource.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMarqueeRepetition.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMarqueeRepetition.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/stopOpacity.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">stopOpacity.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/widows.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">widows.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBorderEndStyle.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBorderEndStyle.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMaskComposite.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMaskComposite.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitTextDecorationsInEffect.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitTextDecorationsInEffect.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitTextSizeAdjust.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitTextSizeAdjust.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitAnimation.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitAnimation.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitRegionOverflow.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitRegionOverflow.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBackgroundComposite.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBackgroundComposite.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitRegionBreakAfter.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitRegionBreakAfter.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/speechRate.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">speechRate.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitFontSizeDelta.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitFontSizeDelta.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/display.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">display.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/borderWidth.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">borderWidth.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/floodOpacity.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">floodOpacity.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/borderBottomColor.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">borderBottomColor.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBorderAfter.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBorderAfter.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/top.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">top.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/colorInterpolation.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">colorInterpolation.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBackgroundOrigin.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBackgroundOrigin.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBackgroundSize.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBackgroundSize.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/outlineStyle.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">outlineStyle.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/outlineOffset.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">outlineOffset.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/clip.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">clip.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/wordBreak.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">wordBreak.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/glyphOrientationHorizontal.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">glyphOrientationHorizontal.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/dominantBaseline.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">dominantBaseline.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBorderBeforeStyle.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBorderBeforeStyle.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/textDecoration.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">textDecoration.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitLineGrid.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitLineGrid.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/height.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">height.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/elevation.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">elevation.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitColumnSpan.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitColumnSpan.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMaskPosition.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMaskPosition.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/borderSpacing.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">borderSpacing.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitFlexAlign.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitFlexAlign.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitFontVariantLigatures.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitFontVariantLigatures.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/fontSizeAdjust.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">fontSizeAdjust.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitColumnCount.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitColumnCount.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMarqueeStyle.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMarqueeStyle.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/borderCollapse.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">borderCollapse.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitLineSnap.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitLineSnap.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitAnimationFillMode.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitAnimationFillMode.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitSvgShadow.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitSvgShadow.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/lightingColor.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">lightingColor.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitColumnAxis.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitColumnAxis.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBoxFlex.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBoxFlex.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitUserSelect.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitUserSelect.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/pageBreakAfter.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">pageBreakAfter.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/position.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">position.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/alignmentBaseline.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">alignmentBaseline.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitUserDrag.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitUserDrag.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/size.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">size.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBorderBeforeColor.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBorderBeforeColor.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/borderImageOutset.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">borderImageOutset.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitColumnRule.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitColumnRule.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/textUnderlineMode.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">textUnderlineMode.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/borderRight.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">borderRight.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/textLineThroughColor.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">textLineThroughColor.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/textRendering.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">textRendering.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMarginTopCollapse.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMarginTopCollapse.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBoxAlign.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBoxAlign.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/padding.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">padding.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMarginBottomCollapse.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMarginBottomCollapse.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/borderColor.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">borderColor.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/backgroundColor.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">backgroundColor.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/borderTopWidth.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">borderTopWidth.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMaskBoxImageOutset.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMaskBoxImageOutset.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/backgroundPositionX.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">backgroundPositionX.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBoxFlexGroup.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBoxFlexGroup.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/floodColor.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">floodColor.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/vectorEffect.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">vectorEffect.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitPerspective.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitPerspective.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMinLogicalHeight.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMinLogicalHeight.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitTransformOriginX.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitTransformOriginX.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/textOverlineStyle.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">textOverlineStyle.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitTransform.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitTransform.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/pause.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">pause.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitAnimationDuration.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitAnimationDuration.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/marginTop.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">marginTop.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/borderBottomWidth.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">borderBottomWidth.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitFlexDirection.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitFlexDirection.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBorderAfterWidth.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBorderAfterWidth.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitFlexFlow.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitFlexFlow.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitTapHighlightColor.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitTapHighlightColor.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/minWidth.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">minWidth.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/shapeRendering.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">shapeRendering.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/backgroundSize.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">backgroundSize.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/backgroundAttachment.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">backgroundAttachment.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/visibility.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">visibility.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/cue.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">cue.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/borderTopColor.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">borderTopColor.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBorderAfterColor.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBorderAfterColor.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitFlexOrder.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitFlexOrder.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBackgroundClip.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBackgroundClip.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitWrapFlow.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitWrapFlow.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/cueAfter.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">cueAfter.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/textIndent.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">textIndent.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitFlexWrap.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitFlexWrap.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/boxSizing.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">boxSizing.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/content.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">content.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/overflowX.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">overflowX.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitLineAlign.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitLineAlign.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitPaddingEnd.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitPaddingEnd.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/cssFloat.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">cssFloat.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/backgroundPositionY.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">backgroundPositionY.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/pageBreakInside.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">pageBreakInside.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitNbspMode.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitNbspMode.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/textLineThroughStyle.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">textLineThroughStyle.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMaskImage.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMaskImage.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMarginEnd.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMarginEnd.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitOverflowScrolling.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitOverflowScrolling.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/verticalAlign.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">verticalAlign.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitRegionBreakInside.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitRegionBreakInside.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/textUnderlineWidth.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">textUnderlineWidth.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/fontFamily.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">fontFamily.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/font.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">font.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/paddingBottom.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">paddingBottom.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/textOverline.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">textOverline.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/minHeight.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">minHeight.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBoxDirection.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBoxDirection.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/marks.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">marks.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/fontWeight.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">fontWeight.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMaskPositionX.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMaskPositionX.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitTextEmphasisStyle.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitTextEmphasisStyle.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitColumnRuleColor.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitColumnRuleColor.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/textShadow.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">textShadow.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/textUnderlineStyle.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">textUnderlineStyle.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/pointerEvents.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">pointerEvents.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/quotes.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">quotes.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitLineBreak.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitLineBreak.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/orphans.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">orphans.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/paddingTop.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">paddingTop.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/bottom.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">bottom.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/mask.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">mask.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitAnimationPlayState.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitAnimationPlayState.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitTextEmphasisColor.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitTextEmphasisColor.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitTransformOrigin.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitTransformOrigin.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/glyphOrientationVertical.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">glyphOrientationVertical.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/borderBottomRightRadius.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">borderBottomRightRadius.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/imageRendering.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">imageRendering.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitWrapThrough.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitWrapThrough.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitAnimationIterationCount.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitAnimationIterationCount.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/richness.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">richness.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/maxWidth.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">maxWidth.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/cursor.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">cursor.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/borderBottom.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">borderBottom.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/paddingLeft.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">paddingLeft.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMaskBoxImage.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMaskBoxImage.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitLineBoxContain.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitLineBoxContain.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/outlineWidth.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">outlineWidth.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/speakNumeral.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">speakNumeral.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitHyphenateCharacter.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitHyphenateCharacter.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/strokeDasharray.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">strokeDasharray.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitColumns.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitColumns.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/borderBottomStyle.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">borderBottomStyle.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitTransitionTimingFunction.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitTransitionTimingFunction.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitAnimationDirection.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitAnimationDirection.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBorderFit.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBorderFit.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBorderAfterStyle.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBorderAfterStyle.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/page.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">page.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitAppearance.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitAppearance.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/marginRight.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">marginRight.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/cueBefore.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">cueBefore.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/outlineColor.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">outlineColor.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitWrapPadding.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitWrapPadding.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/letterSpacing.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">letterSpacing.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitTransformStyle.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitTransformStyle.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitAnimationDelay.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitAnimationDelay.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitColumnRuleWidth.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitColumnRuleWidth.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/stroke.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">stroke.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/wordWrap.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">wordWrap.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMarquee.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMarquee.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/textOverlineMode.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">textOverlineMode.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/borderImageRepeat.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">borderImageRepeat.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMaskRepeat.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMaskRepeat.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitColumnGap.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitColumnGap.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitWritingMode.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitWritingMode.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBackfaceVisibility.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBackfaceVisibility.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBorderBefore.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBorderBefore.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/pageBreakBefore.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">pageBreakBefore.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/colorProfile.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">colorProfile.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/unicodeRange.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">unicodeRange.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMaskRepeatX.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMaskRepeatX.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMaskClip.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMaskClip.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/paddingRight.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">paddingRight.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitColorCorrection.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitColorCorrection.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitRtlOrdering.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitRtlOrdering.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/speak.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">speak.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBorderEndWidth.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBorderEndWidth.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitFilter.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitFilter.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMaskBoxImageRepeat.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMaskBoxImageRepeat.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/backgroundRepeatY.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">backgroundRepeatY.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitLogicalHeight.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitLogicalHeight.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/textOverlineWidth.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">textOverlineWidth.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/counterIncrement.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">counterIncrement.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitHyphens.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitHyphens.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/zIndex.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">zIndex.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMaskOrigin.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMaskOrigin.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMarginStart.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMarginStart.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/margin.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">margin.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/textLineThrough.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">textLineThrough.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMaskRepeatY.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMaskRepeatY.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitHyphenateLimitBefore.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitHyphenateLimitBefore.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/borderImageSource.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">borderImageSource.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitFlexLinePack.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitFlexLinePack.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/tableLayout.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">tableLayout.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/borderTop.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">borderTop.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/backgroundImage.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">backgroundImage.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitUserModify.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitUserModify.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitTransitionProperty.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitTransitionProperty.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/fontSize.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">fontSize.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMask.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMask.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/kerning.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">kerning.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMarginBeforeCollapse.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMarginBeforeCollapse.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/fillOpacity.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">fillOpacity.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitPaddingStart.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitPaddingStart.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/borderTopLeftRadius.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">borderTopLeftRadius.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitLogicalWidth.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitLogicalWidth.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitBorderEnd.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitBorderEnd.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitMarqueeSpeed.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitMarqueeSpeed.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/properties/webkitFlexItemAlign.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / properties / </span><span class="file_name">webkitFlexItemAlign.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/css3-properties/borderImageSlice.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / css3-properties / </span><span class="file_name">borderImageSlice.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/css3-properties/borderImageWidth.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / css3-properties / </span><span class="file_name">borderImageWidth.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/css3-properties/borderImage.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / css3-properties / </span><span class="file_name">borderImage.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/css3-properties/borderImageOutset.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / css3-properties / </span><span class="file_name">borderImageOutset.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/css3-properties/borderImageRepeat.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / css3-properties / </span><span class="file_name">borderImageRepeat.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/css3-properties/borderImageSource.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / css3-properties / </span><span class="file_name">borderImageSource.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/CSSStyleDeclaration.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / </span><span class="file_name">CSSStyleDeclaration.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/node_modules/cssstyle/lib/parsers.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / node_modules / cssstyle / lib / </span><span class="file_name">parsers.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/lib/jsdom.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / lib / </span><span class="file_name">jsdom.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/lib/jsdom/selectors/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / lib / jsdom / selectors / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/lib/jsdom/browser/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / lib / jsdom / browser / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/lib/jsdom/browser/documentfeatures.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / lib / jsdom / browser / </span><span class="file_name">documentfeatures.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/lib/jsdom/browser/domtohtml.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / lib / jsdom / browser / </span><span class="file_name">domtohtml.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/lib/jsdom/browser/htmltodom.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / lib / jsdom / browser / </span><span class="file_name">htmltodom.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/lib/jsdom/browser/htmlencoding.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / lib / jsdom / browser / </span><span class="file_name">htmlencoding.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/lib/jsdom/level2/html.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / lib / jsdom / level2 / </span><span class="file_name">html.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/lib/jsdom/level2/events.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / lib / jsdom / level2 / </span><span class="file_name">events.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/lib/jsdom/level2/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / lib / jsdom / level2 / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/lib/jsdom/level2/core.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / lib / jsdom / level2 / </span><span class="file_name">core.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/lib/jsdom/level2/style.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / lib / jsdom / level2 / </span><span class="file_name">style.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/lib/jsdom/level2/languages/javascript.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / lib / jsdom / level2 / languages / </span><span class="file_name">javascript.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/lib/jsdom/utils.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / lib / jsdom / </span><span class="file_name">utils.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/lib/jsdom/level3/html.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / lib / jsdom / level3 / </span><span class="file_name">html.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/lib/jsdom/level3/events.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / lib / jsdom / level3 / </span><span class="file_name">events.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/lib/jsdom/level3/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / lib / jsdom / level3 / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/lib/jsdom/level3/core.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / lib / jsdom / level3 / </span><span class="file_name">core.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/lib/jsdom/level3/xpath.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / lib / jsdom / level3 / </span><span class="file_name">xpath.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/lib/jsdom/level3/ls.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / lib / jsdom / level3 / </span><span class="file_name">ls.js</span></a><a href="../../.././node_modules/d3/node_modules/jsdom/lib/jsdom/level1/core.js.html" class="source "><span class="base_path">. / node_modules / d3 / node_modules / jsdom / lib / jsdom / level1 / </span><span class="file_name">core.js</span></a><a href="../../.././node_modules/d3/src/dsv/tsv.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / dsv / </span><span class="file_name">tsv.js</span></a><a href="../../.././node_modules/d3/src/dsv/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / dsv / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/src/dsv/dsv.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / dsv / </span><span class="file_name">dsv.js</span></a><a href="../../.././node_modules/d3/src/dsv/csv.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / dsv / </span><span class="file_name">csv.js</span></a><a href="../../.././node_modules/d3/src/end.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / </span><span class="file_name">end.js</span></a><a href="../../.././node_modules/d3/src/svg/line-radial.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / svg / </span><span class="file_name">line-radial.js</span></a><a href="../../.././node_modules/d3/src/svg/diagonal-radial.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / svg / </span><span class="file_name">diagonal-radial.js</span></a><a href="../../.././node_modules/d3/src/svg/axis.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / svg / </span><span class="file_name">axis.js</span></a><a href="../../.././node_modules/d3/src/svg/chord.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / svg / </span><span class="file_name">chord.js</span></a><a href="../../.././node_modules/d3/src/svg/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / svg / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/src/svg/arc.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / svg / </span><span class="file_name">arc.js</span></a><a href="../../.././node_modules/d3/src/svg/svg.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / svg / </span><span class="file_name">svg.js</span></a><a href="../../.././node_modules/d3/src/svg/area.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / svg / </span><span class="file_name">area.js</span></a><a href="../../.././node_modules/d3/src/svg/brush.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / svg / </span><span class="file_name">brush.js</span></a><a href="../../.././node_modules/d3/src/svg/line.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / svg / </span><span class="file_name">line.js</span></a><a href="../../.././node_modules/d3/src/svg/diagonal.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / svg / </span><span class="file_name">diagonal.js</span></a><a href="../../.././node_modules/d3/src/svg/area-radial.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / svg / </span><span class="file_name">area-radial.js</span></a><a href="../../.././node_modules/d3/src/svg/symbol.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / svg / </span><span class="file_name">symbol.js</span></a><a href="../../.././node_modules/d3/src/color/lab.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / color / </span><span class="file_name">lab.js</span></a><a href="../../.././node_modules/d3/src/color/rgb.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / color / </span><span class="file_name">rgb.js</span></a><a href="../../.././node_modules/d3/src/color/color.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / color / </span><span class="file_name">color.js</span></a><a href="../../.././node_modules/d3/src/color/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / color / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/src/color/xyz.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / color / </span><span class="file_name">xyz.js</span></a><a href="../../.././node_modules/d3/src/color/hcl.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / color / </span><span class="file_name">hcl.js</span></a><a href="../../.././node_modules/d3/src/color/hsl.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / color / </span><span class="file_name">hsl.js</span></a><a href="../../.././node_modules/d3/src/arrays/descending.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / arrays / </span><span class="file_name">descending.js</span></a><a href="../../.././node_modules/d3/src/arrays/nest.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / arrays / </span><span class="file_name">nest.js</span></a><a href="../../.././node_modules/d3/src/arrays/shuffle.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / arrays / </span><span class="file_name">shuffle.js</span></a><a href="../../.././node_modules/d3/src/arrays/transpose.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / arrays / </span><span class="file_name">transpose.js</span></a><a href="../../.././node_modules/d3/src/arrays/entries.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / arrays / </span><span class="file_name">entries.js</span></a><a href="../../.././node_modules/d3/src/arrays/pairs.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / arrays / </span><span class="file_name">pairs.js</span></a><a href="../../.././node_modules/d3/src/arrays/keys.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / arrays / </span><span class="file_name">keys.js</span></a><a href="../../.././node_modules/d3/src/arrays/permute.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / arrays / </span><span class="file_name">permute.js</span></a><a href="../../.././node_modules/d3/src/arrays/bisect.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / arrays / </span><span class="file_name">bisect.js</span></a><a href="../../.././node_modules/d3/src/arrays/mean.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / arrays / </span><span class="file_name">mean.js</span></a><a href="../../.././node_modules/d3/src/arrays/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / arrays / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/src/arrays/min.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / arrays / </span><span class="file_name">min.js</span></a><a href="../../.././node_modules/d3/src/arrays/values.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / arrays / </span><span class="file_name">values.js</span></a><a href="../../.././node_modules/d3/src/arrays/zip.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / arrays / </span><span class="file_name">zip.js</span></a><a href="../../.././node_modules/d3/src/arrays/max.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / arrays / </span><span class="file_name">max.js</span></a><a href="../../.././node_modules/d3/src/arrays/sum.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / arrays / </span><span class="file_name">sum.js</span></a><a href="../../.././node_modules/d3/src/arrays/map.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / arrays / </span><span class="file_name">map.js</span></a><a href="../../.././node_modules/d3/src/arrays/ascending.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / arrays / </span><span class="file_name">ascending.js</span></a><a href="../../.././node_modules/d3/src/arrays/median.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / arrays / </span><span class="file_name">median.js</span></a><a href="../../.././node_modules/d3/src/arrays/set.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / arrays / </span><span class="file_name">set.js</span></a><a href="../../.././node_modules/d3/src/arrays/range.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / arrays / </span><span class="file_name">range.js</span></a><a href="../../.././node_modules/d3/src/arrays/extent.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / arrays / </span><span class="file_name">extent.js</span></a><a href="../../.././node_modules/d3/src/arrays/quantile.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / arrays / </span><span class="file_name">quantile.js</span></a><a href="../../.././node_modules/d3/src/arrays/merge.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / arrays / </span><span class="file_name">merge.js</span></a><a href="../../.././node_modules/d3/src/math/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / math / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/src/math/adder.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / math / </span><span class="file_name">adder.js</span></a><a href="../../.././node_modules/d3/src/math/transform.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / math / </span><span class="file_name">transform.js</span></a><a href="../../.././node_modules/d3/src/math/number.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / math / </span><span class="file_name">number.js</span></a><a href="../../.././node_modules/d3/src/math/abs.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / math / </span><span class="file_name">abs.js</span></a><a href="../../.././node_modules/d3/src/math/random.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / math / </span><span class="file_name">random.js</span></a><a href="../../.././node_modules/d3/src/math/trigonometry.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / math / </span><span class="file_name">trigonometry.js</span></a><a href="../../.././node_modules/d3/src/behavior/zoom.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / behavior / </span><span class="file_name">zoom.js</span></a><a href="../../.././node_modules/d3/src/behavior/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / behavior / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/src/behavior/drag.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / behavior / </span><span class="file_name">drag.js</span></a><a href="../../.././node_modules/d3/src/behavior/behavior.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / behavior / </span><span class="file_name">behavior.js</span></a><a href="../../.././node_modules/d3/src/d3.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / </span><span class="file_name">d3.js</span></a><a href="../../.././node_modules/d3/src/time/format-iso.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / time / </span><span class="file_name">format-iso.js</span></a><a href="../../.././node_modules/d3/src/time/format.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / time / </span><span class="file_name">format.js</span></a><a href="../../.././node_modules/d3/src/time/scale-utc.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / time / </span><span class="file_name">scale-utc.js</span></a><a href="../../.././node_modules/d3/src/time/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / time / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/src/time/minute.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / time / </span><span class="file_name">minute.js</span></a><a href="../../.././node_modules/d3/src/time/interval.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / time / </span><span class="file_name">interval.js</span></a><a href="../../.././node_modules/d3/src/time/hour.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / time / </span><span class="file_name">hour.js</span></a><a href="../../.././node_modules/d3/src/time/format-utc.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / time / </span><span class="file_name">format-utc.js</span></a><a href="../../.././node_modules/d3/src/time/day.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / time / </span><span class="file_name">day.js</span></a><a href="../../.././node_modules/d3/src/time/week.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / time / </span><span class="file_name">week.js</span></a><a href="../../.././node_modules/d3/src/time/scale.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / time / </span><span class="file_name">scale.js</span></a><a href="../../.././node_modules/d3/src/time/year.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / time / </span><span class="file_name">year.js</span></a><a href="../../.././node_modules/d3/src/time/month.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / time / </span><span class="file_name">month.js</span></a><a href="../../.././node_modules/d3/src/time/second.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / time / </span><span class="file_name">second.js</span></a><a href="../../.././node_modules/d3/src/time/time.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / time / </span><span class="file_name">time.js</span></a><a href="../../.././node_modules/d3/src/event/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / event / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/src/event/mouse.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / event / </span><span class="file_name">mouse.js</span></a><a href="../../.././node_modules/d3/src/event/drag.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / event / </span><span class="file_name">drag.js</span></a><a href="../../.././node_modules/d3/src/event/timer.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / event / </span><span class="file_name">timer.js</span></a><a href="../../.././node_modules/d3/src/event/dispatch.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / event / </span><span class="file_name">dispatch.js</span></a><a href="../../.././node_modules/d3/src/event/event.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / event / </span><span class="file_name">event.js</span></a><a href="../../.././node_modules/d3/src/event/touches.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / event / </span><span class="file_name">touches.js</span></a><a href="../../.././node_modules/d3/src/event/touch.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / event / </span><span class="file_name">touch.js</span></a><a href="../../.././node_modules/d3/src/format/format.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / format / </span><span class="file_name">format.js</span></a><a href="../../.././node_modules/d3/src/format/requote.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / format / </span><span class="file_name">requote.js</span></a><a href="../../.././node_modules/d3/src/format/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / format / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/src/format/precision.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / format / </span><span class="file_name">precision.js</span></a><a href="../../.././node_modules/d3/src/format/collapse.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / format / </span><span class="file_name">collapse.js</span></a><a href="../../.././node_modules/d3/src/format/round.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / format / </span><span class="file_name">round.js</span></a><a href="../../.././node_modules/d3/src/format/formatPrefix.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / format / </span><span class="file_name">formatPrefix.js</span></a><a href="../../.././node_modules/d3/src/interpolate/lab.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / interpolate / </span><span class="file_name">lab.js</span></a><a href="../../.././node_modules/d3/src/interpolate/string.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / interpolate / </span><span class="file_name">string.js</span></a><a href="../../.././node_modules/d3/src/interpolate/rgb.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / interpolate / </span><span class="file_name">rgb.js</span></a><a href="../../.././node_modules/d3/src/interpolate/array.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / interpolate / </span><span class="file_name">array.js</span></a><a href="../../.././node_modules/d3/src/interpolate/zoom.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / interpolate / </span><span class="file_name">zoom.js</span></a><a href="../../.././node_modules/d3/src/interpolate/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / interpolate / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/src/interpolate/interpolate.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / interpolate / </span><span class="file_name">interpolate.js</span></a><a href="../../.././node_modules/d3/src/interpolate/hcl.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / interpolate / </span><span class="file_name">hcl.js</span></a><a href="../../.././node_modules/d3/src/interpolate/hsl.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / interpolate / </span><span class="file_name">hsl.js</span></a><a href="../../.././node_modules/d3/src/interpolate/round.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / interpolate / </span><span class="file_name">round.js</span></a><a href="../../.././node_modules/d3/src/interpolate/transform.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / interpolate / </span><span class="file_name">transform.js</span></a><a href="../../.././node_modules/d3/src/interpolate/object.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / interpolate / </span><span class="file_name">object.js</span></a><a href="../../.././node_modules/d3/src/interpolate/number.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / interpolate / </span><span class="file_name">number.js</span></a><a href="../../.././node_modules/d3/src/interpolate/uninterpolate.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / interpolate / </span><span class="file_name">uninterpolate.js</span></a><a href="../../.././node_modules/d3/src/interpolate/ease.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / interpolate / </span><span class="file_name">ease.js</span></a><a href="../../.././node_modules/d3/src/geo/conic-equal-area.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">conic-equal-area.js</span></a><a href="../../.././node_modules/d3/src/geo/stereographic.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">stereographic.js</span></a><a href="../../.././node_modules/d3/src/geo/gnomonic.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">gnomonic.js</span></a><a href="../../.././node_modules/d3/src/geo/graticule.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">graticule.js</span></a><a href="../../.././node_modules/d3/src/geo/azimuthal.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">azimuthal.js</span></a><a href="../../.././node_modules/d3/src/geo/path-bounds.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">path-bounds.js</span></a><a href="../../.././node_modules/d3/src/geo/azimuthal-equal-area.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">azimuthal-equal-area.js</span></a><a href="../../.././node_modules/d3/src/geo/clip-circle.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">clip-circle.js</span></a><a href="../../.././node_modules/d3/src/geo/path-area.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">path-area.js</span></a><a href="../../.././node_modules/d3/src/geo/clip-polygon.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">clip-polygon.js</span></a><a href="../../.././node_modules/d3/src/geo/conic.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">conic.js</span></a><a href="../../.././node_modules/d3/src/geo/orthographic.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">orthographic.js</span></a><a href="../../.././node_modules/d3/src/geo/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/src/geo/azimuthal-equidistant.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">azimuthal-equidistant.js</span></a><a href="../../.././node_modules/d3/src/geo/stream.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">stream.js</span></a><a href="../../.././node_modules/d3/src/geo/albers.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">albers.js</span></a><a href="../../.././node_modules/d3/src/geo/circle.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">circle.js</span></a><a href="../../.././node_modules/d3/src/geo/bounds.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">bounds.js</span></a><a href="../../.././node_modules/d3/src/geo/centroid.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">centroid.js</span></a><a href="../../.././node_modules/d3/src/geo/rotation.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">rotation.js</span></a><a href="../../.././node_modules/d3/src/geo/length.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">length.js</span></a><a href="../../.././node_modules/d3/src/geo/clip-extent.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">clip-extent.js</span></a><a href="../../.././node_modules/d3/src/geo/projection.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">projection.js</span></a><a href="../../.././node_modules/d3/src/geo/clip.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">clip.js</span></a><a href="../../.././node_modules/d3/src/geo/area.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">area.js</span></a><a href="../../.././node_modules/d3/src/geo/spherical.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">spherical.js</span></a><a href="../../.././node_modules/d3/src/geo/interpolate.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">interpolate.js</span></a><a href="../../.././node_modules/d3/src/geo/resample.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">resample.js</span></a><a href="../../.././node_modules/d3/src/geo/albers-usa.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">albers-usa.js</span></a><a href="../../.././node_modules/d3/src/geo/geo.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">geo.js</span></a><a href="../../.././node_modules/d3/src/geo/cartesian.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">cartesian.js</span></a><a href="../../.././node_modules/d3/src/geo/distance.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">distance.js</span></a><a href="../../.././node_modules/d3/src/geo/greatArc.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">greatArc.js</span></a><a href="../../.././node_modules/d3/src/geo/transverse-mercator.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">transverse-mercator.js</span></a><a href="../../.././node_modules/d3/src/geo/mercator.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">mercator.js</span></a><a href="../../.././node_modules/d3/src/geo/conic-equidistant.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">conic-equidistant.js</span></a><a href="../../.././node_modules/d3/src/geo/path.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">path.js</span></a><a href="../../.././node_modules/d3/src/geo/path-context.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">path-context.js</span></a><a href="../../.././node_modules/d3/src/geo/conic-conformal.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">conic-conformal.js</span></a><a href="../../.././node_modules/d3/src/geo/transform.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">transform.js</span></a><a href="../../.././node_modules/d3/src/geo/compose.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">compose.js</span></a><a href="../../.././node_modules/d3/src/geo/path-buffer.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">path-buffer.js</span></a><a href="../../.././node_modules/d3/src/geo/point-in-polygon.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">point-in-polygon.js</span></a><a href="../../.././node_modules/d3/src/geo/path-centroid.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">path-centroid.js</span></a><a href="../../.././node_modules/d3/src/geo/clip-antimeridian.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">clip-antimeridian.js</span></a><a href="../../.././node_modules/d3/src/geo/equirectangular.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geo / </span><span class="file_name">equirectangular.js</span></a><a href="../../.././node_modules/d3/src/transition/duration.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / transition / </span><span class="file_name">duration.js</span></a><a href="../../.././node_modules/d3/src/transition/remove.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / transition / </span><span class="file_name">remove.js</span></a><a href="../../.././node_modules/d3/src/transition/select.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / transition / </span><span class="file_name">select.js</span></a><a href="../../.././node_modules/d3/src/transition/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / transition / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/src/transition/filter.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / transition / </span><span class="file_name">filter.js</span></a><a href="../../.././node_modules/d3/src/transition/selectAll.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / transition / </span><span class="file_name">selectAll.js</span></a><a href="../../.././node_modules/d3/src/transition/style.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / transition / </span><span class="file_name">style.js</span></a><a href="../../.././node_modules/d3/src/transition/transition.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / transition / </span><span class="file_name">transition.js</span></a><a href="../../.././node_modules/d3/src/transition/subtransition.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / transition / </span><span class="file_name">subtransition.js</span></a><a href="../../.././node_modules/d3/src/transition/tween.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / transition / </span><span class="file_name">tween.js</span></a><a href="../../.././node_modules/d3/src/transition/delay.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / transition / </span><span class="file_name">delay.js</span></a><a href="../../.././node_modules/d3/src/transition/attr.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / transition / </span><span class="file_name">attr.js</span></a><a href="../../.././node_modules/d3/src/transition/each.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / transition / </span><span class="file_name">each.js</span></a><a href="../../.././node_modules/d3/src/transition/ease.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / transition / </span><span class="file_name">ease.js</span></a><a href="../../.././node_modules/d3/src/transition/text.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / transition / </span><span class="file_name">text.js</span></a><a href="../../.././node_modules/d3/src/geom/geom.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geom / </span><span class="file_name">geom.js</span></a><a href="../../.././node_modules/d3/src/geom/polygon.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geom / </span><span class="file_name">polygon.js</span></a><a href="../../.././node_modules/d3/src/geom/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geom / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/src/geom/clip-line.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geom / </span><span class="file_name">clip-line.js</span></a><a href="../../.././node_modules/d3/src/geom/delaunay.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geom / </span><span class="file_name">delaunay.js</span></a><a href="../../.././node_modules/d3/src/geom/point.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geom / </span><span class="file_name">point.js</span></a><a href="../../.././node_modules/d3/src/geom/voronoi.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geom / </span><span class="file_name">voronoi.js</span></a><a href="../../.././node_modules/d3/src/geom/quadtree.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geom / </span><span class="file_name">quadtree.js</span></a><a href="../../.././node_modules/d3/src/geom/hull.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geom / </span><span class="file_name">hull.js</span></a><a href="../../.././node_modules/d3/src/geom/voronoi/edge.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geom / voronoi / </span><span class="file_name">edge.js</span></a><a href="../../.././node_modules/d3/src/geom/voronoi/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geom / voronoi / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/src/geom/voronoi/beach.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geom / voronoi / </span><span class="file_name">beach.js</span></a><a href="../../.././node_modules/d3/src/geom/voronoi/circle.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geom / voronoi / </span><span class="file_name">circle.js</span></a><a href="../../.././node_modules/d3/src/geom/voronoi/clip.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geom / voronoi / </span><span class="file_name">clip.js</span></a><a href="../../.././node_modules/d3/src/geom/voronoi/red-black.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geom / voronoi / </span><span class="file_name">red-black.js</span></a><a href="../../.././node_modules/d3/src/geom/voronoi/cell.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / geom / voronoi / </span><span class="file_name">cell.js</span></a><a href="../../.././node_modules/d3/src/xhr/html.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / xhr / </span><span class="file_name">html.js</span></a><a href="../../.././node_modules/d3/src/xhr/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / xhr / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/src/xhr/json.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / xhr / </span><span class="file_name">json.js</span></a><a href="../../.././node_modules/d3/src/xhr/xhr.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / xhr / </span><span class="file_name">xhr.js</span></a><a href="../../.././node_modules/d3/src/xhr/xml.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / xhr / </span><span class="file_name">xml.js</span></a><a href="../../.././node_modules/d3/src/xhr/text.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / xhr / </span><span class="file_name">text.js</span></a><a href="../../.././node_modules/d3/src/compat/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / compat / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/src/compat/style.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / compat / </span><span class="file_name">style.js</span></a><a href="../../.././node_modules/d3/src/compat/date.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / compat / </span><span class="file_name">date.js</span></a><a href="../../.././node_modules/d3/src/layout/force.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / layout / </span><span class="file_name">force.js</span></a><a href="../../.././node_modules/d3/src/layout/chord.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / layout / </span><span class="file_name">chord.js</span></a><a href="../../.././node_modules/d3/src/layout/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / layout / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/src/layout/partition.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / layout / </span><span class="file_name">partition.js</span></a><a href="../../.././node_modules/d3/src/layout/pack.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / layout / </span><span class="file_name">pack.js</span></a><a href="../../.././node_modules/d3/src/layout/pie.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / layout / </span><span class="file_name">pie.js</span></a><a href="../../.././node_modules/d3/src/layout/bundle.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / layout / </span><span class="file_name">bundle.js</span></a><a href="../../.././node_modules/d3/src/layout/layout.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / layout / </span><span class="file_name">layout.js</span></a><a href="../../.././node_modules/d3/src/layout/cluster.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / layout / </span><span class="file_name">cluster.js</span></a><a href="../../.././node_modules/d3/src/layout/treemap.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / layout / </span><span class="file_name">treemap.js</span></a><a href="../../.././node_modules/d3/src/layout/hierarchy.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / layout / </span><span class="file_name">hierarchy.js</span></a><a href="../../.././node_modules/d3/src/layout/tree.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / layout / </span><span class="file_name">tree.js</span></a><a href="../../.././node_modules/d3/src/layout/histogram.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / layout / </span><span class="file_name">histogram.js</span></a><a href="../../.././node_modules/d3/src/layout/stack.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / layout / </span><span class="file_name">stack.js</span></a><a href="../../.././node_modules/d3/src/locale/en-GB.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / locale / </span><span class="file_name">en-GB.js</span></a><a href="../../.././node_modules/d3/src/locale/time-scale.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / locale / </span><span class="file_name">time-scale.js</span></a><a href="../../.././node_modules/d3/src/locale/number-format.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / locale / </span><span class="file_name">number-format.js</span></a><a href="../../.././node_modules/d3/src/locale/ru-RU.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / locale / </span><span class="file_name">ru-RU.js</span></a><a href="../../.././node_modules/d3/src/locale/fi-FI.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / locale / </span><span class="file_name">fi-FI.js</span></a><a href="../../.././node_modules/d3/src/locale/locale.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / locale / </span><span class="file_name">locale.js</span></a><a href="../../.././node_modules/d3/src/locale/en-US.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / locale / </span><span class="file_name">en-US.js</span></a><a href="../../.././node_modules/d3/src/locale/ca-ES.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / locale / </span><span class="file_name">ca-ES.js</span></a><a href="../../.././node_modules/d3/src/locale/pt-BR.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / locale / </span><span class="file_name">pt-BR.js</span></a><a href="../../.././node_modules/d3/src/locale/zh-CN.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / locale / </span><span class="file_name">zh-CN.js</span></a><a href="../../.././node_modules/d3/src/locale/time-format.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / locale / </span><span class="file_name">time-format.js</span></a><a href="../../.././node_modules/d3/src/core/ns.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / core / </span><span class="file_name">ns.js</span></a><a href="../../.././node_modules/d3/src/core/subclass.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / core / </span><span class="file_name">subclass.js</span></a><a href="../../.././node_modules/d3/src/core/class.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / core / </span><span class="file_name">class.js</span></a><a href="../../.././node_modules/d3/src/core/target.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / core / </span><span class="file_name">target.js</span></a><a href="../../.././node_modules/d3/src/core/true.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / core / </span><span class="file_name">true.js</span></a><a href="../../.././node_modules/d3/src/core/rebind.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / core / </span><span class="file_name">rebind.js</span></a><a href="../../.././node_modules/d3/src/core/array.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / core / </span><span class="file_name">array.js</span></a><a href="../../.././node_modules/d3/src/core/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / core / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/src/core/functor.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / core / </span><span class="file_name">functor.js</span></a><a href="../../.././node_modules/d3/src/core/identity.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / core / </span><span class="file_name">identity.js</span></a><a href="../../.././node_modules/d3/src/core/document.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / core / </span><span class="file_name">document.js</span></a><a href="../../.././node_modules/d3/src/core/noop.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / core / </span><span class="file_name">noop.js</span></a><a href="../../.././node_modules/d3/src/core/source.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / core / </span><span class="file_name">source.js</span></a><a href="../../.././node_modules/d3/src/core/vendor.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / core / </span><span class="file_name">vendor.js</span></a><a href="../../.././node_modules/d3/src/selection/insert.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / selection / </span><span class="file_name">insert.js</span></a><a href="../../.././node_modules/d3/src/selection/property.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / selection / </span><span class="file_name">property.js</span></a><a href="../../.././node_modules/d3/src/selection/remove.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / selection / </span><span class="file_name">remove.js</span></a><a href="../../.././node_modules/d3/src/selection/html.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / selection / </span><span class="file_name">html.js</span></a><a href="../../.././node_modules/d3/src/selection/interrupt.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / selection / </span><span class="file_name">interrupt.js</span></a><a href="../../.././node_modules/d3/src/selection/select.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / selection / </span><span class="file_name">select.js</span></a><a href="../../.././node_modules/d3/src/selection/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / selection / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/src/selection/on.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / selection / </span><span class="file_name">on.js</span></a><a href="../../.././node_modules/d3/src/selection/filter.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / selection / </span><span class="file_name">filter.js</span></a><a href="../../.././node_modules/d3/src/selection/selectAll.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / selection / </span><span class="file_name">selectAll.js</span></a><a href="../../.././node_modules/d3/src/selection/node.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / selection / </span><span class="file_name">node.js</span></a><a href="../../.././node_modules/d3/src/selection/style.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / selection / </span><span class="file_name">style.js</span></a><a href="../../.././node_modules/d3/src/selection/classed.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / selection / </span><span class="file_name">classed.js</span></a><a href="../../.././node_modules/d3/src/selection/append.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / selection / </span><span class="file_name">append.js</span></a><a href="../../.././node_modules/d3/src/selection/enter.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / selection / </span><span class="file_name">enter.js</span></a><a href="../../.././node_modules/d3/src/selection/transition.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / selection / </span><span class="file_name">transition.js</span></a><a href="../../.././node_modules/d3/src/selection/data.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / selection / </span><span class="file_name">data.js</span></a><a href="../../.././node_modules/d3/src/selection/size.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / selection / </span><span class="file_name">size.js</span></a><a href="../../.././node_modules/d3/src/selection/datum.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / selection / </span><span class="file_name">datum.js</span></a><a href="../../.././node_modules/d3/src/selection/enter-insert.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / selection / </span><span class="file_name">enter-insert.js</span></a><a href="../../.././node_modules/d3/src/selection/enter-select.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / selection / </span><span class="file_name">enter-select.js</span></a><a href="../../.././node_modules/d3/src/selection/sort.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / selection / </span><span class="file_name">sort.js</span></a><a href="../../.././node_modules/d3/src/selection/order.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / selection / </span><span class="file_name">order.js</span></a><a href="../../.././node_modules/d3/src/selection/empty.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / selection / </span><span class="file_name">empty.js</span></a><a href="../../.././node_modules/d3/src/selection/call.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / selection / </span><span class="file_name">call.js</span></a><a href="../../.././node_modules/d3/src/selection/attr.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / selection / </span><span class="file_name">attr.js</span></a><a href="../../.././node_modules/d3/src/selection/each.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / selection / </span><span class="file_name">each.js</span></a><a href="../../.././node_modules/d3/src/selection/selection.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / selection / </span><span class="file_name">selection.js</span></a><a href="../../.././node_modules/d3/src/selection/text.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / selection / </span><span class="file_name">text.js</span></a><a href="../../.././node_modules/d3/src/start.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / </span><span class="file_name">start.js</span></a><a href="../../.././node_modules/d3/src/scale/category.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / scale / </span><span class="file_name">category.js</span></a><a href="../../.././node_modules/d3/src/scale/polylinear.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / scale / </span><span class="file_name">polylinear.js</span></a><a href="../../.././node_modules/d3/src/scale/linear.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / scale / </span><span class="file_name">linear.js</span></a><a href="../../.././node_modules/d3/src/scale/index.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / scale / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/d3/src/scale/quantize.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / scale / </span><span class="file_name">quantize.js</span></a><a href="../../.././node_modules/d3/src/scale/threshold.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / scale / </span><span class="file_name">threshold.js</span></a><a href="../../.././node_modules/d3/src/scale/nice.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / scale / </span><span class="file_name">nice.js</span></a><a href="../../.././node_modules/d3/src/scale/identity.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / scale / </span><span class="file_name">identity.js</span></a><a href="../../.././node_modules/d3/src/scale/log.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / scale / </span><span class="file_name">log.js</span></a><a href="../../.././node_modules/d3/src/scale/scale.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / scale / </span><span class="file_name">scale.js</span></a><a href="../../.././node_modules/d3/src/scale/sqrt.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / scale / </span><span class="file_name">sqrt.js</span></a><a href="../../.././node_modules/d3/src/scale/pow.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / scale / </span><span class="file_name">pow.js</span></a><a href="../../.././node_modules/d3/src/scale/ordinal.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / scale / </span><span class="file_name">ordinal.js</span></a><a href="../../.././node_modules/d3/src/scale/bilinear.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / scale / </span><span class="file_name">bilinear.js</span></a><a href="../../.././node_modules/d3/src/scale/quantile.js.html" class="source "><span class="base_path">. / node_modules / d3 / src / scale / </span><span class="file_name">quantile.js</span></a><a href="../../.././node_modules/d3/d3.min.js.html" class="source "><span class="base_path">. / node_modules / d3 / </span><span class="file_name">d3.min.js</span></a><a href="../../.././node_modules/underscore/underscore-min.js.html" class="source "><span class="base_path">. / node_modules / underscore / </span><span class="file_name">underscore-min.js</span></a><a href="../../.././node_modules/underscore/index.js.html" class="source "><span class="base_path">. / node_modules / underscore / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/underscore/underscore.js.html" class="source "><span class="base_path">. / node_modules / underscore / </span><span class="file_name">underscore.js</span></a><a href="../../.././node_modules/moment/foo.coffee.html" class="source "><span class="base_path">. / node_modules / moment / </span><span class="file_name">foo.coffee</span></a><a href="../../.././node_modules/moment/package.js.html" class="source "><span class="base_path">. / node_modules / moment / </span><span class="file_name">package.js</span></a><a href="../../.././node_modules/moment/ender.js.html" class="source "><span class="base_path">. / node_modules / moment / </span><span class="file_name">ender.js</span></a><a href="../../.././node_modules/moment/min/moment.min.js.html" class="source "><span class="base_path">. / node_modules / moment / min / </span><span class="file_name">moment.min.js</span></a><a href="../../.././node_modules/moment/min/moment-with-langs.min.js.html" class="source "><span class="base_path">. / node_modules / moment / min / </span><span class="file_name">moment-with-langs.min.js</span></a><a href="../../.././node_modules/moment/min/langs.min.js.html" class="source "><span class="base_path">. / node_modules / moment / min / </span><span class="file_name">langs.min.js</span></a><a href="../../.././node_modules/moment/min/moment-with-langs.js.html" class="source "><span class="base_path">. / node_modules / moment / min / </span><span class="file_name">moment-with-langs.js</span></a><a href="../../.././node_modules/moment/min/langs.js.html" class="source "><span class="base_path">. / node_modules / moment / min / </span><span class="file_name">langs.js</span></a><a href="../../.././node_modules/moment/min/tests.js.html" class="source "><span class="base_path">. / node_modules / moment / min / </span><span class="file_name">tests.js</span></a><a href="../../.././node_modules/moment/f.coffee.html" class="source "><span class="base_path">. / node_modules / moment / </span><span class="file_name">f.coffee</span></a><a href="../../.././node_modules/moment/moment.js.html" class="source "><span class="base_path">. / node_modules / moment / </span><span class="file_name">moment.js</span></a><a href="../../.././node_modules/moment/Gruntfile.js.html" class="source "><span class="base_path">. / node_modules / moment / </span><span class="file_name">Gruntfile.js</span></a><a href="../../.././node_modules/moment/tasks/embed_languages.js.html" class="source "><span class="base_path">. / node_modules / moment / tasks / </span><span class="file_name">embed_languages.js</span></a><a href="../../.././node_modules/moment/tasks/history.js.html" class="source "><span class="base_path">. / node_modules / moment / tasks / </span><span class="file_name">history.js</span></a><a href="../../.././node_modules/moment/tasks/check_sauce_creds.js.html" class="source "><span class="base_path">. / node_modules / moment / tasks / </span><span class="file_name">check_sauce_creds.js</span></a><a href="../../.././node_modules/moment/tasks/component.js.html" class="source "><span class="base_path">. / node_modules / moment / tasks / </span><span class="file_name">component.js</span></a><a href="../../.././node_modules/moment/tasks/size.js.html" class="source "><span class="base_path">. / node_modules / moment / tasks / </span><span class="file_name">size.js</span></a><a href="../../.././node_modules/moment/tasks/zones.js.html" class="source "><span class="base_path">. / node_modules / moment / tasks / </span><span class="file_name">zones.js</span></a><a href="../../.././node_modules/moment/lang/ar-sa.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">ar-sa.js</span></a><a href="../../.././node_modules/moment/lang/cv.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">cv.js</span></a><a href="../../.././node_modules/moment/lang/mk.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">mk.js</span></a><a href="../../.././node_modules/moment/lang/ko.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">ko.js</span></a><a href="../../.././node_modules/moment/lang/km.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">km.js</span></a><a href="../../.././node_modules/moment/lang/en-au.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">en-au.js</span></a><a href="../../.././node_modules/moment/lang/uk.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">uk.js</span></a><a href="../../.././node_modules/moment/lang/hr.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">hr.js</span></a><a href="../../.././node_modules/moment/lang/da.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">da.js</span></a><a href="../../.././node_modules/moment/lang/id.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">id.js</span></a><a href="../../.././node_modules/moment/lang/ta.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">ta.js</span></a><a href="../../.././node_modules/moment/lang/bs.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">bs.js</span></a><a href="../../.././node_modules/moment/lang/zh-tw.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">zh-tw.js</span></a><a href="../../.././node_modules/moment/lang/sr.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">sr.js</span></a><a href="../../.././node_modules/moment/lang/gl.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">gl.js</span></a><a href="../../.././node_modules/moment/lang/ar.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">ar.js</span></a><a href="../../.././node_modules/moment/lang/it.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">it.js</span></a><a href="../../.././node_modules/moment/lang/sk.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">sk.js</span></a><a href="../../.././node_modules/moment/lang/cs.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">cs.js</span></a><a href="../../.././node_modules/moment/lang/uz.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">uz.js</span></a><a href="../../.././node_modules/moment/lang/ru.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">ru.js</span></a><a href="../../.././node_modules/moment/lang/he.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">he.js</span></a><a href="../../.././node_modules/moment/lang/az.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">az.js</span></a><a href="../../.././node_modules/moment/lang/tl-ph.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">tl-ph.js</span></a><a href="../../.././node_modules/moment/lang/sr-cyrl.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">sr-cyrl.js</span></a><a href="../../.././node_modules/moment/lang/pt-br.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">pt-br.js</span></a><a href="../../.././node_modules/moment/lang/lb.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">lb.js</span></a><a href="../../.././node_modules/moment/lang/eu.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">eu.js</span></a><a href="../../.././node_modules/moment/lang/mr.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">mr.js</span></a><a href="../../.././node_modules/moment/lang/hi.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">hi.js</span></a><a href="../../.././node_modules/moment/lang/fo.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">fo.js</span></a><a href="../../.././node_modules/moment/lang/cy.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">cy.js</span></a><a href="../../.././node_modules/moment/lang/bg.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">bg.js</span></a><a href="../../.././node_modules/moment/lang/es.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">es.js</span></a><a href="../../.././node_modules/moment/lang/is.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">is.js</span></a><a href="../../.././node_modules/moment/lang/fa.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">fa.js</span></a><a href="../../.././node_modules/moment/lang/en-ca.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">en-ca.js</span></a><a href="../../.././node_modules/moment/lang/br.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">br.js</span></a><a href="../../.././node_modules/moment/lang/fr-ca.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">fr-ca.js</span></a><a href="../../.././node_modules/moment/lang/ar-ma.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">ar-ma.js</span></a><a href="../../.././node_modules/moment/lang/tzm.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">tzm.js</span></a><a href="../../.././node_modules/moment/lang/sv.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">sv.js</span></a><a href="../../.././node_modules/moment/lang/ja.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">ja.js</span></a><a href="../../.././node_modules/moment/lang/lt.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">lt.js</span></a><a href="../../.././node_modules/moment/lang/sq.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">sq.js</span></a><a href="../../.././node_modules/moment/lang/de.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">de.js</span></a><a href="../../.././node_modules/moment/lang/tr.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">tr.js</span></a><a href="../../.././node_modules/moment/lang/ml.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">ml.js</span></a><a href="../../.././node_modules/moment/lang/pl.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">pl.js</span></a><a href="../../.././node_modules/moment/lang/fr.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">fr.js</span></a><a href="../../.././node_modules/moment/lang/bn.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">bn.js</span></a><a href="../../.././node_modules/moment/lang/eo.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">eo.js</span></a><a href="../../.././node_modules/moment/lang/nl.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">nl.js</span></a><a href="../../.././node_modules/moment/lang/ne.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">ne.js</span></a><a href="../../.././node_modules/moment/lang/th.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">th.js</span></a><a href="../../.././node_modules/moment/lang/ka.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">ka.js</span></a><a href="../../.././node_modules/moment/lang/hy-am.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">hy-am.js</span></a><a href="../../.././node_modules/moment/lang/sl.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">sl.js</span></a><a href="../../.././node_modules/moment/lang/pt.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">pt.js</span></a><a href="../../.././node_modules/moment/lang/nb.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">nb.js</span></a><a href="../../.././node_modules/moment/lang/ms-my.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">ms-my.js</span></a><a href="../../.././node_modules/moment/lang/lv.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">lv.js</span></a><a href="../../.././node_modules/moment/lang/en-gb.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">en-gb.js</span></a><a href="../../.././node_modules/moment/lang/de-at.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">de-at.js</span></a><a href="../../.././node_modules/moment/lang/zh-cn.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">zh-cn.js</span></a><a href="../../.././node_modules/moment/lang/ro.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">ro.js</span></a><a href="../../.././node_modules/moment/lang/et.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">et.js</span></a><a href="../../.././node_modules/moment/lang/tzm-latn.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">tzm-latn.js</span></a><a href="../../.././node_modules/moment/lang/nn.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">nn.js</span></a><a href="../../.././node_modules/moment/lang/vi.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">vi.js</span></a><a href="../../.././node_modules/moment/lang/fi.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">fi.js</span></a><a href="../../.././node_modules/moment/lang/hu.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">hu.js</span></a><a href="../../.././node_modules/moment/lang/ca.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">ca.js</span></a><a href="../../.././node_modules/moment/lang/el.js.html" class="source "><span class="base_path">. / node_modules / moment / lang / </span><span class="file_name">el.js</span></a><a href="../../.././node_modules/backbone/index.js.html" class="source "><span class="base_path">. / node_modules / backbone / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/backbone/backbone.js.html" class="source "><span class="base_path">. / node_modules / backbone / </span><span class="file_name">backbone.js</span></a><a href="../../.././node_modules/backbone/backbone-min.js.html" class="source "><span class="base_path">. / node_modules / backbone / </span><span class="file_name">backbone-min.js</span></a><a href="../../.././node_modules/requirejs/require.js.html" class="source "><span class="base_path">. / node_modules / requirejs / </span><span class="file_name">require.js</span></a><a href="../../.././node_modules/requirejs/bin/r.js.html" class="source "><span class="base_path">. / node_modules / requirejs / bin / </span><span class="file_name">r.js</span></a><a href="../../.././node_modules/jasmine-node/spec/SampleSpecs.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / spec / </span><span class="file_name">SampleSpecs.js</span></a><a href="../../.././node_modules/jasmine-node/spec/TimerSpec.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / spec / </span><span class="file_name">TimerSpec.js</span></a><a href="../../.././node_modules/jasmine-node/spec/nested/uber-nested/UberNestedSpec.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / spec / nested / uber-nested / </span><span class="file_name">UberNestedSpec.js</span></a><a href="../../.././node_modules/jasmine-node/spec/nested/NestedSpec.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / spec / nested / </span><span class="file_name">NestedSpec.js</span></a><a href="../../.././node_modules/jasmine-node/spec/CoffeeSpec.coffee.html" class="source "><span class="base_path">. / node_modules / jasmine-node / spec / </span><span class="file_name">CoffeeSpec.coffee</span></a><a href="../../.././node_modules/jasmine-node/spec/nested.js/NestedSpec.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / spec / nested.js / </span><span class="file_name">NestedSpec.js</span></a><a href="../../.././node_modules/jasmine-node/spec/HelperSpec.coffee.html" class="source "><span class="base_path">. / node_modules / jasmine-node / spec / </span><span class="file_name">HelperSpec.coffee</span></a><a href="../../.././node_modules/jasmine-node/spec/reporter_spec.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / spec / </span><span class="file_name">reporter_spec.js</span></a><a href="../../.././node_modules/jasmine-node/spec/TestSpec.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / spec / </span><span class="file_name">TestSpec.js</span></a><a href="../../.././node_modules/jasmine-node/spec/GrammarHelper.coffee.html" class="source "><span class="base_path">. / node_modules / jasmine-node / spec / </span><span class="file_name">GrammarHelper.coffee</span></a><a href="../../.././node_modules/jasmine-node/spec/AsyncSpec.coffee.html" class="source "><span class="base_path">. / node_modules / jasmine-node / spec / </span><span class="file_name">AsyncSpec.coffee</span></a><a href="../../.././node_modules/jasmine-node/spec/helper_spec.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / spec / </span><span class="file_name">helper_spec.js</span></a><a href="../../.././node_modules/jasmine-node/spec/async-callback_spec.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / spec / </span><span class="file_name">async-callback_spec.js</span></a><a href="../../.././node_modules/jasmine-node/spec/sample_helper.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / spec / </span><span class="file_name">sample_helper.js</span></a><a href="../../.././node_modules/jasmine-node/spec-requirejs-coffee/RequireCsSpec.coffee.html" class="source "><span class="base_path">. / node_modules / jasmine-node / spec-requirejs-coffee / </span><span class="file_name">RequireCsSpec.coffee</span></a><a href="../../.././node_modules/jasmine-node/spec-requirejs-coffee/RequireJsSpec.coffee.html" class="source "><span class="base_path">. / node_modules / jasmine-node / spec-requirejs-coffee / </span><span class="file_name">RequireJsSpec.coffee</span></a><a href="../../.././node_modules/jasmine-node/spec-requirejs-coffee/requirejs-setup.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / spec-requirejs-coffee / </span><span class="file_name">requirejs-setup.js</span></a><a href="../../.././node_modules/jasmine-node/spec-requirejs-coffee/requirecs.sut.coffee.html" class="source "><span class="base_path">. / node_modules / jasmine-node / spec-requirejs-coffee / </span><span class="file_name">requirecs.sut.coffee</span></a><a href="../../.././node_modules/jasmine-node/node_modules/walkdir/test/sync.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / walkdir / test / </span><span class="file_name">sync.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/walkdir/test/pauseresume.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / walkdir / test / </span><span class="file_name">pauseresume.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/walkdir/test/endearly.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / walkdir / test / </span><span class="file_name">endearly.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/walkdir/test/async.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / walkdir / test / </span><span class="file_name">async.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/walkdir/test/comparison/find.py.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / walkdir / test / comparison / </span><span class="file_name">find.py</span></a><a href="../../.././node_modules/jasmine-node/node_modules/walkdir/test/comparison/findittest.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / walkdir / test / comparison / </span><span class="file_name">findittest.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/walkdir/test/comparison/finditsynctest.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / walkdir / test / comparison / </span><span class="file_name">finditsynctest.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/walkdir/test/comparison/find.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / walkdir / test / comparison / </span><span class="file_name">find.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/walkdir/test/comparison/fstream.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / walkdir / test / comparison / </span><span class="file_name">fstream.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/walkdir/test/comparison/lsr.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / walkdir / test / comparison / </span><span class="file_name">lsr.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/walkdir/test/nofailemptydir.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / walkdir / test / </span><span class="file_name">nofailemptydir.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/walkdir/test/max_depth.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / walkdir / test / </span><span class="file_name">max_depth.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/walkdir/test/no_recurse.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / walkdir / test / </span><span class="file_name">no_recurse.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/walkdir/test/symlink.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / walkdir / test / </span><span class="file_name">symlink.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/walkdir/walkdir.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / walkdir / </span><span class="file_name">walkdir.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/jasmine-growl-reporter/spec/matchers.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / jasmine-growl-reporter / spec / </span><span class="file_name">matchers.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/jasmine-growl-reporter/spec/reporter.spec.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / jasmine-growl-reporter / spec / </span><span class="file_name">reporter.spec.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/jasmine-growl-reporter/index.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / jasmine-growl-reporter / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/jasmine-growl-reporter/node_modules/growl/test.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / jasmine-growl-reporter / node_modules / growl / </span><span class="file_name">test.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/jasmine-growl-reporter/node_modules/growl/lib/growl.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / jasmine-growl-reporter / node_modules / growl / lib / </span><span class="file_name">growl.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/jasmine-growl-reporter/Gruntfile.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / jasmine-growl-reporter / </span><span class="file_name">Gruntfile.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/jasmine-growl-reporter/lib/reporter.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / jasmine-growl-reporter / lib / </span><span class="file_name">reporter.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/mkdirp/test/return_sync.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / mkdirp / test / </span><span class="file_name">return_sync.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/mkdirp/test/return.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / mkdirp / test / </span><span class="file_name">return.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/mkdirp/test/sync.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / mkdirp / test / </span><span class="file_name">sync.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/mkdirp/test/mkdirp.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / mkdirp / test / </span><span class="file_name">mkdirp.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/mkdirp/test/clobber.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / mkdirp / test / </span><span class="file_name">clobber.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/mkdirp/test/root.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / mkdirp / test / </span><span class="file_name">root.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/mkdirp/test/umask.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / mkdirp / test / </span><span class="file_name">umask.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/mkdirp/test/perm_sync.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / mkdirp / test / </span><span class="file_name">perm_sync.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/mkdirp/test/umask_sync.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / mkdirp / test / </span><span class="file_name">umask_sync.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/mkdirp/test/rel.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / mkdirp / test / </span><span class="file_name">rel.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/mkdirp/test/race.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / mkdirp / test / </span><span class="file_name">race.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/mkdirp/test/chmod.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / mkdirp / test / </span><span class="file_name">chmod.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/mkdirp/test/perm.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / mkdirp / test / </span><span class="file_name">perm.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/mkdirp/index.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / mkdirp / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/mkdirp/examples/pow.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / mkdirp / examples / </span><span class="file_name">pow.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/test/fixtures/nested/three.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / test / fixtures / nested / </span><span class="file_name">three.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/test/fixtures/nested/sub2/two.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / test / fixtures / nested / sub2 / </span><span class="file_name">two.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/test/fixtures/nested/sub/two.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / test / fixtures / nested / sub / </span><span class="file_name">two.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/test/fixtures/nested/one.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / test / fixtures / nested / </span><span class="file_name">one.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/test/fixtures/sub/two.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / test / fixtures / sub / </span><span class="file_name">two.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/test/fixtures/sub/one.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / test / fixtures / sub / </span><span class="file_name">one.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/test/fixtures/one.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / test / fixtures / </span><span class="file_name">one.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/test/fixtures/Project (LO)/one.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / test / fixtures / Project (LO) / </span><span class="file_name">one.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/test/safewrite_test.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / test / </span><span class="file_name">safewrite_test.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/test/rename_test.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / test / </span><span class="file_name">rename_test.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/test/watch_test.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / test / </span><span class="file_name">watch_test.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/test/add_test.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / test / </span><span class="file_name">add_test.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/test/api_test.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / test / </span><span class="file_name">api_test.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/test/matching_test.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / test / </span><span class="file_name">matching_test.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/test/relative_test.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / test / </span><span class="file_name">relative_test.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/test/patterns_test.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / test / </span><span class="file_name">patterns_test.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/node_modules/glob/test/pause-resume.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / node_modules / glob / test / </span><span class="file_name">pause-resume.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/node_modules/glob/test/zz-cleanup.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / node_modules / glob / test / </span><span class="file_name">zz-cleanup.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/node_modules/glob/test/readme-issue.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / node_modules / glob / test / </span><span class="file_name">readme-issue.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/node_modules/glob/test/bash-comparison.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / node_modules / glob / test / </span><span class="file_name">bash-comparison.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/node_modules/glob/test/root-nomount.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / node_modules / glob / test / </span><span class="file_name">root-nomount.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/node_modules/glob/test/cwd-test.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / node_modules / glob / test / </span><span class="file_name">cwd-test.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/node_modules/glob/test/root.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / node_modules / glob / test / </span><span class="file_name">root.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/node_modules/glob/test/nocase-nomagic.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / node_modules / glob / test / </span><span class="file_name">nocase-nomagic.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/node_modules/glob/test/mark.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / node_modules / glob / test / </span><span class="file_name">mark.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/node_modules/glob/test/stat.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / node_modules / glob / test / </span><span class="file_name">stat.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/node_modules/glob/test/globstar-match.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / node_modules / glob / test / </span><span class="file_name">globstar-match.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/node_modules/glob/test/new-glob-optional-options.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / node_modules / glob / test / </span><span class="file_name">new-glob-optional-options.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/node_modules/glob/test/00-setup.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / node_modules / glob / test / </span><span class="file_name">00-setup.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/node_modules/glob/node_modules/inherits/inherits_browser.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / node_modules / glob / node_modules / inherits / </span><span class="file_name">inherits_browser.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/node_modules/glob/node_modules/inherits/inherits.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / node_modules / glob / node_modules / inherits / </span><span class="file_name">inherits.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/node_modules/glob/node_modules/inherits/test.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / node_modules / glob / node_modules / inherits / </span><span class="file_name">test.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/node_modules/glob/node_modules/minimatch/test/defaults.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / node_modules / glob / node_modules / minimatch / test / </span><span class="file_name">defaults.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/node_modules/glob/node_modules/minimatch/test/extglob-ending-with-state-char.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / node_modules / glob / node_modules / minimatch / test / </span><span class="file_name">extglob-ending-with-state-char.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/node_modules/glob/node_modules/minimatch/test/basic.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / node_modules / glob / node_modules / minimatch / test / </span><span class="file_name">basic.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/node_modules/glob/node_modules/minimatch/test/brace-expand.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / node_modules / glob / node_modules / minimatch / test / </span><span class="file_name">brace-expand.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/node_modules/glob/node_modules/minimatch/test/caching.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / node_modules / glob / node_modules / minimatch / test / </span><span class="file_name">caching.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/node_modules/glob/node_modules/minimatch/minimatch.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / node_modules / glob / node_modules / minimatch / </span><span class="file_name">minimatch.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/node_modules/glob/node_modules/minimatch/node_modules/lru-cache/test/foreach.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / node_modules / glob / node_modules / minimatch / node_modules / lru-cache / test / </span><span class="file_name">foreach.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/node_modules/glob/node_modules/minimatch/node_modules/lru-cache/test/basic.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / node_modules / glob / node_modules / minimatch / node_modules / lru-cache / test / </span><span class="file_name">basic.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/node_modules/glob/node_modules/minimatch/node_modules/lru-cache/test/memory-leak.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / node_modules / glob / node_modules / minimatch / node_modules / lru-cache / test / </span><span class="file_name">memory-leak.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/node_modules/glob/node_modules/minimatch/node_modules/lru-cache/lib/lru-cache.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / node_modules / glob / node_modules / minimatch / node_modules / lru-cache / lib / </span><span class="file_name">lru-cache.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/node_modules/glob/node_modules/minimatch/node_modules/sigmund/test/basic.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / node_modules / glob / node_modules / minimatch / node_modules / sigmund / test / </span><span class="file_name">basic.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/node_modules/glob/node_modules/minimatch/node_modules/sigmund/bench.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / node_modules / glob / node_modules / minimatch / node_modules / sigmund / </span><span class="file_name">bench.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/node_modules/glob/node_modules/minimatch/node_modules/sigmund/sigmund.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / node_modules / glob / node_modules / minimatch / node_modules / sigmund / </span><span class="file_name">sigmund.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/node_modules/glob/examples/usr-local.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / node_modules / glob / examples / </span><span class="file_name">usr-local.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/node_modules/glob/examples/g.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / node_modules / glob / examples / </span><span class="file_name">g.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/node_modules/glob/glob.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / node_modules / glob / </span><span class="file_name">glob.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/tests/fixtures/an (odd) filename.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / tests / fixtures / </span><span class="file_name">an (odd) filename.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/tests/test.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / tests / </span><span class="file_name">test.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/tests/helper.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / tests / </span><span class="file_name">helper.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/fileset/lib/fileset.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / fileset / lib / </span><span class="file_name">fileset.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/minimatch/test/defaults.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / minimatch / test / </span><span class="file_name">defaults.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/minimatch/test/extglob-ending-with-state-char.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / minimatch / test / </span><span class="file_name">extglob-ending-with-state-char.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/minimatch/test/basic.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / minimatch / test / </span><span class="file_name">basic.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/minimatch/test/brace-expand.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / minimatch / test / </span><span class="file_name">brace-expand.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/minimatch/test/caching.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / minimatch / test / </span><span class="file_name">caching.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/minimatch/minimatch.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / minimatch / </span><span class="file_name">minimatch.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/minimatch/node_modules/lru-cache/test/foreach.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / minimatch / node_modules / lru-cache / test / </span><span class="file_name">foreach.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/minimatch/node_modules/lru-cache/test/basic.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / minimatch / node_modules / lru-cache / test / </span><span class="file_name">basic.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/minimatch/node_modules/lru-cache/test/memory-leak.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / minimatch / node_modules / lru-cache / test / </span><span class="file_name">memory-leak.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/minimatch/node_modules/lru-cache/lib/lru-cache.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / minimatch / node_modules / lru-cache / lib / </span><span class="file_name">lru-cache.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/minimatch/node_modules/sigmund/test/basic.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / minimatch / node_modules / sigmund / test / </span><span class="file_name">basic.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/minimatch/node_modules/sigmund/bench.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / minimatch / node_modules / sigmund / </span><span class="file_name">bench.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/node_modules/minimatch/node_modules/sigmund/sigmund.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / node_modules / minimatch / node_modules / sigmund / </span><span class="file_name">sigmund.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/Gruntfile.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / </span><span class="file_name">Gruntfile.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/lib/gaze.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / lib / </span><span class="file_name">gaze.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/gaze/benchmarks/gaze100s.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / gaze / benchmarks / </span><span class="file_name">gaze100s.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/coffee-script/register.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / coffee-script / </span><span class="file_name">register.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/coffee-script/lib/coffee-script/command.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / coffee-script / lib / coffee-script / </span><span class="file_name">command.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/coffee-script/lib/coffee-script/sourcemap.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / coffee-script / lib / coffee-script / </span><span class="file_name">sourcemap.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/coffee-script/lib/coffee-script/register.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / coffee-script / lib / coffee-script / </span><span class="file_name">register.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/coffee-script/lib/coffee-script/index.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / coffee-script / lib / coffee-script / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/coffee-script/lib/coffee-script/grammar.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / coffee-script / lib / coffee-script / </span><span class="file_name">grammar.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/coffee-script/lib/coffee-script/scope.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / coffee-script / lib / coffee-script / </span><span class="file_name">scope.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/coffee-script/lib/coffee-script/helpers.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / coffee-script / lib / coffee-script / </span><span class="file_name">helpers.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/coffee-script/lib/coffee-script/rewriter.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / coffee-script / lib / coffee-script / </span><span class="file_name">rewriter.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/coffee-script/lib/coffee-script/nodes.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / coffee-script / lib / coffee-script / </span><span class="file_name">nodes.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/coffee-script/lib/coffee-script/parser.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / coffee-script / lib / coffee-script / </span><span class="file_name">parser.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/coffee-script/lib/coffee-script/optparse.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / coffee-script / lib / coffee-script / </span><span class="file_name">optparse.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/coffee-script/lib/coffee-script/browser.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / coffee-script / lib / coffee-script / </span><span class="file_name">browser.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/coffee-script/lib/coffee-script/lexer.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / coffee-script / lib / coffee-script / </span><span class="file_name">lexer.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/coffee-script/lib/coffee-script/coffee-script.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / coffee-script / lib / coffee-script / </span><span class="file_name">coffee-script.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/coffee-script/lib/coffee-script/repl.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / coffee-script / lib / coffee-script / </span><span class="file_name">repl.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/coffee-script/lib/coffee-script/cake.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / coffee-script / lib / coffee-script / </span><span class="file_name">cake.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/jasmine-reporters/test/NUnitXmlReporterSpec.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / jasmine-reporters / test / </span><span class="file_name">NUnitXmlReporterSpec.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/jasmine-reporters/test/JUnitXmlReporterSpec.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / jasmine-reporters / test / </span><span class="file_name">JUnitXmlReporterSpec.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/jasmine-reporters/test/envjs.bootstrap.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / jasmine-reporters / test / </span><span class="file_name">envjs.bootstrap.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/jasmine-reporters/test/phantomjs-testrunner.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / jasmine-reporters / test / </span><span class="file_name">phantomjs-testrunner.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/jasmine-reporters/ext/jasmine-html.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / jasmine-reporters / ext / </span><span class="file_name">jasmine-html.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/jasmine-reporters/ext/env.rhino.1.2.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / jasmine-reporters / ext / </span><span class="file_name">env.rhino.1.2.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/jasmine-reporters/ext/jasmine.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / jasmine-reporters / ext / </span><span class="file_name">jasmine.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/jasmine-reporters/src/load_reporters.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / jasmine-reporters / src / </span><span class="file_name">load_reporters.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/jasmine-reporters/src/jasmine.nunit_reporter.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / jasmine-reporters / src / </span><span class="file_name">jasmine.nunit_reporter.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/jasmine-reporters/src/jasmine.tap_reporter.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / jasmine-reporters / src / </span><span class="file_name">jasmine.tap_reporter.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/jasmine-reporters/src/jasmine.terminal_reporter.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / jasmine-reporters / src / </span><span class="file_name">jasmine.terminal_reporter.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/jasmine-reporters/src/jasmine.console_reporter.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / jasmine-reporters / src / </span><span class="file_name">jasmine.console_reporter.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/jasmine-reporters/src/jasmine.teamcity_reporter.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / jasmine-reporters / src / </span><span class="file_name">jasmine.teamcity_reporter.js</span></a><a href="../../.././node_modules/jasmine-node/node_modules/jasmine-reporters/src/jasmine.junit_reporter.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / node_modules / jasmine-reporters / src / </span><span class="file_name">jasmine.junit_reporter.js</span></a><a href="../../.././node_modules/jasmine-node/lib/jasmine-node/requirejs-wrapper-template.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / lib / jasmine-node / </span><span class="file_name">requirejs-wrapper-template.js</span></a><a href="../../.././node_modules/jasmine-node/lib/jasmine-node/spec-collection.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / lib / jasmine-node / </span><span class="file_name">spec-collection.js</span></a><a href="../../.././node_modules/jasmine-node/lib/jasmine-node/async-callback.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / lib / jasmine-node / </span><span class="file_name">async-callback.js</span></a><a href="../../.././node_modules/jasmine-node/lib/jasmine-node/reporter.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / lib / jasmine-node / </span><span class="file_name">reporter.js</span></a><a href="../../.././node_modules/jasmine-node/lib/jasmine-node/cli.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / lib / jasmine-node / </span><span class="file_name">cli.js</span></a><a href="../../.././node_modules/jasmine-node/lib/jasmine-node/index.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / lib / jasmine-node / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/jasmine-node/lib/jasmine-node/cs.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / lib / jasmine-node / </span><span class="file_name">cs.js</span></a><a href="../../.././node_modules/jasmine-node/lib/jasmine-node/requirejs-spec-loader.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / lib / jasmine-node / </span><span class="file_name">requirejs-spec-loader.js</span></a><a href="../../.././node_modules/jasmine-node/lib/jasmine-node/requirejs-runner.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / lib / jasmine-node / </span><span class="file_name">requirejs-runner.js</span></a><a href="../../.././node_modules/jasmine-node/lib/jasmine-node/jasmine-1.3.1.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / lib / jasmine-node / </span><span class="file_name">jasmine-1.3.1.js</span></a><a href="../../.././node_modules/jasmine-node/lib/jasmine-node/autotest.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / lib / jasmine-node / </span><span class="file_name">autotest.js</span></a><a href="../../.././node_modules/jasmine-node/spec-requirejs/requirejs-wrapper-template.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / spec-requirejs / </span><span class="file_name">requirejs-wrapper-template.js</span></a><a href="../../.././node_modules/jasmine-node/spec-requirejs/requirejs.spec.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / spec-requirejs / </span><span class="file_name">requirejs.spec.js</span></a><a href="../../.././node_modules/jasmine-node/spec-requirejs/requirejs-setup.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / spec-requirejs / </span><span class="file_name">requirejs-setup.js</span></a><a href="../../.././node_modules/jasmine-node/spec-requirejs/requirejs.sut.js.html" class="source "><span class="base_path">. / node_modules / jasmine-node / spec-requirejs / </span><span class="file_name">requirejs.sut.js</span></a><a href="../../.././node_modules/express/index.js.html" class="source "><span class="base_path">. / node_modules / express / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/depd/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / depd / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/compression/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / compression / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/compression/node_modules/accepts/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / compression / node_modules / accepts / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/compression/node_modules/accepts/node_modules/negotiator/lib/encoding.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / compression / node_modules / accepts / node_modules / negotiator / lib / </span><span class="file_name">encoding.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/compression/node_modules/accepts/node_modules/negotiator/lib/negotiator.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / compression / node_modules / accepts / node_modules / negotiator / lib / </span><span class="file_name">negotiator.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/compression/node_modules/accepts/node_modules/negotiator/lib/charset.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / compression / node_modules / accepts / node_modules / negotiator / lib / </span><span class="file_name">charset.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/compression/node_modules/accepts/node_modules/negotiator/lib/mediaType.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / compression / node_modules / accepts / node_modules / negotiator / lib / </span><span class="file_name">mediaType.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/compression/node_modules/accepts/node_modules/negotiator/lib/language.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / compression / node_modules / accepts / node_modules / negotiator / lib / </span><span class="file_name">language.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/compression/node_modules/accepts/node_modules/mime-types/lib/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / compression / node_modules / accepts / node_modules / mime-types / lib / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/compression/node_modules/compressible/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / compression / node_modules / compressible / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/multiparty/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / multiparty / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/multiparty/node_modules/readable-stream/passthrough.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / multiparty / node_modules / readable-stream / </span><span class="file_name">passthrough.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/multiparty/node_modules/readable-stream/writable.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / multiparty / node_modules / readable-stream / </span><span class="file_name">writable.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/multiparty/node_modules/readable-stream/node_modules/isarray/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / multiparty / node_modules / readable-stream / node_modules / isarray / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/multiparty/node_modules/readable-stream/node_modules/isarray/build/build.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / multiparty / node_modules / readable-stream / node_modules / isarray / build / </span><span class="file_name">build.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/multiparty/node_modules/readable-stream/node_modules/core-util-is/util.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / multiparty / node_modules / readable-stream / node_modules / core-util-is / </span><span class="file_name">util.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/multiparty/node_modules/readable-stream/node_modules/core-util-is/lib/util.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / multiparty / node_modules / readable-stream / node_modules / core-util-is / lib / </span><span class="file_name">util.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/multiparty/node_modules/readable-stream/node_modules/string_decoder/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / multiparty / node_modules / readable-stream / node_modules / string_decoder / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/multiparty/node_modules/readable-stream/node_modules/inherits/inherits_browser.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / multiparty / node_modules / readable-stream / node_modules / inherits / </span><span class="file_name">inherits_browser.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/multiparty/node_modules/readable-stream/node_modules/inherits/inherits.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / multiparty / node_modules / readable-stream / node_modules / inherits / </span><span class="file_name">inherits.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/multiparty/node_modules/readable-stream/node_modules/inherits/test.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / multiparty / node_modules / readable-stream / node_modules / inherits / </span><span class="file_name">test.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/multiparty/node_modules/readable-stream/readable.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / multiparty / node_modules / readable-stream / </span><span class="file_name">readable.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/multiparty/node_modules/readable-stream/lib/_stream_duplex.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / multiparty / node_modules / readable-stream / lib / </span><span class="file_name">_stream_duplex.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/multiparty/node_modules/readable-stream/lib/_stream_readable.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / multiparty / node_modules / readable-stream / lib / </span><span class="file_name">_stream_readable.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/multiparty/node_modules/readable-stream/lib/_stream_writable.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / multiparty / node_modules / readable-stream / lib / </span><span class="file_name">_stream_writable.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/multiparty/node_modules/readable-stream/lib/_stream_passthrough.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / multiparty / node_modules / readable-stream / lib / </span><span class="file_name">_stream_passthrough.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/multiparty/node_modules/readable-stream/lib/_stream_transform.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / multiparty / node_modules / readable-stream / lib / </span><span class="file_name">_stream_transform.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/multiparty/node_modules/readable-stream/transform.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / multiparty / node_modules / readable-stream / </span><span class="file_name">transform.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/multiparty/node_modules/readable-stream/duplex.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / multiparty / node_modules / readable-stream / </span><span class="file_name">duplex.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/multiparty/node_modules/stream-counter/test/test.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / multiparty / node_modules / stream-counter / test / </span><span class="file_name">test.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/multiparty/node_modules/stream-counter/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / multiparty / node_modules / stream-counter / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/body-parser/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / body-parser / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/body-parser/node_modules/type-is/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / body-parser / node_modules / type-is / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/body-parser/node_modules/type-is/node_modules/mime-types/test/test.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / body-parser / node_modules / type-is / node_modules / mime-types / test / </span><span class="file_name">test.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/body-parser/node_modules/type-is/node_modules/mime-types/test/mime.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / body-parser / node_modules / type-is / node_modules / mime-types / test / </span><span class="file_name">mime.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/body-parser/node_modules/type-is/node_modules/mime-types/build.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / body-parser / node_modules / type-is / node_modules / mime-types / </span><span class="file_name">build.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/body-parser/node_modules/type-is/node_modules/mime-types/lib/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / body-parser / node_modules / type-is / node_modules / mime-types / lib / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/body-parser/node_modules/iconv-lite/encodings/dbcs-codec.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / body-parser / node_modules / iconv-lite / encodings / </span><span class="file_name">dbcs-codec.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/body-parser/node_modules/iconv-lite/encodings/sbcs-data-generated.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / body-parser / node_modules / iconv-lite / encodings / </span><span class="file_name">sbcs-data-generated.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/body-parser/node_modules/iconv-lite/encodings/utf16.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / body-parser / node_modules / iconv-lite / encodings / </span><span class="file_name">utf16.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/body-parser/node_modules/iconv-lite/encodings/sbcs-codec.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / body-parser / node_modules / iconv-lite / encodings / </span><span class="file_name">sbcs-codec.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/body-parser/node_modules/iconv-lite/encodings/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / body-parser / node_modules / iconv-lite / encodings / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/body-parser/node_modules/iconv-lite/encodings/sbcs-data.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / body-parser / node_modules / iconv-lite / encodings / </span><span class="file_name">sbcs-data.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/body-parser/node_modules/iconv-lite/encodings/dbcs-data.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / body-parser / node_modules / iconv-lite / encodings / </span><span class="file_name">dbcs-data.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/body-parser/node_modules/iconv-lite/encodings/internal.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / body-parser / node_modules / iconv-lite / encodings / </span><span class="file_name">internal.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/body-parser/node_modules/iconv-lite/lib/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / body-parser / node_modules / iconv-lite / lib / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/body-parser/node_modules/iconv-lite/lib/streams.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / body-parser / node_modules / iconv-lite / lib / </span><span class="file_name">streams.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/body-parser/node_modules/iconv-lite/lib/extend-node.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / body-parser / node_modules / iconv-lite / lib / </span><span class="file_name">extend-node.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/body-parser/node_modules/raw-body/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / body-parser / node_modules / raw-body / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/body-parser/lib/types/json.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / body-parser / lib / types / </span><span class="file_name">json.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/body-parser/lib/types/urlencoded.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / body-parser / lib / types / </span><span class="file_name">urlencoded.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/body-parser/lib/types/raw.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / body-parser / lib / types / </span><span class="file_name">raw.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/body-parser/lib/types/text.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / body-parser / lib / types / </span><span class="file_name">text.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/body-parser/lib/read.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / body-parser / lib / </span><span class="file_name">read.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/qs/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / qs / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/type-is/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / type-is / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/type-is/node_modules/mime-types/lib/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / type-is / node_modules / mime-types / lib / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/morgan/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / morgan / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/cookie-parser/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / cookie-parser / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/cookie-parser/lib/parse.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / cookie-parser / lib / </span><span class="file_name">parse.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/method-override/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / method-override / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/vhost/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / vhost / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/errorhandler/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / errorhandler / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/errorhandler/node_modules/accepts/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / errorhandler / node_modules / accepts / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/errorhandler/node_modules/accepts/node_modules/negotiator/lib/encoding.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / errorhandler / node_modules / accepts / node_modules / negotiator / lib / </span><span class="file_name">encoding.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/errorhandler/node_modules/accepts/node_modules/negotiator/lib/negotiator.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / errorhandler / node_modules / accepts / node_modules / negotiator / lib / </span><span class="file_name">negotiator.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/errorhandler/node_modules/accepts/node_modules/negotiator/lib/charset.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / errorhandler / node_modules / accepts / node_modules / negotiator / lib / </span><span class="file_name">charset.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/errorhandler/node_modules/accepts/node_modules/negotiator/lib/mediaType.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / errorhandler / node_modules / accepts / node_modules / negotiator / lib / </span><span class="file_name">mediaType.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/errorhandler/node_modules/accepts/node_modules/negotiator/lib/language.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / errorhandler / node_modules / accepts / node_modules / negotiator / lib / </span><span class="file_name">language.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/errorhandler/node_modules/accepts/node_modules/mime-types/lib/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / errorhandler / node_modules / accepts / node_modules / mime-types / lib / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/connect-timeout/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / connect-timeout / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/response-time/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / response-time / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/csurf/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / csurf / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/csurf/node_modules/csrf-tokens/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / csurf / node_modules / csrf-tokens / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/csurf/node_modules/csrf-tokens/node_modules/uid-safe/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / csurf / node_modules / csrf-tokens / node_modules / uid-safe / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/csurf/node_modules/csrf-tokens/node_modules/uid-safe/node_modules/mz/dns.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / csurf / node_modules / csrf-tokens / node_modules / uid-safe / node_modules / mz / </span><span class="file_name">dns.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/csurf/node_modules/csrf-tokens/node_modules/uid-safe/node_modules/mz/zlib.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / csurf / node_modules / csrf-tokens / node_modules / uid-safe / node_modules / mz / </span><span class="file_name">zlib.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/csurf/node_modules/csrf-tokens/node_modules/uid-safe/node_modules/mz/fs.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / csurf / node_modules / csrf-tokens / node_modules / uid-safe / node_modules / mz / </span><span class="file_name">fs.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/csurf/node_modules/csrf-tokens/node_modules/uid-safe/node_modules/mz/crypto.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / csurf / node_modules / csrf-tokens / node_modules / uid-safe / node_modules / mz / </span><span class="file_name">crypto.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/csurf/node_modules/csrf-tokens/node_modules/uid-safe/node_modules/mz/child_process.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / csurf / node_modules / csrf-tokens / node_modules / uid-safe / node_modules / mz / </span><span class="file_name">child_process.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/csurf/node_modules/csrf-tokens/node_modules/uid-safe/node_modules/mz/_promisify_all.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / csurf / node_modules / csrf-tokens / node_modules / uid-safe / node_modules / mz / </span><span class="file_name">_promisify_all.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/csurf/node_modules/csrf-tokens/node_modules/uid-safe/node_modules/mz/_promisify.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / csurf / node_modules / csrf-tokens / node_modules / uid-safe / node_modules / mz / </span><span class="file_name">_promisify.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/csurf/node_modules/csrf-tokens/node_modules/uid-safe/test.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / csurf / node_modules / csrf-tokens / node_modules / uid-safe / </span><span class="file_name">test.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/csurf/node_modules/csrf-tokens/node_modules/base64-url/test/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / csurf / node_modules / csrf-tokens / node_modules / base64-url / test / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/csurf/node_modules/csrf-tokens/node_modules/base64-url/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / csurf / node_modules / csrf-tokens / node_modules / base64-url / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/csurf/node_modules/csrf-tokens/node_modules/rndm/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / csurf / node_modules / csrf-tokens / node_modules / rndm / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/csurf/node_modules/csrf-tokens/node_modules/scmp/test/test.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / csurf / node_modules / csrf-tokens / node_modules / scmp / test / </span><span class="file_name">test.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/csurf/node_modules/csrf-tokens/node_modules/scmp/benchmark/benchmark.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / csurf / node_modules / csrf-tokens / node_modules / scmp / benchmark / </span><span class="file_name">benchmark.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/csurf/node_modules/csrf-tokens/node_modules/scmp/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / csurf / node_modules / csrf-tokens / node_modules / scmp / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/csurf/node_modules/csrf-tokens/test.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / csurf / node_modules / csrf-tokens / </span><span class="file_name">test.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/serve-index/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / serve-index / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/serve-index/node_modules/batch/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / serve-index / node_modules / batch / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/serve-index/node_modules/accepts/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / serve-index / node_modules / accepts / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/serve-index/node_modules/accepts/node_modules/negotiator/lib/encoding.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / serve-index / node_modules / accepts / node_modules / negotiator / lib / </span><span class="file_name">encoding.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/serve-index/node_modules/accepts/node_modules/negotiator/lib/negotiator.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / serve-index / node_modules / accepts / node_modules / negotiator / lib / </span><span class="file_name">negotiator.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/serve-index/node_modules/accepts/node_modules/negotiator/lib/charset.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / serve-index / node_modules / accepts / node_modules / negotiator / lib / </span><span class="file_name">charset.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/serve-index/node_modules/accepts/node_modules/negotiator/lib/mediaType.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / serve-index / node_modules / accepts / node_modules / negotiator / lib / </span><span class="file_name">mediaType.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/serve-index/node_modules/accepts/node_modules/negotiator/lib/language.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / serve-index / node_modules / accepts / node_modules / negotiator / lib / </span><span class="file_name">language.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/serve-index/node_modules/accepts/node_modules/mime-types/lib/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / serve-index / node_modules / accepts / node_modules / mime-types / lib / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/basic-auth-connect/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / basic-auth-connect / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/bytes/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / bytes / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/serve-static/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / serve-static / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/finalhandler/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / finalhandler / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/serve-favicon/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / serve-favicon / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/on-headers/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / on-headers / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/pause/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / pause / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/express-session/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / express-session / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/express-session/session/store.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / express-session / session / </span><span class="file_name">store.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/express-session/session/memory.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / express-session / session / </span><span class="file_name">memory.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/express-session/session/session.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / express-session / session / </span><span class="file_name">session.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/express-session/session/cookie.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / express-session / session / </span><span class="file_name">cookie.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/express-session/node_modules/uid-safe/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / express-session / node_modules / uid-safe / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/express-session/node_modules/uid-safe/node_modules/base64-url/test/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / express-session / node_modules / uid-safe / node_modules / base64-url / test / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/express-session/node_modules/uid-safe/node_modules/base64-url/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / express-session / node_modules / uid-safe / node_modules / base64-url / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/express-session/node_modules/uid-safe/node_modules/mz/dns.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / express-session / node_modules / uid-safe / node_modules / mz / </span><span class="file_name">dns.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/express-session/node_modules/uid-safe/node_modules/mz/zlib.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / express-session / node_modules / uid-safe / node_modules / mz / </span><span class="file_name">zlib.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/express-session/node_modules/uid-safe/node_modules/mz/fs.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / express-session / node_modules / uid-safe / node_modules / mz / </span><span class="file_name">fs.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/express-session/node_modules/uid-safe/node_modules/mz/crypto.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / express-session / node_modules / uid-safe / node_modules / mz / </span><span class="file_name">crypto.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/express-session/node_modules/uid-safe/node_modules/mz/child_process.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / express-session / node_modules / uid-safe / node_modules / mz / </span><span class="file_name">child_process.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/express-session/node_modules/uid-safe/node_modules/mz/_promisify_all.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / express-session / node_modules / uid-safe / node_modules / mz / </span><span class="file_name">_promisify_all.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/express-session/node_modules/uid-safe/node_modules/mz/_promisify.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / express-session / node_modules / uid-safe / node_modules / mz / </span><span class="file_name">_promisify.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/express-session/node_modules/uid-safe/test.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / express-session / node_modules / uid-safe / </span><span class="file_name">test.js</span></a><a href="../../.././node_modules/express/node_modules/connect/node_modules/express-session/node_modules/utils-merge/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / node_modules / express-session / node_modules / utils-merge / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/support/docs.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / support / </span><span class="file_name">docs.js</span></a><a href="../../.././node_modules/express/node_modules/connect/examples/limit.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / examples / </span><span class="file_name">limit.js</span></a><a href="../../.././node_modules/express/node_modules/connect/examples/error.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / examples / </span><span class="file_name">error.js</span></a><a href="../../.././node_modules/express/node_modules/connect/examples/logger.fast.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / examples / </span><span class="file_name">logger.fast.js</span></a><a href="../../.././node_modules/express/node_modules/connect/examples/directory.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / examples / </span><span class="file_name">directory.js</span></a><a href="../../.././node_modules/express/node_modules/connect/examples/csrf.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / examples / </span><span class="file_name">csrf.js</span></a><a href="../../.././node_modules/express/node_modules/connect/examples/logger.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / examples / </span><span class="file_name">logger.js</span></a><a href="../../.././node_modules/express/node_modules/connect/examples/session.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / examples / </span><span class="file_name">session.js</span></a><a href="../../.././node_modules/express/node_modules/connect/examples/profiler.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / examples / </span><span class="file_name">profiler.js</span></a><a href="../../.././node_modules/express/node_modules/connect/examples/static.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / examples / </span><span class="file_name">static.js</span></a><a href="../../.././node_modules/express/node_modules/connect/examples/helloworld.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / examples / </span><span class="file_name">helloworld.js</span></a><a href="../../.././node_modules/express/node_modules/connect/examples/logger.format.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / examples / </span><span class="file_name">logger.format.js</span></a><a href="../../.././node_modules/express/node_modules/connect/examples/rollingSession.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / examples / </span><span class="file_name">rollingSession.js</span></a><a href="../../.././node_modules/express/node_modules/connect/examples/upload.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / examples / </span><span class="file_name">upload.js</span></a><a href="../../.././node_modules/express/node_modules/connect/examples/upload-stream.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / examples / </span><span class="file_name">upload-stream.js</span></a><a href="../../.././node_modules/express/node_modules/connect/examples/favicon.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / examples / </span><span class="file_name">favicon.js</span></a><a href="../../.././node_modules/express/node_modules/connect/examples/mounting.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / examples / </span><span class="file_name">mounting.js</span></a><a href="../../.././node_modules/express/node_modules/connect/examples/cookieSession.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / examples / </span><span class="file_name">cookieSession.js</span></a><a href="../../.././node_modules/express/node_modules/connect/examples/vhost.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / examples / </span><span class="file_name">vhost.js</span></a><a href="../../.././node_modules/express/node_modules/connect/examples/bodyParser.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / examples / </span><span class="file_name">bodyParser.js</span></a><a href="../../.././node_modules/express/node_modules/connect/examples/basicAuth.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / examples / </span><span class="file_name">basicAuth.js</span></a><a href="../../.././node_modules/express/node_modules/connect/lib/patch.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / lib / </span><span class="file_name">patch.js</span></a><a href="../../.././node_modules/express/node_modules/connect/lib/proto.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / lib / </span><span class="file_name">proto.js</span></a><a href="../../.././node_modules/express/node_modules/connect/lib/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / lib / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/connect/lib/cache.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / lib / </span><span class="file_name">cache.js</span></a><a href="../../.././node_modules/express/node_modules/connect/lib/connect.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / lib / </span><span class="file_name">connect.js</span></a><a href="../../.././node_modules/express/node_modules/connect/lib/utils.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / lib / </span><span class="file_name">utils.js</span></a><a href="../../.././node_modules/express/node_modules/connect/lib/middleware/timeout.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / lib / middleware / </span><span class="file_name">timeout.js</span></a><a href="../../.././node_modules/express/node_modules/connect/lib/middleware/multipart.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / lib / middleware / </span><span class="file_name">multipart.js</span></a><a href="../../.././node_modules/express/node_modules/connect/lib/middleware/limit.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / lib / middleware / </span><span class="file_name">limit.js</span></a><a href="../../.././node_modules/express/node_modules/connect/lib/middleware/staticCache.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / lib / middleware / </span><span class="file_name">staticCache.js</span></a><a href="../../.././node_modules/express/node_modules/connect/lib/middleware/responseTime.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / lib / middleware / </span><span class="file_name">responseTime.js</span></a><a href="../../.././node_modules/express/node_modules/connect/lib/middleware/directory.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / lib / middleware / </span><span class="file_name">directory.js</span></a><a href="../../.././node_modules/express/node_modules/connect/lib/middleware/csrf.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / lib / middleware / </span><span class="file_name">csrf.js</span></a><a href="../../.././node_modules/express/node_modules/connect/lib/middleware/json.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / lib / middleware / </span><span class="file_name">json.js</span></a><a href="../../.././node_modules/express/node_modules/connect/lib/middleware/errorHandler.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / lib / middleware / </span><span class="file_name">errorHandler.js</span></a><a href="../../.././node_modules/express/node_modules/connect/lib/middleware/methodOverride.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / lib / middleware / </span><span class="file_name">methodOverride.js</span></a><a href="../../.././node_modules/express/node_modules/connect/lib/middleware/query.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / lib / middleware / </span><span class="file_name">query.js</span></a><a href="../../.././node_modules/express/node_modules/connect/lib/middleware/logger.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / lib / middleware / </span><span class="file_name">logger.js</span></a><a href="../../.././node_modules/express/node_modules/connect/lib/middleware/session.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / lib / middleware / </span><span class="file_name">session.js</span></a><a href="../../.././node_modules/express/node_modules/connect/lib/middleware/static.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / lib / middleware / </span><span class="file_name">static.js</span></a><a href="../../.././node_modules/express/node_modules/connect/lib/middleware/urlencoded.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / lib / middleware / </span><span class="file_name">urlencoded.js</span></a><a href="../../.././node_modules/express/node_modules/connect/lib/middleware/cookieParser.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / lib / middleware / </span><span class="file_name">cookieParser.js</span></a><a href="../../.././node_modules/express/node_modules/connect/lib/middleware/favicon.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / lib / middleware / </span><span class="file_name">favicon.js</span></a><a href="../../.././node_modules/express/node_modules/connect/lib/middleware/cookieSession.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / lib / middleware / </span><span class="file_name">cookieSession.js</span></a><a href="../../.././node_modules/express/node_modules/connect/lib/middleware/vhost.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / lib / middleware / </span><span class="file_name">vhost.js</span></a><a href="../../.././node_modules/express/node_modules/connect/lib/middleware/bodyParser.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / lib / middleware / </span><span class="file_name">bodyParser.js</span></a><a href="../../.././node_modules/express/node_modules/connect/lib/middleware/basicAuth.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / lib / middleware / </span><span class="file_name">basicAuth.js</span></a><a href="../../.././node_modules/express/node_modules/connect/lib/middleware/compress.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / connect / lib / middleware / </span><span class="file_name">compress.js</span></a><a href="../../.././node_modules/express/node_modules/proxy-addr/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / proxy-addr / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/proxy-addr/node_modules/ipaddr.js/test/ipaddr.test.coffee.html" class="source "><span class="base_path">. / node_modules / express / node_modules / proxy-addr / node_modules / ipaddr.js / test / </span><span class="file_name">ipaddr.test.coffee</span></a><a href="../../.././node_modules/express/node_modules/proxy-addr/node_modules/ipaddr.js/lib/ipaddr.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / proxy-addr / node_modules / ipaddr.js / lib / </span><span class="file_name">ipaddr.js</span></a><a href="../../.././node_modules/express/node_modules/proxy-addr/node_modules/ipaddr.js/src/ipaddr.coffee.html" class="source "><span class="base_path">. / node_modules / express / node_modules / proxy-addr / node_modules / ipaddr.js / src / </span><span class="file_name">ipaddr.coffee</span></a><a href="../../.././node_modules/express/node_modules/proxy-addr/node_modules/ipaddr.js/ipaddr.min.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / proxy-addr / node_modules / ipaddr.js / </span><span class="file_name">ipaddr.min.js</span></a><a href="../../.././node_modules/express/node_modules/commander/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / commander / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/commander/node_modules/keypress/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / commander / node_modules / keypress / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/commander/node_modules/keypress/test.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / commander / node_modules / keypress / </span><span class="file_name">test.js</span></a><a href="../../.././node_modules/express/node_modules/cookie-signature/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / cookie-signature / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/mkdirp/test/return_sync.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / mkdirp / test / </span><span class="file_name">return_sync.js</span></a><a href="../../.././node_modules/express/node_modules/mkdirp/test/return.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / mkdirp / test / </span><span class="file_name">return.js</span></a><a href="../../.././node_modules/express/node_modules/mkdirp/test/sync.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / mkdirp / test / </span><span class="file_name">sync.js</span></a><a href="../../.././node_modules/express/node_modules/mkdirp/test/mkdirp.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / mkdirp / test / </span><span class="file_name">mkdirp.js</span></a><a href="../../.././node_modules/express/node_modules/mkdirp/test/clobber.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / mkdirp / test / </span><span class="file_name">clobber.js</span></a><a href="../../.././node_modules/express/node_modules/mkdirp/test/root.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / mkdirp / test / </span><span class="file_name">root.js</span></a><a href="../../.././node_modules/express/node_modules/mkdirp/test/umask.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / mkdirp / test / </span><span class="file_name">umask.js</span></a><a href="../../.././node_modules/express/node_modules/mkdirp/test/perm_sync.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / mkdirp / test / </span><span class="file_name">perm_sync.js</span></a><a href="../../.././node_modules/express/node_modules/mkdirp/test/umask_sync.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / mkdirp / test / </span><span class="file_name">umask_sync.js</span></a><a href="../../.././node_modules/express/node_modules/mkdirp/test/opts_fs.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / mkdirp / test / </span><span class="file_name">opts_fs.js</span></a><a href="../../.././node_modules/express/node_modules/mkdirp/test/rel.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / mkdirp / test / </span><span class="file_name">rel.js</span></a><a href="../../.././node_modules/express/node_modules/mkdirp/test/opts_fs_sync.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / mkdirp / test / </span><span class="file_name">opts_fs_sync.js</span></a><a href="../../.././node_modules/express/node_modules/mkdirp/test/race.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / mkdirp / test / </span><span class="file_name">race.js</span></a><a href="../../.././node_modules/express/node_modules/mkdirp/test/chmod.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / mkdirp / test / </span><span class="file_name">chmod.js</span></a><a href="../../.././node_modules/express/node_modules/mkdirp/test/perm.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / mkdirp / test / </span><span class="file_name">perm.js</span></a><a href="../../.././node_modules/express/node_modules/mkdirp/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / mkdirp / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/mkdirp/node_modules/minimist/test/parse_modified.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / mkdirp / node_modules / minimist / test / </span><span class="file_name">parse_modified.js</span></a><a href="../../.././node_modules/express/node_modules/mkdirp/node_modules/minimist/test/dash.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / mkdirp / node_modules / minimist / test / </span><span class="file_name">dash.js</span></a><a href="../../.././node_modules/express/node_modules/mkdirp/node_modules/minimist/test/short.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / mkdirp / node_modules / minimist / test / </span><span class="file_name">short.js</span></a><a href="../../.././node_modules/express/node_modules/mkdirp/node_modules/minimist/test/default_bool.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / mkdirp / node_modules / minimist / test / </span><span class="file_name">default_bool.js</span></a><a href="../../.././node_modules/express/node_modules/mkdirp/node_modules/minimist/test/parse.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / mkdirp / node_modules / minimist / test / </span><span class="file_name">parse.js</span></a><a href="../../.././node_modules/express/node_modules/mkdirp/node_modules/minimist/test/whitespace.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / mkdirp / node_modules / minimist / test / </span><span class="file_name">whitespace.js</span></a><a href="../../.././node_modules/express/node_modules/mkdirp/node_modules/minimist/test/long.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / mkdirp / node_modules / minimist / test / </span><span class="file_name">long.js</span></a><a href="../../.././node_modules/express/node_modules/mkdirp/node_modules/minimist/test/dotted.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / mkdirp / node_modules / minimist / test / </span><span class="file_name">dotted.js</span></a><a href="../../.././node_modules/express/node_modules/mkdirp/node_modules/minimist/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / mkdirp / node_modules / minimist / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/mkdirp/node_modules/minimist/example/parse.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / mkdirp / node_modules / minimist / example / </span><span class="file_name">parse.js</span></a><a href="../../.././node_modules/express/node_modules/mkdirp/examples/pow.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / mkdirp / examples / </span><span class="file_name">pow.js</span></a><a href="../../.././node_modules/express/node_modules/mkdirp/bin/cmd.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / mkdirp / bin / </span><span class="file_name">cmd.js</span></a><a href="../../.././node_modules/express/node_modules/fresh/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / fresh / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/debug/debug.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / debug / </span><span class="file_name">debug.js</span></a><a href="../../.././node_modules/express/node_modules/debug/node.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / debug / </span><span class="file_name">node.js</span></a><a href="../../.././node_modules/express/node_modules/debug/node_modules/ms/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / debug / node_modules / ms / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/debug/browser.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / debug / </span><span class="file_name">browser.js</span></a><a href="../../.././node_modules/express/node_modules/buffer-crc32/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / buffer-crc32 / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/buffer-crc32/tests/crc.test.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / buffer-crc32 / tests / </span><span class="file_name">crc.test.js</span></a><a href="../../.././node_modules/express/node_modules/parseurl/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / parseurl / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/escape-html/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / escape-html / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/vary/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / vary / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/send/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / send / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/send/node_modules/mime/test.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / send / node_modules / mime / </span><span class="file_name">test.js</span></a><a href="../../.././node_modules/express/node_modules/send/node_modules/mime/mime.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / send / node_modules / mime / </span><span class="file_name">mime.js</span></a><a href="../../.././node_modules/express/node_modules/send/node_modules/finished/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / send / node_modules / finished / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/send/node_modules/finished/node_modules/ee-first/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / send / node_modules / finished / node_modules / ee-first / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/send/node_modules/finished/node_modules/ee-first/test.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / send / node_modules / finished / node_modules / ee-first / </span><span class="file_name">test.js</span></a><a href="../../.././node_modules/express/node_modules/send/lib/send.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / send / lib / </span><span class="file_name">send.js</span></a><a href="../../.././node_modules/express/node_modules/send/lib/utils.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / send / lib / </span><span class="file_name">utils.js</span></a><a href="../../.././node_modules/express/node_modules/merge-descriptors/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / merge-descriptors / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/methods/test/methods.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / methods / test / </span><span class="file_name">methods.js</span></a><a href="../../.././node_modules/express/node_modules/methods/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / methods / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/cookie/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / cookie / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/media-typer/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / media-typer / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/node_modules/range-parser/index.js.html" class="source "><span class="base_path">. / node_modules / express / node_modules / range-parser / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/lib/middleware.js.html" class="source "><span class="base_path">. / node_modules / express / lib / </span><span class="file_name">middleware.js</span></a><a href="../../.././node_modules/express/lib/request.js.html" class="source "><span class="base_path">. / node_modules / express / lib / </span><span class="file_name">request.js</span></a><a href="../../.././node_modules/express/lib/router/index.js.html" class="source "><span class="base_path">. / node_modules / express / lib / router / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/express/lib/router/route.js.html" class="source "><span class="base_path">. / node_modules / express / lib / router / </span><span class="file_name">route.js</span></a><a href="../../.././node_modules/express/lib/utils.js.html" class="source "><span class="base_path">. / node_modules / express / lib / </span><span class="file_name">utils.js</span></a><a href="../../.././node_modules/express/lib/express.js.html" class="source "><span class="base_path">. / node_modules / express / lib / </span><span class="file_name">express.js</span></a><a href="../../.././node_modules/express/lib/view.js.html" class="source "><span class="base_path">. / node_modules / express / lib / </span><span class="file_name">view.js</span></a><a href="../../.././node_modules/express/lib/response.js.html" class="source "><span class="base_path">. / node_modules / express / lib / </span><span class="file_name">response.js</span></a><a href="../../.././node_modules/express/lib/application.js.html" class="source "><span class="base_path">. / node_modules / express / lib / </span><span class="file_name">application.js</span></a><a href="../../.././node_modules/docco-husky/test/Foo.java.html" class="source "><span class="base_path">. / node_modules / docco-husky / test / </span><span class="file_name">Foo.java</span></a><a href="../../.././node_modules/docco-husky/test/test.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / test / </span><span class="file_name">test.js</span></a><a href="../../.././node_modules/docco-husky/vendor/showdown.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / vendor / </span><span class="file_name">showdown.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/dox/index.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / dox / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/dox/node_modules/commander/index.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / dox / node_modules / commander / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/dox/node_modules/commander/lib/commander.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / dox / node_modules / commander / lib / </span><span class="file_name">commander.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/dox/node_modules/github-flavored-markdown/code.rb.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / dox / node_modules / github-flavored-markdown / </span><span class="file_name">code.rb</span></a><a href="../../.././node_modules/docco-husky/node_modules/dox/node_modules/github-flavored-markdown/scripts/showdown.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / dox / node_modules / github-flavored-markdown / scripts / </span><span class="file_name">showdown.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/dox/node_modules/github-flavored-markdown/scripts/preview.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / dox / node_modules / github-flavored-markdown / scripts / </span><span class="file_name">preview.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/dox/lib/dox.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / dox / lib / </span><span class="file_name">dox.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/dox/lib/utils.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / dox / lib / </span><span class="file_name">utils.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/gravatar/test/gravatar.test.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / gravatar / test / </span><span class="file_name">gravatar.test.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/gravatar/index.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / gravatar / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/gravatar/lib/gravatar.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / gravatar / lib / </span><span class="file_name">gravatar.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/jade.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / </span><span class="file_name">jade.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/index.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/runtime.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / </span><span class="file_name">runtime.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/jade.min.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / </span><span class="file_name">jade.min.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/node_modules/commander/index.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / node_modules / commander / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/node_modules/commander/lib/commander.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / node_modules / commander / lib / </span><span class="file_name">commander.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/node_modules/mkdirp/test/return_sync.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / node_modules / mkdirp / test / </span><span class="file_name">return_sync.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/node_modules/mkdirp/test/return.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / node_modules / mkdirp / test / </span><span class="file_name">return.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/node_modules/mkdirp/test/sync.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / node_modules / mkdirp / test / </span><span class="file_name">sync.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/node_modules/mkdirp/test/mkdirp.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / node_modules / mkdirp / test / </span><span class="file_name">mkdirp.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/node_modules/mkdirp/test/clobber.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / node_modules / mkdirp / test / </span><span class="file_name">clobber.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/node_modules/mkdirp/test/root.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / node_modules / mkdirp / test / </span><span class="file_name">root.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/node_modules/mkdirp/test/umask.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / node_modules / mkdirp / test / </span><span class="file_name">umask.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/node_modules/mkdirp/test/perm_sync.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / node_modules / mkdirp / test / </span><span class="file_name">perm_sync.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/node_modules/mkdirp/test/umask_sync.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / node_modules / mkdirp / test / </span><span class="file_name">umask_sync.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/node_modules/mkdirp/test/opts_fs.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / node_modules / mkdirp / test / </span><span class="file_name">opts_fs.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/node_modules/mkdirp/test/rel.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / node_modules / mkdirp / test / </span><span class="file_name">rel.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/node_modules/mkdirp/test/opts_fs_sync.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / node_modules / mkdirp / test / </span><span class="file_name">opts_fs_sync.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/node_modules/mkdirp/test/race.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / node_modules / mkdirp / test / </span><span class="file_name">race.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/node_modules/mkdirp/test/chmod.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / node_modules / mkdirp / test / </span><span class="file_name">chmod.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/node_modules/mkdirp/test/perm.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / node_modules / mkdirp / test / </span><span class="file_name">perm.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/node_modules/mkdirp/index.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / node_modules / mkdirp / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/node_modules/mkdirp/node_modules/minimist/test/parse_modified.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / node_modules / mkdirp / node_modules / minimist / test / </span><span class="file_name">parse_modified.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/node_modules/mkdirp/node_modules/minimist/test/dash.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / node_modules / mkdirp / node_modules / minimist / test / </span><span class="file_name">dash.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/node_modules/mkdirp/node_modules/minimist/test/short.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / node_modules / mkdirp / node_modules / minimist / test / </span><span class="file_name">short.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/node_modules/mkdirp/node_modules/minimist/test/default_bool.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / node_modules / mkdirp / node_modules / minimist / test / </span><span class="file_name">default_bool.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/node_modules/mkdirp/node_modules/minimist/test/parse.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / node_modules / mkdirp / node_modules / minimist / test / </span><span class="file_name">parse.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/node_modules/mkdirp/node_modules/minimist/test/whitespace.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / node_modules / mkdirp / node_modules / minimist / test / </span><span class="file_name">whitespace.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/node_modules/mkdirp/node_modules/minimist/test/long.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / node_modules / mkdirp / node_modules / minimist / test / </span><span class="file_name">long.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/node_modules/mkdirp/node_modules/minimist/test/dotted.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / node_modules / mkdirp / node_modules / minimist / test / </span><span class="file_name">dotted.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/node_modules/mkdirp/node_modules/minimist/index.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / node_modules / mkdirp / node_modules / minimist / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/node_modules/mkdirp/node_modules/minimist/example/parse.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / node_modules / mkdirp / node_modules / minimist / example / </span><span class="file_name">parse.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/node_modules/mkdirp/examples/pow.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / node_modules / mkdirp / examples / </span><span class="file_name">pow.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/node_modules/mkdirp/bin/cmd.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / node_modules / mkdirp / bin / </span><span class="file_name">cmd.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/lib/jade.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / lib / </span><span class="file_name">jade.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/lib/filters.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / lib / </span><span class="file_name">filters.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/lib/compiler.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / lib / </span><span class="file_name">compiler.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/lib/doctypes.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / lib / </span><span class="file_name">doctypes.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/lib/runtime.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / lib / </span><span class="file_name">runtime.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/lib/parser.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / lib / </span><span class="file_name">parser.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/lib/utils.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / lib / </span><span class="file_name">utils.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/lib/lexer.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / lib / </span><span class="file_name">lexer.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/lib/inline-tags.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / lib / </span><span class="file_name">inline-tags.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/lib/nodes/tag.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / lib / nodes / </span><span class="file_name">tag.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/lib/nodes/mixin.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / lib / nodes / </span><span class="file_name">mixin.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/lib/nodes/index.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / lib / nodes / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/lib/nodes/filter.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / lib / nodes / </span><span class="file_name">filter.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/lib/nodes/block-comment.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / lib / nodes / </span><span class="file_name">block-comment.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/lib/nodes/comment.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / lib / nodes / </span><span class="file_name">comment.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/lib/nodes/node.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / lib / nodes / </span><span class="file_name">node.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/lib/nodes/case.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / lib / nodes / </span><span class="file_name">case.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/lib/nodes/literal.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / lib / nodes / </span><span class="file_name">literal.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/lib/nodes/doctype.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / lib / nodes / </span><span class="file_name">doctype.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/lib/nodes/each.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / lib / nodes / </span><span class="file_name">each.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/lib/nodes/block.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / lib / nodes / </span><span class="file_name">block.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/lib/nodes/code.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / lib / nodes / </span><span class="file_name">code.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/lib/nodes/text.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / lib / nodes / </span><span class="file_name">text.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/lib/self-closing.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / lib / </span><span class="file_name">self-closing.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/testing/index.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / testing / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/jade/runtime.min.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / jade / </span><span class="file_name">runtime.min.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/underscore/underscore-min.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / underscore / </span><span class="file_name">underscore-min.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/underscore/index.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / underscore / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/underscore/underscore.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / underscore / </span><span class="file_name">underscore.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/walk/walk.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / walk / </span><span class="file_name">walk.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/walk/node-type-emitter.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / walk / </span><span class="file_name">node-type-emitter.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/walk/walk-async-only.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / walk / </span><span class="file_name">walk-async-only.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/walk/node_modules/forEachAsync/forEachAsync.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / walk / node_modules / forEachAsync / </span><span class="file_name">forEachAsync.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/walk/node_modules/forEachAsync/test.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / walk / node_modules / forEachAsync / </span><span class="file_name">test.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/coffee-script/register.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / coffee-script / </span><span class="file_name">register.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/coffee-script/node_modules/mkdirp/test/return_sync.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / coffee-script / node_modules / mkdirp / test / </span><span class="file_name">return_sync.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/coffee-script/node_modules/mkdirp/test/return.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / coffee-script / node_modules / mkdirp / test / </span><span class="file_name">return.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/coffee-script/node_modules/mkdirp/test/sync.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / coffee-script / node_modules / mkdirp / test / </span><span class="file_name">sync.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/coffee-script/node_modules/mkdirp/test/mkdirp.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / coffee-script / node_modules / mkdirp / test / </span><span class="file_name">mkdirp.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/coffee-script/node_modules/mkdirp/test/clobber.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / coffee-script / node_modules / mkdirp / test / </span><span class="file_name">clobber.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/coffee-script/node_modules/mkdirp/test/root.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / coffee-script / node_modules / mkdirp / test / </span><span class="file_name">root.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/coffee-script/node_modules/mkdirp/test/umask.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / coffee-script / node_modules / mkdirp / test / </span><span class="file_name">umask.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/coffee-script/node_modules/mkdirp/test/perm_sync.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / coffee-script / node_modules / mkdirp / test / </span><span class="file_name">perm_sync.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/coffee-script/node_modules/mkdirp/test/umask_sync.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / coffee-script / node_modules / mkdirp / test / </span><span class="file_name">umask_sync.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/coffee-script/node_modules/mkdirp/test/rel.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / coffee-script / node_modules / mkdirp / test / </span><span class="file_name">rel.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/coffee-script/node_modules/mkdirp/test/race.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / coffee-script / node_modules / mkdirp / test / </span><span class="file_name">race.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/coffee-script/node_modules/mkdirp/test/chmod.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / coffee-script / node_modules / mkdirp / test / </span><span class="file_name">chmod.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/coffee-script/node_modules/mkdirp/test/perm.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / coffee-script / node_modules / mkdirp / test / </span><span class="file_name">perm.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/coffee-script/node_modules/mkdirp/index.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / coffee-script / node_modules / mkdirp / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/coffee-script/node_modules/mkdirp/examples/pow.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / coffee-script / node_modules / mkdirp / examples / </span><span class="file_name">pow.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/coffee-script/lib/coffee-script/command.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / coffee-script / lib / coffee-script / </span><span class="file_name">command.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/coffee-script/lib/coffee-script/sourcemap.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / coffee-script / lib / coffee-script / </span><span class="file_name">sourcemap.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/coffee-script/lib/coffee-script/register.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / coffee-script / lib / coffee-script / </span><span class="file_name">register.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/coffee-script/lib/coffee-script/index.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / coffee-script / lib / coffee-script / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/coffee-script/lib/coffee-script/grammar.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / coffee-script / lib / coffee-script / </span><span class="file_name">grammar.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/coffee-script/lib/coffee-script/scope.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / coffee-script / lib / coffee-script / </span><span class="file_name">scope.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/coffee-script/lib/coffee-script/helpers.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / coffee-script / lib / coffee-script / </span><span class="file_name">helpers.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/coffee-script/lib/coffee-script/rewriter.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / coffee-script / lib / coffee-script / </span><span class="file_name">rewriter.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/coffee-script/lib/coffee-script/nodes.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / coffee-script / lib / coffee-script / </span><span class="file_name">nodes.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/coffee-script/lib/coffee-script/parser.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / coffee-script / lib / coffee-script / </span><span class="file_name">parser.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/coffee-script/lib/coffee-script/optparse.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / coffee-script / lib / coffee-script / </span><span class="file_name">optparse.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/coffee-script/lib/coffee-script/browser.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / coffee-script / lib / coffee-script / </span><span class="file_name">browser.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/coffee-script/lib/coffee-script/lexer.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / coffee-script / lib / coffee-script / </span><span class="file_name">lexer.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/coffee-script/lib/coffee-script/coffee-script.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / coffee-script / lib / coffee-script / </span><span class="file_name">coffee-script.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/coffee-script/lib/coffee-script/repl.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / coffee-script / lib / coffee-script / </span><span class="file_name">repl.js</span></a><a href="../../.././node_modules/docco-husky/node_modules/coffee-script/lib/coffee-script/cake.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / node_modules / coffee-script / lib / coffee-script / </span><span class="file_name">cake.js</span></a><a href="../../.././node_modules/docco-husky/lib/docco.js.html" class="source "><span class="base_path">. / node_modules / docco-husky / lib / </span><span class="file_name">docco.js</span></a><a href="../../.././node_modules/docco-husky/src/docco.coffee.html" class="source "><span class="base_path">. / node_modules / docco-husky / src / </span><span class="file_name">docco.coffee</span></a><a href="../../.././node_modules/mongodb/index.js.html" class="source "><span class="base_path">. / node_modules / mongodb / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/mongodb/node_modules/readable-stream/passthrough.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / readable-stream / </span><span class="file_name">passthrough.js</span></a><a href="../../.././node_modules/mongodb/node_modules/readable-stream/writable.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / readable-stream / </span><span class="file_name">writable.js</span></a><a href="../../.././node_modules/mongodb/node_modules/readable-stream/node_modules/isarray/index.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / readable-stream / node_modules / isarray / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/mongodb/node_modules/readable-stream/node_modules/isarray/build/build.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / readable-stream / node_modules / isarray / build / </span><span class="file_name">build.js</span></a><a href="../../.././node_modules/mongodb/node_modules/readable-stream/node_modules/core-util-is/util.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / readable-stream / node_modules / core-util-is / </span><span class="file_name">util.js</span></a><a href="../../.././node_modules/mongodb/node_modules/readable-stream/node_modules/core-util-is/lib/util.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / readable-stream / node_modules / core-util-is / lib / </span><span class="file_name">util.js</span></a><a href="../../.././node_modules/mongodb/node_modules/readable-stream/node_modules/string_decoder/index.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / readable-stream / node_modules / string_decoder / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/mongodb/node_modules/readable-stream/node_modules/inherits/inherits_browser.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / readable-stream / node_modules / inherits / </span><span class="file_name">inherits_browser.js</span></a><a href="../../.././node_modules/mongodb/node_modules/readable-stream/node_modules/inherits/inherits.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / readable-stream / node_modules / inherits / </span><span class="file_name">inherits.js</span></a><a href="../../.././node_modules/mongodb/node_modules/readable-stream/node_modules/inherits/test.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / readable-stream / node_modules / inherits / </span><span class="file_name">test.js</span></a><a href="../../.././node_modules/mongodb/node_modules/readable-stream/readable.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / readable-stream / </span><span class="file_name">readable.js</span></a><a href="../../.././node_modules/mongodb/node_modules/readable-stream/lib/_stream_duplex.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / readable-stream / lib / </span><span class="file_name">_stream_duplex.js</span></a><a href="../../.././node_modules/mongodb/node_modules/readable-stream/lib/_stream_readable.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / readable-stream / lib / </span><span class="file_name">_stream_readable.js</span></a><a href="../../.././node_modules/mongodb/node_modules/readable-stream/lib/_stream_writable.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / readable-stream / lib / </span><span class="file_name">_stream_writable.js</span></a><a href="../../.././node_modules/mongodb/node_modules/readable-stream/lib/_stream_passthrough.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / readable-stream / lib / </span><span class="file_name">_stream_passthrough.js</span></a><a href="../../.././node_modules/mongodb/node_modules/readable-stream/lib/_stream_transform.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / readable-stream / lib / </span><span class="file_name">_stream_transform.js</span></a><a href="../../.././node_modules/mongodb/node_modules/readable-stream/transform.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / readable-stream / </span><span class="file_name">transform.js</span></a><a href="../../.././node_modules/mongodb/node_modules/readable-stream/duplex.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / readable-stream / </span><span class="file_name">duplex.js</span></a><a href="../../.././node_modules/mongodb/node_modules/kerberos/test/win32/security_buffer_descriptor_tests.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / kerberos / test / win32 / </span><span class="file_name">security_buffer_descriptor_tests.js</span></a><a href="../../.././node_modules/mongodb/node_modules/kerberos/test/win32/security_buffer_tests.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / kerberos / test / win32 / </span><span class="file_name">security_buffer_tests.js</span></a><a href="../../.././node_modules/mongodb/node_modules/kerberos/test/win32/security_credentials_tests.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / kerberos / test / win32 / </span><span class="file_name">security_credentials_tests.js</span></a><a href="../../.././node_modules/mongodb/node_modules/kerberos/test/kerberos_win32_test.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / kerberos / test / </span><span class="file_name">kerberos_win32_test.js</span></a><a href="../../.././node_modules/mongodb/node_modules/kerberos/test/kerberos_tests.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / kerberos / test / </span><span class="file_name">kerberos_tests.js</span></a><a href="../../.././node_modules/mongodb/node_modules/kerberos/index.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / kerberos / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/mongodb/node_modules/kerberos/lib/kerberos.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / kerberos / lib / </span><span class="file_name">kerberos.js</span></a><a href="../../.././node_modules/mongodb/node_modules/kerberos/lib/win32/wrappers/security_context.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / kerberos / lib / win32 / wrappers / </span><span class="file_name">security_context.js</span></a><a href="../../.././node_modules/mongodb/node_modules/kerberos/lib/win32/wrappers/security_buffer.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / kerberos / lib / win32 / wrappers / </span><span class="file_name">security_buffer.js</span></a><a href="../../.././node_modules/mongodb/node_modules/kerberos/lib/win32/wrappers/security_credentials.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / kerberos / lib / win32 / wrappers / </span><span class="file_name">security_credentials.js</span></a><a href="../../.././node_modules/mongodb/node_modules/kerberos/lib/win32/wrappers/security_buffer_descriptor.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / kerberos / lib / win32 / wrappers / </span><span class="file_name">security_buffer_descriptor.js</span></a><a href="../../.././node_modules/mongodb/node_modules/kerberos/lib/auth_processes/mongodb.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / kerberos / lib / auth_processes / </span><span class="file_name">mongodb.js</span></a><a href="../../.././node_modules/mongodb/node_modules/kerberos/lib/sspi.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / kerberos / lib / </span><span class="file_name">sspi.js</span></a><a href="../../.././node_modules/mongodb/node_modules/bson/build_browser.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / bson / </span><span class="file_name">build_browser.js</span></a><a href="../../.././node_modules/mongodb/node_modules/bson/ext/index.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / bson / ext / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/mongodb/node_modules/bson/tools/jasmine-1.1.0/jasmine-html.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / bson / tools / jasmine-1.1.0 / </span><span class="file_name">jasmine-html.js</span></a><a href="../../.././node_modules/mongodb/node_modules/bson/tools/jasmine-1.1.0/jasmine.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / bson / tools / jasmine-1.1.0 / </span><span class="file_name">jasmine.js</span></a><a href="../../.././node_modules/mongodb/node_modules/bson/tools/gleak.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / bson / tools / </span><span class="file_name">gleak.js</span></a><a href="../../.././node_modules/mongodb/node_modules/bson/node_modules/nan/include_dirs.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / bson / node_modules / nan / </span><span class="file_name">include_dirs.js</span></a><a href="../../.././node_modules/mongodb/node_modules/bson/browser_build/bson.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / bson / browser_build / </span><span class="file_name">bson.js</span></a><a href="../../.././node_modules/mongodb/node_modules/bson/lib/bson/timestamp.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / bson / lib / bson / </span><span class="file_name">timestamp.js</span></a><a href="../../.././node_modules/mongodb/node_modules/bson/lib/bson/double.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / bson / lib / bson / </span><span class="file_name">double.js</span></a><a href="../../.././node_modules/mongodb/node_modules/bson/lib/bson/bson_new.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / bson / lib / bson / </span><span class="file_name">bson_new.js</span></a><a href="../../.././node_modules/mongodb/node_modules/bson/lib/bson/index.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / bson / lib / bson / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/mongodb/node_modules/bson/lib/bson/float_parser.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / bson / lib / bson / </span><span class="file_name">float_parser.js</span></a><a href="../../.././node_modules/mongodb/node_modules/bson/lib/bson/db_ref.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / bson / lib / bson / </span><span class="file_name">db_ref.js</span></a><a href="../../.././node_modules/mongodb/node_modules/bson/lib/bson/max_key.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / bson / lib / bson / </span><span class="file_name">max_key.js</span></a><a href="../../.././node_modules/mongodb/node_modules/bson/lib/bson/objectid.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / bson / lib / bson / </span><span class="file_name">objectid.js</span></a><a href="../../.././node_modules/mongodb/node_modules/bson/lib/bson/bson.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / bson / lib / bson / </span><span class="file_name">bson.js</span></a><a href="../../.././node_modules/mongodb/node_modules/bson/lib/bson/min_key.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / bson / lib / bson / </span><span class="file_name">min_key.js</span></a><a href="../../.././node_modules/mongodb/node_modules/bson/lib/bson/binary.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / bson / lib / bson / </span><span class="file_name">binary.js</span></a><a href="../../.././node_modules/mongodb/node_modules/bson/lib/bson/binary_parser.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / bson / lib / bson / </span><span class="file_name">binary_parser.js</span></a><a href="../../.././node_modules/mongodb/node_modules/bson/lib/bson/long.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / bson / lib / bson / </span><span class="file_name">long.js</span></a><a href="../../.././node_modules/mongodb/node_modules/bson/lib/bson/code.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / bson / lib / bson / </span><span class="file_name">code.js</span></a><a href="../../.././node_modules/mongodb/node_modules/bson/lib/bson/symbol.js.html" class="source "><span class="base_path">. / node_modules / mongodb / node_modules / bson / lib / bson / </span><span class="file_name">symbol.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/mongo_client.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / </span><span class="file_name">mongo_client.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/responses/mongo_reply.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / responses / </span><span class="file_name">mongo_reply.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/gridfs/chunk.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / gridfs / </span><span class="file_name">chunk.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/gridfs/gridstore.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / gridfs / </span><span class="file_name">gridstore.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/gridfs/grid.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / gridfs / </span><span class="file_name">grid.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/gridfs/readstream.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / gridfs / </span><span class="file_name">readstream.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/collection/batch/ordered.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / collection / batch / </span><span class="file_name">ordered.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/collection/batch/common.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / collection / batch / </span><span class="file_name">common.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/collection/batch/unordered.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / collection / batch / </span><span class="file_name">unordered.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/collection/index.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / collection / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/collection/commands.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / collection / </span><span class="file_name">commands.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/collection/core.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / collection / </span><span class="file_name">core.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/collection/aggregation.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / collection / </span><span class="file_name">aggregation.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/collection/query.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / collection / </span><span class="file_name">query.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/collection/geo.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / collection / </span><span class="file_name">geo.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/collection/shared.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / collection / </span><span class="file_name">shared.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/index.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/collection.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / </span><span class="file_name">collection.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/aggregation_cursor.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / </span><span class="file_name">aggregation_cursor.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/scope.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / </span><span class="file_name">scope.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/auth/mongodb_sspi.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / auth / </span><span class="file_name">mongodb_sspi.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/auth/mongodb_cr.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / auth / </span><span class="file_name">mongodb_cr.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/auth/mongodb_x509.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / auth / </span><span class="file_name">mongodb_x509.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/auth/mongodb_plain.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / auth / </span><span class="file_name">mongodb_plain.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/auth/mongodb_gssapi.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / auth / </span><span class="file_name">mongodb_gssapi.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/command_cursor.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / </span><span class="file_name">command_cursor.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/cursorstream.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / </span><span class="file_name">cursorstream.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/utils.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / </span><span class="file_name">utils.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/connection/connection_utils.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / connection / </span><span class="file_name">connection_utils.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/connection/url_parser.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / connection / </span><span class="file_name">url_parser.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/connection/server_capabilities.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / connection / </span><span class="file_name">server_capabilities.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/connection/connection.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / connection / </span><span class="file_name">connection.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/connection/read_preference.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / connection / </span><span class="file_name">read_preference.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/connection/base.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / connection / </span><span class="file_name">base.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/connection/connection_pool.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / connection / </span><span class="file_name">connection_pool.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/connection/mongos.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / connection / </span><span class="file_name">mongos.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/connection/server.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / connection / </span><span class="file_name">server.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/connection/repl_set/ha.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / connection / repl_set / </span><span class="file_name">ha.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/connection/repl_set/repl_set.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / connection / repl_set / </span><span class="file_name">repl_set.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/connection/repl_set/strategies/ping_strategy.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / connection / repl_set / strategies / </span><span class="file_name">ping_strategy.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/connection/repl_set/strategies/statistics_strategy.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / connection / repl_set / strategies / </span><span class="file_name">statistics_strategy.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/connection/repl_set/options.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / connection / repl_set / </span><span class="file_name">options.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/connection/repl_set/repl_set_state.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / connection / repl_set / </span><span class="file_name">repl_set_state.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/cursor.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / </span><span class="file_name">cursor.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/commands/insert_command.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / commands / </span><span class="file_name">insert_command.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/commands/kill_cursor_command.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / commands / </span><span class="file_name">kill_cursor_command.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/commands/delete_command.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / commands / </span><span class="file_name">delete_command.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/commands/get_more_command.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / commands / </span><span class="file_name">get_more_command.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/commands/update_command.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / commands / </span><span class="file_name">update_command.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/commands/query_command.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / commands / </span><span class="file_name">query_command.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/commands/base_command.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / commands / </span><span class="file_name">base_command.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/commands/db_command.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / commands / </span><span class="file_name">db_command.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/admin.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / </span><span class="file_name">admin.js</span></a><a href="../../.././node_modules/mongodb/lib/mongodb/db.js.html" class="source "><span class="base_path">. / node_modules / mongodb / lib / mongodb / </span><span class="file_name">db.js</span></a><a href="../../.././node_modules/topojson/test/filter-test.js.html" class="source "><span class="base_path">. / node_modules / topojson / test / </span><span class="file_name">filter-test.js</span></a><a href="../../.././node_modules/topojson/test/assert.js.html" class="source "><span class="base_path">. / node_modules / topojson / test / </span><span class="file_name">assert.js</span></a><a href="../../.././node_modules/topojson/test/topology-test.js.html" class="source "><span class="base_path">. / node_modules / topojson / test / </span><span class="file_name">topology-test.js</span></a><a href="../../.././node_modules/topojson/test/hashtable-test.js.html" class="source "><span class="base_path">. / node_modules / topojson / test / </span><span class="file_name">hashtable-test.js</span></a><a href="../../.././node_modules/topojson/test/hash-test.js.html" class="source "><span class="base_path">. / node_modules / topojson / test / </span><span class="file_name">hash-test.js</span></a><a href="../../.././node_modules/topojson/test/feature-test.js.html" class="source "><span class="base_path">. / node_modules / topojson / test / </span><span class="file_name">feature-test.js</span></a><a href="../../.././node_modules/topojson/test/bind-test.js.html" class="source "><span class="base_path">. / node_modules / topojson / test / </span><span class="file_name">bind-test.js</span></a><a href="../../.././node_modules/topojson/test/neighbors-test.js.html" class="source "><span class="base_path">. / node_modules / topojson / test / </span><span class="file_name">neighbors-test.js</span></a><a href="../../.././node_modules/topojson/test/spherical-ringArea-test.js.html" class="source "><span class="base_path">. / node_modules / topojson / test / </span><span class="file_name">spherical-ringArea-test.js</span></a><a href="../../.././node_modules/topojson/index.js.html" class="source "><span class="base_path">. / node_modules / topojson / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/topojson/node_modules/dsv/dsv.min.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / dsv / </span><span class="file_name">dsv.min.js</span></a><a href="../../.././node_modules/topojson/node_modules/dsv/test/tsv-test.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / dsv / test / </span><span class="file_name">tsv-test.js</span></a><a href="../../.././node_modules/topojson/node_modules/dsv/test/csv-test.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / dsv / test / </span><span class="file_name">csv-test.js</span></a><a href="../../.././node_modules/topojson/node_modules/dsv/index.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / dsv / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/topojson/node_modules/dsv/dsv.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / dsv / </span><span class="file_name">dsv.js</span></a><a href="../../.././node_modules/topojson/node_modules/shapefile/dbf.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / shapefile / </span><span class="file_name">dbf.js</span></a><a href="../../.././node_modules/topojson/node_modules/shapefile/test/dbf-test.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / shapefile / test / </span><span class="file_name">dbf-test.js</span></a><a href="../../.././node_modules/topojson/node_modules/shapefile/test/index-test.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / shapefile / test / </span><span class="file_name">index-test.js</span></a><a href="../../.././node_modules/topojson/node_modules/shapefile/test/shp-test.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / shapefile / test / </span><span class="file_name">shp-test.js</span></a><a href="../../.././node_modules/topojson/node_modules/shapefile/shp.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / shapefile / </span><span class="file_name">shp.js</span></a><a href="../../.././node_modules/topojson/node_modules/shapefile/file.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / shapefile / </span><span class="file_name">file.js</span></a><a href="../../.././node_modules/topojson/node_modules/shapefile/index.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / shapefile / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/topojson/node_modules/shapefile/node_modules/iconv-lite/test/greek-test.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / shapefile / node_modules / iconv-lite / test / </span><span class="file_name">greek-test.js</span></a><a href="../../.././node_modules/topojson/node_modules/shapefile/node_modules/iconv-lite/test/main-test.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / shapefile / node_modules / iconv-lite / test / </span><span class="file_name">main-test.js</span></a><a href="../../.././node_modules/topojson/node_modules/shapefile/node_modules/iconv-lite/test/cyrillic-test.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / shapefile / node_modules / iconv-lite / test / </span><span class="file_name">cyrillic-test.js</span></a><a href="../../.././node_modules/topojson/node_modules/shapefile/node_modules/iconv-lite/test/gbk-test.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / shapefile / node_modules / iconv-lite / test / </span><span class="file_name">gbk-test.js</span></a><a href="../../.././node_modules/topojson/node_modules/shapefile/node_modules/iconv-lite/test/big5-test.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / shapefile / node_modules / iconv-lite / test / </span><span class="file_name">big5-test.js</span></a><a href="../../.././node_modules/topojson/node_modules/shapefile/node_modules/iconv-lite/test/performance.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / shapefile / node_modules / iconv-lite / test / </span><span class="file_name">performance.js</span></a><a href="../../.././node_modules/topojson/node_modules/shapefile/node_modules/iconv-lite/test/turkish-test.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / shapefile / node_modules / iconv-lite / test / </span><span class="file_name">turkish-test.js</span></a><a href="../../.././node_modules/topojson/node_modules/shapefile/node_modules/iconv-lite/encodings/big5.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / shapefile / node_modules / iconv-lite / encodings / </span><span class="file_name">big5.js</span></a><a href="../../.././node_modules/topojson/node_modules/shapefile/node_modules/iconv-lite/encodings/table/big5.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / shapefile / node_modules / iconv-lite / encodings / table / </span><span class="file_name">big5.js</span></a><a href="../../.././node_modules/topojson/node_modules/shapefile/node_modules/iconv-lite/encodings/table/gbk.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / shapefile / node_modules / iconv-lite / encodings / table / </span><span class="file_name">gbk.js</span></a><a href="../../.././node_modules/topojson/node_modules/shapefile/node_modules/iconv-lite/encodings/singlebyte.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / shapefile / node_modules / iconv-lite / encodings / </span><span class="file_name">singlebyte.js</span></a><a href="../../.././node_modules/topojson/node_modules/shapefile/node_modules/iconv-lite/encodings/gbk.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / shapefile / node_modules / iconv-lite / encodings / </span><span class="file_name">gbk.js</span></a><a href="../../.././node_modules/topojson/node_modules/shapefile/node_modules/iconv-lite/index.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / shapefile / node_modules / iconv-lite / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/topojson/node_modules/shapefile/node_modules/iconv-lite/generation/generate-singlebyte.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / shapefile / node_modules / iconv-lite / generation / </span><span class="file_name">generate-singlebyte.js</span></a><a href="../../.././node_modules/topojson/node_modules/shapefile/node_modules/iconv-lite/generation/generate-big5-table.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / shapefile / node_modules / iconv-lite / generation / </span><span class="file_name">generate-big5-table.js</span></a><a href="../../.././node_modules/topojson/node_modules/shapefile/list.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / shapefile / </span><span class="file_name">list.js</span></a><a href="../../.././node_modules/topojson/node_modules/optimist/test/usage.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / optimist / test / </span><span class="file_name">usage.js</span></a><a href="../../.././node_modules/topojson/node_modules/optimist/test/_.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / optimist / test / </span><span class="file_name">_.js</span></a><a href="../../.././node_modules/topojson/node_modules/optimist/test/parse.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / optimist / test / </span><span class="file_name">parse.js</span></a><a href="../../.././node_modules/topojson/node_modules/optimist/test/_/bin.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / optimist / test / _ / </span><span class="file_name">bin.js</span></a><a href="../../.././node_modules/topojson/node_modules/optimist/test/_/argv.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / optimist / test / _ / </span><span class="file_name">argv.js</span></a><a href="../../.././node_modules/topojson/node_modules/optimist/index.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / optimist / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/topojson/node_modules/optimist/node_modules/wordwrap/test/wrap.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / optimist / node_modules / wordwrap / test / </span><span class="file_name">wrap.js</span></a><a href="../../.././node_modules/topojson/node_modules/optimist/node_modules/wordwrap/test/break.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / optimist / node_modules / wordwrap / test / </span><span class="file_name">break.js</span></a><a href="../../.././node_modules/topojson/node_modules/optimist/node_modules/wordwrap/index.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / optimist / node_modules / wordwrap / </span><span class="file_name">index.js</span></a><a href="../../.././node_modules/topojson/node_modules/optimist/node_modules/wordwrap/example/center.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / optimist / node_modules / wordwrap / example / </span><span class="file_name">center.js</span></a><a href="../../.././node_modules/topojson/node_modules/optimist/node_modules/wordwrap/example/meat.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / optimist / node_modules / wordwrap / example / </span><span class="file_name">meat.js</span></a><a href="../../.././node_modules/topojson/node_modules/optimist/example/xup.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / optimist / example / </span><span class="file_name">xup.js</span></a><a href="../../.././node_modules/topojson/node_modules/optimist/example/string.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / optimist / example / </span><span class="file_name">string.js</span></a><a href="../../.././node_modules/topojson/node_modules/optimist/example/line_count.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / optimist / example / </span><span class="file_name">line_count.js</span></a><a href="../../.././node_modules/topojson/node_modules/optimist/example/usage-options.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / optimist / example / </span><span class="file_name">usage-options.js</span></a><a href="../../.././node_modules/topojson/node_modules/optimist/example/divide.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / optimist / example / </span><span class="file_name">divide.js</span></a><a href="../../.././node_modules/topojson/node_modules/optimist/example/bool.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / optimist / example / </span><span class="file_name">bool.js</span></a><a href="../../.././node_modules/topojson/node_modules/optimist/example/default_hash.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / optimist / example / </span><span class="file_name">default_hash.js</span></a><a href="../../.././node_modules/topojson/node_modules/optimist/example/short.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / optimist / example / </span><span class="file_name">short.js</span></a><a href="../../.././node_modules/topojson/node_modules/optimist/example/line_count_options.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / optimist / example / </span><span class="file_name">line_count_options.js</span></a><a href="../../.././node_modules/topojson/node_modules/optimist/example/default_singles.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / optimist / example / </span><span class="file_name">default_singles.js</span></a><a href="../../.././node_modules/topojson/node_modules/optimist/example/line_count_wrap.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / optimist / example / </span><span class="file_name">line_count_wrap.js</span></a><a href="../../.././node_modules/topojson/node_modules/optimist/example/reflect.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / optimist / example / </span><span class="file_name">reflect.js</span></a><a href="../../.././node_modules/topojson/node_modules/optimist/example/nonopt.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / optimist / example / </span><span class="file_name">nonopt.js</span></a><a href="../../.././node_modules/topojson/node_modules/optimist/example/boolean_double.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / optimist / example / </span><span class="file_name">boolean_double.js</span></a><a href="../../.././node_modules/topojson/node_modules/optimist/example/boolean_single.js.html" class="source "><span class="base_path">. / node_modules / topojson / node_modules / optimist / example / </span><span class="file_name">boolean_single.js</span></a><a href="../../.././node_modules/topojson/lib/topojson/clockwise.js.html" class="source "><span class="base_path">. / node_modules / topojson / lib / topojson / </span><span class="file_name">clockwise.js</span></a><a href="../../.././node_modules/topojson/lib/topojson/stitch-poles.js.html" class="source "><span class="base_path">. / node_modules / topojson / lib / topojson / </span><span class="file_name">stitch-poles.js</span></a><a href="../../.././node_modules/topojson/lib/topojson/topology.js.html" class="source "><span class="base_path">. / node_modules / topojson / lib / topojson / </span><span class="file_name">topology.js</span></a><a href="../../.././node_modules/topojson/lib/topojson/hash.js.html" class="source "><span class="base_path">. / node_modules / topojson / lib / topojson / </span><span class="file_name">hash.js</span></a><a href="../../.././node_modules/topojson/lib/topojson/coordinate-systems.js.html" class="source "><span class="base_path">. / node_modules / topojson / lib / topojson / </span><span class="file_name">coordinate-systems.js</span></a><a href="../../.././node_modules/topojson/lib/topojson/filter.js.html" class="source "><span class="base_path">. / node_modules / topojson / lib / topojson / </span><span class="file_name">filter.js</span></a><a href="../../.././node_modules/topojson/lib/topojson/prune.js.html" class="source "><span class="base_path">. / node_modules / topojson / lib / topojson / </span><span class="file_name">prune.js</span></a><a href="../../.././node_modules/topojson/lib/topojson/simplify.js.html" class="source "><span class="base_path">. / node_modules / topojson / lib / topojson / </span><span class="file_name">simplify.js</span></a><a href="../../.././node_modules/topojson/lib/topojson/spherical.js.html" class="source "><span class="base_path">. / node_modules / topojson / lib / topojson / </span><span class="file_name">spherical.js</span></a><a href="../../.././node_modules/topojson/lib/topojson/cartesian.js.html" class="source "><span class="base_path">. / node_modules / topojson / lib / topojson / </span><span class="file_name">cartesian.js</span></a><a href="../../.././node_modules/topojson/lib/topojson/type.js.html" class="source "><span class="base_path">. / node_modules / topojson / lib / topojson / </span><span class="file_name">type.js</span></a><a href="../../.././node_modules/topojson/lib/topojson/hashtable.js.html" class="source "><span class="base_path">. / node_modules / topojson / lib / topojson / </span><span class="file_name">hashtable.js</span></a><a href="../../.././node_modules/topojson/lib/topojson/bind.js.html" class="source "><span class="base_path">. / node_modules / topojson / lib / topojson / </span><span class="file_name">bind.js</span></a><a href="../../.././node_modules/topojson/lib/topojson/min-heap.js.html" class="source "><span class="base_path">. / node_modules / topojson / lib / topojson / </span><span class="file_name">min-heap.js</span></a><a href="../../.././node_modules/topojson/src/package.js.html" class="source "><span class="base_path">. / node_modules / topojson / src / </span><span class="file_name">package.js</span></a><a href="../../.././node_modules/topojson/src/component.js.html" class="source "><span class="base_path">. / node_modules / topojson / src / </span><span class="file_name">component.js</span></a><a href="../../.././node_modules/topojson/topojson.js.html" class="source "><span class="base_path">. / node_modules / topojson / </span><span class="file_name">topojson.js</span></a><a href="../../.././node_modules/numeric/numeric-1.2.6.min.js.html" class="source "><span class="base_path">. / node_modules / numeric / </span><span class="file_name">numeric-1.2.6.min.js</span></a><a href="../../.././node_modules/numeric/numeric-1.2.6.js.html" class="source "><span class="base_path">. / node_modules / numeric / </span><span class="file_name">numeric-1.2.6.js</span></a><a href="../../.././node_modules/queue-async/queue.js.html" class="source "><span class="base_path">. / node_modules / queue-async / </span><span class="file_name">queue.js</span></a><a href="../../.././node_modules/queue-async/queue.min.js.html" class="source "><span class="base_path">. / node_modules / queue-async / </span><span class="file_name">queue.min.js</span></a><a href="../../.././public/app/colors.js.html" class="source "><span class="base_path">. / public / app / </span><span class="file_name">colors.js</span></a><a href="../../.././public/app/colorRamp.js.html" class="source "><span class="base_path">. / public / app / </span><span class="file_name">colorRamp.js</span></a><a href="../../.././public/app/index.js.html" class="source "><span class="base_path">. / public / app / </span><span class="file_name">index.js</span></a><a href="../../.././public/app/planet/d3.geo.zoom.js.html" class="source "><span class="base_path">. / public / app / planet / </span><span class="file_name">d3.geo.zoom.js</span></a><a href="../../.././public/app/planet/planetary.js.html" class="source "><span class="base_path">. / public / app / planet / </span><span class="file_name">planetary.js</span></a><a href="../../.././public/app/planet/xco2.js.html" class="source "><span class="base_path">. / public / app / planet / </span><span class="file_name">xco2.js</span></a><a href="../../.././public/app/require.js.html" class="source "><span class="base_path">. / public / app / </span><span class="file_name">require.js</span></a><a href="../../.././public/app/utils.js.html" class="source "><span class="base_path">. / public / app / </span><span class="file_name">utils.js</span></a><a href="../../.././public/app/statesBreathing.js.html" class="source "><span class="base_path">. / public / app / </span><span class="file_name">statesBreathing.js</span></a><a href="../../../api/grid.js.html" class="source "><span class="base_path">api / </span><span class="file_name">grid.js</span></a><a href="../../../api/scenario.js.html" class="source "><span class="base_path">api / </span><span class="file_name">scenario.js</span></a><a href="../../../api/stats.js.html" class="source "><span class="base_path">api / </span><span class="file_name">stats.js</span></a><a href="../../../api/t.js.html" class="source "><span class="base_path">api / </span><span class="file_name">t.js</span></a><a href="../../../api/uncertainty.js.html" class="source "><span class="base_path">api / </span><span class="file_name">uncertainty.js</span></a><a href="../../../api/xy.js.html" class="source "><span class="base_path">api / </span><span class="file_name">xy.js</span></a></div></div></div><table cellpadding="0" cellspacing="0"><thead><tr><th class="docs"><h1>d3.js</h1><div class="filepath">./node_modules/d3/</div></th><th class="code"></th></tr></thead><tbody><tr id="section-1"><td class="docs"><div class="pilwrap"><a href="#section-1" class="pilcrow">&#182;</a></div>
</td><td class="code"><div class="highlight"><pre><span class="o">!</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">d3</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">version</span><span class="o">:</span> <span class="s2">&quot;3.4.9&quot;</span>
  <span class="p">};</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">)</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">+</span><span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">d3_arraySlice</span> <span class="o">=</span> <span class="p">[].</span><span class="nx">slice</span><span class="p">,</span> <span class="nx">d3_array</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">list</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_arraySlice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">list</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">d3_document</span> <span class="o">=</span> <span class="nb">document</span><span class="p">,</span> <span class="nx">d3_documentElement</span> <span class="o">=</span> <span class="nx">d3_document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">,</span> <span class="nx">d3_window</span> <span class="o">=</span> <span class="nb">window</span><span class="p">;</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="nx">d3_array</span><span class="p">(</span><span class="nx">d3_documentElement</span><span class="p">.</span><span class="nx">childNodes</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="nx">nodeType</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">d3_array</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">list</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">list</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">array</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
      <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">list</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
      <span class="k">return</span> <span class="nx">array</span><span class="p">;</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="nx">d3_document</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="s2">&quot;div&quot;</span><span class="p">).</span><span class="nx">style</span><span class="p">.</span><span class="nx">setProperty</span><span class="p">(</span><span class="s2">&quot;opacity&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">d3_element_prototype</span> <span class="o">=</span> <span class="nx">d3_window</span><span class="p">.</span><span class="nx">Element</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="nx">d3_element_setAttribute</span> <span class="o">=</span> <span class="nx">d3_element_prototype</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">,</span> <span class="nx">d3_element_setAttributeNS</span> <span class="o">=</span> <span class="nx">d3_element_prototype</span><span class="p">.</span><span class="nx">setAttributeNS</span><span class="p">,</span> <span class="nx">d3_style_prototype</span> <span class="o">=</span> <span class="nx">d3_window</span><span class="p">.</span><span class="nx">CSSStyleDeclaration</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="nx">d3_style_setProperty</span> <span class="o">=</span> <span class="nx">d3_style_prototype</span><span class="p">.</span><span class="nx">setProperty</span><span class="p">;</span>
    <span class="nx">d3_element_prototype</span><span class="p">.</span><span class="nx">setAttribute</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">d3_element_setAttribute</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="nx">d3_element_prototype</span><span class="p">.</span><span class="nx">setAttributeNS</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">space</span><span class="p">,</span> <span class="nx">local</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">d3_element_setAttributeNS</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">space</span><span class="p">,</span> <span class="nx">local</span><span class="p">,</span> <span class="nx">value</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="nx">d3_style_prototype</span><span class="p">.</span><span class="nx">setProperty</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">priority</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">d3_style_setProperty</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="nx">priority</span><span class="p">);</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">ascending</span> <span class="o">=</span> <span class="nx">d3_ascending</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">d3_ascending</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span> <span class="o">&lt;</span> <span class="nx">b</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="nx">a</span> <span class="o">&gt;</span> <span class="nx">b</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="nx">a</span> <span class="o">&gt;=</span> <span class="nx">b</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="kc">NaN</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">descending</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">b</span> <span class="o">&lt;</span> <span class="nx">a</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="nx">b</span> <span class="o">&gt;</span> <span class="nx">a</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="nx">b</span> <span class="o">&gt;=</span> <span class="nx">a</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="kc">NaN</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">min</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">((</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span> <span class="o">&lt;=</span> <span class="nx">a</span><span class="p">))</span> <span class="nx">a</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="k">if</span> <span class="p">((</span><span class="nx">b</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span> <span class="o">&gt;</span> <span class="nx">b</span><span class="p">)</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">((</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">f</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">))</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span> <span class="o">&lt;=</span> <span class="nx">a</span><span class="p">))</span> <span class="nx">a</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="k">if</span> <span class="p">((</span><span class="nx">b</span> <span class="o">=</span> <span class="nx">f</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">))</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span> <span class="o">&gt;</span> <span class="nx">b</span><span class="p">)</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">a</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">max</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">((</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span> <span class="o">&lt;=</span> <span class="nx">a</span><span class="p">))</span> <span class="nx">a</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="k">if</span> <span class="p">((</span><span class="nx">b</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">b</span> <span class="o">&gt;</span> <span class="nx">a</span><span class="p">)</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">((</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">f</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">))</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span> <span class="o">&lt;=</span> <span class="nx">a</span><span class="p">))</span> <span class="nx">a</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="k">if</span> <span class="p">((</span><span class="nx">b</span> <span class="o">=</span> <span class="nx">f</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">))</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">b</span> <span class="o">&gt;</span> <span class="nx">a</span><span class="p">)</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">a</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">extent</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">((</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span> <span class="o">&lt;=</span> <span class="nx">a</span><span class="p">))</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">c</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="k">if</span> <span class="p">((</span><span class="nx">b</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">a</span> <span class="o">&gt;</span> <span class="nx">b</span><span class="p">)</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">c</span> <span class="o">&lt;</span> <span class="nx">b</span><span class="p">)</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">((</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">f</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">))</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span> <span class="o">&lt;=</span> <span class="nx">a</span><span class="p">))</span> <span class="nx">a</span> <span class="o">=</span> <span class="kc">undefined</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="k">if</span> <span class="p">((</span><span class="nx">b</span> <span class="o">=</span> <span class="nx">f</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">))</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">a</span> <span class="o">&gt;</span> <span class="nx">b</span><span class="p">)</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">c</span> <span class="o">&lt;</span> <span class="nx">b</span><span class="p">)</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="p">[</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">c</span> <span class="p">];</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">sum</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">a</span> <span class="o">=</span> <span class="o">+</span><span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">]))</span> <span class="nx">s</span> <span class="o">+=</span> <span class="nx">a</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">a</span> <span class="o">=</span> <span class="o">+</span><span class="nx">f</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">)))</span> <span class="nx">s</span> <span class="o">+=</span> <span class="nx">a</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">s</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_number</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">x</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">mean</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">n</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="nx">d3_number</span><span class="p">(</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">]))</span> <span class="nx">s</span> <span class="o">+=</span> <span class="nx">a</span><span class="p">;</span> <span class="k">else</span> <span class="o">--</span><span class="nx">j</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="nx">d3_number</span><span class="p">(</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">f</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">)))</span> <span class="nx">s</span> <span class="o">+=</span> <span class="nx">a</span><span class="p">;</span> <span class="k">else</span> <span class="o">--</span><span class="nx">j</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">j</span> <span class="o">?</span> <span class="nx">s</span> <span class="o">/</span> <span class="nx">j</span> <span class="o">:</span> <span class="kc">undefined</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">quantile</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">values</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">H</span> <span class="o">=</span> <span class="p">(</span><span class="nx">values</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="nx">p</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">h</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">H</span><span class="p">),</span> <span class="nx">v</span> <span class="o">=</span> <span class="o">+</span><span class="nx">values</span><span class="p">[</span><span class="nx">h</span> <span class="o">-</span> <span class="mi">1</span><span class="p">],</span> <span class="nx">e</span> <span class="o">=</span> <span class="nx">H</span> <span class="o">-</span> <span class="nx">h</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">e</span> <span class="o">?</span> <span class="nx">v</span> <span class="o">+</span> <span class="nx">e</span> <span class="o">*</span> <span class="p">(</span><span class="nx">values</span><span class="p">[</span><span class="nx">h</span><span class="p">]</span> <span class="o">-</span> <span class="nx">v</span><span class="p">)</span> <span class="o">:</span> <span class="nx">v</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">median</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="nx">array</span> <span class="o">=</span> <span class="nx">array</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">f</span><span class="p">);</span>
    <span class="nx">array</span> <span class="o">=</span> <span class="nx">array</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">d3_number</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">quantile</span><span class="p">(</span><span class="nx">array</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="nx">d3_ascending</span><span class="p">),</span> <span class="p">.</span><span class="mi">5</span><span class="p">)</span> <span class="o">:</span> <span class="kc">undefined</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_bisector</span><span class="p">(</span><span class="nx">compare</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">left</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">lo</span><span class="p">,</span> <span class="nx">hi</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="nx">lo</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">)</span> <span class="nx">hi</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">lo</span> <span class="o">&lt;</span> <span class="nx">hi</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">mid</span> <span class="o">=</span> <span class="nx">lo</span> <span class="o">+</span> <span class="nx">hi</span> <span class="o">&gt;&gt;&gt;</span> <span class="mi">1</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">compare</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">mid</span><span class="p">],</span> <span class="nx">x</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="nx">lo</span> <span class="o">=</span> <span class="nx">mid</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="k">else</span> <span class="nx">hi</span> <span class="o">=</span> <span class="nx">mid</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">lo</span><span class="p">;</span>
      <span class="p">},</span>
      <span class="nx">right</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">lo</span><span class="p">,</span> <span class="nx">hi</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="nx">lo</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">)</span> <span class="nx">hi</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">lo</span> <span class="o">&lt;</span> <span class="nx">hi</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">mid</span> <span class="o">=</span> <span class="nx">lo</span> <span class="o">+</span> <span class="nx">hi</span> <span class="o">&gt;&gt;&gt;</span> <span class="mi">1</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">compare</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">mid</span><span class="p">],</span> <span class="nx">x</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="nx">hi</span> <span class="o">=</span> <span class="nx">mid</span><span class="p">;</span> <span class="k">else</span> <span class="nx">lo</span> <span class="o">=</span> <span class="nx">mid</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">lo</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">d3_bisect</span> <span class="o">=</span> <span class="nx">d3_bisector</span><span class="p">(</span><span class="nx">d3_ascending</span><span class="p">);</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">bisectLeft</span> <span class="o">=</span> <span class="nx">d3_bisect</span><span class="p">.</span><span class="nx">left</span><span class="p">;</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">bisect</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">bisectRight</span> <span class="o">=</span> <span class="nx">d3_bisect</span><span class="p">.</span><span class="nx">right</span><span class="p">;</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">bisector</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_bisector</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">?</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_ascending</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="nx">d</span><span class="p">),</span> <span class="nx">x</span><span class="p">);</span>
    <span class="p">}</span> <span class="o">:</span> <span class="nx">f</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">shuffle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">array</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">t</span><span class="p">,</span> <span class="nx">i</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="nx">m</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">i</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">m</span><span class="o">--</span> <span class="o">|</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">t</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="nx">m</span><span class="p">],</span> <span class="nx">array</span><span class="p">[</span><span class="nx">m</span><span class="p">]</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">t</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">array</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">permute</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">indexes</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">indexes</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">permutes</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
    <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="nx">permutes</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="nx">indexes</span><span class="p">[</span><span class="nx">i</span><span class="p">]];</span>
    <span class="k">return</span> <span class="nx">permutes</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">pairs</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">array</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">p0</span><span class="p">,</span> <span class="nx">p1</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">pairs</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">n</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="nx">n</span><span class="p">);</span>
    <span class="k">while</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="nx">pairs</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">p0</span> <span class="o">=</span> <span class="nx">p1</span><span class="p">,</span> <span class="nx">p1</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="o">++</span><span class="nx">i</span><span class="p">]</span> <span class="p">];</span>
    <span class="k">return</span> <span class="nx">pairs</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">zip</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">n</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">))</span> <span class="k">return</span> <span class="p">[];</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="nx">d3_zipLength</span><span class="p">),</span> <span class="nx">zips</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">m</span><span class="p">);</span> <span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span><span class="p">,</span> <span class="nx">zip</span> <span class="o">=</span> <span class="nx">zips</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">n</span><span class="p">);</span> <span class="o">++</span><span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">zip</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="nx">j</span><span class="p">][</span><span class="nx">i</span><span class="p">];</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">zips</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_zipLength</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">transpose</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">matrix</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">zip</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">d3</span><span class="p">,</span> <span class="nx">matrix</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">keys</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">map</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">keys</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">map</span><span class="p">)</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">keys</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">values</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">map</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">values</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">map</span><span class="p">)</span> <span class="nx">values</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">map</span><span class="p">[</span><span class="nx">key</span><span class="p">]);</span>
    <span class="k">return</span> <span class="nx">values</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">entries</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">map</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">entries</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">map</span><span class="p">)</span> <span class="nx">entries</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
      <span class="nx">key</span><span class="o">:</span> <span class="nx">key</span><span class="p">,</span>
      <span class="nx">value</span><span class="o">:</span> <span class="nx">map</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span>
    <span class="p">});</span>
    <span class="k">return</span> <span class="nx">entries</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">merge</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">arrays</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">arrays</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">m</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">merged</span><span class="p">,</span> <span class="nx">array</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="nx">j</span> <span class="o">+=</span> <span class="nx">arrays</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">length</span><span class="p">;</span>
    <span class="nx">merged</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">j</span><span class="p">);</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">--</span><span class="nx">n</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">array</span> <span class="o">=</span> <span class="nx">arrays</span><span class="p">[</span><span class="nx">n</span><span class="p">];</span>
      <span class="nx">m</span> <span class="o">=</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">--</span><span class="nx">m</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">merged</span><span class="p">[</span><span class="o">--</span><span class="nx">j</span><span class="p">]</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="nx">m</span><span class="p">];</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">merged</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">abs</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">;</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">range</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">start</span><span class="p">,</span> <span class="nx">stop</span><span class="p">,</span> <span class="nx">step</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">step</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">stop</span> <span class="o">=</span> <span class="nx">start</span><span class="p">;</span>
        <span class="nx">start</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">((</span><span class="nx">stop</span> <span class="o">-</span> <span class="nx">start</span><span class="p">)</span> <span class="o">/</span> <span class="nx">step</span> <span class="o">===</span> <span class="kc">Infinity</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;infinite range&quot;</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">range</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">k</span> <span class="o">=</span> <span class="nx">d3_range_integerScale</span><span class="p">(</span><span class="nx">abs</span><span class="p">(</span><span class="nx">step</span><span class="p">)),</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">j</span><span class="p">;</span>
    <span class="nx">start</span> <span class="o">*=</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">stop</span> <span class="o">*=</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">step</span> <span class="o">*=</span> <span class="nx">k</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">step</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">while</span> <span class="p">((</span><span class="nx">j</span> <span class="o">=</span> <span class="nx">start</span> <span class="o">+</span> <span class="nx">step</span> <span class="o">*</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nx">stop</span><span class="p">)</span> <span class="nx">range</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">j</span> <span class="o">/</span> <span class="nx">k</span><span class="p">);</span> <span class="k">else</span> <span class="k">while</span> <span class="p">((</span><span class="nx">j</span> <span class="o">=</span> <span class="nx">start</span> <span class="o">+</span> <span class="nx">step</span> <span class="o">*</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="o">&lt;</span> <span class="nx">stop</span><span class="p">)</span> <span class="nx">range</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">j</span> <span class="o">/</span> <span class="nx">k</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">range</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_range_integerScale</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">k</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">k</span> <span class="o">%</span> <span class="mi">1</span><span class="p">)</span> <span class="nx">k</span> <span class="o">*=</span> <span class="mi">10</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">k</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_class</span><span class="p">(</span><span class="nx">ctor</span><span class="p">,</span> <span class="nx">properties</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">properties</span><span class="p">)</span> <span class="p">{</span>
        <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">ctor</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="p">{</span>
          <span class="nx">value</span><span class="o">:</span> <span class="nx">properties</span><span class="p">[</span><span class="nx">key</span><span class="p">],</span>
          <span class="nx">enumerable</span><span class="o">:</span> <span class="kc">false</span>
        <span class="p">});</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">ctor</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nx">properties</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">map</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">d3_Map</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">object</span> <span class="k">instanceof</span> <span class="nx">d3_Map</span><span class="p">)</span> <span class="nx">object</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">map</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
    <span class="p">});</span> <span class="k">else</span> <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">object</span><span class="p">)</span> <span class="nx">map</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">object</span><span class="p">[</span><span class="nx">key</span><span class="p">]);</span>
    <span class="k">return</span> <span class="nx">map</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_Map</span><span class="p">()</span> <span class="p">{}</span>
  <span class="nx">d3_class</span><span class="p">(</span><span class="nx">d3_Map</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">has</span><span class="o">:</span> <span class="nx">d3_map_has</span><span class="p">,</span>
    <span class="nx">get</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">[</span><span class="nx">d3_map_prefix</span> <span class="o">+</span> <span class="nx">key</span><span class="p">];</span>
    <span class="p">},</span>
    <span class="nx">set</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">[</span><span class="nx">d3_map_prefix</span> <span class="o">+</span> <span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">remove</span><span class="o">:</span> <span class="nx">d3_map_remove</span><span class="p">,</span>
    <span class="nx">keys</span><span class="o">:</span> <span class="nx">d3_map_keys</span><span class="p">,</span>
    <span class="nx">values</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">values</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">values</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
      <span class="p">});</span>
      <span class="k">return</span> <span class="nx">values</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">entries</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">entries</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">entries</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
          <span class="nx">key</span><span class="o">:</span> <span class="nx">key</span><span class="p">,</span>
          <span class="nx">value</span><span class="o">:</span> <span class="nx">value</span>
        <span class="p">});</span>
      <span class="p">});</span>
      <span class="k">return</span> <span class="nx">entries</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">size</span><span class="o">:</span> <span class="nx">d3_map_size</span><span class="p">,</span>
    <span class="nx">empty</span><span class="o">:</span> <span class="nx">d3_map_empty</span><span class="p">,</span>
    <span class="nx">forEach</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="k">this</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="nx">key</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">===</span> <span class="nx">d3_map_prefixCode</span><span class="p">)</span> <span class="nx">f</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">key</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="k">this</span><span class="p">[</span><span class="nx">key</span><span class="p">]);</span>
    <span class="p">}</span>
  <span class="p">});</span>
  <span class="kd">var</span> <span class="nx">d3_map_prefix</span> <span class="o">=</span> <span class="s2">&quot;\x00&quot;</span><span class="p">,</span> <span class="nx">d3_map_prefixCode</span> <span class="o">=</span> <span class="nx">d3_map_prefix</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  <span class="kd">function</span> <span class="nx">d3_map_has</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_map_prefix</span> <span class="o">+</span> <span class="nx">key</span> <span class="k">in</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_map_remove</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">key</span> <span class="o">=</span> <span class="nx">d3_map_prefix</span> <span class="o">+</span> <span class="nx">key</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">key</span> <span class="k">in</span> <span class="k">this</span> <span class="o">&amp;&amp;</span> <span class="k">delete</span> <span class="k">this</span><span class="p">[</span><span class="nx">key</span><span class="p">];</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_map_keys</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">keys</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">keys</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
    <span class="p">});</span>
    <span class="k">return</span> <span class="nx">keys</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_map_size</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">size</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="k">this</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="nx">key</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">===</span> <span class="nx">d3_map_prefixCode</span><span class="p">)</span> <span class="o">++</span><span class="nx">size</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">size</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_map_empty</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">key</span> <span class="k">in</span> <span class="k">this</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="nx">key</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">===</span> <span class="nx">d3_map_prefixCode</span><span class="p">)</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">nest</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">nest</span> <span class="o">=</span> <span class="p">{},</span> <span class="nx">keys</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">sortKeys</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">sortValues</span><span class="p">,</span> <span class="nx">rollup</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">map</span><span class="p">(</span><span class="nx">mapType</span><span class="p">,</span> <span class="nx">array</span><span class="p">,</span> <span class="nx">depth</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">&gt;=</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">rollup</span> <span class="o">?</span> <span class="nx">rollup</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">nest</span><span class="p">,</span> <span class="nx">array</span><span class="p">)</span> <span class="o">:</span> <span class="nx">sortValues</span> <span class="o">?</span> <span class="nx">array</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="nx">sortValues</span><span class="p">)</span> <span class="o">:</span> <span class="nx">array</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">key</span> <span class="o">=</span> <span class="nx">keys</span><span class="p">[</span><span class="nx">depth</span><span class="o">++</span><span class="p">],</span> <span class="nx">keyValue</span><span class="p">,</span> <span class="nx">object</span><span class="p">,</span> <span class="nx">setter</span><span class="p">,</span> <span class="nx">valuesByKey</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">d3_Map</span><span class="p">(),</span> <span class="nx">values</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">values</span> <span class="o">=</span> <span class="nx">valuesByKey</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">keyValue</span> <span class="o">=</span> <span class="nx">key</span><span class="p">(</span><span class="nx">object</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">])))</span> <span class="p">{</span>
          <span class="nx">values</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">object</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">valuesByKey</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">keyValue</span><span class="p">,</span> <span class="p">[</span> <span class="nx">object</span> <span class="p">]);</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">mapType</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">object</span> <span class="o">=</span> <span class="nx">mapType</span><span class="p">();</span>
        <span class="nx">setter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">keyValue</span><span class="p">,</span> <span class="nx">values</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">object</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">keyValue</span><span class="p">,</span> <span class="nx">map</span><span class="p">(</span><span class="nx">mapType</span><span class="p">,</span> <span class="nx">values</span><span class="p">,</span> <span class="nx">depth</span><span class="p">));</span>
        <span class="p">};</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">object</span> <span class="o">=</span> <span class="p">{};</span>
        <span class="nx">setter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">keyValue</span><span class="p">,</span> <span class="nx">values</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">object</span><span class="p">[</span><span class="nx">keyValue</span><span class="p">]</span> <span class="o">=</span> <span class="nx">map</span><span class="p">(</span><span class="nx">mapType</span><span class="p">,</span> <span class="nx">values</span><span class="p">,</span> <span class="nx">depth</span><span class="p">);</span>
        <span class="p">};</span>
      <span class="p">}</span>
      <span class="nx">valuesByKey</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">setter</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">object</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">entries</span><span class="p">(</span><span class="nx">map</span><span class="p">,</span> <span class="nx">depth</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">depth</span> <span class="o">&gt;=</span> <span class="nx">keys</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">map</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">array</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">sortKey</span> <span class="o">=</span> <span class="nx">sortKeys</span><span class="p">[</span><span class="nx">depth</span><span class="o">++</span><span class="p">];</span>
      <span class="nx">map</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">keyMap</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">array</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
          <span class="nx">key</span><span class="o">:</span> <span class="nx">key</span><span class="p">,</span>
          <span class="nx">values</span><span class="o">:</span> <span class="nx">entries</span><span class="p">(</span><span class="nx">keyMap</span><span class="p">,</span> <span class="nx">depth</span><span class="p">)</span>
        <span class="p">});</span>
      <span class="p">});</span>
      <span class="k">return</span> <span class="nx">sortKey</span> <span class="o">?</span> <span class="nx">array</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">sortKey</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">key</span><span class="p">,</span> <span class="nx">b</span><span class="p">.</span><span class="nx">key</span><span class="p">);</span>
      <span class="p">})</span> <span class="o">:</span> <span class="nx">array</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">nest</span><span class="p">.</span><span class="nx">map</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">array</span><span class="p">,</span> <span class="nx">mapType</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">map</span><span class="p">(</span><span class="nx">mapType</span><span class="p">,</span> <span class="nx">array</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="nx">nest</span><span class="p">.</span><span class="nx">entries</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">array</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">entries</span><span class="p">(</span><span class="nx">map</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">map</span><span class="p">,</span> <span class="nx">array</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="mi">0</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="nx">nest</span><span class="p">.</span><span class="nx">key</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">keys</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">d</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">nest</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">nest</span><span class="p">.</span><span class="nx">sortKeys</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">order</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">sortKeys</span><span class="p">[</span><span class="nx">keys</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">order</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">nest</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">nest</span><span class="p">.</span><span class="nx">sortValues</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">order</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">sortValues</span> <span class="o">=</span> <span class="nx">order</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">nest</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">nest</span><span class="p">.</span><span class="nx">rollup</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">rollup</span> <span class="o">=</span> <span class="nx">f</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">nest</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">nest</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">set</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">array</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">set</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">d3_Set</span><span class="p">();</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">array</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="nx">set</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
    <span class="k">return</span> <span class="nx">set</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_Set</span><span class="p">()</span> <span class="p">{}</span>
  <span class="nx">d3_class</span><span class="p">(</span><span class="nx">d3_Set</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">has</span><span class="o">:</span> <span class="nx">d3_map_has</span><span class="p">,</span>
    <span class="nx">add</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">[</span><span class="nx">d3_map_prefix</span> <span class="o">+</span> <span class="nx">value</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">remove</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">value</span> <span class="o">=</span> <span class="nx">d3_map_prefix</span> <span class="o">+</span> <span class="nx">value</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">value</span> <span class="k">in</span> <span class="k">this</span> <span class="o">&amp;&amp;</span> <span class="k">delete</span> <span class="k">this</span><span class="p">[</span><span class="nx">value</span><span class="p">];</span>
    <span class="p">},</span>
    <span class="nx">values</span><span class="o">:</span> <span class="nx">d3_map_keys</span><span class="p">,</span>
    <span class="nx">size</span><span class="o">:</span> <span class="nx">d3_map_size</span><span class="p">,</span>
    <span class="nx">empty</span><span class="o">:</span> <span class="nx">d3_map_empty</span><span class="p">,</span>
    <span class="nx">forEach</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">value</span> <span class="k">in</span> <span class="k">this</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">===</span> <span class="nx">d3_map_prefixCode</span><span class="p">)</span> <span class="nx">f</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">value</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span>
    <span class="p">}</span>
  <span class="p">});</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">behavior</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">rebind</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">source</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">method</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="nx">target</span><span class="p">[</span><span class="nx">method</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">[</span><span class="nx">i</span><span class="p">]]</span> <span class="o">=</span> <span class="nx">d3_rebind</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">source</span><span class="p">,</span> <span class="nx">source</span><span class="p">[</span><span class="nx">method</span><span class="p">]);</span>
    <span class="k">return</span> <span class="nx">target</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_rebind</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">source</span><span class="p">,</span> <span class="nx">method</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">value</span> <span class="o">=</span> <span class="nx">method</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">source</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">value</span> <span class="o">===</span> <span class="nx">source</span> <span class="o">?</span> <span class="nx">target</span> <span class="o">:</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_vendorSymbol</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">name</span> <span class="k">in</span> <span class="nx">object</span><span class="p">)</span> <span class="k">return</span> <span class="nx">name</span><span class="p">;</span>
    <span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">()</span> <span class="o">+</span> <span class="nx">name</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">d3_vendorPrefixes</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">prefixName</span> <span class="o">=</span> <span class="nx">d3_vendorPrefixes</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">+</span> <span class="nx">name</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">prefixName</span> <span class="k">in</span> <span class="nx">object</span><span class="p">)</span> <span class="k">return</span> <span class="nx">prefixName</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">d3_vendorPrefixes</span> <span class="o">=</span> <span class="p">[</span> <span class="s2">&quot;webkit&quot;</span><span class="p">,</span> <span class="s2">&quot;ms&quot;</span><span class="p">,</span> <span class="s2">&quot;moz&quot;</span><span class="p">,</span> <span class="s2">&quot;Moz&quot;</span><span class="p">,</span> <span class="s2">&quot;o&quot;</span><span class="p">,</span> <span class="s2">&quot;O&quot;</span> <span class="p">];</span>
  <span class="kd">function</span> <span class="nx">d3_noop</span><span class="p">()</span> <span class="p">{}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">dispatch</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">dispatch</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">d3_dispatch</span><span class="p">(),</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="nx">dispatch</span><span class="p">[</span><span class="nx">arguments</span><span class="p">[</span><span class="nx">i</span><span class="p">]]</span> <span class="o">=</span> <span class="nx">d3_dispatch_event</span><span class="p">(</span><span class="nx">dispatch</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">dispatch</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_dispatch</span><span class="p">()</span> <span class="p">{}</span>
  <span class="nx">d3_dispatch</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">on</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">type</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">),</span> <span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">name</span> <span class="o">=</span> <span class="nx">type</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
      <span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">i</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">type</span><span class="p">)</span> <span class="k">return</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="o">?</span> <span class="k">this</span><span class="p">[</span><span class="nx">type</span><span class="p">].</span><span class="nx">on</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="o">:</span> <span class="k">this</span><span class="p">[</span><span class="nx">type</span><span class="p">].</span><span class="nx">on</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">listener</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">listener</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="nx">type</span> <span class="k">in</span> <span class="k">this</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">type</span><span class="p">))</span> <span class="k">this</span><span class="p">[</span><span class="nx">type</span><span class="p">].</span><span class="nx">on</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_dispatch_event</span><span class="p">(</span><span class="nx">dispatch</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">listeners</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">listenerByName</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">d3_Map</span><span class="p">();</span>
    <span class="kd">function</span> <span class="nx">event</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">z</span> <span class="o">=</span> <span class="nx">listeners</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">z</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">l</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="nx">l</span> <span class="o">=</span> <span class="nx">z</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">on</span><span class="p">)</span> <span class="nx">l</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">dispatch</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">event</span><span class="p">.</span><span class="nx">on</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">listenerByName</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">name</span><span class="p">),</span> <span class="nx">i</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="k">return</span> <span class="nx">l</span> <span class="o">&amp;&amp;</span> <span class="nx">l</span><span class="p">.</span><span class="nx">on</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">l</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">l</span><span class="p">.</span><span class="nx">on</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="nx">listeners</span> <span class="o">=</span> <span class="nx">listeners</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">listeners</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">l</span><span class="p">)).</span><span class="nx">concat</span><span class="p">(</span><span class="nx">listeners</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">));</span>
        <span class="nx">listenerByName</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">listener</span><span class="p">)</span> <span class="nx">listeners</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">listenerByName</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">on</span><span class="o">:</span> <span class="nx">listener</span>
      <span class="p">}));</span>
      <span class="k">return</span> <span class="nx">dispatch</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">event</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">event</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">d3_eventPreventDefault</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">d3</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_eventSource</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">e</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">event</span><span class="p">,</span> <span class="nx">s</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="nx">s</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">sourceEvent</span><span class="p">)</span> <span class="nx">e</span> <span class="o">=</span> <span class="nx">s</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">e</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_eventDispatch</span><span class="p">(</span><span class="nx">target</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">dispatch</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">d3_dispatch</span><span class="p">(),</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="nx">dispatch</span><span class="p">[</span><span class="nx">arguments</span><span class="p">[</span><span class="nx">i</span><span class="p">]]</span> <span class="o">=</span> <span class="nx">d3_dispatch_event</span><span class="p">(</span><span class="nx">dispatch</span><span class="p">);</span>
    <span class="nx">dispatch</span><span class="p">.</span><span class="nx">of</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">thiz</span><span class="p">,</span> <span class="nx">argumentz</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e1</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">e0</span> <span class="o">=</span> <span class="nx">e1</span><span class="p">.</span><span class="nx">sourceEvent</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">event</span><span class="p">;</span>
          <span class="nx">e1</span><span class="p">.</span><span class="nx">target</span> <span class="o">=</span> <span class="nx">target</span><span class="p">;</span>
          <span class="nx">d3</span><span class="p">.</span><span class="nx">event</span> <span class="o">=</span> <span class="nx">e1</span><span class="p">;</span>
          <span class="nx">dispatch</span><span class="p">[</span><span class="nx">e1</span><span class="p">.</span><span class="nx">type</span><span class="p">].</span><span class="nx">apply</span><span class="p">(</span><span class="nx">thiz</span><span class="p">,</span> <span class="nx">argumentz</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
          <span class="nx">d3</span><span class="p">.</span><span class="nx">event</span> <span class="o">=</span> <span class="nx">e0</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">dispatch</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">requote</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">s</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">d3_requote_re</span><span class="p">,</span> <span class="s2">&quot;\\$&amp;&quot;</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">d3_requote_re</span> <span class="o">=</span> <span class="sr">/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">d3_subclass</span> <span class="o">=</span> <span class="p">{}.</span><span class="nx">__proto__</span> <span class="o">?</span> <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">prototype</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">object</span><span class="p">.</span><span class="nx">__proto__</span> <span class="o">=</span> <span class="nx">prototype</span><span class="p">;</span>
  <span class="p">}</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">prototype</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">property</span> <span class="k">in</span> <span class="nx">prototype</span><span class="p">)</span> <span class="nx">object</span><span class="p">[</span><span class="nx">property</span><span class="p">]</span> <span class="o">=</span> <span class="nx">prototype</span><span class="p">[</span><span class="nx">property</span><span class="p">];</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_selection</span><span class="p">(</span><span class="nx">groups</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">d3_subclass</span><span class="p">(</span><span class="nx">groups</span><span class="p">,</span> <span class="nx">d3_selectionPrototype</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">groups</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">d3_select</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">n</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="nx">s</span><span class="p">);</span>
  <span class="p">},</span> <span class="nx">d3_selectAll</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">n</span><span class="p">.</span><span class="nx">querySelectorAll</span><span class="p">(</span><span class="nx">s</span><span class="p">);</span>
  <span class="p">},</span> <span class="nx">d3_selectMatcher</span> <span class="o">=</span> <span class="nx">d3_documentElement</span><span class="p">.</span><span class="nx">matches</span> <span class="o">||</span> <span class="nx">d3_documentElement</span><span class="p">[</span><span class="nx">d3_vendorSymbol</span><span class="p">(</span><span class="nx">d3_documentElement</span><span class="p">,</span> <span class="s2">&quot;matchesSelector&quot;</span><span class="p">)],</span> <span class="nx">d3_selectMatches</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span> <span class="nx">s</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_selectMatcher</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span> <span class="nx">s</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">Sizzle</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">d3_select</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">Sizzle</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="nx">n</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">d3_selectAll</span> <span class="o">=</span> <span class="nx">Sizzle</span><span class="p">;</span>
    <span class="nx">d3_selectMatches</span> <span class="o">=</span> <span class="nx">Sizzle</span><span class="p">.</span><span class="nx">matchesSelector</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">selection</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_selectionRoot</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">d3_selectionPrototype</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">selection</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="nx">d3_selectionPrototype</span><span class="p">.</span><span class="nx">select</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">selector</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">subgroups</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">subgroup</span><span class="p">,</span> <span class="nx">subnode</span><span class="p">,</span> <span class="nx">group</span><span class="p">,</span> <span class="nx">node</span><span class="p">;</span>
    <span class="nx">selector</span> <span class="o">=</span> <span class="nx">d3_selection_selector</span><span class="p">(</span><span class="nx">selector</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">m</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="o">++</span><span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">subgroups</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">subgroup</span> <span class="o">=</span> <span class="p">[]);</span>
      <span class="nx">subgroup</span><span class="p">.</span><span class="nx">parentNode</span> <span class="o">=</span> <span class="p">(</span><span class="nx">group</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">j</span><span class="p">]).</span><span class="nx">parentNode</span><span class="p">;</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">group</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">node</span> <span class="o">=</span> <span class="nx">group</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="p">{</span>
          <span class="nx">subgroup</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">subnode</span> <span class="o">=</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">node</span><span class="p">.</span><span class="nx">__data__</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">));</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">subnode</span> <span class="o">&amp;&amp;</span> <span class="s2">&quot;__data__&quot;</span> <span class="k">in</span> <span class="nx">node</span><span class="p">)</span> <span class="nx">subnode</span><span class="p">.</span><span class="nx">__data__</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">__data__</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">subgroup</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">d3_selection</span><span class="p">(</span><span class="nx">subgroups</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_selection_selector</span><span class="p">(</span><span class="nx">selector</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">typeof</span> <span class="nx">selector</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">?</span> <span class="nx">selector</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_select</span><span class="p">(</span><span class="nx">selector</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="nx">d3_selectionPrototype</span><span class="p">.</span><span class="nx">selectAll</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">selector</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">subgroups</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">subgroup</span><span class="p">,</span> <span class="nx">node</span><span class="p">;</span>
    <span class="nx">selector</span> <span class="o">=</span> <span class="nx">d3_selection_selectorAll</span><span class="p">(</span><span class="nx">selector</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">m</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="o">++</span><span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">group</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">j</span><span class="p">],</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">group</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">node</span> <span class="o">=</span> <span class="nx">group</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="p">{</span>
          <span class="nx">subgroups</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">subgroup</span> <span class="o">=</span> <span class="nx">d3_array</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">node</span><span class="p">.</span><span class="nx">__data__</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">)));</span>
          <span class="nx">subgroup</span><span class="p">.</span><span class="nx">parentNode</span> <span class="o">=</span> <span class="nx">node</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">d3_selection</span><span class="p">(</span><span class="nx">subgroups</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_selection_selectorAll</span><span class="p">(</span><span class="nx">selector</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">typeof</span> <span class="nx">selector</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">?</span> <span class="nx">selector</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_selectAll</span><span class="p">(</span><span class="nx">selector</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">d3_nsPrefix</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">svg</span><span class="o">:</span> <span class="s2">&quot;http://www.w3.org/2000/svg&quot;</span><span class="p">,</span>
    <span class="nx">xhtml</span><span class="o">:</span> <span class="s2">&quot;http://www.w3.org/1999/xhtml&quot;</span><span class="p">,</span>
    <span class="nx">xlink</span><span class="o">:</span> <span class="s2">&quot;http://www.w3.org/1999/xlink&quot;</span><span class="p">,</span>
    <span class="nx">xml</span><span class="o">:</span> <span class="s2">&quot;http://www.w3.org/XML/1998/namespace&quot;</span><span class="p">,</span>
    <span class="nx">xmlns</span><span class="o">:</span> <span class="s2">&quot;http://www.w3.org/2000/xmlns/&quot;</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">ns</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">prefix</span><span class="o">:</span> <span class="nx">d3_nsPrefix</span><span class="p">,</span>
    <span class="nx">qualify</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;:&quot;</span><span class="p">),</span> <span class="nx">prefix</span> <span class="o">=</span> <span class="nx">name</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">prefix</span> <span class="o">=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">i</span><span class="p">);</span>
        <span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">d3_nsPrefix</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">prefix</span><span class="p">)</span> <span class="o">?</span> <span class="p">{</span>
        <span class="nx">space</span><span class="o">:</span> <span class="nx">d3_nsPrefix</span><span class="p">[</span><span class="nx">prefix</span><span class="p">],</span>
        <span class="nx">local</span><span class="o">:</span> <span class="nx">name</span>
      <span class="p">}</span> <span class="o">:</span> <span class="nx">name</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="nx">d3_selectionPrototype</span><span class="p">.</span><span class="nx">attr</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">node</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">node</span><span class="p">();</span>
        <span class="nx">name</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">ns</span><span class="p">.</span><span class="nx">qualify</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">name</span><span class="p">.</span><span class="nx">local</span> <span class="o">?</span> <span class="nx">node</span><span class="p">.</span><span class="nx">getAttributeNS</span><span class="p">(</span><span class="nx">name</span><span class="p">.</span><span class="nx">space</span><span class="p">,</span> <span class="nx">name</span><span class="p">.</span><span class="nx">local</span><span class="p">)</span> <span class="o">:</span> <span class="nx">node</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">for</span> <span class="p">(</span><span class="nx">value</span> <span class="k">in</span> <span class="nx">name</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d3_selection_attr</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">name</span><span class="p">[</span><span class="nx">value</span><span class="p">]));</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d3_selection_attr</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">));</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_selection_attr</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">name</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">ns</span><span class="p">.</span><span class="nx">qualify</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
    <span class="kd">function</span> <span class="nx">attrNull</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">attrNullNS</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">removeAttributeNS</span><span class="p">(</span><span class="nx">name</span><span class="p">.</span><span class="nx">space</span><span class="p">,</span> <span class="nx">name</span><span class="p">.</span><span class="nx">local</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">attrConstant</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">attrConstantNS</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">setAttributeNS</span><span class="p">(</span><span class="nx">name</span><span class="p">.</span><span class="nx">space</span><span class="p">,</span> <span class="nx">name</span><span class="p">.</span><span class="nx">local</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">attrFunction</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">x</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span> <span class="k">else</span> <span class="k">this</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">x</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">attrFunctionNS</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">x</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">removeAttributeNS</span><span class="p">(</span><span class="nx">name</span><span class="p">.</span><span class="nx">space</span><span class="p">,</span> <span class="nx">name</span><span class="p">.</span><span class="nx">local</span><span class="p">);</span> <span class="k">else</span> <span class="k">this</span><span class="p">.</span><span class="nx">setAttributeNS</span><span class="p">(</span><span class="nx">name</span><span class="p">.</span><span class="nx">space</span><span class="p">,</span> <span class="nx">name</span><span class="p">.</span><span class="nx">local</span><span class="p">,</span> <span class="nx">x</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">value</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">name</span><span class="p">.</span><span class="nx">local</span> <span class="o">?</span> <span class="nx">attrNullNS</span> <span class="o">:</span> <span class="nx">attrNull</span> <span class="o">:</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">?</span> <span class="nx">name</span><span class="p">.</span><span class="nx">local</span> <span class="o">?</span> <span class="nx">attrFunctionNS</span> <span class="o">:</span> <span class="nx">attrFunction</span> <span class="o">:</span> <span class="nx">name</span><span class="p">.</span><span class="nx">local</span> <span class="o">?</span> <span class="nx">attrConstantNS</span> <span class="o">:</span> <span class="nx">attrConstant</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_collapse</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">s</span><span class="p">.</span><span class="nx">trim</span><span class="p">().</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\s+/g</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">d3_selectionPrototype</span><span class="p">.</span><span class="nx">classed</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">node</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">node</span><span class="p">(),</span> <span class="nx">n</span> <span class="o">=</span> <span class="p">(</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">d3_selection_classes</span><span class="p">(</span><span class="nx">name</span><span class="p">)).</span><span class="nx">length</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">classList</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">value</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="nx">name</span><span class="p">[</span><span class="nx">i</span><span class="p">]))</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">value</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">);</span>
          <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">d3_selection_classedRe</span><span class="p">(</span><span class="nx">name</span><span class="p">[</span><span class="nx">i</span><span class="p">]).</span><span class="nx">test</span><span class="p">(</span><span class="nx">value</span><span class="p">))</span> <span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">for</span> <span class="p">(</span><span class="nx">value</span> <span class="k">in</span> <span class="nx">name</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d3_selection_classed</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">name</span><span class="p">[</span><span class="nx">value</span><span class="p">]));</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d3_selection_classed</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">));</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_selection_classedRe</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s2">&quot;(?:^|\\s+)&quot;</span> <span class="o">+</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">requote</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;(?:\\s+|$)&quot;</span><span class="p">,</span> <span class="s2">&quot;g&quot;</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_selection_classes</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="nx">name</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">trim</span><span class="p">().</span><span class="nx">split</span><span class="p">(</span><span class="sr">/^|\s+/</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_selection_classed</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">name</span> <span class="o">=</span> <span class="nx">d3_selection_classes</span><span class="p">(</span><span class="nx">name</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="nx">d3_selection_classedName</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">classedConstant</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="nx">name</span><span class="p">[</span><span class="nx">i</span><span class="p">](</span><span class="k">this</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">classedFunction</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="nx">name</span><span class="p">[</span><span class="nx">i</span><span class="p">](</span><span class="k">this</span><span class="p">,</span> <span class="nx">x</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">?</span> <span class="nx">classedFunction</span> <span class="o">:</span> <span class="nx">classedConstant</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_selection_classedName</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">re</span> <span class="o">=</span> <span class="nx">d3_selection_classedRe</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">c</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">classList</span><span class="p">)</span> <span class="k">return</span> <span class="nx">value</span> <span class="o">?</span> <span class="nx">c</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="o">:</span> <span class="nx">c</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">)</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">re</span><span class="p">.</span><span class="nx">lastIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">re</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">c</span><span class="p">))</span> <span class="nx">node</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="nx">d3_collapse</span><span class="p">(</span><span class="nx">c</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">));</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">node</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="nx">d3_collapse</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="nx">re</span><span class="p">,</span> <span class="s2">&quot; &quot;</span><span class="p">)));</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="nx">d3_selectionPrototype</span><span class="p">.</span><span class="nx">style</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">priority</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">n</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">name</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">n</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="nx">value</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">priority</span> <span class="k">in</span> <span class="nx">name</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d3_selection_style</span><span class="p">(</span><span class="nx">priority</span><span class="p">,</span> <span class="nx">name</span><span class="p">[</span><span class="nx">priority</span><span class="p">],</span> <span class="nx">value</span><span class="p">));</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">n</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="k">return</span> <span class="nx">d3_window</span><span class="p">.</span><span class="nx">getComputedStyle</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">node</span><span class="p">(),</span> <span class="kc">null</span><span class="p">).</span><span class="nx">getPropertyValue</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
      <span class="nx">priority</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d3_selection_style</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">priority</span><span class="p">));</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_selection_style</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">priority</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">function</span> <span class="nx">styleNull</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">removeProperty</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">styleConstant</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">setProperty</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">priority</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">styleFunction</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">x</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">removeProperty</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span> <span class="k">else</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">setProperty</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">priority</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">value</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">styleNull</span> <span class="o">:</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">?</span> <span class="nx">styleFunction</span> <span class="o">:</span> <span class="nx">styleConstant</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">d3_selectionPrototype</span><span class="p">.</span><span class="nx">property</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">node</span><span class="p">()[</span><span class="nx">name</span><span class="p">];</span>
      <span class="k">for</span> <span class="p">(</span><span class="nx">value</span> <span class="k">in</span> <span class="nx">name</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d3_selection_property</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">name</span><span class="p">[</span><span class="nx">value</span><span class="p">]));</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d3_selection_property</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">));</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_selection_property</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">function</span> <span class="nx">propertyNull</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">delete</span> <span class="k">this</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">propertyConstant</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">propertyFunction</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">x</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">delete</span> <span class="k">this</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span> <span class="k">else</span> <span class="k">this</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">value</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">propertyNull</span> <span class="o">:</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">?</span> <span class="nx">propertyFunction</span> <span class="o">:</span> <span class="nx">propertyConstant</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">d3_selectionPrototype</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">?</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">v</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">v</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="nx">v</span><span class="p">;</span>
    <span class="p">}</span> <span class="o">:</span> <span class="nx">value</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
    <span class="p">}</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">})</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">node</span><span class="p">().</span><span class="nx">textContent</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nx">d3_selectionPrototype</span><span class="p">.</span><span class="nx">html</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">?</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">v</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">v</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="nx">v</span><span class="p">;</span>
    <span class="p">}</span> <span class="o">:</span> <span class="nx">value</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
    <span class="p">}</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">})</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">node</span><span class="p">().</span><span class="nx">innerHTML</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nx">d3_selectionPrototype</span><span class="p">.</span><span class="nx">append</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">name</span> <span class="o">=</span> <span class="nx">d3_selection_creator</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">name</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">));</span>
    <span class="p">});</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_selection_creator</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">typeof</span> <span class="nx">name</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">?</span> <span class="nx">name</span> <span class="o">:</span> <span class="p">(</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">ns</span><span class="p">.</span><span class="nx">qualify</span><span class="p">(</span><span class="nx">name</span><span class="p">)).</span><span class="nx">local</span> <span class="o">?</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">.</span><span class="nx">createElementNS</span><span class="p">(</span><span class="nx">name</span><span class="p">.</span><span class="nx">space</span><span class="p">,</span> <span class="nx">name</span><span class="p">.</span><span class="nx">local</span><span class="p">);</span>
    <span class="p">}</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">.</span><span class="nx">createElementNS</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">namespaceURI</span><span class="p">,</span> <span class="nx">name</span><span class="p">);</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="nx">d3_selectionPrototype</span><span class="p">.</span><span class="nx">insert</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">before</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">name</span> <span class="o">=</span> <span class="nx">d3_selection_creator</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
    <span class="nx">before</span> <span class="o">=</span> <span class="nx">d3_selection_selector</span><span class="p">(</span><span class="nx">before</span><span class="p">);</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">name</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">),</span> <span class="nx">before</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span> <span class="o">||</span> <span class="kc">null</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">};</span>
  <span class="nx">d3_selectionPrototype</span><span class="p">.</span><span class="nx">remove</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">parent</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">parent</span><span class="p">)</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">};</span>
  <span class="nx">d3_selectionPrototype</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">group</span><span class="p">,</span> <span class="nx">node</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">value</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">n</span> <span class="o">=</span> <span class="p">(</span><span class="nx">group</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="mi">0</span><span class="p">]).</span><span class="nx">length</span><span class="p">);</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">node</span> <span class="o">=</span> <span class="nx">group</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="p">{</span>
          <span class="nx">value</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">__data__</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">bind</span><span class="p">(</span><span class="nx">group</span><span class="p">,</span> <span class="nx">groupData</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">group</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">groupData</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">n0</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span> <span class="nx">m</span><span class="p">),</span> <span class="nx">updateNodes</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">m</span><span class="p">),</span> <span class="nx">enterNodes</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">m</span><span class="p">),</span> <span class="nx">exitNodes</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">n</span><span class="p">),</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">nodeData</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">nodeByKeyValue</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">d3_Map</span><span class="p">(),</span> <span class="nx">dataByKeyValue</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">d3_Map</span><span class="p">(),</span> <span class="nx">keyValues</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">keyValue</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">keyValue</span> <span class="o">=</span> <span class="nx">key</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">node</span> <span class="o">=</span> <span class="nx">group</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">node</span><span class="p">.</span><span class="nx">__data__</span><span class="p">,</span> <span class="nx">i</span><span class="p">);</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">nodeByKeyValue</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">keyValue</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">exitNodes</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">node</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">nodeByKeyValue</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">keyValue</span><span class="p">,</span> <span class="nx">node</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="nx">keyValues</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">keyValue</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">keyValue</span> <span class="o">=</span> <span class="nx">key</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">groupData</span><span class="p">,</span> <span class="nx">nodeData</span> <span class="o">=</span> <span class="nx">groupData</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">);</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">node</span> <span class="o">=</span> <span class="nx">nodeByKeyValue</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">keyValue</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">updateNodes</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">node</span><span class="p">;</span>
            <span class="nx">node</span><span class="p">.</span><span class="nx">__data__</span> <span class="o">=</span> <span class="nx">nodeData</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">dataByKeyValue</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">keyValue</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">enterNodes</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">d3_selection_dataNode</span><span class="p">(</span><span class="nx">nodeData</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="nx">dataByKeyValue</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">keyValue</span><span class="p">,</span> <span class="nx">nodeData</span><span class="p">);</span>
          <span class="nx">nodeByKeyValue</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">keyValue</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">nodeByKeyValue</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">keyValues</span><span class="p">[</span><span class="nx">i</span><span class="p">]))</span> <span class="p">{</span>
            <span class="nx">exitNodes</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">group</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n0</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
          <span class="nx">node</span> <span class="o">=</span> <span class="nx">group</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
          <span class="nx">nodeData</span> <span class="o">=</span> <span class="nx">groupData</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">node</span><span class="p">.</span><span class="nx">__data__</span> <span class="o">=</span> <span class="nx">nodeData</span><span class="p">;</span>
            <span class="nx">updateNodes</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">node</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">enterNodes</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">d3_selection_dataNode</span><span class="p">(</span><span class="nx">nodeData</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">for</span> <span class="p">(;</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">enterNodes</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">d3_selection_dataNode</span><span class="p">(</span><span class="nx">groupData</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
        <span class="p">}</span>
        <span class="k">for</span> <span class="p">(;</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">exitNodes</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">group</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="nx">enterNodes</span><span class="p">.</span><span class="nx">update</span> <span class="o">=</span> <span class="nx">updateNodes</span><span class="p">;</span>
      <span class="nx">enterNodes</span><span class="p">.</span><span class="nx">parentNode</span> <span class="o">=</span> <span class="nx">updateNodes</span><span class="p">.</span><span class="nx">parentNode</span> <span class="o">=</span> <span class="nx">exitNodes</span><span class="p">.</span><span class="nx">parentNode</span> <span class="o">=</span> <span class="nx">group</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
      <span class="nx">enter</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">enterNodes</span><span class="p">);</span>
      <span class="nx">update</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">updateNodes</span><span class="p">);</span>
      <span class="nx">exit</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">exitNodes</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">var</span> <span class="nx">enter</span> <span class="o">=</span> <span class="nx">d3_selection_enter</span><span class="p">([]),</span> <span class="nx">update</span> <span class="o">=</span> <span class="nx">d3_selection</span><span class="p">([]),</span> <span class="nx">exit</span> <span class="o">=</span> <span class="nx">d3_selection</span><span class="p">([]);</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">bind</span><span class="p">(</span><span class="nx">group</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">value</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">group</span><span class="p">,</span> <span class="nx">group</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">__data__</span><span class="p">,</span> <span class="nx">i</span><span class="p">));</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">bind</span><span class="p">(</span><span class="nx">group</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">value</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="nx">update</span><span class="p">.</span><span class="nx">enter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">enter</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">update</span><span class="p">.</span><span class="nx">exit</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">exit</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">update</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_selection_dataNode</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">__data__</span><span class="o">:</span> <span class="nx">data</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="nx">d3_selectionPrototype</span><span class="p">.</span><span class="nx">datum</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">property</span><span class="p">(</span><span class="s2">&quot;__data__&quot;</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">property</span><span class="p">(</span><span class="s2">&quot;__data__&quot;</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nx">d3_selectionPrototype</span><span class="p">.</span><span class="nx">filter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">filter</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">subgroups</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">subgroup</span><span class="p">,</span> <span class="nx">group</span><span class="p">,</span> <span class="nx">node</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">filter</span> <span class="o">!==</span> <span class="s2">&quot;function&quot;</span><span class="p">)</span> <span class="nx">filter</span> <span class="o">=</span> <span class="nx">d3_selection_filter</span><span class="p">(</span><span class="nx">filter</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">m</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">subgroups</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">subgroup</span> <span class="o">=</span> <span class="p">[]);</span>
      <span class="nx">subgroup</span><span class="p">.</span><span class="nx">parentNode</span> <span class="o">=</span> <span class="p">(</span><span class="nx">group</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">j</span><span class="p">]).</span><span class="nx">parentNode</span><span class="p">;</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">group</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">((</span><span class="nx">node</span> <span class="o">=</span> <span class="nx">group</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nx">filter</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">node</span><span class="p">.</span><span class="nx">__data__</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">))</span> <span class="p">{</span>
          <span class="nx">subgroup</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">node</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">d3_selection</span><span class="p">(</span><span class="nx">subgroups</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_selection_filter</span><span class="p">(</span><span class="nx">selector</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_selectMatches</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">selector</span><span class="p">);</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="nx">d3_selectionPrototype</span><span class="p">.</span><span class="nx">order</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">m</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="o">++</span><span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">group</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">j</span><span class="p">],</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">group</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">next</span> <span class="o">=</span> <span class="nx">group</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">node</span><span class="p">;</span> <span class="o">--</span><span class="nx">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">node</span> <span class="o">=</span> <span class="nx">group</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">next</span> <span class="o">&amp;&amp;</span> <span class="nx">next</span> <span class="o">!==</span> <span class="nx">node</span><span class="p">.</span><span class="nx">nextSibling</span><span class="p">)</span> <span class="nx">next</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">next</span><span class="p">);</span>
          <span class="nx">next</span> <span class="o">=</span> <span class="nx">node</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nx">d3_selectionPrototype</span><span class="p">.</span><span class="nx">sort</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">comparator</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">comparator</span> <span class="o">=</span> <span class="nx">d3_selection_sortComparator</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">m</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="o">++</span><span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="p">)</span> <span class="k">this</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">sort</span><span class="p">(</span><span class="nx">comparator</span><span class="p">);</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">order</span><span class="p">();</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_selection_sortComparator</span><span class="p">(</span><span class="nx">comparator</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="nx">comparator</span> <span class="o">=</span> <span class="nx">d3_ascending</span><span class="p">;</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">a</span> <span class="o">&amp;&amp;</span> <span class="nx">b</span> <span class="o">?</span> <span class="nx">comparator</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">__data__</span><span class="p">,</span> <span class="nx">b</span><span class="p">.</span><span class="nx">__data__</span><span class="p">)</span> <span class="o">:</span> <span class="o">!</span><span class="nx">a</span> <span class="o">-</span> <span class="o">!</span><span class="nx">b</span><span class="p">;</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="nx">d3_selectionPrototype</span><span class="p">.</span><span class="nx">each</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_selection_each</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">callback</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">node</span><span class="p">.</span><span class="nx">__data__</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_selection_each</span><span class="p">(</span><span class="nx">groups</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">groups</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">group</span> <span class="o">=</span> <span class="nx">groups</span><span class="p">[</span><span class="nx">j</span><span class="p">],</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">group</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">node</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">node</span> <span class="o">=</span> <span class="nx">group</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="nx">callback</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">groups</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">d3_selectionPrototype</span><span class="p">.</span><span class="nx">call</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">args</span> <span class="o">=</span> <span class="nx">d3_array</span><span class="p">(</span><span class="nx">arguments</span><span class="p">);</span>
    <span class="nx">callback</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span> <span class="nx">args</span><span class="p">);</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nx">d3_selectionPrototype</span><span class="p">.</span><span class="nx">empty</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">node</span><span class="p">();</span>
  <span class="p">};</span>
  <span class="nx">d3_selectionPrototype</span><span class="p">.</span><span class="nx">node</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">m</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">group</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">j</span><span class="p">],</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">group</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">node</span> <span class="o">=</span> <span class="nx">group</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="k">return</span> <span class="nx">node</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nx">d3_selectionPrototype</span><span class="p">.</span><span class="nx">size</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="o">++</span><span class="nx">n</span><span class="p">;</span>
    <span class="p">});</span>
    <span class="k">return</span> <span class="nx">n</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_selection_enter</span><span class="p">(</span><span class="nx">selection</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">d3_subclass</span><span class="p">(</span><span class="nx">selection</span><span class="p">,</span> <span class="nx">d3_selection_enterPrototype</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">selection</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">d3_selection_enterPrototype</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">selection</span><span class="p">.</span><span class="nx">enter</span> <span class="o">=</span> <span class="nx">d3_selection_enter</span><span class="p">;</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">selection</span><span class="p">.</span><span class="nx">enter</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nx">d3_selection_enterPrototype</span><span class="p">;</span>
  <span class="nx">d3_selection_enterPrototype</span><span class="p">.</span><span class="nx">append</span> <span class="o">=</span> <span class="nx">d3_selectionPrototype</span><span class="p">.</span><span class="nx">append</span><span class="p">;</span>
  <span class="nx">d3_selection_enterPrototype</span><span class="p">.</span><span class="nx">empty</span> <span class="o">=</span> <span class="nx">d3_selectionPrototype</span><span class="p">.</span><span class="nx">empty</span><span class="p">;</span>
  <span class="nx">d3_selection_enterPrototype</span><span class="p">.</span><span class="nx">node</span> <span class="o">=</span> <span class="nx">d3_selectionPrototype</span><span class="p">.</span><span class="nx">node</span><span class="p">;</span>
  <span class="nx">d3_selection_enterPrototype</span><span class="p">.</span><span class="nx">call</span> <span class="o">=</span> <span class="nx">d3_selectionPrototype</span><span class="p">.</span><span class="nx">call</span><span class="p">;</span>
  <span class="nx">d3_selection_enterPrototype</span><span class="p">.</span><span class="nx">size</span> <span class="o">=</span> <span class="nx">d3_selectionPrototype</span><span class="p">.</span><span class="nx">size</span><span class="p">;</span>
  <span class="nx">d3_selection_enterPrototype</span><span class="p">.</span><span class="nx">select</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">selector</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">subgroups</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">subgroup</span><span class="p">,</span> <span class="nx">subnode</span><span class="p">,</span> <span class="nx">upgroup</span><span class="p">,</span> <span class="nx">group</span><span class="p">,</span> <span class="nx">node</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">m</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="o">++</span><span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">upgroup</span> <span class="o">=</span> <span class="p">(</span><span class="nx">group</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">j</span><span class="p">]).</span><span class="nx">update</span><span class="p">;</span>
      <span class="nx">subgroups</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">subgroup</span> <span class="o">=</span> <span class="p">[]);</span>
      <span class="nx">subgroup</span><span class="p">.</span><span class="nx">parentNode</span> <span class="o">=</span> <span class="nx">group</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">group</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">node</span> <span class="o">=</span> <span class="nx">group</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="p">{</span>
          <span class="nx">subgroup</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">upgroup</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">subnode</span> <span class="o">=</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">group</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">,</span> <span class="nx">node</span><span class="p">.</span><span class="nx">__data__</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">));</span>
          <span class="nx">subnode</span><span class="p">.</span><span class="nx">__data__</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">__data__</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">subgroup</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">d3_selection</span><span class="p">(</span><span class="nx">subgroups</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nx">d3_selection_enterPrototype</span><span class="p">.</span><span class="nx">insert</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">before</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="nx">before</span> <span class="o">=</span> <span class="nx">d3_selection_enterInsertBefore</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">d3_selectionPrototype</span><span class="p">.</span><span class="nx">insert</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">before</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_selection_enterInsertBefore</span><span class="p">(</span><span class="nx">enter</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">i0</span><span class="p">,</span> <span class="nx">j0</span><span class="p">;</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">group</span> <span class="o">=</span> <span class="nx">enter</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">update</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">group</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">node</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">j</span> <span class="o">!=</span> <span class="nx">j0</span><span class="p">)</span> <span class="nx">j0</span> <span class="o">=</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">i0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&gt;=</span> <span class="nx">i0</span><span class="p">)</span> <span class="nx">i0</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">node</span> <span class="o">=</span> <span class="nx">group</span><span class="p">[</span><span class="nx">i0</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="o">++</span><span class="nx">i0</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="p">;</span>
      <span class="k">return</span> <span class="nx">node</span><span class="p">;</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="nx">d3_selectionPrototype</span><span class="p">.</span><span class="nx">transition</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="nx">d3_transitionInheritId</span> <span class="o">||</span> <span class="o">++</span><span class="nx">d3_transitionId</span><span class="p">,</span> <span class="nx">subgroups</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">subgroup</span><span class="p">,</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">transition</span> <span class="o">=</span> <span class="nx">d3_transitionInherit</span> <span class="o">||</span> <span class="p">{</span>
      <span class="nx">time</span><span class="o">:</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">(),</span>
      <span class="nx">ease</span><span class="o">:</span> <span class="nx">d3_ease_cubicInOut</span><span class="p">,</span>
      <span class="nx">delay</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">duration</span><span class="o">:</span> <span class="mi">250</span>
    <span class="p">};</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">m</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="o">++</span><span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">subgroups</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">subgroup</span> <span class="o">=</span> <span class="p">[]);</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">group</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">j</span><span class="p">],</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">group</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">node</span> <span class="o">=</span> <span class="nx">group</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="nx">d3_transitionNode</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">transition</span><span class="p">);</span>
        <span class="nx">subgroup</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">node</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">d3_transition</span><span class="p">(</span><span class="nx">subgroups</span><span class="p">,</span> <span class="nx">id</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nx">d3_selectionPrototype</span><span class="p">.</span><span class="nx">interrupt</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d3_selection_interrupt</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_selection_interrupt</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">lock</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">__transition__</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">lock</span><span class="p">)</span> <span class="o">++</span><span class="nx">lock</span><span class="p">.</span><span class="nx">active</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">group</span> <span class="o">=</span> <span class="p">[</span> <span class="k">typeof</span> <span class="nx">node</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">?</span> <span class="nx">d3_select</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">d3_document</span><span class="p">)</span> <span class="o">:</span> <span class="nx">node</span> <span class="p">];</span>
    <span class="nx">group</span><span class="p">.</span><span class="nx">parentNode</span> <span class="o">=</span> <span class="nx">d3_documentElement</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">d3_selection</span><span class="p">([</span> <span class="nx">group</span> <span class="p">]);</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">selectAll</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">nodes</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">group</span> <span class="o">=</span> <span class="nx">d3_array</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">nodes</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">?</span> <span class="nx">d3_selectAll</span><span class="p">(</span><span class="nx">nodes</span><span class="p">,</span> <span class="nx">d3_document</span><span class="p">)</span> <span class="o">:</span> <span class="nx">nodes</span><span class="p">);</span>
    <span class="nx">group</span><span class="p">.</span><span class="nx">parentNode</span> <span class="o">=</span> <span class="nx">d3_documentElement</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">d3_selection</span><span class="p">([</span> <span class="nx">group</span> <span class="p">]);</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">d3_selectionRoot</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="nx">d3_documentElement</span><span class="p">);</span>
  <span class="nx">d3_selectionPrototype</span><span class="p">.</span><span class="nx">on</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">listener</span><span class="p">,</span> <span class="nx">capture</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">n</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">type</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">n</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="nx">listener</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">capture</span> <span class="k">in</span> <span class="nx">type</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d3_selection_on</span><span class="p">(</span><span class="nx">capture</span><span class="p">,</span> <span class="nx">type</span><span class="p">[</span><span class="nx">capture</span><span class="p">],</span> <span class="nx">listener</span><span class="p">));</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">n</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="k">return</span> <span class="p">(</span><span class="nx">n</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">node</span><span class="p">()[</span><span class="s2">&quot;__on&quot;</span> <span class="o">+</span> <span class="nx">type</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nx">n</span><span class="p">.</span><span class="nx">_</span><span class="p">;</span>
      <span class="nx">capture</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="nx">d3_selection_on</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">listener</span><span class="p">,</span> <span class="nx">capture</span><span class="p">));</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_selection_on</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">listener</span><span class="p">,</span> <span class="nx">capture</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;__on&quot;</span> <span class="o">+</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">type</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">),</span> <span class="nx">wrap</span> <span class="o">=</span> <span class="nx">d3_selection_onListener</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">type</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">i</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">filter</span> <span class="o">=</span> <span class="nx">d3_selection_onFilters</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">type</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">filter</span><span class="p">)</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">filter</span><span class="p">,</span> <span class="nx">wrap</span> <span class="o">=</span> <span class="nx">d3_selection_onFilter</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">onRemove</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">l</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">l</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">l</span><span class="p">,</span> <span class="nx">l</span><span class="p">.</span><span class="nx">$</span><span class="p">);</span>
        <span class="k">delete</span> <span class="k">this</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">onAdd</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">wrap</span><span class="p">(</span><span class="nx">listener</span><span class="p">,</span> <span class="nx">d3_array</span><span class="p">(</span><span class="nx">arguments</span><span class="p">));</span>
      <span class="nx">onRemove</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="k">this</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">l</span><span class="p">,</span> <span class="nx">l</span><span class="p">.</span><span class="nx">$</span> <span class="o">=</span> <span class="nx">capture</span><span class="p">);</span>
      <span class="nx">l</span><span class="p">.</span><span class="nx">_</span> <span class="o">=</span> <span class="nx">listener</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">removeAll</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">re</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s2">&quot;^__on([^.]+)&quot;</span> <span class="o">+</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">requote</span><span class="p">(</span><span class="nx">type</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;$&quot;</span><span class="p">),</span> <span class="nx">match</span><span class="p">;</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">name</span> <span class="k">in</span> <span class="k">this</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">match</span> <span class="o">=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="nx">re</span><span class="p">))</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">l</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">removeEventListener</span><span class="p">(</span><span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">l</span><span class="p">,</span> <span class="nx">l</span><span class="p">.</span><span class="nx">$</span><span class="p">);</span>
          <span class="k">delete</span> <span class="k">this</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">i</span> <span class="o">?</span> <span class="nx">listener</span> <span class="o">?</span> <span class="nx">onAdd</span> <span class="o">:</span> <span class="nx">onRemove</span> <span class="o">:</span> <span class="nx">listener</span> <span class="o">?</span> <span class="nx">d3_noop</span> <span class="o">:</span> <span class="nx">removeAll</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">d3_selection_onFilters</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">map</span><span class="p">({</span>
    <span class="nx">mouseenter</span><span class="o">:</span> <span class="s2">&quot;mouseover&quot;</span><span class="p">,</span>
    <span class="nx">mouseleave</span><span class="o">:</span> <span class="s2">&quot;mouseout&quot;</span>
  <span class="p">});</span>
  <span class="nx">d3_selection_onFilters</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">k</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="s2">&quot;on&quot;</span> <span class="o">+</span> <span class="nx">k</span> <span class="k">in</span> <span class="nx">d3_document</span><span class="p">)</span> <span class="nx">d3_selection_onFilters</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">k</span><span class="p">);</span>
  <span class="p">});</span>
  <span class="kd">function</span> <span class="nx">d3_selection_onListener</span><span class="p">(</span><span class="nx">listener</span><span class="p">,</span> <span class="nx">argumentz</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">event</span><span class="p">;</span>
      <span class="nx">d3</span><span class="p">.</span><span class="nx">event</span> <span class="o">=</span> <span class="nx">e</span><span class="p">;</span>
      <span class="nx">argumentz</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">__data__</span><span class="p">;</span>
      <span class="k">try</span> <span class="p">{</span>
        <span class="nx">listener</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">argumentz</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
        <span class="nx">d3</span><span class="p">.</span><span class="nx">event</span> <span class="o">=</span> <span class="nx">o</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_selection_onFilter</span><span class="p">(</span><span class="nx">listener</span><span class="p">,</span> <span class="nx">argumentz</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">d3_selection_onListener</span><span class="p">(</span><span class="nx">listener</span><span class="p">,</span> <span class="nx">argumentz</span><span class="p">);</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">target</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span> <span class="nx">related</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">relatedTarget</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">related</span> <span class="o">||</span> <span class="nx">related</span> <span class="o">!==</span> <span class="nx">target</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">(</span><span class="nx">related</span><span class="p">.</span><span class="nx">compareDocumentPosition</span><span class="p">(</span><span class="nx">target</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mi">8</span><span class="p">))</span> <span class="p">{</span>
        <span class="nx">l</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">e</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">d3_event_dragSelect</span> <span class="o">=</span> <span class="s2">&quot;onselectstart&quot;</span> <span class="k">in</span> <span class="nx">d3_document</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="nx">d3_vendorSymbol</span><span class="p">(</span><span class="nx">d3_documentElement</span><span class="p">.</span><span class="nx">style</span><span class="p">,</span> <span class="s2">&quot;userSelect&quot;</span><span class="p">),</span> <span class="nx">d3_event_dragId</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">d3_event_dragSuppress</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="s2">&quot;.dragsuppress-&quot;</span> <span class="o">+</span> <span class="o">++</span><span class="nx">d3_event_dragId</span><span class="p">,</span> <span class="nx">click</span> <span class="o">=</span> <span class="s2">&quot;click&quot;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">w</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="nx">d3_window</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;touchmove&quot;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">d3_eventPreventDefault</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;dragstart&quot;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">d3_eventPreventDefault</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;selectstart&quot;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">d3_eventPreventDefault</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">d3_event_dragSelect</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">style</span> <span class="o">=</span> <span class="nx">d3_documentElement</span><span class="p">.</span><span class="nx">style</span><span class="p">,</span> <span class="nx">select</span> <span class="o">=</span> <span class="nx">style</span><span class="p">[</span><span class="nx">d3_event_dragSelect</span><span class="p">];</span>
      <span class="nx">style</span><span class="p">[</span><span class="nx">d3_event_dragSelect</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;none&quot;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">suppressClick</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">w</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">d3_event_dragSelect</span><span class="p">)</span> <span class="nx">style</span><span class="p">[</span><span class="nx">d3_event_dragSelect</span><span class="p">]</span> <span class="o">=</span> <span class="nx">select</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">suppressClick</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">function</span> <span class="nx">off</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">w</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">click</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="nx">w</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">click</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">d3_eventPreventDefault</span><span class="p">();</span>
          <span class="nx">off</span><span class="p">();</span>
        <span class="p">},</span> <span class="kc">true</span><span class="p">);</span>
        <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">off</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">mouse</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">container</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_mousePoint</span><span class="p">(</span><span class="nx">container</span><span class="p">,</span> <span class="nx">d3_eventSource</span><span class="p">());</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">d3_mouse_bug44083</span> <span class="o">=</span> <span class="sr">/WebKit/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">d3_window</span><span class="p">.</span><span class="nx">navigator</span><span class="p">.</span><span class="nx">userAgent</span><span class="p">)</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">d3_mousePoint</span><span class="p">(</span><span class="nx">container</span><span class="p">,</span> <span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">changedTouches</span><span class="p">)</span> <span class="nx">e</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">changedTouches</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="kd">var</span> <span class="nx">svg</span> <span class="o">=</span> <span class="nx">container</span><span class="p">.</span><span class="nx">ownerSVGElement</span> <span class="o">||</span> <span class="nx">container</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">svg</span><span class="p">.</span><span class="nx">createSVGPoint</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">point</span> <span class="o">=</span> <span class="nx">svg</span><span class="p">.</span><span class="nx">createSVGPoint</span><span class="p">();</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">d3_mouse_bug44083</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">d3_window</span><span class="p">.</span><span class="nx">scrollX</span> <span class="o">||</span> <span class="nx">d3_window</span><span class="p">.</span><span class="nx">scrollY</span><span class="p">))</span> <span class="p">{</span>
        <span class="nx">svg</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;body&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">).</span><span class="nx">style</span><span class="p">({</span>
          <span class="nx">position</span><span class="o">:</span> <span class="s2">&quot;absolute&quot;</span><span class="p">,</span>
          <span class="nx">top</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
          <span class="nx">left</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
          <span class="nx">margin</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
          <span class="nx">padding</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
          <span class="nx">border</span><span class="o">:</span> <span class="s2">&quot;none&quot;</span>
        <span class="p">},</span> <span class="s2">&quot;important&quot;</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">ctm</span> <span class="o">=</span> <span class="nx">svg</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">].</span><span class="nx">getScreenCTM</span><span class="p">();</span>
        <span class="nx">d3_mouse_bug44083</span> <span class="o">=</span> <span class="o">!</span><span class="p">(</span><span class="nx">ctm</span><span class="p">.</span><span class="nx">f</span> <span class="o">||</span> <span class="nx">ctm</span><span class="p">.</span><span class="nx">e</span><span class="p">);</span>
        <span class="nx">svg</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">d3_mouse_bug44083</span><span class="p">)</span> <span class="nx">point</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">pageX</span><span class="p">,</span> <span class="nx">point</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">pageY</span><span class="p">;</span> <span class="k">else</span> <span class="nx">point</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">clientX</span><span class="p">,</span> 
      <span class="nx">point</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">clientY</span><span class="p">;</span>
      <span class="nx">point</span> <span class="o">=</span> <span class="nx">point</span><span class="p">.</span><span class="nx">matrixTransform</span><span class="p">(</span><span class="nx">container</span><span class="p">.</span><span class="nx">getScreenCTM</span><span class="p">().</span><span class="nx">inverse</span><span class="p">());</span>
      <span class="k">return</span> <span class="p">[</span> <span class="nx">point</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">point</span><span class="p">.</span><span class="nx">y</span> <span class="p">];</span>
    <span class="p">}</span>
    <span class="kd">var</span> <span class="nx">rect</span> <span class="o">=</span> <span class="nx">container</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">();</span>
    <span class="k">return</span> <span class="p">[</span> <span class="nx">e</span><span class="p">.</span><span class="nx">clientX</span> <span class="o">-</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">left</span> <span class="o">-</span> <span class="nx">container</span><span class="p">.</span><span class="nx">clientLeft</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">clientY</span> <span class="o">-</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">top</span> <span class="o">-</span> <span class="nx">container</span><span class="p">.</span><span class="nx">clientTop</span> <span class="p">];</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">touches</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">container</span><span class="p">,</span> <span class="nx">touches</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="nx">touches</span> <span class="o">=</span> <span class="nx">d3_eventSource</span><span class="p">().</span><span class="nx">touches</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">touches</span> <span class="o">?</span> <span class="nx">d3_array</span><span class="p">(</span><span class="nx">touches</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">touch</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">point</span> <span class="o">=</span> <span class="nx">d3_mousePoint</span><span class="p">(</span><span class="nx">container</span><span class="p">,</span> <span class="nx">touch</span><span class="p">);</span>
      <span class="nx">point</span><span class="p">.</span><span class="nx">identifier</span> <span class="o">=</span> <span class="nx">touch</span><span class="p">.</span><span class="nx">identifier</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">point</span><span class="p">;</span>
    <span class="p">})</span> <span class="o">:</span> <span class="p">[];</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">behavior</span><span class="p">.</span><span class="nx">drag</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">event</span> <span class="o">=</span> <span class="nx">d3_eventDispatch</span><span class="p">(</span><span class="nx">drag</span><span class="p">,</span> <span class="s2">&quot;drag&quot;</span><span class="p">,</span> <span class="s2">&quot;dragstart&quot;</span><span class="p">,</span> <span class="s2">&quot;dragend&quot;</span><span class="p">),</span> <span class="nx">origin</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">mousedown</span> <span class="o">=</span> <span class="nx">dragstart</span><span class="p">(</span><span class="nx">d3_noop</span><span class="p">,</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">mouse</span><span class="p">,</span> <span class="nx">d3_behavior_dragMouseSubject</span><span class="p">,</span> <span class="s2">&quot;mousemove&quot;</span><span class="p">,</span> <span class="s2">&quot;mouseup&quot;</span><span class="p">),</span> <span class="nx">touchstart</span> <span class="o">=</span> <span class="nx">dragstart</span><span class="p">(</span><span class="nx">d3_behavior_dragTouchId</span><span class="p">,</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">touch</span><span class="p">,</span> <span class="nx">d3_behavior_dragTouchSubject</span><span class="p">,</span> <span class="s2">&quot;touchmove&quot;</span><span class="p">,</span> <span class="s2">&quot;touchend&quot;</span><span class="p">);</span>
    <span class="kd">function</span> <span class="nx">drag</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;mousedown.drag&quot;</span><span class="p">,</span> <span class="nx">mousedown</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;touchstart.drag&quot;</span><span class="p">,</span> <span class="nx">touchstart</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">dragstart</span><span class="p">(</span><span class="nx">id</span><span class="p">,</span> <span class="nx">position</span><span class="p">,</span> <span class="nx">subject</span><span class="p">,</span> <span class="nx">move</span><span class="p">,</span> <span class="nx">end</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span> <span class="nx">target</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span> <span class="nx">parent</span> <span class="o">=</span> <span class="nx">that</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">,</span> <span class="nx">dispatch</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">of</span><span class="p">(</span><span class="nx">that</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">),</span> <span class="nx">dragged</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">dragId</span> <span class="o">=</span> <span class="nx">id</span><span class="p">(),</span> <span class="nx">dragName</span> <span class="o">=</span> <span class="s2">&quot;.drag&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">dragId</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="nx">dragId</span><span class="p">),</span> <span class="nx">dragOffset</span><span class="p">,</span> <span class="nx">dragSubject</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="nx">subject</span><span class="p">()).</span><span class="nx">on</span><span class="p">(</span><span class="nx">move</span> <span class="o">+</span> <span class="nx">dragName</span><span class="p">,</span> <span class="nx">moved</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="nx">end</span> <span class="o">+</span> <span class="nx">dragName</span><span class="p">,</span> <span class="nx">ended</span><span class="p">),</span> <span class="nx">dragRestore</span> <span class="o">=</span> <span class="nx">d3_event_dragSuppress</span><span class="p">(),</span> <span class="nx">position0</span> <span class="o">=</span> <span class="nx">position</span><span class="p">(</span><span class="nx">parent</span><span class="p">,</span> <span class="nx">dragId</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">origin</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">dragOffset</span> <span class="o">=</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">that</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
          <span class="nx">dragOffset</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">dragOffset</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">position0</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">dragOffset</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">position0</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">];</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">dragOffset</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">];</span>
        <span class="p">}</span>
        <span class="nx">dispatch</span><span class="p">({</span>
          <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;dragstart&quot;</span>
        <span class="p">});</span>
        <span class="kd">function</span> <span class="nx">moved</span><span class="p">()</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">position1</span> <span class="o">=</span> <span class="nx">position</span><span class="p">(</span><span class="nx">parent</span><span class="p">,</span> <span class="nx">dragId</span><span class="p">),</span> <span class="nx">dx</span><span class="p">,</span> <span class="nx">dy</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">position1</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
          <span class="nx">dx</span> <span class="o">=</span> <span class="nx">position1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">position0</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
          <span class="nx">dy</span> <span class="o">=</span> <span class="nx">position1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">position0</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
          <span class="nx">dragged</span> <span class="o">|=</span> <span class="nx">dx</span> <span class="o">|</span> <span class="nx">dy</span><span class="p">;</span>
          <span class="nx">position0</span> <span class="o">=</span> <span class="nx">position1</span><span class="p">;</span>
          <span class="nx">dispatch</span><span class="p">({</span>
            <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;drag&quot;</span><span class="p">,</span>
            <span class="nx">x</span><span class="o">:</span> <span class="nx">position1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">dragOffset</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="nx">y</span><span class="o">:</span> <span class="nx">position1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="nx">dragOffset</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
            <span class="nx">dx</span><span class="o">:</span> <span class="nx">dx</span><span class="p">,</span>
            <span class="nx">dy</span><span class="o">:</span> <span class="nx">dy</span>
          <span class="p">});</span>
        <span class="p">}</span>
        <span class="kd">function</span> <span class="nx">ended</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">position</span><span class="p">(</span><span class="nx">parent</span><span class="p">,</span> <span class="nx">dragId</span><span class="p">))</span> <span class="k">return</span><span class="p">;</span>
          <span class="nx">dragSubject</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">move</span> <span class="o">+</span> <span class="nx">dragName</span><span class="p">,</span> <span class="kc">null</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="nx">end</span> <span class="o">+</span> <span class="nx">dragName</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>
          <span class="nx">dragRestore</span><span class="p">(</span><span class="nx">dragged</span> <span class="o">&amp;&amp;</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span> <span class="o">===</span> <span class="nx">target</span><span class="p">);</span>
          <span class="nx">dispatch</span><span class="p">({</span>
            <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;dragend&quot;</span>
          <span class="p">});</span>
        <span class="p">}</span>
      <span class="p">};</span>
    <span class="p">}</span>
    <span class="nx">drag</span><span class="p">.</span><span class="nx">origin</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">origin</span><span class="p">;</span>
      <span class="nx">origin</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">drag</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">rebind</span><span class="p">(</span><span class="nx">drag</span><span class="p">,</span> <span class="nx">event</span><span class="p">,</span> <span class="s2">&quot;on&quot;</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_behavior_dragTouchId</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">changedTouches</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">identifier</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_behavior_dragTouchSubject</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_behavior_dragMouseSubject</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_window</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="err">π</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">,</span> <span class="err">τ</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="err">π</span><span class="p">,</span> <span class="nx">half</span><span class="err">π</span> <span class="o">=</span> <span class="err">π</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="err">ε</span> <span class="o">=</span> <span class="mi">1</span><span class="nx">e</span><span class="o">-</span><span class="mi">6</span><span class="p">,</span> <span class="err">ε</span><span class="mi">2</span> <span class="o">=</span> <span class="err">ε</span> <span class="o">*</span> <span class="err">ε</span><span class="p">,</span> <span class="nx">d3_radians</span> <span class="o">=</span> <span class="err">π</span> <span class="o">/</span> <span class="mi">180</span><span class="p">,</span> <span class="nx">d3_degrees</span> <span class="o">=</span> <span class="mi">180</span> <span class="o">/</span> <span class="err">π</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">d3_sgn</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">x</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="nx">x</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_cross2d</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="p">(</span><span class="nx">c</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">-</span> <span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">*</span> <span class="p">(</span><span class="nx">c</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_acos</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">x</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="nx">x</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">1</span> <span class="o">?</span> <span class="err">π</span> <span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">acos</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_asin</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">x</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">?</span> <span class="nx">half</span><span class="err">π</span> <span class="o">:</span> <span class="nx">x</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">1</span> <span class="o">?</span> <span class="o">-</span><span class="nx">half</span><span class="err">π</span> <span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">asin</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_sinh</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">((</span><span class="nx">x</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">exp</span><span class="p">(</span><span class="nx">x</span><span class="p">))</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">/</span> <span class="nx">x</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_cosh</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">((</span><span class="nx">x</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">exp</span><span class="p">(</span><span class="nx">x</span><span class="p">))</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">/</span> <span class="nx">x</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_tanh</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">((</span><span class="nx">x</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">exp</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="nx">x</span><span class="p">))</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nx">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_haversin</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="nx">x</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span> <span class="o">*</span> <span class="nx">x</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="err">ρ</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">SQRT2</span><span class="p">,</span> <span class="err">ρ</span><span class="mi">2</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span> <span class="err">ρ</span><span class="mi">4</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">interpolateZoom</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">p0</span><span class="p">,</span> <span class="nx">p1</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">ux0</span> <span class="o">=</span> <span class="nx">p0</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">uy0</span> <span class="o">=</span> <span class="nx">p0</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">w0</span> <span class="o">=</span> <span class="nx">p0</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nx">ux1</span> <span class="o">=</span> <span class="nx">p1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">uy1</span> <span class="o">=</span> <span class="nx">p1</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">w1</span> <span class="o">=</span> <span class="nx">p1</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
    <span class="kd">var</span> <span class="nx">dx</span> <span class="o">=</span> <span class="nx">ux1</span> <span class="o">-</span> <span class="nx">ux0</span><span class="p">,</span> <span class="nx">dy</span> <span class="o">=</span> <span class="nx">uy1</span> <span class="o">-</span> <span class="nx">uy0</span><span class="p">,</span> <span class="nx">d2</span> <span class="o">=</span> <span class="nx">dx</span> <span class="o">*</span> <span class="nx">dx</span> <span class="o">+</span> <span class="nx">dy</span> <span class="o">*</span> <span class="nx">dy</span><span class="p">,</span> <span class="nx">d1</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">d2</span><span class="p">),</span> <span class="nx">b0</span> <span class="o">=</span> <span class="p">(</span><span class="nx">w1</span> <span class="o">*</span> <span class="nx">w1</span> <span class="o">-</span> <span class="nx">w0</span> <span class="o">*</span> <span class="nx">w0</span> <span class="o">+</span> <span class="err">ρ</span><span class="mi">4</span> <span class="o">*</span> <span class="nx">d2</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="nx">w0</span> <span class="o">*</span> <span class="err">ρ</span><span class="mi">2</span> <span class="o">*</span> <span class="nx">d1</span><span class="p">),</span> <span class="nx">b1</span> <span class="o">=</span> <span class="p">(</span><span class="nx">w1</span> <span class="o">*</span> <span class="nx">w1</span> <span class="o">-</span> <span class="nx">w0</span> <span class="o">*</span> <span class="nx">w0</span> <span class="o">-</span> <span class="err">ρ</span><span class="mi">4</span> <span class="o">*</span> <span class="nx">d2</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="nx">w1</span> <span class="o">*</span> <span class="err">ρ</span><span class="mi">2</span> <span class="o">*</span> <span class="nx">d1</span><span class="p">),</span> <span class="nx">r0</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">b0</span> <span class="o">*</span> <span class="nx">b0</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="nx">b0</span><span class="p">),</span> <span class="nx">r1</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">b1</span> <span class="o">*</span> <span class="nx">b1</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="nx">b1</span><span class="p">),</span> <span class="nx">dr</span> <span class="o">=</span> <span class="nx">r1</span> <span class="o">-</span> <span class="nx">r0</span><span class="p">,</span> <span class="nx">S</span> <span class="o">=</span> <span class="p">(</span><span class="nx">dr</span> <span class="o">||</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">w1</span> <span class="o">/</span> <span class="nx">w0</span><span class="p">))</span> <span class="o">/</span> <span class="err">ρ</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">interpolate</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="nx">t</span> <span class="o">*</span> <span class="nx">S</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">dr</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">coshr0</span> <span class="o">=</span> <span class="nx">d3_cosh</span><span class="p">(</span><span class="nx">r0</span><span class="p">),</span> <span class="nx">u</span> <span class="o">=</span> <span class="nx">w0</span> <span class="o">/</span> <span class="p">(</span><span class="err">ρ</span><span class="mi">2</span> <span class="o">*</span> <span class="nx">d1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="nx">coshr0</span> <span class="o">*</span> <span class="nx">d3_tanh</span><span class="p">(</span><span class="err">ρ</span> <span class="o">*</span> <span class="nx">s</span> <span class="o">+</span> <span class="nx">r0</span><span class="p">)</span> <span class="o">-</span> <span class="nx">d3_sinh</span><span class="p">(</span><span class="nx">r0</span><span class="p">));</span>
        <span class="k">return</span> <span class="p">[</span> <span class="nx">ux0</span> <span class="o">+</span> <span class="nx">u</span> <span class="o">*</span> <span class="nx">dx</span><span class="p">,</span> <span class="nx">uy0</span> <span class="o">+</span> <span class="nx">u</span> <span class="o">*</span> <span class="nx">dy</span><span class="p">,</span> <span class="nx">w0</span> <span class="o">*</span> <span class="nx">coshr0</span> <span class="o">/</span> <span class="nx">d3_cosh</span><span class="p">(</span><span class="err">ρ</span> <span class="o">*</span> <span class="nx">s</span> <span class="o">+</span> <span class="nx">r0</span><span class="p">)</span> <span class="p">];</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="p">[</span> <span class="nx">ux0</span> <span class="o">+</span> <span class="nx">t</span> <span class="o">*</span> <span class="nx">dx</span><span class="p">,</span> <span class="nx">uy0</span> <span class="o">+</span> <span class="nx">t</span> <span class="o">*</span> <span class="nx">dy</span><span class="p">,</span> <span class="nx">w0</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">exp</span><span class="p">(</span><span class="err">ρ</span> <span class="o">*</span> <span class="nx">s</span><span class="p">)</span> <span class="p">];</span>
    <span class="p">}</span>
    <span class="nx">interpolate</span><span class="p">.</span><span class="nx">duration</span> <span class="o">=</span> <span class="nx">S</span> <span class="o">*</span> <span class="mi">1</span><span class="nx">e3</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">interpolate</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">behavior</span><span class="p">.</span><span class="nx">zoom</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">view</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">x</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">y</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">k</span><span class="o">:</span> <span class="mi">1</span>
    <span class="p">},</span> <span class="nx">translate0</span><span class="p">,</span> <span class="nx">center</span><span class="p">,</span> <span class="nx">size</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">960</span><span class="p">,</span> <span class="mi">500</span> <span class="p">],</span> <span class="nx">scaleExtent</span> <span class="o">=</span> <span class="nx">d3_behavior_zoomInfinity</span><span class="p">,</span> <span class="nx">mousedown</span> <span class="o">=</span> <span class="s2">&quot;mousedown.zoom&quot;</span><span class="p">,</span> <span class="nx">mousemove</span> <span class="o">=</span> <span class="s2">&quot;mousemove.zoom&quot;</span><span class="p">,</span> <span class="nx">mouseup</span> <span class="o">=</span> <span class="s2">&quot;mouseup.zoom&quot;</span><span class="p">,</span> <span class="nx">mousewheelTimer</span><span class="p">,</span> <span class="nx">touchstart</span> <span class="o">=</span> <span class="s2">&quot;touchstart.zoom&quot;</span><span class="p">,</span> <span class="nx">touchtime</span><span class="p">,</span> <span class="nx">event</span> <span class="o">=</span> <span class="nx">d3_eventDispatch</span><span class="p">(</span><span class="nx">zoom</span><span class="p">,</span> <span class="s2">&quot;zoomstart&quot;</span><span class="p">,</span> <span class="s2">&quot;zoom&quot;</span><span class="p">,</span> <span class="s2">&quot;zoomend&quot;</span><span class="p">),</span> <span class="nx">x0</span><span class="p">,</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">y0</span><span class="p">,</span> <span class="nx">y1</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">zoom</span><span class="p">(</span><span class="nx">g</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">g</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">mousedown</span><span class="p">,</span> <span class="nx">mousedowned</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="nx">d3_behavior_zoomWheel</span> <span class="o">+</span> <span class="s2">&quot;.zoom&quot;</span><span class="p">,</span> <span class="nx">mousewheeled</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="nx">mousemove</span><span class="p">,</span> <span class="nx">mousewheelreset</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;dblclick.zoom&quot;</span><span class="p">,</span> <span class="nx">dblclicked</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="nx">touchstart</span><span class="p">,</span> <span class="nx">touchstarted</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">zoom</span><span class="p">.</span><span class="nx">event</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">g</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">g</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">dispatch</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">of</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">),</span> <span class="nx">view1</span> <span class="o">=</span> <span class="nx">view</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">d3_transitionInheritId</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">transition</span><span class="p">().</span><span class="nx">each</span><span class="p">(</span><span class="s2">&quot;start.zoom&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">view</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">__chart__</span> <span class="o">||</span> <span class="p">{</span>
              <span class="nx">x</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
              <span class="nx">y</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
              <span class="nx">k</span><span class="o">:</span> <span class="mi">1</span>
            <span class="p">};</span>
            <span class="nx">zoomstarted</span><span class="p">(</span><span class="nx">dispatch</span><span class="p">);</span>
          <span class="p">}).</span><span class="nx">tween</span><span class="p">(</span><span class="s2">&quot;zoom:zoom&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">dx</span> <span class="o">=</span> <span class="nx">size</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">dy</span> <span class="o">=</span> <span class="nx">size</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">cx</span> <span class="o">=</span> <span class="nx">dx</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">cy</span> <span class="o">=</span> <span class="nx">dy</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">interpolateZoom</span><span class="p">([</span> <span class="p">(</span><span class="nx">cx</span> <span class="o">-</span> <span class="nx">view</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="o">/</span> <span class="nx">view</span><span class="p">.</span><span class="nx">k</span><span class="p">,</span> <span class="p">(</span><span class="nx">cy</span> <span class="o">-</span> <span class="nx">view</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="o">/</span> <span class="nx">view</span><span class="p">.</span><span class="nx">k</span><span class="p">,</span> <span class="nx">dx</span> <span class="o">/</span> <span class="nx">view</span><span class="p">.</span><span class="nx">k</span> <span class="p">],</span> <span class="p">[</span> <span class="p">(</span><span class="nx">cx</span> <span class="o">-</span> <span class="nx">view1</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="o">/</span> <span class="nx">view1</span><span class="p">.</span><span class="nx">k</span><span class="p">,</span> <span class="p">(</span><span class="nx">cy</span> <span class="o">-</span> <span class="nx">view1</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="o">/</span> <span class="nx">view1</span><span class="p">.</span><span class="nx">k</span><span class="p">,</span> <span class="nx">dx</span> <span class="o">/</span> <span class="nx">view1</span><span class="p">.</span><span class="nx">k</span> <span class="p">]);</span>
            <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">i</span><span class="p">(</span><span class="nx">t</span><span class="p">),</span> <span class="nx">k</span> <span class="o">=</span> <span class="nx">dx</span> <span class="o">/</span> <span class="nx">l</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
              <span class="k">this</span><span class="p">.</span><span class="nx">__chart__</span> <span class="o">=</span> <span class="nx">view</span> <span class="o">=</span> <span class="p">{</span>
                <span class="nx">x</span><span class="o">:</span> <span class="nx">cx</span> <span class="o">-</span> <span class="nx">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nx">k</span><span class="p">,</span>
                <span class="nx">y</span><span class="o">:</span> <span class="nx">cy</span> <span class="o">-</span> <span class="nx">l</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nx">k</span><span class="p">,</span>
                <span class="nx">k</span><span class="o">:</span> <span class="nx">k</span>
              <span class="p">};</span>
              <span class="nx">zoomed</span><span class="p">(</span><span class="nx">dispatch</span><span class="p">);</span>
            <span class="p">};</span>
          <span class="p">}).</span><span class="nx">each</span><span class="p">(</span><span class="s2">&quot;end.zoom&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">zoomended</span><span class="p">(</span><span class="nx">dispatch</span><span class="p">);</span>
          <span class="p">});</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">__chart__</span> <span class="o">=</span> <span class="nx">view</span><span class="p">;</span>
          <span class="nx">zoomstarted</span><span class="p">(</span><span class="nx">dispatch</span><span class="p">);</span>
          <span class="nx">zoomed</span><span class="p">(</span><span class="nx">dispatch</span><span class="p">);</span>
          <span class="nx">zoomended</span><span class="p">(</span><span class="nx">dispatch</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">});</span>
    <span class="p">};</span>
    <span class="nx">zoom</span><span class="p">.</span><span class="nx">translate</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="p">[</span> <span class="nx">view</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">view</span><span class="p">.</span><span class="nx">y</span> <span class="p">];</span>
      <span class="nx">view</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">x</span><span class="o">:</span> <span class="o">+</span><span class="nx">_</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
        <span class="nx">y</span><span class="o">:</span> <span class="o">+</span><span class="nx">_</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="nx">k</span><span class="o">:</span> <span class="nx">view</span><span class="p">.</span><span class="nx">k</span>
      <span class="p">};</span>
      <span class="nx">rescale</span><span class="p">();</span>
      <span class="k">return</span> <span class="nx">zoom</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">zoom</span><span class="p">.</span><span class="nx">scale</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">view</span><span class="p">.</span><span class="nx">k</span><span class="p">;</span>
      <span class="nx">view</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">x</span><span class="o">:</span> <span class="nx">view</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
        <span class="nx">y</span><span class="o">:</span> <span class="nx">view</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
        <span class="nx">k</span><span class="o">:</span> <span class="o">+</span><span class="nx">_</span>
      <span class="p">};</span>
      <span class="nx">rescale</span><span class="p">();</span>
      <span class="k">return</span> <span class="nx">zoom</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">zoom</span><span class="p">.</span><span class="nx">scaleExtent</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">scaleExtent</span><span class="p">;</span>
      <span class="nx">scaleExtent</span> <span class="o">=</span> <span class="nx">_</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">d3_behavior_zoomInfinity</span> <span class="o">:</span> <span class="p">[</span> <span class="o">+</span><span class="nx">_</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="o">+</span><span class="nx">_</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">];</span>
      <span class="k">return</span> <span class="nx">zoom</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">zoom</span><span class="p">.</span><span class="nx">center</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">center</span><span class="p">;</span>
      <span class="nx">center</span> <span class="o">=</span> <span class="nx">_</span> <span class="o">&amp;&amp;</span> <span class="p">[</span> <span class="o">+</span><span class="nx">_</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="o">+</span><span class="nx">_</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">];</span>
      <span class="k">return</span> <span class="nx">zoom</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">zoom</span><span class="p">.</span><span class="nx">size</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">size</span><span class="p">;</span>
      <span class="nx">size</span> <span class="o">=</span> <span class="nx">_</span> <span class="o">&amp;&amp;</span> <span class="p">[</span> <span class="o">+</span><span class="nx">_</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="o">+</span><span class="nx">_</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">];</span>
      <span class="k">return</span> <span class="nx">zoom</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">zoom</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">z</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">x1</span><span class="p">;</span>
      <span class="nx">x1</span> <span class="o">=</span> <span class="nx">z</span><span class="p">;</span>
      <span class="nx">x0</span> <span class="o">=</span> <span class="nx">z</span><span class="p">.</span><span class="nx">copy</span><span class="p">();</span>
      <span class="nx">view</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">x</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">y</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">k</span><span class="o">:</span> <span class="mi">1</span>
      <span class="p">};</span>
      <span class="k">return</span> <span class="nx">zoom</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">zoom</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">z</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">y1</span><span class="p">;</span>
      <span class="nx">y1</span> <span class="o">=</span> <span class="nx">z</span><span class="p">;</span>
      <span class="nx">y0</span> <span class="o">=</span> <span class="nx">z</span><span class="p">.</span><span class="nx">copy</span><span class="p">();</span>
      <span class="nx">view</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">x</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">y</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">k</span><span class="o">:</span> <span class="mi">1</span>
      <span class="p">};</span>
      <span class="k">return</span> <span class="nx">zoom</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="kd">function</span> <span class="nx">location</span><span class="p">(</span><span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">[</span> <span class="p">(</span><span class="nx">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">view</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="o">/</span> <span class="nx">view</span><span class="p">.</span><span class="nx">k</span><span class="p">,</span> <span class="p">(</span><span class="nx">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">view</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="o">/</span> <span class="nx">view</span><span class="p">.</span><span class="nx">k</span> <span class="p">];</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">point</span><span class="p">(</span><span class="nx">l</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">[</span> <span class="nx">l</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nx">view</span><span class="p">.</span><span class="nx">k</span> <span class="o">+</span> <span class="nx">view</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">l</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nx">view</span><span class="p">.</span><span class="nx">k</span> <span class="o">+</span> <span class="nx">view</span><span class="p">.</span><span class="nx">y</span> <span class="p">];</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">scaleTo</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">view</span><span class="p">.</span><span class="nx">k</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">scaleExtent</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">scaleExtent</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">s</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">translateTo</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="nx">l</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">l</span> <span class="o">=</span> <span class="nx">point</span><span class="p">(</span><span class="nx">l</span><span class="p">);</span>
      <span class="nx">view</span><span class="p">.</span><span class="nx">x</span> <span class="o">+=</span> <span class="nx">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">l</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
      <span class="nx">view</span><span class="p">.</span><span class="nx">y</span> <span class="o">+=</span> <span class="nx">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">l</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">rescale</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">x1</span><span class="p">)</span> <span class="nx">x1</span><span class="p">.</span><span class="nx">domain</span><span class="p">(</span><span class="nx">x0</span><span class="p">.</span><span class="nx">range</span><span class="p">().</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">view</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="o">/</span> <span class="nx">view</span><span class="p">.</span><span class="nx">k</span><span class="p">;</span>
      <span class="p">}).</span><span class="nx">map</span><span class="p">(</span><span class="nx">x0</span><span class="p">.</span><span class="nx">invert</span><span class="p">));</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">y1</span><span class="p">)</span> <span class="nx">y1</span><span class="p">.</span><span class="nx">domain</span><span class="p">(</span><span class="nx">y0</span><span class="p">.</span><span class="nx">range</span><span class="p">().</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">(</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">view</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="o">/</span> <span class="nx">view</span><span class="p">.</span><span class="nx">k</span><span class="p">;</span>
      <span class="p">}).</span><span class="nx">map</span><span class="p">(</span><span class="nx">y0</span><span class="p">.</span><span class="nx">invert</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">zoomstarted</span><span class="p">(</span><span class="nx">dispatch</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">dispatch</span><span class="p">({</span>
        <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;zoomstart&quot;</span>
      <span class="p">});</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">zoomed</span><span class="p">(</span><span class="nx">dispatch</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">rescale</span><span class="p">();</span>
      <span class="nx">dispatch</span><span class="p">({</span>
        <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;zoom&quot;</span><span class="p">,</span>
        <span class="nx">scale</span><span class="o">:</span> <span class="nx">view</span><span class="p">.</span><span class="nx">k</span><span class="p">,</span>
        <span class="nx">translate</span><span class="o">:</span> <span class="p">[</span> <span class="nx">view</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">view</span><span class="p">.</span><span class="nx">y</span> <span class="p">]</span>
      <span class="p">});</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">zoomended</span><span class="p">(</span><span class="nx">dispatch</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">dispatch</span><span class="p">({</span>
        <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;zoomend&quot;</span>
      <span class="p">});</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">mousedowned</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span> <span class="nx">target</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span> <span class="nx">dispatch</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">of</span><span class="p">(</span><span class="nx">that</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">),</span> <span class="nx">dragged</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">subject</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="nx">d3_window</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="nx">mousemove</span><span class="p">,</span> <span class="nx">moved</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="nx">mouseup</span><span class="p">,</span> <span class="nx">ended</span><span class="p">),</span> <span class="nx">location0</span> <span class="o">=</span> <span class="nx">location</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">mouse</span><span class="p">(</span><span class="nx">that</span><span class="p">)),</span> <span class="nx">dragRestore</span> <span class="o">=</span> <span class="nx">d3_event_dragSuppress</span><span class="p">();</span>
      <span class="nx">d3_selection_interrupt</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">that</span><span class="p">);</span>
      <span class="nx">zoomstarted</span><span class="p">(</span><span class="nx">dispatch</span><span class="p">);</span>
      <span class="kd">function</span> <span class="nx">moved</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">dragged</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="nx">translateTo</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">mouse</span><span class="p">(</span><span class="nx">that</span><span class="p">),</span> <span class="nx">location0</span><span class="p">);</span>
        <span class="nx">zoomed</span><span class="p">(</span><span class="nx">dispatch</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="kd">function</span> <span class="nx">ended</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">subject</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">mousemove</span><span class="p">,</span> <span class="nx">d3_window</span> <span class="o">===</span> <span class="nx">that</span> <span class="o">?</span> <span class="nx">mousewheelreset</span> <span class="o">:</span> <span class="kc">null</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="nx">mouseup</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>
        <span class="nx">dragRestore</span><span class="p">(</span><span class="nx">dragged</span> <span class="o">&amp;&amp;</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span> <span class="o">===</span> <span class="nx">target</span><span class="p">);</span>
        <span class="nx">zoomended</span><span class="p">(</span><span class="nx">dispatch</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">touchstarted</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">that</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span> <span class="nx">dispatch</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">of</span><span class="p">(</span><span class="nx">that</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">),</span> <span class="nx">locations0</span> <span class="o">=</span> <span class="p">{},</span> <span class="nx">distance0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">scale0</span><span class="p">,</span> <span class="nx">zoomName</span> <span class="o">=</span> <span class="s2">&quot;.zoom-&quot;</span> <span class="o">+</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">changedTouches</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">identifier</span><span class="p">,</span> <span class="nx">touchmove</span> <span class="o">=</span> <span class="s2">&quot;touchmove&quot;</span> <span class="o">+</span> <span class="nx">zoomName</span><span class="p">,</span> <span class="nx">touchend</span> <span class="o">=</span> <span class="s2">&quot;touchend&quot;</span> <span class="o">+</span> <span class="nx">zoomName</span><span class="p">,</span> <span class="nx">targets</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">subject</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="nx">that</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="nx">mousedown</span><span class="p">,</span> <span class="kc">null</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="nx">touchstart</span><span class="p">,</span> <span class="nx">started</span><span class="p">),</span> <span class="nx">dragRestore</span> <span class="o">=</span> <span class="nx">d3_event_dragSuppress</span><span class="p">();</span>
      <span class="nx">d3_selection_interrupt</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">that</span><span class="p">);</span>
      <span class="nx">started</span><span class="p">();</span>
      <span class="nx">zoomstarted</span><span class="p">(</span><span class="nx">dispatch</span><span class="p">);</span>
      <span class="kd">function</span> <span class="nx">relocate</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">touches</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">touches</span><span class="p">(</span><span class="nx">that</span><span class="p">);</span>
        <span class="nx">scale0</span> <span class="o">=</span> <span class="nx">view</span><span class="p">.</span><span class="nx">k</span><span class="p">;</span>
        <span class="nx">touches</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">identifier</span> <span class="k">in</span> <span class="nx">locations0</span><span class="p">)</span> <span class="nx">locations0</span><span class="p">[</span><span class="nx">t</span><span class="p">.</span><span class="nx">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="nx">location</span><span class="p">(</span><span class="nx">t</span><span class="p">);</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="nx">touches</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="kd">function</span> <span class="nx">started</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">target</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">;</span>
        <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="nx">target</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="nx">touchmove</span><span class="p">,</span> <span class="nx">moved</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="nx">touchend</span><span class="p">,</span> <span class="nx">ended</span><span class="p">);</span>
        <span class="nx">targets</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">target</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">changed</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">changedTouches</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">changed</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">locations0</span><span class="p">[</span><span class="nx">changed</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">identifier</span><span class="p">]</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="kd">var</span> <span class="nx">touches</span> <span class="o">=</span> <span class="nx">relocate</span><span class="p">(),</span> <span class="nx">now</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">touches</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">now</span> <span class="o">-</span> <span class="nx">touchtime</span> <span class="o">&lt;</span> <span class="mi">500</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">p</span> <span class="o">=</span> <span class="nx">touches</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">locations0</span><span class="p">[</span><span class="nx">p</span><span class="p">.</span><span class="nx">identifier</span><span class="p">];</span>
            <span class="nx">scaleTo</span><span class="p">(</span><span class="nx">view</span><span class="p">.</span><span class="nx">k</span> <span class="o">*</span> <span class="mi">2</span><span class="p">);</span>
            <span class="nx">translateTo</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="nx">l</span><span class="p">);</span>
            <span class="nx">d3_eventPreventDefault</span><span class="p">();</span>
            <span class="nx">zoomed</span><span class="p">(</span><span class="nx">dispatch</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="nx">touchtime</span> <span class="o">=</span> <span class="nx">now</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">touches</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">p</span> <span class="o">=</span> <span class="nx">touches</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">q</span> <span class="o">=</span> <span class="nx">touches</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">dx</span> <span class="o">=</span> <span class="nx">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">q</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">dy</span> <span class="o">=</span> <span class="nx">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">q</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
          <span class="nx">distance0</span> <span class="o">=</span> <span class="nx">dx</span> <span class="o">*</span> <span class="nx">dx</span> <span class="o">+</span> <span class="nx">dy</span> <span class="o">*</span> <span class="nx">dy</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="kd">function</span> <span class="nx">moved</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">touches</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">touches</span><span class="p">(</span><span class="nx">that</span><span class="p">),</span> <span class="nx">p0</span><span class="p">,</span> <span class="nx">l0</span><span class="p">,</span> <span class="nx">p1</span><span class="p">,</span> <span class="nx">l1</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">touches</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">,</span> <span class="nx">l1</span> <span class="o">=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">p1</span> <span class="o">=</span> <span class="nx">touches</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">l1</span> <span class="o">=</span> <span class="nx">locations0</span><span class="p">[</span><span class="nx">p1</span><span class="p">.</span><span class="nx">identifier</span><span class="p">])</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">l0</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
            <span class="nx">p0</span> <span class="o">=</span> <span class="nx">p1</span><span class="p">,</span> <span class="nx">l0</span> <span class="o">=</span> <span class="nx">l1</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">l1</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">distance1</span> <span class="o">=</span> <span class="p">(</span><span class="nx">distance1</span> <span class="o">=</span> <span class="nx">p1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">p0</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="nx">distance1</span> <span class="o">+</span> <span class="p">(</span><span class="nx">distance1</span> <span class="o">=</span> <span class="nx">p1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">p0</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">*</span> <span class="nx">distance1</span><span class="p">,</span> <span class="nx">scale1</span> <span class="o">=</span> <span class="nx">distance0</span> <span class="o">&amp;&amp;</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">distance1</span> <span class="o">/</span> <span class="nx">distance0</span><span class="p">);</span>
          <span class="nx">p0</span> <span class="o">=</span> <span class="p">[</span> <span class="p">(</span><span class="nx">p0</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">p1</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="nx">p0</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="nx">p1</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span> <span class="p">];</span>
          <span class="nx">l0</span> <span class="o">=</span> <span class="p">[</span> <span class="p">(</span><span class="nx">l0</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">l1</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="nx">l0</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="nx">l1</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span> <span class="p">];</span>
          <span class="nx">scaleTo</span><span class="p">(</span><span class="nx">scale1</span> <span class="o">*</span> <span class="nx">scale0</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="nx">touchtime</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="nx">translateTo</span><span class="p">(</span><span class="nx">p0</span><span class="p">,</span> <span class="nx">l0</span><span class="p">);</span>
        <span class="nx">zoomed</span><span class="p">(</span><span class="nx">dispatch</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="kd">function</span> <span class="nx">ended</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">touches</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">changed</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">changedTouches</span><span class="p">;</span>
          <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">changed</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">delete</span> <span class="nx">locations0</span><span class="p">[</span><span class="nx">changed</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">identifier</span><span class="p">];</span>
          <span class="p">}</span>
          <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">identifier</span> <span class="k">in</span> <span class="nx">locations0</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="k">void</span> <span class="nx">relocate</span><span class="p">();</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="nx">d3</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="nx">targets</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="nx">zoomName</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>
        <span class="nx">subject</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="nx">mousedown</span><span class="p">,</span> <span class="nx">mousedowned</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="nx">touchstart</span><span class="p">,</span> <span class="nx">touchstarted</span><span class="p">);</span>
        <span class="nx">dragRestore</span><span class="p">();</span>
        <span class="nx">zoomended</span><span class="p">(</span><span class="nx">dispatch</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">mousewheeled</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">dispatch</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">of</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">mousewheelTimer</span><span class="p">)</span> <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">mousewheelTimer</span><span class="p">);</span> <span class="k">else</span> <span class="nx">d3_selection_interrupt</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">),</span> 
      <span class="nx">zoomstarted</span><span class="p">(</span><span class="nx">dispatch</span><span class="p">);</span>
      <span class="nx">mousewheelTimer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">mousewheelTimer</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="nx">zoomended</span><span class="p">(</span><span class="nx">dispatch</span><span class="p">);</span>
      <span class="p">},</span> <span class="mi">50</span><span class="p">);</span>
      <span class="nx">d3_eventPreventDefault</span><span class="p">();</span>
      <span class="kd">var</span> <span class="nx">point</span> <span class="o">=</span> <span class="nx">center</span> <span class="o">||</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">mouse</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">translate0</span><span class="p">)</span> <span class="nx">translate0</span> <span class="o">=</span> <span class="nx">location</span><span class="p">(</span><span class="nx">point</span><span class="p">);</span>
      <span class="nx">scaleTo</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nx">d3_behavior_zoomDelta</span><span class="p">()</span> <span class="o">*</span> <span class="p">.</span><span class="mi">002</span><span class="p">)</span> <span class="o">*</span> <span class="nx">view</span><span class="p">.</span><span class="nx">k</span><span class="p">);</span>
      <span class="nx">translateTo</span><span class="p">(</span><span class="nx">point</span><span class="p">,</span> <span class="nx">translate0</span><span class="p">);</span>
      <span class="nx">zoomed</span><span class="p">(</span><span class="nx">dispatch</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">mousewheelreset</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">translate0</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">dblclicked</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">dispatch</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">of</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">),</span> <span class="nx">p</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">mouse</span><span class="p">(</span><span class="k">this</span><span class="p">),</span> <span class="nx">l</span> <span class="o">=</span> <span class="nx">location</span><span class="p">(</span><span class="nx">p</span><span class="p">),</span> <span class="nx">k</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">view</span><span class="p">.</span><span class="nx">k</span><span class="p">)</span> <span class="o">/</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">LN2</span><span class="p">;</span>
      <span class="nx">zoomstarted</span><span class="p">(</span><span class="nx">dispatch</span><span class="p">);</span>
      <span class="nx">scaleTo</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">shiftKey</span> <span class="o">?</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="nx">k</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">k</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">));</span>
      <span class="nx">translateTo</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="nx">l</span><span class="p">);</span>
      <span class="nx">zoomed</span><span class="p">(</span><span class="nx">dispatch</span><span class="p">);</span>
      <span class="nx">zoomended</span><span class="p">(</span><span class="nx">dispatch</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">rebind</span><span class="p">(</span><span class="nx">zoom</span><span class="p">,</span> <span class="nx">event</span><span class="p">,</span> <span class="s2">&quot;on&quot;</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">d3_behavior_zoomInfinity</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">Infinity</span> <span class="p">];</span>
  <span class="kd">var</span> <span class="nx">d3_behavior_zoomDelta</span><span class="p">,</span> <span class="nx">d3_behavior_zoomWheel</span> <span class="o">=</span> <span class="s2">&quot;onwheel&quot;</span> <span class="k">in</span> <span class="nx">d3_document</span> <span class="o">?</span> <span class="p">(</span><span class="nx">d3_behavior_zoomDelta</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">-</span><span class="nx">d3</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">deltaY</span> <span class="o">*</span> <span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">deltaMode</span> <span class="o">?</span> <span class="mi">120</span> <span class="o">:</span> <span class="mi">1</span><span class="p">);</span>
  <span class="p">},</span> <span class="s2">&quot;wheel&quot;</span><span class="p">)</span> <span class="o">:</span> <span class="s2">&quot;onmousewheel&quot;</span> <span class="k">in</span> <span class="nx">d3_document</span> <span class="o">?</span> <span class="p">(</span><span class="nx">d3_behavior_zoomDelta</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">wheelDelta</span><span class="p">;</span>
  <span class="p">},</span> <span class="s2">&quot;mousewheel&quot;</span><span class="p">)</span> <span class="o">:</span> <span class="p">(</span><span class="nx">d3_behavior_zoomDelta</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">-</span><span class="nx">d3</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">detail</span><span class="p">;</span>
  <span class="p">},</span> <span class="s2">&quot;MozMousePixelScroll&quot;</span><span class="p">);</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">color</span> <span class="o">=</span> <span class="nx">d3_color</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">d3_color</span><span class="p">()</span> <span class="p">{}</span>
  <span class="nx">d3_color</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">rgb</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">hsl</span> <span class="o">=</span> <span class="nx">d3_hsl</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">d3_hsl</span><span class="p">(</span><span class="nx">h</span><span class="p">,</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">l</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span> <span class="k">instanceof</span> <span class="nx">d3_hsl</span> <span class="o">?</span> <span class="k">void</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">h</span> <span class="o">=</span> <span class="o">+</span><span class="nx">h</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">s</span> <span class="o">=</span> <span class="o">+</span><span class="nx">s</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">l</span> <span class="o">=</span> <span class="o">+</span><span class="nx">l</span><span class="p">)</span> <span class="o">:</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="o">?</span> <span class="nx">h</span> <span class="k">instanceof</span> <span class="nx">d3_hsl</span> <span class="o">?</span> <span class="k">new</span> <span class="nx">d3_hsl</span><span class="p">(</span><span class="nx">h</span><span class="p">.</span><span class="nx">h</span><span class="p">,</span> <span class="nx">h</span><span class="p">.</span><span class="nx">s</span><span class="p">,</span> <span class="nx">h</span><span class="p">.</span><span class="nx">l</span><span class="p">)</span> <span class="o">:</span> <span class="nx">d3_rgb_parse</span><span class="p">(</span><span class="s2">&quot;&quot;</span> <span class="o">+</span> <span class="nx">h</span><span class="p">,</span> <span class="nx">d3_rgb_hsl</span><span class="p">,</span> <span class="nx">d3_hsl</span><span class="p">)</span> <span class="o">:</span> <span class="k">new</span> <span class="nx">d3_hsl</span><span class="p">(</span><span class="nx">h</span><span class="p">,</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">l</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">d3_hslPrototype</span> <span class="o">=</span> <span class="nx">d3_hsl</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">d3_color</span><span class="p">();</span>
  <span class="nx">d3_hslPrototype</span><span class="p">.</span><span class="nx">brighter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">k</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">k</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(.</span><span class="mi">7</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">k</span> <span class="o">:</span> <span class="mi">1</span><span class="p">);</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">d3_hsl</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">h</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">s</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">l</span> <span class="o">/</span> <span class="nx">k</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nx">d3_hslPrototype</span><span class="p">.</span><span class="nx">darker</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">k</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">k</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(.</span><span class="mi">7</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">k</span> <span class="o">:</span> <span class="mi">1</span><span class="p">);</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">d3_hsl</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">h</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">s</span><span class="p">,</span> <span class="nx">k</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">l</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nx">d3_hslPrototype</span><span class="p">.</span><span class="nx">rgb</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_hsl_rgb</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">h</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">s</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">l</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_hsl_rgb</span><span class="p">(</span><span class="nx">h</span><span class="p">,</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">l</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">m1</span><span class="p">,</span> <span class="nx">m2</span><span class="p">;</span>
    <span class="nx">h</span> <span class="o">=</span> <span class="nb">isNaN</span><span class="p">(</span><span class="nx">h</span><span class="p">)</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="p">(</span><span class="nx">h</span> <span class="o">%=</span> <span class="mi">360</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="nx">h</span> <span class="o">+</span> <span class="mi">360</span> <span class="o">:</span> <span class="nx">h</span><span class="p">;</span>
    <span class="nx">s</span> <span class="o">=</span> <span class="nb">isNaN</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="nx">s</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="nx">s</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="nx">s</span><span class="p">;</span>
    <span class="nx">l</span> <span class="o">=</span> <span class="nx">l</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="nx">l</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="nx">l</span><span class="p">;</span>
    <span class="nx">m2</span> <span class="o">=</span> <span class="nx">l</span> <span class="o">&lt;=</span> <span class="p">.</span><span class="mi">5</span> <span class="o">?</span> <span class="nx">l</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="nx">s</span><span class="p">)</span> <span class="o">:</span> <span class="nx">l</span> <span class="o">+</span> <span class="nx">s</span> <span class="o">-</span> <span class="nx">l</span> <span class="o">*</span> <span class="nx">s</span><span class="p">;</span>
    <span class="nx">m1</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="nx">l</span> <span class="o">-</span> <span class="nx">m2</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">v</span><span class="p">(</span><span class="nx">h</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">h</span> <span class="o">&gt;</span> <span class="mi">360</span><span class="p">)</span> <span class="nx">h</span> <span class="o">-=</span> <span class="mi">360</span><span class="p">;</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">h</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="nx">h</span> <span class="o">+=</span> <span class="mi">360</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">h</span> <span class="o">&lt;</span> <span class="mi">60</span><span class="p">)</span> <span class="k">return</span> <span class="nx">m1</span> <span class="o">+</span> <span class="p">(</span><span class="nx">m2</span> <span class="o">-</span> <span class="nx">m1</span><span class="p">)</span> <span class="o">*</span> <span class="nx">h</span> <span class="o">/</span> <span class="mi">60</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">h</span> <span class="o">&lt;</span> <span class="mi">180</span><span class="p">)</span> <span class="k">return</span> <span class="nx">m2</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">h</span> <span class="o">&lt;</span> <span class="mi">240</span><span class="p">)</span> <span class="k">return</span> <span class="nx">m1</span> <span class="o">+</span> <span class="p">(</span><span class="nx">m2</span> <span class="o">-</span> <span class="nx">m1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">240</span> <span class="o">-</span> <span class="nx">h</span><span class="p">)</span> <span class="o">/</span> <span class="mi">60</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">m1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">vv</span><span class="p">(</span><span class="nx">h</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">v</span><span class="p">(</span><span class="nx">h</span><span class="p">)</span> <span class="o">*</span> <span class="mi">255</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">d3_rgb</span><span class="p">(</span><span class="nx">vv</span><span class="p">(</span><span class="nx">h</span> <span class="o">+</span> <span class="mi">120</span><span class="p">),</span> <span class="nx">vv</span><span class="p">(</span><span class="nx">h</span><span class="p">),</span> <span class="nx">vv</span><span class="p">(</span><span class="nx">h</span> <span class="o">-</span> <span class="mi">120</span><span class="p">));</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">hcl</span> <span class="o">=</span> <span class="nx">d3_hcl</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">d3_hcl</span><span class="p">(</span><span class="nx">h</span><span class="p">,</span> <span class="nx">c</span><span class="p">,</span> <span class="nx">l</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span> <span class="k">instanceof</span> <span class="nx">d3_hcl</span> <span class="o">?</span> <span class="k">void</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">h</span> <span class="o">=</span> <span class="o">+</span><span class="nx">h</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">c</span> <span class="o">=</span> <span class="o">+</span><span class="nx">c</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">l</span> <span class="o">=</span> <span class="o">+</span><span class="nx">l</span><span class="p">)</span> <span class="o">:</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="o">?</span> <span class="nx">h</span> <span class="k">instanceof</span> <span class="nx">d3_hcl</span> <span class="o">?</span> <span class="k">new</span> <span class="nx">d3_hcl</span><span class="p">(</span><span class="nx">h</span><span class="p">.</span><span class="nx">h</span><span class="p">,</span> <span class="nx">h</span><span class="p">.</span><span class="nx">c</span><span class="p">,</span> <span class="nx">h</span><span class="p">.</span><span class="nx">l</span><span class="p">)</span> <span class="o">:</span> <span class="nx">h</span> <span class="k">instanceof</span> <span class="nx">d3_lab</span> <span class="o">?</span> <span class="nx">d3_lab_hcl</span><span class="p">(</span><span class="nx">h</span><span class="p">.</span><span class="nx">l</span><span class="p">,</span> <span class="nx">h</span><span class="p">.</span><span class="nx">a</span><span class="p">,</span> <span class="nx">h</span><span class="p">.</span><span class="nx">b</span><span class="p">)</span> <span class="o">:</span> <span class="nx">d3_lab_hcl</span><span class="p">((</span><span class="nx">h</span> <span class="o">=</span> <span class="nx">d3_rgb_lab</span><span class="p">((</span><span class="nx">h</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">rgb</span><span class="p">(</span><span class="nx">h</span><span class="p">)).</span><span class="nx">r</span><span class="p">,</span> <span class="nx">h</span><span class="p">.</span><span class="nx">g</span><span class="p">,</span> <span class="nx">h</span><span class="p">.</span><span class="nx">b</span><span class="p">)).</span><span class="nx">l</span><span class="p">,</span> <span class="nx">h</span><span class="p">.</span><span class="nx">a</span><span class="p">,</span> <span class="nx">h</span><span class="p">.</span><span class="nx">b</span><span class="p">)</span> <span class="o">:</span> <span class="k">new</span> <span class="nx">d3_hcl</span><span class="p">(</span><span class="nx">h</span><span class="p">,</span> <span class="nx">c</span><span class="p">,</span> <span class="nx">l</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">d3_hclPrototype</span> <span class="o">=</span> <span class="nx">d3_hcl</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">d3_color</span><span class="p">();</span>
  <span class="nx">d3_hclPrototype</span><span class="p">.</span><span class="nx">brighter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">k</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">d3_hcl</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">h</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">c</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">l</span> <span class="o">+</span> <span class="nx">d3_lab_K</span> <span class="o">*</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">k</span> <span class="o">:</span> <span class="mi">1</span><span class="p">)));</span>
  <span class="p">};</span>
  <span class="nx">d3_hclPrototype</span><span class="p">.</span><span class="nx">darker</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">k</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">d3_hcl</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">h</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">c</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">l</span> <span class="o">-</span> <span class="nx">d3_lab_K</span> <span class="o">*</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">k</span> <span class="o">:</span> <span class="mi">1</span><span class="p">)));</span>
  <span class="p">};</span>
  <span class="nx">d3_hclPrototype</span><span class="p">.</span><span class="nx">rgb</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_hcl_lab</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">h</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">c</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">l</span><span class="p">).</span><span class="nx">rgb</span><span class="p">();</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_hcl_lab</span><span class="p">(</span><span class="nx">h</span><span class="p">,</span> <span class="nx">c</span><span class="p">,</span> <span class="nx">l</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">h</span><span class="p">))</span> <span class="nx">h</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">c</span><span class="p">))</span> <span class="nx">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">d3_lab</span><span class="p">(</span><span class="nx">l</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">h</span> <span class="o">*=</span> <span class="nx">d3_radians</span><span class="p">)</span> <span class="o">*</span> <span class="nx">c</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">h</span><span class="p">)</span> <span class="o">*</span> <span class="nx">c</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">lab</span> <span class="o">=</span> <span class="nx">d3_lab</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">d3_lab</span><span class="p">(</span><span class="nx">l</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span> <span class="k">instanceof</span> <span class="nx">d3_lab</span> <span class="o">?</span> <span class="k">void</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">l</span> <span class="o">=</span> <span class="o">+</span><span class="nx">l</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="o">+</span><span class="nx">a</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">b</span> <span class="o">=</span> <span class="o">+</span><span class="nx">b</span><span class="p">)</span> <span class="o">:</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="o">?</span> <span class="nx">l</span> <span class="k">instanceof</span> <span class="nx">d3_lab</span> <span class="o">?</span> <span class="k">new</span> <span class="nx">d3_lab</span><span class="p">(</span><span class="nx">l</span><span class="p">.</span><span class="nx">l</span><span class="p">,</span> <span class="nx">l</span><span class="p">.</span><span class="nx">a</span><span class="p">,</span> <span class="nx">l</span><span class="p">.</span><span class="nx">b</span><span class="p">)</span> <span class="o">:</span> <span class="nx">l</span> <span class="k">instanceof</span> <span class="nx">d3_hcl</span> <span class="o">?</span> <span class="nx">d3_hcl_lab</span><span class="p">(</span><span class="nx">l</span><span class="p">.</span><span class="nx">l</span><span class="p">,</span> <span class="nx">l</span><span class="p">.</span><span class="nx">c</span><span class="p">,</span> <span class="nx">l</span><span class="p">.</span><span class="nx">h</span><span class="p">)</span> <span class="o">:</span> <span class="nx">d3_rgb_lab</span><span class="p">((</span><span class="nx">l</span> <span class="o">=</span> <span class="nx">d3_rgb</span><span class="p">(</span><span class="nx">l</span><span class="p">)).</span><span class="nx">r</span><span class="p">,</span> <span class="nx">l</span><span class="p">.</span><span class="nx">g</span><span class="p">,</span> <span class="nx">l</span><span class="p">.</span><span class="nx">b</span><span class="p">)</span> <span class="o">:</span> <span class="k">new</span> <span class="nx">d3_lab</span><span class="p">(</span><span class="nx">l</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">d3_lab_K</span> <span class="o">=</span> <span class="mi">18</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">d3_lab_X</span> <span class="o">=</span> <span class="p">.</span><span class="mi">95047</span><span class="p">,</span> <span class="nx">d3_lab_Y</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">d3_lab_Z</span> <span class="o">=</span> <span class="mf">1.08883</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">d3_labPrototype</span> <span class="o">=</span> <span class="nx">d3_lab</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">d3_color</span><span class="p">();</span>
  <span class="nx">d3_labPrototype</span><span class="p">.</span><span class="nx">brighter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">k</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">d3_lab</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">l</span> <span class="o">+</span> <span class="nx">d3_lab_K</span> <span class="o">*</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">k</span> <span class="o">:</span> <span class="mi">1</span><span class="p">)),</span> <span class="k">this</span><span class="p">.</span><span class="nx">a</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">b</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nx">d3_labPrototype</span><span class="p">.</span><span class="nx">darker</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">k</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">d3_lab</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">l</span> <span class="o">-</span> <span class="nx">d3_lab_K</span> <span class="o">*</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">k</span> <span class="o">:</span> <span class="mi">1</span><span class="p">)),</span> <span class="k">this</span><span class="p">.</span><span class="nx">a</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">b</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nx">d3_labPrototype</span><span class="p">.</span><span class="nx">rgb</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_lab_rgb</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">l</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">a</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">b</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_lab_rgb</span><span class="p">(</span><span class="nx">l</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="p">(</span><span class="nx">l</span> <span class="o">+</span> <span class="mi">16</span><span class="p">)</span> <span class="o">/</span> <span class="mi">116</span><span class="p">,</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">a</span> <span class="o">/</span> <span class="mi">500</span><span class="p">,</span> <span class="nx">z</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">-</span> <span class="nx">b</span> <span class="o">/</span> <span class="mi">200</span><span class="p">;</span>
    <span class="nx">x</span> <span class="o">=</span> <span class="nx">d3_lab_xyz</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="o">*</span> <span class="nx">d3_lab_X</span><span class="p">;</span>
    <span class="nx">y</span> <span class="o">=</span> <span class="nx">d3_lab_xyz</span><span class="p">(</span><span class="nx">y</span><span class="p">)</span> <span class="o">*</span> <span class="nx">d3_lab_Y</span><span class="p">;</span>
    <span class="nx">z</span> <span class="o">=</span> <span class="nx">d3_lab_xyz</span><span class="p">(</span><span class="nx">z</span><span class="p">)</span> <span class="o">*</span> <span class="nx">d3_lab_Z</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">d3_rgb</span><span class="p">(</span><span class="nx">d3_xyz_rgb</span><span class="p">(</span><span class="mf">3.2404542</span> <span class="o">*</span> <span class="nx">x</span> <span class="o">-</span> <span class="mf">1.5371385</span> <span class="o">*</span> <span class="nx">y</span> <span class="o">-</span> <span class="p">.</span><span class="mi">4985314</span> <span class="o">*</span> <span class="nx">z</span><span class="p">),</span> <span class="nx">d3_xyz_rgb</span><span class="p">(</span><span class="o">-</span><span class="p">.</span><span class="mi">969266</span> <span class="o">*</span> <span class="nx">x</span> <span class="o">+</span> <span class="mf">1.8760108</span> <span class="o">*</span> <span class="nx">y</span> <span class="o">+</span> <span class="p">.</span><span class="mi">041556</span> <span class="o">*</span> <span class="nx">z</span><span class="p">),</span> <span class="nx">d3_xyz_rgb</span><span class="p">(.</span><span class="mi">0556434</span> <span class="o">*</span> <span class="nx">x</span> <span class="o">-</span> <span class="p">.</span><span class="mi">2040259</span> <span class="o">*</span> <span class="nx">y</span> <span class="o">+</span> <span class="mf">1.0572252</span> <span class="o">*</span> <span class="nx">z</span><span class="p">));</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_lab_hcl</span><span class="p">(</span><span class="nx">l</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">l</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="k">new</span> <span class="nx">d3_hcl</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">atan2</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="nx">a</span><span class="p">)</span> <span class="o">*</span> <span class="nx">d3_degrees</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">a</span> <span class="o">*</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">*</span> <span class="nx">b</span><span class="p">),</span> <span class="nx">l</span><span class="p">)</span> <span class="o">:</span> <span class="k">new</span> <span class="nx">d3_hcl</span><span class="p">(</span><span class="kc">NaN</span><span class="p">,</span> <span class="kc">NaN</span><span class="p">,</span> <span class="nx">l</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_lab_xyz</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">x</span> <span class="o">&gt;</span> <span class="p">.</span><span class="mi">206893034</span> <span class="o">?</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">x</span> <span class="o">:</span> <span class="p">(</span><span class="nx">x</span> <span class="o">-</span> <span class="mi">4</span> <span class="o">/</span> <span class="mi">29</span><span class="p">)</span> <span class="o">/</span> <span class="mf">7.787037</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_xyz_lab</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">x</span> <span class="o">&gt;</span> <span class="p">.</span><span class="mi">008856</span> <span class="o">?</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span> <span class="o">:</span> <span class="mf">7.787037</span> <span class="o">*</span> <span class="nx">x</span> <span class="o">+</span> <span class="mi">4</span> <span class="o">/</span> <span class="mi">29</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_xyz_rgb</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="mi">255</span> <span class="o">*</span> <span class="p">(</span><span class="nx">r</span> <span class="o">&lt;=</span> <span class="p">.</span><span class="mi">00304</span> <span class="o">?</span> <span class="mf">12.92</span> <span class="o">*</span> <span class="nx">r</span> <span class="o">:</span> <span class="mf">1.055</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nx">r</span><span class="p">,</span> <span class="mi">1</span> <span class="o">/</span> <span class="mf">2.4</span><span class="p">)</span> <span class="o">-</span> <span class="p">.</span><span class="mi">055</span><span class="p">));</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">rgb</span> <span class="o">=</span> <span class="nx">d3_rgb</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">d3_rgb</span><span class="p">(</span><span class="nx">r</span><span class="p">,</span> <span class="nx">g</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span> <span class="k">instanceof</span> <span class="nx">d3_rgb</span> <span class="o">?</span> <span class="k">void</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">r</span> <span class="o">=</span> <span class="o">~~</span><span class="nx">r</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">g</span> <span class="o">=</span> <span class="o">~~</span><span class="nx">g</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">b</span> <span class="o">=</span> <span class="o">~~</span><span class="nx">b</span><span class="p">)</span> <span class="o">:</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="o">?</span> <span class="nx">r</span> <span class="k">instanceof</span> <span class="nx">d3_rgb</span> <span class="o">?</span> <span class="k">new</span> <span class="nx">d3_rgb</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">r</span><span class="p">,</span> <span class="nx">r</span><span class="p">.</span><span class="nx">g</span><span class="p">,</span> <span class="nx">r</span><span class="p">.</span><span class="nx">b</span><span class="p">)</span> <span class="o">:</span> <span class="nx">d3_rgb_parse</span><span class="p">(</span><span class="s2">&quot;&quot;</span> <span class="o">+</span> <span class="nx">r</span><span class="p">,</span> <span class="nx">d3_rgb</span><span class="p">,</span> <span class="nx">d3_hsl_rgb</span><span class="p">)</span> <span class="o">:</span> <span class="k">new</span> <span class="nx">d3_rgb</span><span class="p">(</span><span class="nx">r</span><span class="p">,</span> <span class="nx">g</span><span class="p">,</span> <span class="nx">b</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_rgbNumber</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">d3_rgb</span><span class="p">(</span><span class="nx">value</span> <span class="o">&gt;&gt;</span> <span class="mi">16</span><span class="p">,</span> <span class="nx">value</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span> <span class="o">&amp;</span> <span class="mi">255</span><span class="p">,</span> <span class="nx">value</span> <span class="o">&amp;</span> <span class="mi">255</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_rgbString</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_rgbNumber</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">d3_rgbPrototype</span> <span class="o">=</span> <span class="nx">d3_rgb</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">d3_color</span><span class="p">();</span>
  <span class="nx">d3_rgbPrototype</span><span class="p">.</span><span class="nx">brighter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">k</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">k</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(.</span><span class="mi">7</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">k</span> <span class="o">:</span> <span class="mi">1</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">r</span><span class="p">,</span> <span class="nx">g</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">g</span><span class="p">,</span> <span class="nx">b</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">b</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">30</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">r</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">g</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">b</span><span class="p">)</span> <span class="k">return</span> <span class="k">new</span> <span class="nx">d3_rgb</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">i</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">r</span> <span class="o">&amp;&amp;</span> <span class="nx">r</span> <span class="o">&lt;</span> <span class="nx">i</span><span class="p">)</span> <span class="nx">r</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">g</span> <span class="o">&amp;&amp;</span> <span class="nx">g</span> <span class="o">&lt;</span> <span class="nx">i</span><span class="p">)</span> <span class="nx">g</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">b</span> <span class="o">&amp;&amp;</span> <span class="nx">b</span> <span class="o">&lt;</span> <span class="nx">i</span><span class="p">)</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">d3_rgb</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="nx">r</span> <span class="o">/</span> <span class="nx">k</span><span class="p">),</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="nx">g</span> <span class="o">/</span> <span class="nx">k</span><span class="p">),</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="nx">b</span> <span class="o">/</span> <span class="nx">k</span><span class="p">));</span>
  <span class="p">};</span>
  <span class="nx">d3_rgbPrototype</span><span class="p">.</span><span class="nx">darker</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">k</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">k</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(.</span><span class="mi">7</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">k</span> <span class="o">:</span> <span class="mi">1</span><span class="p">);</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">d3_rgb</span><span class="p">(</span><span class="nx">k</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">r</span><span class="p">,</span> <span class="nx">k</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">g</span><span class="p">,</span> <span class="nx">k</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">b</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nx">d3_rgbPrototype</span><span class="p">.</span><span class="nx">hsl</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_rgb_hsl</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">r</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">g</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">b</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nx">d3_rgbPrototype</span><span class="p">.</span><span class="nx">toString</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">&quot;#&quot;</span> <span class="o">+</span> <span class="nx">d3_rgb_hex</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">r</span><span class="p">)</span> <span class="o">+</span> <span class="nx">d3_rgb_hex</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">g</span><span class="p">)</span> <span class="o">+</span> <span class="nx">d3_rgb_hex</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">b</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_rgb_hex</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">v</span> <span class="o">&lt;</span> <span class="mi">16</span> <span class="o">?</span> <span class="s2">&quot;0&quot;</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">v</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span> <span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="nx">v</span><span class="p">).</span><span class="nx">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_rgb_parse</span><span class="p">(</span><span class="nx">format</span><span class="p">,</span> <span class="nx">rgb</span><span class="p">,</span> <span class="nx">hsl</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">g</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">m1</span><span class="p">,</span> <span class="nx">m2</span><span class="p">,</span> <span class="nx">color</span><span class="p">;</span>
    <span class="nx">m1</span> <span class="o">=</span> <span class="sr">/([a-z]+)\((.*)\)/i</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">format</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">m1</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">m2</span> <span class="o">=</span> <span class="nx">m1</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="nx">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">);</span>
      <span class="k">switch</span> <span class="p">(</span><span class="nx">m1</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="p">{</span>
       <span class="k">case</span> <span class="s2">&quot;hsl&quot;</span><span class="o">:</span>
        <span class="p">{</span>
          <span class="k">return</span> <span class="nx">hsl</span><span class="p">(</span><span class="nb">parseFloat</span><span class="p">(</span><span class="nx">m2</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">m2</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="mi">100</span><span class="p">,</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">m2</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="mi">100</span><span class="p">);</span>
        <span class="p">}</span>

       <span class="k">case</span> <span class="s2">&quot;rgb&quot;</span><span class="o">:</span>
        <span class="p">{</span>
          <span class="k">return</span> <span class="nx">rgb</span><span class="p">(</span><span class="nx">d3_rgb_parseNumber</span><span class="p">(</span><span class="nx">m2</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nx">d3_rgb_parseNumber</span><span class="p">(</span><span class="nx">m2</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="nx">d3_rgb_parseNumber</span><span class="p">(</span><span class="nx">m2</span><span class="p">[</span><span class="mi">2</span><span class="p">]));</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">color</span> <span class="o">=</span> <span class="nx">d3_rgb_names</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">format</span><span class="p">))</span> <span class="k">return</span> <span class="nx">rgb</span><span class="p">(</span><span class="nx">color</span><span class="p">.</span><span class="nx">r</span><span class="p">,</span> <span class="nx">color</span><span class="p">.</span><span class="nx">g</span><span class="p">,</span> <span class="nx">color</span><span class="p">.</span><span class="nx">b</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">format</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">format</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;#&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">color</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">format</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="mi">16</span><span class="p">)))</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">format</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">r</span> <span class="o">=</span> <span class="p">(</span><span class="nx">color</span> <span class="o">&amp;</span> <span class="mi">3840</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span><span class="p">;</span>
        <span class="nx">r</span> <span class="o">=</span> <span class="nx">r</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span> <span class="o">|</span> <span class="nx">r</span><span class="p">;</span>
        <span class="nx">g</span> <span class="o">=</span> <span class="nx">color</span> <span class="o">&amp;</span> <span class="mi">240</span><span class="p">;</span>
        <span class="nx">g</span> <span class="o">=</span> <span class="nx">g</span> <span class="o">&gt;&gt;</span> <span class="mi">4</span> <span class="o">|</span> <span class="nx">g</span><span class="p">;</span>
        <span class="nx">b</span> <span class="o">=</span> <span class="nx">color</span> <span class="o">&amp;</span> <span class="mi">15</span><span class="p">;</span>
        <span class="nx">b</span> <span class="o">=</span> <span class="nx">b</span> <span class="o">&lt;&lt;</span> <span class="mi">4</span> <span class="o">|</span> <span class="nx">b</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">format</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">7</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">r</span> <span class="o">=</span> <span class="p">(</span><span class="nx">color</span> <span class="o">&amp;</span> <span class="mi">16711680</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">16</span><span class="p">;</span>
        <span class="nx">g</span> <span class="o">=</span> <span class="p">(</span><span class="nx">color</span> <span class="o">&amp;</span> <span class="mi">65280</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="p">;</span>
        <span class="nx">b</span> <span class="o">=</span> <span class="nx">color</span> <span class="o">&amp;</span> <span class="mi">255</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">rgb</span><span class="p">(</span><span class="nx">r</span><span class="p">,</span> <span class="nx">g</span><span class="p">,</span> <span class="nx">b</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_rgb_hsl</span><span class="p">(</span><span class="nx">r</span><span class="p">,</span> <span class="nx">g</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">min</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">r</span> <span class="o">/=</span> <span class="mi">255</span><span class="p">,</span> <span class="nx">g</span> <span class="o">/=</span> <span class="mi">255</span><span class="p">,</span> <span class="nx">b</span> <span class="o">/=</span> <span class="mi">255</span><span class="p">),</span> <span class="nx">max</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">r</span><span class="p">,</span> <span class="nx">g</span><span class="p">,</span> <span class="nx">b</span><span class="p">),</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">max</span> <span class="o">-</span> <span class="nx">min</span><span class="p">,</span> <span class="nx">h</span><span class="p">,</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">l</span> <span class="o">=</span> <span class="p">(</span><span class="nx">max</span> <span class="o">+</span> <span class="nx">min</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">s</span> <span class="o">=</span> <span class="nx">l</span> <span class="o">&lt;</span> <span class="p">.</span><span class="mi">5</span> <span class="o">?</span> <span class="nx">d</span> <span class="o">/</span> <span class="p">(</span><span class="nx">max</span> <span class="o">+</span> <span class="nx">min</span><span class="p">)</span> <span class="o">:</span> <span class="nx">d</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">-</span> <span class="nx">max</span> <span class="o">-</span> <span class="nx">min</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">r</span> <span class="o">==</span> <span class="nx">max</span><span class="p">)</span> <span class="nx">h</span> <span class="o">=</span> <span class="p">(</span><span class="nx">g</span> <span class="o">-</span> <span class="nx">b</span><span class="p">)</span> <span class="o">/</span> <span class="nx">d</span> <span class="o">+</span> <span class="p">(</span><span class="nx">g</span> <span class="o">&lt;</span> <span class="nx">b</span> <span class="o">?</span> <span class="mi">6</span> <span class="o">:</span> <span class="mi">0</span><span class="p">);</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">g</span> <span class="o">==</span> <span class="nx">max</span><span class="p">)</span> <span class="nx">h</span> <span class="o">=</span> <span class="p">(</span><span class="nx">b</span> <span class="o">-</span> <span class="nx">r</span><span class="p">)</span> <span class="o">/</span> <span class="nx">d</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span> <span class="k">else</span> <span class="nx">h</span> <span class="o">=</span> <span class="p">(</span><span class="nx">r</span> <span class="o">-</span> <span class="nx">g</span><span class="p">)</span> <span class="o">/</span> <span class="nx">d</span> <span class="o">+</span> <span class="mi">4</span><span class="p">;</span>
      <span class="nx">h</span> <span class="o">*=</span> <span class="mi">60</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">h</span> <span class="o">=</span> <span class="kc">NaN</span><span class="p">;</span>
      <span class="nx">s</span> <span class="o">=</span> <span class="nx">l</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">l</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="nx">h</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">d3_hsl</span><span class="p">(</span><span class="nx">h</span><span class="p">,</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">l</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_rgb_lab</span><span class="p">(</span><span class="nx">r</span><span class="p">,</span> <span class="nx">g</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">r</span> <span class="o">=</span> <span class="nx">d3_rgb_xyz</span><span class="p">(</span><span class="nx">r</span><span class="p">);</span>
    <span class="nx">g</span> <span class="o">=</span> <span class="nx">d3_rgb_xyz</span><span class="p">(</span><span class="nx">g</span><span class="p">);</span>
    <span class="nx">b</span> <span class="o">=</span> <span class="nx">d3_rgb_xyz</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">d3_xyz_lab</span><span class="p">((.</span><span class="mi">4124564</span> <span class="o">*</span> <span class="nx">r</span> <span class="o">+</span> <span class="p">.</span><span class="mi">3575761</span> <span class="o">*</span> <span class="nx">g</span> <span class="o">+</span> <span class="p">.</span><span class="mi">1804375</span> <span class="o">*</span> <span class="nx">b</span><span class="p">)</span> <span class="o">/</span> <span class="nx">d3_lab_X</span><span class="p">),</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">d3_xyz_lab</span><span class="p">((.</span><span class="mi">2126729</span> <span class="o">*</span> <span class="nx">r</span> <span class="o">+</span> <span class="p">.</span><span class="mi">7151522</span> <span class="o">*</span> <span class="nx">g</span> <span class="o">+</span> <span class="p">.</span><span class="mi">072175</span> <span class="o">*</span> <span class="nx">b</span><span class="p">)</span> <span class="o">/</span> <span class="nx">d3_lab_Y</span><span class="p">),</span> <span class="nx">z</span> <span class="o">=</span> <span class="nx">d3_xyz_lab</span><span class="p">((.</span><span class="mi">0193339</span> <span class="o">*</span> <span class="nx">r</span> <span class="o">+</span> <span class="p">.</span><span class="mi">119192</span> <span class="o">*</span> <span class="nx">g</span> <span class="o">+</span> <span class="p">.</span><span class="mi">9503041</span> <span class="o">*</span> <span class="nx">b</span><span class="p">)</span> <span class="o">/</span> <span class="nx">d3_lab_Z</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">d3_lab</span><span class="p">(</span><span class="mi">116</span> <span class="o">*</span> <span class="nx">y</span> <span class="o">-</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">500</span> <span class="o">*</span> <span class="p">(</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">y</span><span class="p">),</span> <span class="mi">200</span> <span class="o">*</span> <span class="p">(</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">z</span><span class="p">));</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_rgb_xyz</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="nx">r</span> <span class="o">/=</span> <span class="mi">255</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="p">.</span><span class="mi">04045</span> <span class="o">?</span> <span class="nx">r</span> <span class="o">/</span> <span class="mf">12.92</span> <span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">((</span><span class="nx">r</span> <span class="o">+</span> <span class="p">.</span><span class="mi">055</span><span class="p">)</span> <span class="o">/</span> <span class="mf">1.055</span><span class="p">,</span> <span class="mf">2.4</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_rgb_parseNumber</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="nb">parseFloat</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">c</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;%&quot;</span> <span class="o">?</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">f</span> <span class="o">*</span> <span class="mf">2.55</span><span class="p">)</span> <span class="o">:</span> <span class="nx">f</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">d3_rgb_names</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">map</span><span class="p">({</span>
    <span class="nx">aliceblue</span><span class="o">:</span> <span class="mi">15792383</span><span class="p">,</span>
    <span class="nx">antiquewhite</span><span class="o">:</span> <span class="mi">16444375</span><span class="p">,</span>
    <span class="nx">aqua</span><span class="o">:</span> <span class="mi">65535</span><span class="p">,</span>
    <span class="nx">aquamarine</span><span class="o">:</span> <span class="mi">8388564</span><span class="p">,</span>
    <span class="nx">azure</span><span class="o">:</span> <span class="mi">15794175</span><span class="p">,</span>
    <span class="nx">beige</span><span class="o">:</span> <span class="mi">16119260</span><span class="p">,</span>
    <span class="nx">bisque</span><span class="o">:</span> <span class="mi">16770244</span><span class="p">,</span>
    <span class="nx">black</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">blanchedalmond</span><span class="o">:</span> <span class="mi">16772045</span><span class="p">,</span>
    <span class="nx">blue</span><span class="o">:</span> <span class="mi">255</span><span class="p">,</span>
    <span class="nx">blueviolet</span><span class="o">:</span> <span class="mi">9055202</span><span class="p">,</span>
    <span class="nx">brown</span><span class="o">:</span> <span class="mi">10824234</span><span class="p">,</span>
    <span class="nx">burlywood</span><span class="o">:</span> <span class="mi">14596231</span><span class="p">,</span>
    <span class="nx">cadetblue</span><span class="o">:</span> <span class="mi">6266528</span><span class="p">,</span>
    <span class="nx">chartreuse</span><span class="o">:</span> <span class="mi">8388352</span><span class="p">,</span>
    <span class="nx">chocolate</span><span class="o">:</span> <span class="mi">13789470</span><span class="p">,</span>
    <span class="nx">coral</span><span class="o">:</span> <span class="mi">16744272</span><span class="p">,</span>
    <span class="nx">cornflowerblue</span><span class="o">:</span> <span class="mi">6591981</span><span class="p">,</span>
    <span class="nx">cornsilk</span><span class="o">:</span> <span class="mi">16775388</span><span class="p">,</span>
    <span class="nx">crimson</span><span class="o">:</span> <span class="mi">14423100</span><span class="p">,</span>
    <span class="nx">cyan</span><span class="o">:</span> <span class="mi">65535</span><span class="p">,</span>
    <span class="nx">darkblue</span><span class="o">:</span> <span class="mi">139</span><span class="p">,</span>
    <span class="nx">darkcyan</span><span class="o">:</span> <span class="mi">35723</span><span class="p">,</span>
    <span class="nx">darkgoldenrod</span><span class="o">:</span> <span class="mi">12092939</span><span class="p">,</span>
    <span class="nx">darkgray</span><span class="o">:</span> <span class="mi">11119017</span><span class="p">,</span>
    <span class="nx">darkgreen</span><span class="o">:</span> <span class="mi">25600</span><span class="p">,</span>
    <span class="nx">darkgrey</span><span class="o">:</span> <span class="mi">11119017</span><span class="p">,</span>
    <span class="nx">darkkhaki</span><span class="o">:</span> <span class="mi">12433259</span><span class="p">,</span>
    <span class="nx">darkmagenta</span><span class="o">:</span> <span class="mi">9109643</span><span class="p">,</span>
    <span class="nx">darkolivegreen</span><span class="o">:</span> <span class="mi">5597999</span><span class="p">,</span>
    <span class="nx">darkorange</span><span class="o">:</span> <span class="mi">16747520</span><span class="p">,</span>
    <span class="nx">darkorchid</span><span class="o">:</span> <span class="mi">10040012</span><span class="p">,</span>
    <span class="nx">darkred</span><span class="o">:</span> <span class="mi">9109504</span><span class="p">,</span>
    <span class="nx">darksalmon</span><span class="o">:</span> <span class="mi">15308410</span><span class="p">,</span>
    <span class="nx">darkseagreen</span><span class="o">:</span> <span class="mi">9419919</span><span class="p">,</span>
    <span class="nx">darkslateblue</span><span class="o">:</span> <span class="mi">4734347</span><span class="p">,</span>
    <span class="nx">darkslategray</span><span class="o">:</span> <span class="mi">3100495</span><span class="p">,</span>
    <span class="nx">darkslategrey</span><span class="o">:</span> <span class="mi">3100495</span><span class="p">,</span>
    <span class="nx">darkturquoise</span><span class="o">:</span> <span class="mi">52945</span><span class="p">,</span>
    <span class="nx">darkviolet</span><span class="o">:</span> <span class="mi">9699539</span><span class="p">,</span>
    <span class="nx">deeppink</span><span class="o">:</span> <span class="mi">16716947</span><span class="p">,</span>
    <span class="nx">deepskyblue</span><span class="o">:</span> <span class="mi">49151</span><span class="p">,</span>
    <span class="nx">dimgray</span><span class="o">:</span> <span class="mi">6908265</span><span class="p">,</span>
    <span class="nx">dimgrey</span><span class="o">:</span> <span class="mi">6908265</span><span class="p">,</span>
    <span class="nx">dodgerblue</span><span class="o">:</span> <span class="mi">2003199</span><span class="p">,</span>
    <span class="nx">firebrick</span><span class="o">:</span> <span class="mi">11674146</span><span class="p">,</span>
    <span class="nx">floralwhite</span><span class="o">:</span> <span class="mi">16775920</span><span class="p">,</span>
    <span class="nx">forestgreen</span><span class="o">:</span> <span class="mi">2263842</span><span class="p">,</span>
    <span class="nx">fuchsia</span><span class="o">:</span> <span class="mi">16711935</span><span class="p">,</span>
    <span class="nx">gainsboro</span><span class="o">:</span> <span class="mi">14474460</span><span class="p">,</span>
    <span class="nx">ghostwhite</span><span class="o">:</span> <span class="mi">16316671</span><span class="p">,</span>
    <span class="nx">gold</span><span class="o">:</span> <span class="mi">16766720</span><span class="p">,</span>
    <span class="nx">goldenrod</span><span class="o">:</span> <span class="mi">14329120</span><span class="p">,</span>
    <span class="nx">gray</span><span class="o">:</span> <span class="mi">8421504</span><span class="p">,</span>
    <span class="nx">green</span><span class="o">:</span> <span class="mi">32768</span><span class="p">,</span>
    <span class="nx">greenyellow</span><span class="o">:</span> <span class="mi">11403055</span><span class="p">,</span>
    <span class="nx">grey</span><span class="o">:</span> <span class="mi">8421504</span><span class="p">,</span>
    <span class="nx">honeydew</span><span class="o">:</span> <span class="mi">15794160</span><span class="p">,</span>
    <span class="nx">hotpink</span><span class="o">:</span> <span class="mi">16738740</span><span class="p">,</span>
    <span class="nx">indianred</span><span class="o">:</span> <span class="mi">13458524</span><span class="p">,</span>
    <span class="nx">indigo</span><span class="o">:</span> <span class="mi">4915330</span><span class="p">,</span>
    <span class="nx">ivory</span><span class="o">:</span> <span class="mi">16777200</span><span class="p">,</span>
    <span class="nx">khaki</span><span class="o">:</span> <span class="mi">15787660</span><span class="p">,</span>
    <span class="nx">lavender</span><span class="o">:</span> <span class="mi">15132410</span><span class="p">,</span>
    <span class="nx">lavenderblush</span><span class="o">:</span> <span class="mi">16773365</span><span class="p">,</span>
    <span class="nx">lawngreen</span><span class="o">:</span> <span class="mi">8190976</span><span class="p">,</span>
    <span class="nx">lemonchiffon</span><span class="o">:</span> <span class="mi">16775885</span><span class="p">,</span>
    <span class="nx">lightblue</span><span class="o">:</span> <span class="mi">11393254</span><span class="p">,</span>
    <span class="nx">lightcoral</span><span class="o">:</span> <span class="mi">15761536</span><span class="p">,</span>
    <span class="nx">lightcyan</span><span class="o">:</span> <span class="mi">14745599</span><span class="p">,</span>
    <span class="nx">lightgoldenrodyellow</span><span class="o">:</span> <span class="mi">16448210</span><span class="p">,</span>
    <span class="nx">lightgray</span><span class="o">:</span> <span class="mi">13882323</span><span class="p">,</span>
    <span class="nx">lightgreen</span><span class="o">:</span> <span class="mi">9498256</span><span class="p">,</span>
    <span class="nx">lightgrey</span><span class="o">:</span> <span class="mi">13882323</span><span class="p">,</span>
    <span class="nx">lightpink</span><span class="o">:</span> <span class="mi">16758465</span><span class="p">,</span>
    <span class="nx">lightsalmon</span><span class="o">:</span> <span class="mi">16752762</span><span class="p">,</span>
    <span class="nx">lightseagreen</span><span class="o">:</span> <span class="mi">2142890</span><span class="p">,</span>
    <span class="nx">lightskyblue</span><span class="o">:</span> <span class="mi">8900346</span><span class="p">,</span>
    <span class="nx">lightslategray</span><span class="o">:</span> <span class="mi">7833753</span><span class="p">,</span>
    <span class="nx">lightslategrey</span><span class="o">:</span> <span class="mi">7833753</span><span class="p">,</span>
    <span class="nx">lightsteelblue</span><span class="o">:</span> <span class="mi">11584734</span><span class="p">,</span>
    <span class="nx">lightyellow</span><span class="o">:</span> <span class="mi">16777184</span><span class="p">,</span>
    <span class="nx">lime</span><span class="o">:</span> <span class="mi">65280</span><span class="p">,</span>
    <span class="nx">limegreen</span><span class="o">:</span> <span class="mi">3329330</span><span class="p">,</span>
    <span class="nx">linen</span><span class="o">:</span> <span class="mi">16445670</span><span class="p">,</span>
    <span class="nx">magenta</span><span class="o">:</span> <span class="mi">16711935</span><span class="p">,</span>
    <span class="nx">maroon</span><span class="o">:</span> <span class="mi">8388608</span><span class="p">,</span>
    <span class="nx">mediumaquamarine</span><span class="o">:</span> <span class="mi">6737322</span><span class="p">,</span>
    <span class="nx">mediumblue</span><span class="o">:</span> <span class="mi">205</span><span class="p">,</span>
    <span class="nx">mediumorchid</span><span class="o">:</span> <span class="mi">12211667</span><span class="p">,</span>
    <span class="nx">mediumpurple</span><span class="o">:</span> <span class="mi">9662683</span><span class="p">,</span>
    <span class="nx">mediumseagreen</span><span class="o">:</span> <span class="mi">3978097</span><span class="p">,</span>
    <span class="nx">mediumslateblue</span><span class="o">:</span> <span class="mi">8087790</span><span class="p">,</span>
    <span class="nx">mediumspringgreen</span><span class="o">:</span> <span class="mi">64154</span><span class="p">,</span>
    <span class="nx">mediumturquoise</span><span class="o">:</span> <span class="mi">4772300</span><span class="p">,</span>
    <span class="nx">mediumvioletred</span><span class="o">:</span> <span class="mi">13047173</span><span class="p">,</span>
    <span class="nx">midnightblue</span><span class="o">:</span> <span class="mi">1644912</span><span class="p">,</span>
    <span class="nx">mintcream</span><span class="o">:</span> <span class="mi">16121850</span><span class="p">,</span>
    <span class="nx">mistyrose</span><span class="o">:</span> <span class="mi">16770273</span><span class="p">,</span>
    <span class="nx">moccasin</span><span class="o">:</span> <span class="mi">16770229</span><span class="p">,</span>
    <span class="nx">navajowhite</span><span class="o">:</span> <span class="mi">16768685</span><span class="p">,</span>
    <span class="nx">navy</span><span class="o">:</span> <span class="mi">128</span><span class="p">,</span>
    <span class="nx">oldlace</span><span class="o">:</span> <span class="mi">16643558</span><span class="p">,</span>
    <span class="nx">olive</span><span class="o">:</span> <span class="mi">8421376</span><span class="p">,</span>
    <span class="nx">olivedrab</span><span class="o">:</span> <span class="mi">7048739</span><span class="p">,</span>
    <span class="nx">orange</span><span class="o">:</span> <span class="mi">16753920</span><span class="p">,</span>
    <span class="nx">orangered</span><span class="o">:</span> <span class="mi">16729344</span><span class="p">,</span>
    <span class="nx">orchid</span><span class="o">:</span> <span class="mi">14315734</span><span class="p">,</span>
    <span class="nx">palegoldenrod</span><span class="o">:</span> <span class="mi">15657130</span><span class="p">,</span>
    <span class="nx">palegreen</span><span class="o">:</span> <span class="mi">10025880</span><span class="p">,</span>
    <span class="nx">paleturquoise</span><span class="o">:</span> <span class="mi">11529966</span><span class="p">,</span>
    <span class="nx">palevioletred</span><span class="o">:</span> <span class="mi">14381203</span><span class="p">,</span>
    <span class="nx">papayawhip</span><span class="o">:</span> <span class="mi">16773077</span><span class="p">,</span>
    <span class="nx">peachpuff</span><span class="o">:</span> <span class="mi">16767673</span><span class="p">,</span>
    <span class="nx">peru</span><span class="o">:</span> <span class="mi">13468991</span><span class="p">,</span>
    <span class="nx">pink</span><span class="o">:</span> <span class="mi">16761035</span><span class="p">,</span>
    <span class="nx">plum</span><span class="o">:</span> <span class="mi">14524637</span><span class="p">,</span>
    <span class="nx">powderblue</span><span class="o">:</span> <span class="mi">11591910</span><span class="p">,</span>
    <span class="nx">purple</span><span class="o">:</span> <span class="mi">8388736</span><span class="p">,</span>
    <span class="nx">red</span><span class="o">:</span> <span class="mi">16711680</span><span class="p">,</span>
    <span class="nx">rosybrown</span><span class="o">:</span> <span class="mi">12357519</span><span class="p">,</span>
    <span class="nx">royalblue</span><span class="o">:</span> <span class="mi">4286945</span><span class="p">,</span>
    <span class="nx">saddlebrown</span><span class="o">:</span> <span class="mi">9127187</span><span class="p">,</span>
    <span class="nx">salmon</span><span class="o">:</span> <span class="mi">16416882</span><span class="p">,</span>
    <span class="nx">sandybrown</span><span class="o">:</span> <span class="mi">16032864</span><span class="p">,</span>
    <span class="nx">seagreen</span><span class="o">:</span> <span class="mi">3050327</span><span class="p">,</span>
    <span class="nx">seashell</span><span class="o">:</span> <span class="mi">16774638</span><span class="p">,</span>
    <span class="nx">sienna</span><span class="o">:</span> <span class="mi">10506797</span><span class="p">,</span>
    <span class="nx">silver</span><span class="o">:</span> <span class="mi">12632256</span><span class="p">,</span>
    <span class="nx">skyblue</span><span class="o">:</span> <span class="mi">8900331</span><span class="p">,</span>
    <span class="nx">slateblue</span><span class="o">:</span> <span class="mi">6970061</span><span class="p">,</span>
    <span class="nx">slategray</span><span class="o">:</span> <span class="mi">7372944</span><span class="p">,</span>
    <span class="nx">slategrey</span><span class="o">:</span> <span class="mi">7372944</span><span class="p">,</span>
    <span class="nx">snow</span><span class="o">:</span> <span class="mi">16775930</span><span class="p">,</span>
    <span class="nx">springgreen</span><span class="o">:</span> <span class="mi">65407</span><span class="p">,</span>
    <span class="nx">steelblue</span><span class="o">:</span> <span class="mi">4620980</span><span class="p">,</span>
    <span class="nx">tan</span><span class="o">:</span> <span class="mi">13808780</span><span class="p">,</span>
    <span class="nx">teal</span><span class="o">:</span> <span class="mi">32896</span><span class="p">,</span>
    <span class="nx">thistle</span><span class="o">:</span> <span class="mi">14204888</span><span class="p">,</span>
    <span class="nx">tomato</span><span class="o">:</span> <span class="mi">16737095</span><span class="p">,</span>
    <span class="nx">turquoise</span><span class="o">:</span> <span class="mi">4251856</span><span class="p">,</span>
    <span class="nx">violet</span><span class="o">:</span> <span class="mi">15631086</span><span class="p">,</span>
    <span class="nx">wheat</span><span class="o">:</span> <span class="mi">16113331</span><span class="p">,</span>
    <span class="nx">white</span><span class="o">:</span> <span class="mi">16777215</span><span class="p">,</span>
    <span class="nx">whitesmoke</span><span class="o">:</span> <span class="mi">16119285</span><span class="p">,</span>
    <span class="nx">yellow</span><span class="o">:</span> <span class="mi">16776960</span><span class="p">,</span>
    <span class="nx">yellowgreen</span><span class="o">:</span> <span class="mi">10145074</span>
  <span class="p">});</span>
  <span class="nx">d3_rgb_names</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">d3_rgb_names</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">d3_rgbNumber</span><span class="p">(</span><span class="nx">value</span><span class="p">));</span>
  <span class="p">});</span>
  <span class="kd">function</span> <span class="nx">d3_functor</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">typeof</span> <span class="nx">v</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">?</span> <span class="nx">v</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">v</span><span class="p">;</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">functor</span> <span class="o">=</span> <span class="nx">d3_functor</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">d3_identity</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">xhr</span> <span class="o">=</span> <span class="nx">d3_xhrType</span><span class="p">(</span><span class="nx">d3_identity</span><span class="p">);</span>
  <span class="kd">function</span> <span class="nx">d3_xhrType</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">mimeType</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">mimeType</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span><span class="p">)</span> <span class="nx">callback</span> <span class="o">=</span> <span class="nx">mimeType</span><span class="p">,</span> 
      <span class="nx">mimeType</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">d3_xhr</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">mimeType</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_xhr</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">mimeType</span><span class="p">,</span> <span class="nx">response</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="p">{},</span> <span class="nx">dispatch</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="s2">&quot;beforesend&quot;</span><span class="p">,</span> <span class="s2">&quot;progress&quot;</span><span class="p">,</span> <span class="s2">&quot;load&quot;</span><span class="p">,</span> <span class="s2">&quot;error&quot;</span><span class="p">),</span> <span class="nx">headers</span> <span class="o">=</span> <span class="p">{},</span> <span class="nx">request</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XMLHttpRequest</span><span class="p">(),</span> <span class="nx">responseType</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">d3_window</span><span class="p">.</span><span class="nx">XDomainRequest</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">(</span><span class="s2">&quot;withCredentials&quot;</span> <span class="k">in</span> <span class="nx">request</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="sr">/^(http(s)?:)?\/\//</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">url</span><span class="p">))</span> <span class="nx">request</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XDomainRequest</span><span class="p">();</span>
    <span class="s2">&quot;onload&quot;</span> <span class="k">in</span> <span class="nx">request</span> <span class="o">?</span> <span class="nx">request</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">onerror</span> <span class="o">=</span> <span class="nx">respond</span> <span class="o">:</span> <span class="nx">request</span><span class="p">.</span><span class="nx">onreadystatechange</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">request</span><span class="p">.</span><span class="nx">readyState</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="o">&amp;&amp;</span> <span class="nx">respond</span><span class="p">();</span>
    <span class="p">};</span>
    <span class="kd">function</span> <span class="nx">respond</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">status</span> <span class="o">=</span> <span class="nx">request</span><span class="p">.</span><span class="nx">status</span><span class="p">,</span> <span class="nx">result</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">status</span> <span class="o">&amp;&amp;</span> <span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span> <span class="o">||</span> <span class="nx">status</span> <span class="o">&gt;=</span> <span class="mi">200</span> <span class="o">&amp;&amp;</span> <span class="nx">status</span> <span class="o">&lt;</span> <span class="mi">300</span> <span class="o">||</span> <span class="nx">status</span> <span class="o">===</span> <span class="mi">304</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
          <span class="nx">result</span> <span class="o">=</span> <span class="nx">response</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">xhr</span><span class="p">,</span> <span class="nx">request</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">dispatch</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">xhr</span><span class="p">,</span> <span class="nx">e</span><span class="p">);</span>
          <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">dispatch</span><span class="p">.</span><span class="nx">load</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">xhr</span><span class="p">,</span> <span class="nx">result</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">dispatch</span><span class="p">.</span><span class="nx">error</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">xhr</span><span class="p">,</span> <span class="nx">request</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="nx">request</span><span class="p">.</span><span class="nx">onprogress</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">event</span><span class="p">;</span>
      <span class="nx">d3</span><span class="p">.</span><span class="nx">event</span> <span class="o">=</span> <span class="nx">event</span><span class="p">;</span>
      <span class="k">try</span> <span class="p">{</span>
        <span class="nx">dispatch</span><span class="p">.</span><span class="nx">progress</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">xhr</span><span class="p">,</span> <span class="nx">request</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
        <span class="nx">d3</span><span class="p">.</span><span class="nx">event</span> <span class="o">=</span> <span class="nx">o</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">};</span>
    <span class="nx">xhr</span><span class="p">.</span><span class="nx">header</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">name</span> <span class="o">=</span> <span class="p">(</span><span class="nx">name</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">).</span><span class="nx">toLowerCase</span><span class="p">();</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="k">return</span> <span class="nx">headers</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">delete</span> <span class="nx">headers</span><span class="p">[</span><span class="nx">name</span><span class="p">];</span> <span class="k">else</span> <span class="nx">headers</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">xhr</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">xhr</span><span class="p">.</span><span class="nx">mimeType</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">mimeType</span><span class="p">;</span>
      <span class="nx">mimeType</span> <span class="o">=</span> <span class="nx">value</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="nx">value</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">xhr</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">xhr</span><span class="p">.</span><span class="nx">responseType</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">responseType</span><span class="p">;</span>
      <span class="nx">responseType</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">xhr</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">xhr</span><span class="p">.</span><span class="nx">response</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">response</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">xhr</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="p">[</span> <span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;post&quot;</span> <span class="p">].</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">method</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">xhr</span><span class="p">[</span><span class="nx">method</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">xhr</span><span class="p">,</span> <span class="p">[</span> <span class="nx">method</span> <span class="p">].</span><span class="nx">concat</span><span class="p">(</span><span class="nx">d3_array</span><span class="p">(</span><span class="nx">arguments</span><span class="p">)));</span>
      <span class="p">};</span>
    <span class="p">});</span>
    <span class="nx">xhr</span><span class="p">.</span><span class="nx">send</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">method</span><span class="p">,</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="k">typeof</span> <span class="nx">data</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span><span class="p">)</span> <span class="nx">callback</span> <span class="o">=</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">data</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="nx">request</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="nx">method</span><span class="p">,</span> <span class="nx">url</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">mimeType</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">(</span><span class="s2">&quot;accept&quot;</span> <span class="k">in</span> <span class="nx">headers</span><span class="p">))</span> <span class="nx">headers</span><span class="p">[</span><span class="s2">&quot;accept&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">mimeType</span> <span class="o">+</span> <span class="s2">&quot;,*/*&quot;</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">headers</span><span class="p">)</span> <span class="nx">request</span><span class="p">.</span><span class="nx">setRequestHeader</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">headers</span><span class="p">[</span><span class="nx">name</span><span class="p">]);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">mimeType</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">request</span><span class="p">.</span><span class="nx">overrideMimeType</span><span class="p">)</span> <span class="nx">request</span><span class="p">.</span><span class="nx">overrideMimeType</span><span class="p">(</span><span class="nx">mimeType</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">responseType</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="nx">request</span><span class="p">.</span><span class="nx">responseType</span> <span class="o">=</span> <span class="nx">responseType</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">callback</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;error&quot;</span><span class="p">,</span> <span class="nx">callback</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;load&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">callback</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">request</span><span class="p">);</span>
      <span class="p">});</span>
      <span class="nx">dispatch</span><span class="p">.</span><span class="nx">beforesend</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">xhr</span><span class="p">,</span> <span class="nx">request</span><span class="p">);</span>
      <span class="nx">request</span><span class="p">.</span><span class="nx">send</span><span class="p">(</span><span class="nx">data</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="nx">data</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">xhr</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">xhr</span><span class="p">.</span><span class="nx">abort</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">request</span><span class="p">.</span><span class="nx">abort</span><span class="p">();</span>
      <span class="k">return</span> <span class="nx">xhr</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">d3</span><span class="p">.</span><span class="nx">rebind</span><span class="p">(</span><span class="nx">xhr</span><span class="p">,</span> <span class="nx">dispatch</span><span class="p">,</span> <span class="s2">&quot;on&quot;</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">callback</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">xhr</span> <span class="o">:</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">d3_xhr_fixCallback</span><span class="p">(</span><span class="nx">callback</span><span class="p">));</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_xhr_fixCallback</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">callback</span><span class="p">.</span><span class="nx">length</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">?</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">callback</span><span class="p">(</span><span class="nx">error</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">request</span> <span class="o">:</span> <span class="kc">null</span><span class="p">);</span>
    <span class="p">}</span> <span class="o">:</span> <span class="nx">callback</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">dsv</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">delimiter</span><span class="p">,</span> <span class="nx">mimeType</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">reFormat</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s1">&#39;[&quot;&#39;</span> <span class="o">+</span> <span class="nx">delimiter</span> <span class="o">+</span> <span class="s2">&quot;\n]&quot;</span><span class="p">),</span> <span class="nx">delimiterCode</span> <span class="o">=</span> <span class="nx">delimiter</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    <span class="kd">function</span> <span class="nx">dsv</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">row</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="nx">callback</span> <span class="o">=</span> <span class="nx">row</span><span class="p">,</span> <span class="nx">row</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">xhr</span> <span class="o">=</span> <span class="nx">d3_xhr</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">mimeType</span><span class="p">,</span> <span class="nx">row</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">response</span> <span class="o">:</span> <span class="nx">typedResponse</span><span class="p">(</span><span class="nx">row</span><span class="p">),</span> <span class="nx">callback</span><span class="p">);</span>
      <span class="nx">xhr</span><span class="p">.</span><span class="nx">row</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">xhr</span><span class="p">.</span><span class="nx">response</span><span class="p">((</span><span class="nx">row</span> <span class="o">=</span> <span class="nx">_</span><span class="p">)</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">response</span> <span class="o">:</span> <span class="nx">typedResponse</span><span class="p">(</span><span class="nx">_</span><span class="p">))</span> <span class="o">:</span> <span class="nx">row</span><span class="p">;</span>
      <span class="p">};</span>
      <span class="k">return</span> <span class="nx">xhr</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">response</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">dsv</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">typedResponse</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">dsv</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span><span class="p">,</span> <span class="nx">f</span><span class="p">);</span>
      <span class="p">};</span>
    <span class="p">}</span>
    <span class="nx">dsv</span><span class="p">.</span><span class="nx">parse</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">o</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">dsv</span><span class="p">.</span><span class="nx">parseRows</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">row</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="k">return</span> <span class="nx">o</span><span class="p">(</span><span class="nx">row</span><span class="p">,</span> <span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Function</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="s2">&quot;return {&quot;</span> <span class="o">+</span> <span class="nx">row</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;: d[&quot;</span> <span class="o">+</span> <span class="nx">i</span> <span class="o">+</span> <span class="s2">&quot;]&quot;</span><span class="p">;</span>
        <span class="p">}).</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;}&quot;</span><span class="p">);</span>
        <span class="nx">o</span> <span class="o">=</span> <span class="nx">f</span> <span class="o">?</span> <span class="kd">function</span><span class="p">(</span><span class="nx">row</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">f</span><span class="p">(</span><span class="nx">a</span><span class="p">(</span><span class="nx">row</span><span class="p">),</span> <span class="nx">i</span><span class="p">);</span>
        <span class="p">}</span> <span class="o">:</span> <span class="nx">a</span><span class="p">;</span>
      <span class="p">});</span>
    <span class="p">};</span>
    <span class="nx">dsv</span><span class="p">.</span><span class="nx">parseRows</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">text</span><span class="p">,</span> <span class="nx">f</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">EOL</span> <span class="o">=</span> <span class="p">{},</span> <span class="nx">EOF</span> <span class="o">=</span> <span class="p">{},</span> <span class="nx">rows</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">N</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">I</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">t</span><span class="p">,</span> <span class="nx">eol</span><span class="p">;</span>
      <span class="kd">function</span> <span class="nx">token</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">I</span> <span class="o">&gt;=</span> <span class="nx">N</span><span class="p">)</span> <span class="k">return</span> <span class="nx">EOF</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">eol</span><span class="p">)</span> <span class="k">return</span> <span class="nx">eol</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">EOL</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">I</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">text</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="nx">j</span><span class="p">)</span> <span class="o">===</span> <span class="mi">34</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">j</span><span class="p">;</span>
          <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">++</span> <span class="o">&lt;</span> <span class="nx">N</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">text</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="o">===</span> <span class="mi">34</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span><span class="nx">text</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">!==</span> <span class="mi">34</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
              <span class="o">++</span><span class="nx">i</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="nx">I</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">;</span>
          <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">c</span> <span class="o">===</span> <span class="mi">13</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">eol</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">text</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="o">===</span> <span class="mi">10</span><span class="p">)</span> <span class="o">++</span><span class="nx">I</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">c</span> <span class="o">===</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">eol</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">return</span> <span class="nx">text</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">i</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/&quot;&quot;/g</span><span class="p">,</span> <span class="s1">&#39;&quot;&#39;</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">I</span> <span class="o">&lt;</span> <span class="nx">N</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">text</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="nx">I</span><span class="o">++</span><span class="p">),</span> <span class="nx">k</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">c</span> <span class="o">===</span> <span class="mi">10</span><span class="p">)</span> <span class="nx">eol</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">c</span> <span class="o">===</span> <span class="mi">13</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">eol</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">text</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="nx">I</span><span class="p">)</span> <span class="o">===</span> <span class="mi">10</span><span class="p">)</span> <span class="o">++</span><span class="nx">I</span><span class="p">,</span> <span class="o">++</span><span class="nx">k</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">c</span> <span class="o">!==</span> <span class="nx">delimiterCode</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
          <span class="k">return</span> <span class="nx">text</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">j</span><span class="p">,</span> <span class="nx">I</span> <span class="o">-</span> <span class="nx">k</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">text</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">j</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">while</span> <span class="p">((</span><span class="nx">t</span> <span class="o">=</span> <span class="nx">token</span><span class="p">())</span> <span class="o">!==</span> <span class="nx">EOF</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">t</span> <span class="o">!==</span> <span class="nx">EOL</span> <span class="o">&amp;&amp;</span> <span class="nx">t</span> <span class="o">!==</span> <span class="nx">EOF</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">a</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">t</span><span class="p">);</span>
          <span class="nx">t</span> <span class="o">=</span> <span class="nx">token</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">f</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">(</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">f</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">n</span><span class="o">++</span><span class="p">)))</span> <span class="k">continue</span><span class="p">;</span>
        <span class="nx">rows</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">rows</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">dsv</span><span class="p">.</span><span class="nx">format</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">rows</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="k">return</span> <span class="nx">dsv</span><span class="p">.</span><span class="nx">formatRows</span><span class="p">(</span><span class="nx">rows</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">fieldSet</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">d3_Set</span><span class="p">(),</span> <span class="nx">fields</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="nx">rows</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">row</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">field</span> <span class="k">in</span> <span class="nx">row</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">fieldSet</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">field</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">fields</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">fieldSet</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">field</span><span class="p">));</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">});</span>
      <span class="k">return</span> <span class="p">[</span> <span class="nx">fields</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">formatValue</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="nx">delimiter</span><span class="p">)</span> <span class="p">].</span><span class="nx">concat</span><span class="p">(</span><span class="nx">rows</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">row</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">fields</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">field</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">formatValue</span><span class="p">(</span><span class="nx">row</span><span class="p">[</span><span class="nx">field</span><span class="p">]);</span>
        <span class="p">}).</span><span class="nx">join</span><span class="p">(</span><span class="nx">delimiter</span><span class="p">);</span>
      <span class="p">})).</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;\n&quot;</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="nx">dsv</span><span class="p">.</span><span class="nx">formatRows</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">rows</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">rows</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">formatRow</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;\n&quot;</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="kd">function</span> <span class="nx">formatRow</span><span class="p">(</span><span class="nx">row</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">row</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">formatValue</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="nx">delimiter</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">formatValue</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">reFormat</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">text</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">+</span> <span class="nx">text</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/\&quot;/g</span><span class="p">,</span> <span class="s1">&#39;&quot;&quot;&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;&quot;&#39;</span> <span class="o">:</span> <span class="nx">text</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">dsv</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">csv</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">dsv</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="s2">&quot;text/csv&quot;</span><span class="p">);</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">tsv</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">dsv</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;text/tab-separated-values&quot;</span><span class="p">);</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">touch</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">container</span><span class="p">,</span> <span class="nx">touches</span><span class="p">,</span> <span class="nx">identifier</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="nx">identifier</span> <span class="o">=</span> <span class="nx">touches</span><span class="p">,</span> <span class="nx">touches</span> <span class="o">=</span> <span class="nx">d3_eventSource</span><span class="p">().</span><span class="nx">changedTouches</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">touches</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">touches</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">touch</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">((</span><span class="nx">touch</span> <span class="o">=</span> <span class="nx">touches</span><span class="p">[</span><span class="nx">i</span><span class="p">]).</span><span class="nx">identifier</span> <span class="o">===</span> <span class="nx">identifier</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">d3_mousePoint</span><span class="p">(</span><span class="nx">container</span><span class="p">,</span> <span class="nx">touch</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">d3_timer_queueHead</span><span class="p">,</span> <span class="nx">d3_timer_queueTail</span><span class="p">,</span> <span class="nx">d3_timer_interval</span><span class="p">,</span> <span class="nx">d3_timer_timeout</span><span class="p">,</span> <span class="nx">d3_timer_active</span><span class="p">,</span> <span class="nx">d3_timer_frame</span> <span class="o">=</span> <span class="nx">d3_window</span><span class="p">[</span><span class="nx">d3_vendorSymbol</span><span class="p">(</span><span class="nx">d3_window</span><span class="p">,</span> <span class="s2">&quot;requestAnimationFrame&quot;</span><span class="p">)]</span> <span class="o">||</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="mi">17</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">callback</span><span class="p">,</span> <span class="nx">delay</span><span class="p">,</span> <span class="nx">then</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">n</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="nx">delay</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">n</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="nx">then</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">time</span> <span class="o">=</span> <span class="nx">then</span> <span class="o">+</span> <span class="nx">delay</span><span class="p">,</span> <span class="nx">timer</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">c</span><span class="o">:</span> <span class="nx">callback</span><span class="p">,</span>
      <span class="nx">t</span><span class="o">:</span> <span class="nx">time</span><span class="p">,</span>
      <span class="nx">f</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">n</span><span class="o">:</span> <span class="kc">null</span>
    <span class="p">};</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">d3_timer_queueTail</span><span class="p">)</span> <span class="nx">d3_timer_queueTail</span><span class="p">.</span><span class="nx">n</span> <span class="o">=</span> <span class="nx">timer</span><span class="p">;</span> <span class="k">else</span> <span class="nx">d3_timer_queueHead</span> <span class="o">=</span> <span class="nx">timer</span><span class="p">;</span>
    <span class="nx">d3_timer_queueTail</span> <span class="o">=</span> <span class="nx">timer</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">d3_timer_interval</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">d3_timer_timeout</span> <span class="o">=</span> <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">d3_timer_timeout</span><span class="p">);</span>
      <span class="nx">d3_timer_interval</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
      <span class="nx">d3_timer_frame</span><span class="p">(</span><span class="nx">d3_timer_step</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_timer_step</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">now</span> <span class="o">=</span> <span class="nx">d3_timer_mark</span><span class="p">(),</span> <span class="nx">delay</span> <span class="o">=</span> <span class="nx">d3_timer_sweep</span><span class="p">()</span> <span class="o">-</span> <span class="nx">now</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">delay</span> <span class="o">&gt;</span> <span class="mi">24</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nb">isFinite</span><span class="p">(</span><span class="nx">delay</span><span class="p">))</span> <span class="p">{</span>
        <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">d3_timer_timeout</span><span class="p">);</span>
        <span class="nx">d3_timer_timeout</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">d3_timer_step</span><span class="p">,</span> <span class="nx">delay</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="nx">d3_timer_interval</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">d3_timer_interval</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
      <span class="nx">d3_timer_frame</span><span class="p">(</span><span class="nx">d3_timer_step</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">timer</span><span class="p">.</span><span class="nx">flush</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">d3_timer_mark</span><span class="p">();</span>
    <span class="nx">d3_timer_sweep</span><span class="p">();</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_timer_mark</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">now</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">now</span><span class="p">();</span>
    <span class="nx">d3_timer_active</span> <span class="o">=</span> <span class="nx">d3_timer_queueHead</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="nx">d3_timer_active</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">now</span> <span class="o">&gt;=</span> <span class="nx">d3_timer_active</span><span class="p">.</span><span class="nx">t</span><span class="p">)</span> <span class="nx">d3_timer_active</span><span class="p">.</span><span class="nx">f</span> <span class="o">=</span> <span class="nx">d3_timer_active</span><span class="p">.</span><span class="nx">c</span><span class="p">(</span><span class="nx">now</span> <span class="o">-</span> <span class="nx">d3_timer_active</span><span class="p">.</span><span class="nx">t</span><span class="p">);</span>
      <span class="nx">d3_timer_active</span> <span class="o">=</span> <span class="nx">d3_timer_active</span><span class="p">.</span><span class="nx">n</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">now</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_timer_sweep</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">t0</span><span class="p">,</span> <span class="nx">t1</span> <span class="o">=</span> <span class="nx">d3_timer_queueHead</span><span class="p">,</span> <span class="nx">time</span> <span class="o">=</span> <span class="kc">Infinity</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="nx">t1</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">t1</span><span class="p">.</span><span class="nx">f</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">t1</span> <span class="o">=</span> <span class="nx">t0</span> <span class="o">?</span> <span class="nx">t0</span><span class="p">.</span><span class="nx">n</span> <span class="o">=</span> <span class="nx">t1</span><span class="p">.</span><span class="nx">n</span> <span class="o">:</span> <span class="nx">d3_timer_queueHead</span> <span class="o">=</span> <span class="nx">t1</span><span class="p">.</span><span class="nx">n</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">t1</span><span class="p">.</span><span class="nx">t</span> <span class="o">&lt;</span> <span class="nx">time</span><span class="p">)</span> <span class="nx">time</span> <span class="o">=</span> <span class="nx">t1</span><span class="p">.</span><span class="nx">t</span><span class="p">;</span>
        <span class="nx">t1</span> <span class="o">=</span> <span class="p">(</span><span class="nx">t0</span> <span class="o">=</span> <span class="nx">t1</span><span class="p">).</span><span class="nx">n</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="nx">d3_timer_queueTail</span> <span class="o">=</span> <span class="nx">t0</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">time</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_format_precision</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">p</span> <span class="o">-</span> <span class="p">(</span><span class="nx">x</span> <span class="o">?</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="o">/</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">LN10</span><span class="p">)</span> <span class="o">:</span> <span class="mi">1</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">round</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">n</span> <span class="o">?</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">x</span> <span class="o">*</span> <span class="p">(</span><span class="nx">n</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="nx">n</span><span class="p">)))</span> <span class="o">/</span> <span class="nx">n</span> <span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">d3_formatPrefixes</span> <span class="o">=</span> <span class="p">[</span> <span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;f&quot;</span><span class="p">,</span> <span class="s2">&quot;p&quot;</span><span class="p">,</span> <span class="s2">&quot;n&quot;</span><span class="p">,</span> <span class="s2">&quot;µ&quot;</span><span class="p">,</span> <span class="s2">&quot;m&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;k&quot;</span><span class="p">,</span> <span class="s2">&quot;M&quot;</span><span class="p">,</span> <span class="s2">&quot;G&quot;</span><span class="p">,</span> <span class="s2">&quot;T&quot;</span><span class="p">,</span> <span class="s2">&quot;P&quot;</span><span class="p">,</span> <span class="s2">&quot;E&quot;</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">,</span> <span class="s2">&quot;Y&quot;</span> <span class="p">].</span><span class="nx">map</span><span class="p">(</span><span class="nx">d3_formatPrefix</span><span class="p">);</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">formatPrefix</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">precision</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="nx">value</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">precision</span><span class="p">)</span> <span class="nx">value</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">d3_format_precision</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">precision</span><span class="p">));</span>
      <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="mi">1</span><span class="nx">e</span><span class="o">-</span><span class="mi">12</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">/</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">LN10</span><span class="p">);</span>
      <span class="nx">i</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="o">-</span><span class="mi">24</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="mi">24</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">((</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span> <span class="o">*</span> <span class="mi">3</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">d3_formatPrefixes</span><span class="p">[</span><span class="mi">8</span> <span class="o">+</span> <span class="nx">i</span> <span class="o">/</span> <span class="mi">3</span><span class="p">];</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_formatPrefix</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">k</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="nx">abs</span><span class="p">(</span><span class="mi">8</span> <span class="o">-</span> <span class="nx">i</span><span class="p">)</span> <span class="o">*</span> <span class="mi">3</span><span class="p">);</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">scale</span><span class="o">:</span> <span class="nx">i</span> <span class="o">&gt;</span> <span class="mi">8</span> <span class="o">?</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">d</span> <span class="o">/</span> <span class="nx">k</span><span class="p">;</span>
      <span class="p">}</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">d</span> <span class="o">*</span> <span class="nx">k</span><span class="p">;</span>
      <span class="p">},</span>
      <span class="nx">symbol</span><span class="o">:</span> <span class="nx">d</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_locale_numberFormat</span><span class="p">(</span><span class="nx">locale</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">locale_decimal</span> <span class="o">=</span> <span class="nx">locale</span><span class="p">.</span><span class="nx">decimal</span><span class="p">,</span> <span class="nx">locale_thousands</span> <span class="o">=</span> <span class="nx">locale</span><span class="p">.</span><span class="nx">thousands</span><span class="p">,</span> <span class="nx">locale_grouping</span> <span class="o">=</span> <span class="nx">locale</span><span class="p">.</span><span class="nx">grouping</span><span class="p">,</span> <span class="nx">locale_currency</span> <span class="o">=</span> <span class="nx">locale</span><span class="p">.</span><span class="nx">currency</span><span class="p">,</span> <span class="nx">formatGroup</span> <span class="o">=</span> <span class="nx">locale_grouping</span> <span class="o">?</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">t</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">g</span> <span class="o">=</span> <span class="nx">locale_grouping</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
      <span class="k">while</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="nx">g</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">t</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">i</span> <span class="o">-=</span> <span class="nx">g</span><span class="p">,</span> <span class="nx">i</span> <span class="o">+</span> <span class="nx">g</span><span class="p">));</span>
        <span class="nx">g</span> <span class="o">=</span> <span class="nx">locale_grouping</span><span class="p">[</span><span class="nx">j</span> <span class="o">=</span> <span class="p">(</span><span class="nx">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="nx">locale_grouping</span><span class="p">.</span><span class="nx">length</span><span class="p">];</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">t</span><span class="p">.</span><span class="nx">reverse</span><span class="p">().</span><span class="nx">join</span><span class="p">(</span><span class="nx">locale_thousands</span><span class="p">);</span>
    <span class="p">}</span> <span class="o">:</span> <span class="nx">d3_identity</span><span class="p">;</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">specifier</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">match</span> <span class="o">=</span> <span class="nx">d3_format_re</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">specifier</span><span class="p">),</span> <span class="nx">fill</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">||</span> <span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="nx">align</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">||</span> <span class="s2">&quot;&gt;&quot;</span><span class="p">,</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="nx">symbol</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="nx">zfill</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">5</span><span class="p">],</span> <span class="nx">width</span> <span class="o">=</span> <span class="o">+</span><span class="nx">match</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span> <span class="nx">comma</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">7</span><span class="p">],</span> <span class="nx">precision</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">match</span><span class="p">[</span><span class="mi">9</span><span class="p">],</span> <span class="nx">scale</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">prefix</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="nx">suffix</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="nx">integer</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">precision</span><span class="p">)</span> <span class="nx">precision</span> <span class="o">=</span> <span class="o">+</span><span class="nx">precision</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">zfill</span> <span class="o">||</span> <span class="nx">fill</span> <span class="o">===</span> <span class="s2">&quot;0&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">align</span> <span class="o">===</span> <span class="s2">&quot;=&quot;</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">zfill</span> <span class="o">=</span> <span class="nx">fill</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span><span class="p">;</span>
        <span class="nx">align</span> <span class="o">=</span> <span class="s2">&quot;=&quot;</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">comma</span><span class="p">)</span> <span class="nx">width</span> <span class="o">-=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">((</span><span class="nx">width</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">4</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">switch</span> <span class="p">(</span><span class="nx">type</span><span class="p">)</span> <span class="p">{</span>
       <span class="k">case</span> <span class="s2">&quot;n&quot;</span><span class="o">:</span>
        <span class="nx">comma</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="nx">type</span> <span class="o">=</span> <span class="s2">&quot;g&quot;</span><span class="p">;</span>
        <span class="k">break</span><span class="p">;</span>

       <span class="k">case</span> <span class="s2">&quot;%&quot;</span><span class="o">:</span>
        <span class="nx">scale</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
        <span class="nx">suffix</span> <span class="o">=</span> <span class="s2">&quot;%&quot;</span><span class="p">;</span>
        <span class="nx">type</span> <span class="o">=</span> <span class="s2">&quot;f&quot;</span><span class="p">;</span>
        <span class="k">break</span><span class="p">;</span>

       <span class="k">case</span> <span class="s2">&quot;p&quot;</span><span class="o">:</span>
        <span class="nx">scale</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
        <span class="nx">suffix</span> <span class="o">=</span> <span class="s2">&quot;%&quot;</span><span class="p">;</span>
        <span class="nx">type</span> <span class="o">=</span> <span class="s2">&quot;r&quot;</span><span class="p">;</span>
        <span class="k">break</span><span class="p">;</span>

       <span class="k">case</span> <span class="s2">&quot;b&quot;</span><span class="o">:</span>
       <span class="k">case</span> <span class="s2">&quot;o&quot;</span><span class="o">:</span>
       <span class="k">case</span> <span class="s2">&quot;x&quot;</span><span class="o">:</span>
       <span class="k">case</span> <span class="s2">&quot;X&quot;</span><span class="o">:</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">symbol</span> <span class="o">===</span> <span class="s2">&quot;#&quot;</span><span class="p">)</span> <span class="nx">prefix</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span> <span class="o">+</span> <span class="nx">type</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">();</span>

       <span class="k">case</span> <span class="s2">&quot;c&quot;</span><span class="o">:</span>
       <span class="k">case</span> <span class="s2">&quot;d&quot;</span><span class="o">:</span>
        <span class="nx">integer</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="nx">precision</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">break</span><span class="p">;</span>

       <span class="k">case</span> <span class="s2">&quot;s&quot;</span><span class="o">:</span>
        <span class="nx">scale</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="nx">type</span> <span class="o">=</span> <span class="s2">&quot;r&quot;</span><span class="p">;</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">symbol</span> <span class="o">===</span> <span class="s2">&quot;$&quot;</span><span class="p">)</span> <span class="nx">prefix</span> <span class="o">=</span> <span class="nx">locale_currency</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">suffix</span> <span class="o">=</span> <span class="nx">locale_currency</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">type</span> <span class="o">==</span> <span class="s2">&quot;r&quot;</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">precision</span><span class="p">)</span> <span class="nx">type</span> <span class="o">=</span> <span class="s2">&quot;g&quot;</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">precision</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">type</span> <span class="o">==</span> <span class="s2">&quot;g&quot;</span><span class="p">)</span> <span class="nx">precision</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="mi">21</span><span class="p">,</span> <span class="nx">precision</span><span class="p">));</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">type</span> <span class="o">==</span> <span class="s2">&quot;e&quot;</span> <span class="o">||</span> <span class="nx">type</span> <span class="o">==</span> <span class="s2">&quot;f&quot;</span><span class="p">)</span> <span class="nx">precision</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="nx">precision</span><span class="p">));</span>
      <span class="p">}</span>
      <span class="nx">type</span> <span class="o">=</span> <span class="nx">d3_format_types</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">type</span><span class="p">)</span> <span class="o">||</span> <span class="nx">d3_format_typeDefault</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">zcomma</span> <span class="o">=</span> <span class="nx">zfill</span> <span class="o">&amp;&amp;</span> <span class="nx">comma</span><span class="p">;</span>
      <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">fullSuffix</span> <span class="o">=</span> <span class="nx">suffix</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">integer</span> <span class="o">&amp;&amp;</span> <span class="nx">value</span> <span class="o">%</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">negative</span> <span class="o">=</span> <span class="nx">value</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">value</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="mi">1</span> <span class="o">/</span> <span class="nx">value</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="p">(</span><span class="nx">value</span> <span class="o">=</span> <span class="o">-</span><span class="nx">value</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">)</span> <span class="o">:</span> <span class="nx">sign</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">scale</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">unit</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">formatPrefix</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">precision</span><span class="p">);</span>
          <span class="nx">value</span> <span class="o">=</span> <span class="nx">unit</span><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
          <span class="nx">fullSuffix</span> <span class="o">=</span> <span class="nx">unit</span><span class="p">.</span><span class="nx">symbol</span> <span class="o">+</span> <span class="nx">suffix</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">value</span> <span class="o">*=</span> <span class="nx">scale</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">value</span> <span class="o">=</span> <span class="nx">type</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">precision</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">lastIndexOf</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">),</span> <span class="nx">before</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="nx">value</span> <span class="o">:</span> <span class="nx">value</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">i</span><span class="p">),</span> <span class="nx">after</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="nx">locale_decimal</span> <span class="o">+</span> <span class="nx">value</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">zfill</span> <span class="o">&amp;&amp;</span> <span class="nx">comma</span><span class="p">)</span> <span class="nx">before</span> <span class="o">=</span> <span class="nx">formatGroup</span><span class="p">(</span><span class="nx">before</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="nx">prefix</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="nx">before</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="nx">after</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="p">(</span><span class="nx">zcomma</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="nx">negative</span><span class="p">.</span><span class="nx">length</span><span class="p">),</span> <span class="nx">padding</span> <span class="o">=</span> <span class="nx">length</span> <span class="o">&lt;</span> <span class="nx">width</span> <span class="o">?</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">length</span> <span class="o">=</span> <span class="nx">width</span> <span class="o">-</span> <span class="nx">length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="nx">fill</span><span class="p">)</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">zcomma</span><span class="p">)</span> <span class="nx">before</span> <span class="o">=</span> <span class="nx">formatGroup</span><span class="p">(</span><span class="nx">padding</span> <span class="o">+</span> <span class="nx">before</span><span class="p">);</span>
        <span class="nx">negative</span> <span class="o">+=</span> <span class="nx">prefix</span><span class="p">;</span>
        <span class="nx">value</span> <span class="o">=</span> <span class="nx">before</span> <span class="o">+</span> <span class="nx">after</span><span class="p">;</span>
        <span class="k">return</span> <span class="p">(</span><span class="nx">align</span> <span class="o">===</span> <span class="s2">&quot;&lt;&quot;</span> <span class="o">?</span> <span class="nx">negative</span> <span class="o">+</span> <span class="nx">value</span> <span class="o">+</span> <span class="nx">padding</span> <span class="o">:</span> <span class="nx">align</span> <span class="o">===</span> <span class="s2">&quot;&gt;&quot;</span> <span class="o">?</span> <span class="nx">padding</span> <span class="o">+</span> <span class="nx">negative</span> <span class="o">+</span> <span class="nx">value</span> <span class="o">:</span> <span class="nx">align</span> <span class="o">===</span> <span class="s2">&quot;^&quot;</span> <span class="o">?</span> <span class="nx">padding</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">length</span> <span class="o">&gt;&gt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="nx">negative</span> <span class="o">+</span> <span class="nx">value</span> <span class="o">+</span> <span class="nx">padding</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">length</span><span class="p">)</span> <span class="o">:</span> <span class="nx">negative</span> <span class="o">+</span> <span class="p">(</span><span class="nx">zcomma</span> <span class="o">?</span> <span class="nx">value</span> <span class="o">:</span> <span class="nx">padding</span> <span class="o">+</span> <span class="nx">value</span><span class="p">))</span> <span class="o">+</span> <span class="nx">fullSuffix</span><span class="p">;</span>
      <span class="p">};</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">d3_format_re</span> <span class="o">=</span> <span class="sr">/(?:([^{])?([&lt;&gt;=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">d3_format_types</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">map</span><span class="p">({</span>
    <span class="nx">b</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">c</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nb">String</span><span class="p">.</span><span class="nx">fromCharCode</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">o</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="mi">8</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">x</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">X</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">toString</span><span class="p">(</span><span class="mi">16</span><span class="p">).</span><span class="nx">toUpperCase</span><span class="p">();</span>
    <span class="p">},</span>
    <span class="nx">g</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">toPrecision</span><span class="p">(</span><span class="nx">p</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">e</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">toExponential</span><span class="p">(</span><span class="nx">p</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">f</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">toFixed</span><span class="p">(</span><span class="nx">p</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">r</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">d3_format_precision</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">p</span><span class="p">))).</span><span class="nx">toFixed</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="nx">d3_format_precision</span><span class="p">(</span><span class="nx">x</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">1</span><span class="nx">e</span><span class="o">-</span><span class="mi">15</span><span class="p">),</span> <span class="nx">p</span><span class="p">))));</span>
    <span class="p">}</span>
  <span class="p">});</span>
  <span class="kd">function</span> <span class="nx">d3_format_typeDefault</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">x</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">d3_time</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">time</span> <span class="o">=</span> <span class="p">{},</span> <span class="nx">d3_date</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">d3_date_utc</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">?</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">UTC</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span> <span class="o">:</span> <span class="nx">arguments</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
  <span class="p">}</span>
  <span class="nx">d3_date_utc</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">getDate</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_</span><span class="p">.</span><span class="nx">getUTCDate</span><span class="p">();</span>
    <span class="p">},</span>
    <span class="nx">getDay</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_</span><span class="p">.</span><span class="nx">getUTCDay</span><span class="p">();</span>
    <span class="p">},</span>
    <span class="nx">getFullYear</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_</span><span class="p">.</span><span class="nx">getUTCFullYear</span><span class="p">();</span>
    <span class="p">},</span>
    <span class="nx">getHours</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_</span><span class="p">.</span><span class="nx">getUTCHours</span><span class="p">();</span>
    <span class="p">},</span>
    <span class="nx">getMilliseconds</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_</span><span class="p">.</span><span class="nx">getUTCMilliseconds</span><span class="p">();</span>
    <span class="p">},</span>
    <span class="nx">getMinutes</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_</span><span class="p">.</span><span class="nx">getUTCMinutes</span><span class="p">();</span>
    <span class="p">},</span>
    <span class="nx">getMonth</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_</span><span class="p">.</span><span class="nx">getUTCMonth</span><span class="p">();</span>
    <span class="p">},</span>
    <span class="nx">getSeconds</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_</span><span class="p">.</span><span class="nx">getUTCSeconds</span><span class="p">();</span>
    <span class="p">},</span>
    <span class="nx">getTime</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_</span><span class="p">.</span><span class="nx">getTime</span><span class="p">();</span>
    <span class="p">},</span>
    <span class="nx">getTimezoneOffset</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">valueOf</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_</span><span class="p">.</span><span class="nx">valueOf</span><span class="p">();</span>
    <span class="p">},</span>
    <span class="nx">setDate</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">d3_time_prototype</span><span class="p">.</span><span class="nx">setUTCDate</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">setDay</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">d3_time_prototype</span><span class="p">.</span><span class="nx">setUTCDay</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">setFullYear</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">d3_time_prototype</span><span class="p">.</span><span class="nx">setUTCFullYear</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">setHours</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">d3_time_prototype</span><span class="p">.</span><span class="nx">setUTCHours</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">setMilliseconds</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">d3_time_prototype</span><span class="p">.</span><span class="nx">setUTCMilliseconds</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">setMinutes</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">d3_time_prototype</span><span class="p">.</span><span class="nx">setUTCMinutes</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">setMonth</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">d3_time_prototype</span><span class="p">.</span><span class="nx">setUTCMonth</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">setSeconds</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">d3_time_prototype</span><span class="p">.</span><span class="nx">setUTCSeconds</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">setTime</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">d3_time_prototype</span><span class="p">.</span><span class="nx">setTime</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">d3_time_prototype</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">d3_time_interval</span><span class="p">(</span><span class="nx">local</span><span class="p">,</span> <span class="nx">step</span><span class="p">,</span> <span class="nx">number</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">function</span> <span class="nx">round</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">d0</span> <span class="o">=</span> <span class="nx">local</span><span class="p">(</span><span class="nx">date</span><span class="p">),</span> <span class="nx">d1</span> <span class="o">=</span> <span class="nx">offset</span><span class="p">(</span><span class="nx">d0</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">date</span> <span class="o">-</span> <span class="nx">d0</span> <span class="o">&lt;</span> <span class="nx">d1</span> <span class="o">-</span> <span class="nx">date</span> <span class="o">?</span> <span class="nx">d0</span> <span class="o">:</span> <span class="nx">d1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">ceil</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">step</span><span class="p">(</span><span class="nx">date</span> <span class="o">=</span> <span class="nx">local</span><span class="p">(</span><span class="k">new</span> <span class="nx">d3_date</span><span class="p">(</span><span class="nx">date</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)),</span> <span class="mi">1</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">date</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">offset</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">k</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">step</span><span class="p">(</span><span class="nx">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">d3_date</span><span class="p">(</span><span class="o">+</span><span class="nx">date</span><span class="p">),</span> <span class="nx">k</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">date</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">range</span><span class="p">(</span><span class="nx">t0</span><span class="p">,</span> <span class="nx">t1</span><span class="p">,</span> <span class="nx">dt</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">time</span> <span class="o">=</span> <span class="nx">ceil</span><span class="p">(</span><span class="nx">t0</span><span class="p">),</span> <span class="nx">times</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">dt</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">time</span> <span class="o">&lt;</span> <span class="nx">t1</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">number</span><span class="p">(</span><span class="nx">time</span><span class="p">)</span> <span class="o">%</span> <span class="nx">dt</span><span class="p">))</span> <span class="nx">times</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="o">+</span><span class="nx">time</span><span class="p">));</span>
          <span class="nx">step</span><span class="p">(</span><span class="nx">time</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">time</span> <span class="o">&lt;</span> <span class="nx">t1</span><span class="p">)</span> <span class="nx">times</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="o">+</span><span class="nx">time</span><span class="p">)),</span> <span class="nx">step</span><span class="p">(</span><span class="nx">time</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">times</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">range_utc</span><span class="p">(</span><span class="nx">t0</span><span class="p">,</span> <span class="nx">t1</span><span class="p">,</span> <span class="nx">dt</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">try</span> <span class="p">{</span>
        <span class="nx">d3_date</span> <span class="o">=</span> <span class="nx">d3_date_utc</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">utc</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">d3_date_utc</span><span class="p">();</span>
        <span class="nx">utc</span><span class="p">.</span><span class="nx">_</span> <span class="o">=</span> <span class="nx">t0</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">range</span><span class="p">(</span><span class="nx">utc</span><span class="p">,</span> <span class="nx">t1</span><span class="p">,</span> <span class="nx">dt</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
        <span class="nx">d3_date</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="nx">local</span><span class="p">.</span><span class="nx">floor</span> <span class="o">=</span> <span class="nx">local</span><span class="p">;</span>
    <span class="nx">local</span><span class="p">.</span><span class="nx">round</span> <span class="o">=</span> <span class="nx">round</span><span class="p">;</span>
    <span class="nx">local</span><span class="p">.</span><span class="nx">ceil</span> <span class="o">=</span> <span class="nx">ceil</span><span class="p">;</span>
    <span class="nx">local</span><span class="p">.</span><span class="nx">offset</span> <span class="o">=</span> <span class="nx">offset</span><span class="p">;</span>
    <span class="nx">local</span><span class="p">.</span><span class="nx">range</span> <span class="o">=</span> <span class="nx">range</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">utc</span> <span class="o">=</span> <span class="nx">local</span><span class="p">.</span><span class="nx">utc</span> <span class="o">=</span> <span class="nx">d3_time_interval_utc</span><span class="p">(</span><span class="nx">local</span><span class="p">);</span>
    <span class="nx">utc</span><span class="p">.</span><span class="nx">floor</span> <span class="o">=</span> <span class="nx">utc</span><span class="p">;</span>
    <span class="nx">utc</span><span class="p">.</span><span class="nx">round</span> <span class="o">=</span> <span class="nx">d3_time_interval_utc</span><span class="p">(</span><span class="nx">round</span><span class="p">);</span>
    <span class="nx">utc</span><span class="p">.</span><span class="nx">ceil</span> <span class="o">=</span> <span class="nx">d3_time_interval_utc</span><span class="p">(</span><span class="nx">ceil</span><span class="p">);</span>
    <span class="nx">utc</span><span class="p">.</span><span class="nx">offset</span> <span class="o">=</span> <span class="nx">d3_time_interval_utc</span><span class="p">(</span><span class="nx">offset</span><span class="p">);</span>
    <span class="nx">utc</span><span class="p">.</span><span class="nx">range</span> <span class="o">=</span> <span class="nx">range_utc</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">local</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_time_interval_utc</span><span class="p">(</span><span class="nx">method</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">k</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">try</span> <span class="p">{</span>
        <span class="nx">d3_date</span> <span class="o">=</span> <span class="nx">d3_date_utc</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">utc</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">d3_date_utc</span><span class="p">();</span>
        <span class="nx">utc</span><span class="p">.</span><span class="nx">_</span> <span class="o">=</span> <span class="nx">date</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">method</span><span class="p">(</span><span class="nx">utc</span><span class="p">,</span> <span class="nx">k</span><span class="p">).</span><span class="nx">_</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
        <span class="nx">d3_date</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="nx">d3_time</span><span class="p">.</span><span class="nx">year</span> <span class="o">=</span> <span class="nx">d3_time_interval</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">date</span> <span class="o">=</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">day</span><span class="p">(</span><span class="nx">date</span><span class="p">);</span>
    <span class="nx">date</span><span class="p">.</span><span class="nx">setMonth</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">date</span><span class="p">;</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">offset</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">date</span><span class="p">.</span><span class="nx">setFullYear</span><span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">()</span> <span class="o">+</span> <span class="nx">offset</span><span class="p">);</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">();</span>
  <span class="p">});</span>
  <span class="nx">d3_time</span><span class="p">.</span><span class="nx">years</span> <span class="o">=</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">year</span><span class="p">.</span><span class="nx">range</span><span class="p">;</span>
  <span class="nx">d3_time</span><span class="p">.</span><span class="nx">years</span><span class="p">.</span><span class="nx">utc</span> <span class="o">=</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">year</span><span class="p">.</span><span class="nx">utc</span><span class="p">.</span><span class="nx">range</span><span class="p">;</span>
  <span class="nx">d3_time</span><span class="p">.</span><span class="nx">day</span> <span class="o">=</span> <span class="nx">d3_time_interval</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">day</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">d3_date</span><span class="p">(</span><span class="mi">2</span><span class="nx">e3</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="nx">day</span><span class="p">.</span><span class="nx">setFullYear</span><span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">(),</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">(),</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getDate</span><span class="p">());</span>
    <span class="k">return</span> <span class="nx">day</span><span class="p">;</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">offset</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">date</span><span class="p">.</span><span class="nx">setDate</span><span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">+</span> <span class="nx">offset</span><span class="p">);</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">});</span>
  <span class="nx">d3_time</span><span class="p">.</span><span class="nx">days</span> <span class="o">=</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">day</span><span class="p">.</span><span class="nx">range</span><span class="p">;</span>
  <span class="nx">d3_time</span><span class="p">.</span><span class="nx">days</span><span class="p">.</span><span class="nx">utc</span> <span class="o">=</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">day</span><span class="p">.</span><span class="nx">utc</span><span class="p">.</span><span class="nx">range</span><span class="p">;</span>
  <span class="nx">d3_time</span><span class="p">.</span><span class="nx">dayOfYear</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">year</span> <span class="o">=</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">year</span><span class="p">(</span><span class="nx">date</span><span class="p">);</span>
    <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">((</span><span class="nx">date</span> <span class="o">-</span> <span class="nx">year</span> <span class="o">-</span> <span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">getTimezoneOffset</span><span class="p">()</span> <span class="o">-</span> <span class="nx">year</span><span class="p">.</span><span class="nx">getTimezoneOffset</span><span class="p">())</span> <span class="o">*</span> <span class="mi">6</span><span class="nx">e4</span><span class="p">)</span> <span class="o">/</span> <span class="mi">864</span><span class="nx">e5</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="p">[</span> <span class="s2">&quot;sunday&quot;</span><span class="p">,</span> <span class="s2">&quot;monday&quot;</span><span class="p">,</span> <span class="s2">&quot;tuesday&quot;</span><span class="p">,</span> <span class="s2">&quot;wednesday&quot;</span><span class="p">,</span> <span class="s2">&quot;thursday&quot;</span><span class="p">,</span> <span class="s2">&quot;friday&quot;</span><span class="p">,</span> <span class="s2">&quot;saturday&quot;</span> <span class="p">].</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">day</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">i</span> <span class="o">=</span> <span class="mi">7</span> <span class="o">-</span> <span class="nx">i</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">interval</span> <span class="o">=</span> <span class="nx">d3_time</span><span class="p">[</span><span class="nx">day</span><span class="p">]</span> <span class="o">=</span> <span class="nx">d3_time_interval</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
      <span class="p">(</span><span class="nx">date</span> <span class="o">=</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">day</span><span class="p">(</span><span class="nx">date</span><span class="p">)).</span><span class="nx">setDate</span><span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">-</span> <span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">getDay</span><span class="p">()</span> <span class="o">+</span> <span class="nx">i</span><span class="p">)</span> <span class="o">%</span> <span class="mi">7</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">date</span><span class="p">;</span>
    <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">offset</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">date</span><span class="p">.</span><span class="nx">setDate</span><span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">offset</span><span class="p">)</span> <span class="o">*</span> <span class="mi">7</span><span class="p">);</span>
    <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">day</span> <span class="o">=</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">year</span><span class="p">(</span><span class="nx">date</span><span class="p">).</span><span class="nx">getDay</span><span class="p">();</span>
      <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">((</span><span class="nx">d3_time</span><span class="p">.</span><span class="nx">dayOfYear</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="nx">day</span> <span class="o">+</span> <span class="nx">i</span><span class="p">)</span> <span class="o">%</span> <span class="mi">7</span><span class="p">)</span> <span class="o">/</span> <span class="mi">7</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="nx">day</span> <span class="o">!==</span> <span class="nx">i</span><span class="p">);</span>
    <span class="p">});</span>
    <span class="nx">d3_time</span><span class="p">[</span><span class="nx">day</span> <span class="o">+</span> <span class="s2">&quot;s&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">interval</span><span class="p">.</span><span class="nx">range</span><span class="p">;</span>
    <span class="nx">d3_time</span><span class="p">[</span><span class="nx">day</span> <span class="o">+</span> <span class="s2">&quot;s&quot;</span><span class="p">].</span><span class="nx">utc</span> <span class="o">=</span> <span class="nx">interval</span><span class="p">.</span><span class="nx">utc</span><span class="p">.</span><span class="nx">range</span><span class="p">;</span>
    <span class="nx">d3_time</span><span class="p">[</span><span class="nx">day</span> <span class="o">+</span> <span class="s2">&quot;OfYear&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">day</span> <span class="o">=</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">year</span><span class="p">(</span><span class="nx">date</span><span class="p">).</span><span class="nx">getDay</span><span class="p">();</span>
      <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">((</span><span class="nx">d3_time</span><span class="p">.</span><span class="nx">dayOfYear</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="nx">day</span> <span class="o">+</span> <span class="nx">i</span><span class="p">)</span> <span class="o">%</span> <span class="mi">7</span><span class="p">)</span> <span class="o">/</span> <span class="mi">7</span><span class="p">);</span>
    <span class="p">};</span>
  <span class="p">});</span>
  <span class="nx">d3_time</span><span class="p">.</span><span class="nx">week</span> <span class="o">=</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">sunday</span><span class="p">;</span>
  <span class="nx">d3_time</span><span class="p">.</span><span class="nx">weeks</span> <span class="o">=</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">sunday</span><span class="p">.</span><span class="nx">range</span><span class="p">;</span>
  <span class="nx">d3_time</span><span class="p">.</span><span class="nx">weeks</span><span class="p">.</span><span class="nx">utc</span> <span class="o">=</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">sunday</span><span class="p">.</span><span class="nx">utc</span><span class="p">.</span><span class="nx">range</span><span class="p">;</span>
  <span class="nx">d3_time</span><span class="p">.</span><span class="nx">weekOfYear</span> <span class="o">=</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">sundayOfYear</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">d3_locale_timeFormat</span><span class="p">(</span><span class="nx">locale</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">locale_dateTime</span> <span class="o">=</span> <span class="nx">locale</span><span class="p">.</span><span class="nx">dateTime</span><span class="p">,</span> <span class="nx">locale_date</span> <span class="o">=</span> <span class="nx">locale</span><span class="p">.</span><span class="nx">date</span><span class="p">,</span> <span class="nx">locale_time</span> <span class="o">=</span> <span class="nx">locale</span><span class="p">.</span><span class="nx">time</span><span class="p">,</span> <span class="nx">locale_periods</span> <span class="o">=</span> <span class="nx">locale</span><span class="p">.</span><span class="nx">periods</span><span class="p">,</span> <span class="nx">locale_days</span> <span class="o">=</span> <span class="nx">locale</span><span class="p">.</span><span class="nx">days</span><span class="p">,</span> <span class="nx">locale_shortDays</span> <span class="o">=</span> <span class="nx">locale</span><span class="p">.</span><span class="nx">shortDays</span><span class="p">,</span> <span class="nx">locale_months</span> <span class="o">=</span> <span class="nx">locale</span><span class="p">.</span><span class="nx">months</span><span class="p">,</span> <span class="nx">locale_shortMonths</span> <span class="o">=</span> <span class="nx">locale</span><span class="p">.</span><span class="nx">shortMonths</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">d3_time_format</span><span class="p">(</span><span class="nx">template</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">template</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
      <span class="kd">function</span> <span class="nx">format</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">string</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">c</span><span class="p">,</span> <span class="nx">p</span><span class="p">,</span> <span class="nx">f</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">template</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="o">===</span> <span class="mi">37</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">string</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">template</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">j</span><span class="p">,</span> <span class="nx">i</span><span class="p">));</span>
            <span class="k">if</span> <span class="p">((</span><span class="nx">p</span> <span class="o">=</span> <span class="nx">d3_time_formatPads</span><span class="p">[</span><span class="nx">c</span> <span class="o">=</span> <span class="nx">template</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="o">++</span><span class="nx">i</span><span class="p">)])</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">template</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="o">++</span><span class="nx">i</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">f</span> <span class="o">=</span> <span class="nx">d3_time_formats</span><span class="p">[</span><span class="nx">c</span><span class="p">])</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">f</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">p</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">c</span> <span class="o">===</span> <span class="s2">&quot;e&quot;</span> <span class="o">?</span> <span class="s2">&quot; &quot;</span> <span class="o">:</span> <span class="s2">&quot;0&quot;</span> <span class="o">:</span> <span class="nx">p</span><span class="p">);</span>
            <span class="nx">string</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span>
            <span class="nx">j</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="nx">string</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">template</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">j</span><span class="p">,</span> <span class="nx">i</span><span class="p">));</span>
        <span class="k">return</span> <span class="nx">string</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="nx">format</span><span class="p">.</span><span class="nx">parse</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="p">{</span>
          <span class="nx">y</span><span class="o">:</span> <span class="mi">1900</span><span class="p">,</span>
          <span class="nx">m</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
          <span class="nx">d</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="nx">H</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
          <span class="nx">M</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
          <span class="nx">S</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
          <span class="nx">L</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
          <span class="nx">Z</span><span class="o">:</span> <span class="kc">null</span>
        <span class="p">},</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">d3_time_parse</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">template</span><span class="p">,</span> <span class="nx">string</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">!=</span> <span class="nx">string</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="s2">&quot;p&quot;</span> <span class="k">in</span> <span class="nx">d</span><span class="p">)</span> <span class="nx">d</span><span class="p">.</span><span class="nx">H</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">H</span> <span class="o">%</span> <span class="mi">12</span> <span class="o">+</span> <span class="nx">d</span><span class="p">.</span><span class="nx">p</span> <span class="o">*</span> <span class="mi">12</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">localZ</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">Z</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="nx">d3_date</span> <span class="o">!==</span> <span class="nx">d3_date_utc</span><span class="p">,</span> <span class="nx">date</span> <span class="o">=</span> <span class="k">new</span> <span class="p">(</span><span class="nx">localZ</span> <span class="o">?</span> <span class="nx">d3_date_utc</span> <span class="o">:</span> <span class="nx">d3_date</span><span class="p">)();</span>
        <span class="k">if</span> <span class="p">(</span><span class="s2">&quot;j&quot;</span> <span class="k">in</span> <span class="nx">d</span><span class="p">)</span> <span class="nx">date</span><span class="p">.</span><span class="nx">setFullYear</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">d</span><span class="p">.</span><span class="nx">j</span><span class="p">);</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="s2">&quot;w&quot;</span> <span class="k">in</span> <span class="nx">d</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="s2">&quot;W&quot;</span> <span class="k">in</span> <span class="nx">d</span> <span class="o">||</span> <span class="s2">&quot;U&quot;</span> <span class="k">in</span> <span class="nx">d</span><span class="p">))</span> <span class="p">{</span>
          <span class="nx">date</span><span class="p">.</span><span class="nx">setFullYear</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
          <span class="nx">date</span><span class="p">.</span><span class="nx">setFullYear</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;W&quot;</span> <span class="k">in</span> <span class="nx">d</span> <span class="o">?</span> <span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">w</span> <span class="o">+</span> <span class="mi">6</span><span class="p">)</span> <span class="o">%</span> <span class="mi">7</span> <span class="o">+</span> <span class="nx">d</span><span class="p">.</span><span class="nx">W</span> <span class="o">*</span> <span class="mi">7</span> <span class="o">-</span> <span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">getDay</span><span class="p">()</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span> <span class="o">%</span> <span class="mi">7</span> <span class="o">:</span> <span class="nx">d</span><span class="p">.</span><span class="nx">w</span> <span class="o">+</span> <span class="nx">d</span><span class="p">.</span><span class="nx">U</span> <span class="o">*</span> <span class="mi">7</span> <span class="o">-</span> <span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">getDay</span><span class="p">()</span> <span class="o">+</span> <span class="mi">6</span><span class="p">)</span> <span class="o">%</span> <span class="mi">7</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="nx">date</span><span class="p">.</span><span class="nx">setFullYear</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">d</span><span class="p">.</span><span class="nx">m</span><span class="p">,</span> <span class="nx">d</span><span class="p">.</span><span class="nx">d</span><span class="p">);</span>
        <span class="nx">date</span><span class="p">.</span><span class="nx">setHours</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">H</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">Z</span> <span class="o">/</span> <span class="mi">100</span><span class="p">),</span> <span class="nx">d</span><span class="p">.</span><span class="nx">M</span> <span class="o">+</span> <span class="nx">d</span><span class="p">.</span><span class="nx">Z</span> <span class="o">%</span> <span class="mi">100</span><span class="p">,</span> <span class="nx">d</span><span class="p">.</span><span class="nx">S</span><span class="p">,</span> <span class="nx">d</span><span class="p">.</span><span class="nx">L</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">localZ</span> <span class="o">?</span> <span class="nx">date</span><span class="p">.</span><span class="nx">_</span> <span class="o">:</span> <span class="nx">date</span><span class="p">;</span>
      <span class="p">};</span>
      <span class="nx">format</span><span class="p">.</span><span class="nx">toString</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">template</span><span class="p">;</span>
      <span class="p">};</span>
      <span class="k">return</span> <span class="nx">format</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">d3_time_parse</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">template</span><span class="p">,</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">j</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">c</span><span class="p">,</span> <span class="nx">p</span><span class="p">,</span> <span class="nx">t</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">template</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">string</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">j</span> <span class="o">&gt;=</span> <span class="nx">m</span><span class="p">)</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="nx">c</span> <span class="o">=</span> <span class="nx">template</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="nx">i</span><span class="o">++</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">c</span> <span class="o">===</span> <span class="mi">37</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">t</span> <span class="o">=</span> <span class="nx">template</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">i</span><span class="o">++</span><span class="p">);</span>
          <span class="nx">p</span> <span class="o">=</span> <span class="nx">d3_time_parsers</span><span class="p">[</span><span class="nx">t</span> <span class="k">in</span> <span class="nx">d3_time_formatPads</span> <span class="o">?</span> <span class="nx">template</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="o">:</span> <span class="nx">t</span><span class="p">];</span>
          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">p</span> <span class="o">||</span> <span class="p">(</span><span class="nx">j</span> <span class="o">=</span> <span class="nx">p</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">j</span><span class="p">))</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">c</span> <span class="o">!=</span> <span class="nx">string</span><span class="p">.</span><span class="nx">charCodeAt</span><span class="p">(</span><span class="nx">j</span><span class="o">++</span><span class="p">))</span> <span class="p">{</span>
          <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">j</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">d3_time_format</span><span class="p">.</span><span class="nx">utc</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">template</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">local</span> <span class="o">=</span> <span class="nx">d3_time_format</span><span class="p">(</span><span class="nx">template</span><span class="p">);</span>
      <span class="kd">function</span> <span class="nx">format</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
          <span class="nx">d3_date</span> <span class="o">=</span> <span class="nx">d3_date_utc</span><span class="p">;</span>
          <span class="kd">var</span> <span class="nx">utc</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">d3_date</span><span class="p">();</span>
          <span class="nx">utc</span><span class="p">.</span><span class="nx">_</span> <span class="o">=</span> <span class="nx">date</span><span class="p">;</span>
          <span class="k">return</span> <span class="nx">local</span><span class="p">(</span><span class="nx">utc</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
          <span class="nx">d3_date</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="nx">format</span><span class="p">.</span><span class="nx">parse</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">try</span> <span class="p">{</span>
          <span class="nx">d3_date</span> <span class="o">=</span> <span class="nx">d3_date_utc</span><span class="p">;</span>
          <span class="kd">var</span> <span class="nx">date</span> <span class="o">=</span> <span class="nx">local</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">string</span><span class="p">);</span>
          <span class="k">return</span> <span class="nx">date</span> <span class="o">&amp;&amp;</span> <span class="nx">date</span><span class="p">.</span><span class="nx">_</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">finally</span> <span class="p">{</span>
          <span class="nx">d3_date</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>
      <span class="nx">format</span><span class="p">.</span><span class="nx">toString</span> <span class="o">=</span> <span class="nx">local</span><span class="p">.</span><span class="nx">toString</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">format</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">d3_time_format</span><span class="p">.</span><span class="nx">multi</span> <span class="o">=</span> <span class="nx">d3_time_format</span><span class="p">.</span><span class="nx">utc</span><span class="p">.</span><span class="nx">multi</span> <span class="o">=</span> <span class="nx">d3_time_formatMulti</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">d3_time_periodLookup</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">map</span><span class="p">(),</span> <span class="nx">d3_time_dayRe</span> <span class="o">=</span> <span class="nx">d3_time_formatRe</span><span class="p">(</span><span class="nx">locale_days</span><span class="p">),</span> <span class="nx">d3_time_dayLookup</span> <span class="o">=</span> <span class="nx">d3_time_formatLookup</span><span class="p">(</span><span class="nx">locale_days</span><span class="p">),</span> <span class="nx">d3_time_dayAbbrevRe</span> <span class="o">=</span> <span class="nx">d3_time_formatRe</span><span class="p">(</span><span class="nx">locale_shortDays</span><span class="p">),</span> <span class="nx">d3_time_dayAbbrevLookup</span> <span class="o">=</span> <span class="nx">d3_time_formatLookup</span><span class="p">(</span><span class="nx">locale_shortDays</span><span class="p">),</span> <span class="nx">d3_time_monthRe</span> <span class="o">=</span> <span class="nx">d3_time_formatRe</span><span class="p">(</span><span class="nx">locale_months</span><span class="p">),</span> <span class="nx">d3_time_monthLookup</span> <span class="o">=</span> <span class="nx">d3_time_formatLookup</span><span class="p">(</span><span class="nx">locale_months</span><span class="p">),</span> <span class="nx">d3_time_monthAbbrevRe</span> <span class="o">=</span> <span class="nx">d3_time_formatRe</span><span class="p">(</span><span class="nx">locale_shortMonths</span><span class="p">),</span> <span class="nx">d3_time_monthAbbrevLookup</span> <span class="o">=</span> <span class="nx">d3_time_formatLookup</span><span class="p">(</span><span class="nx">locale_shortMonths</span><span class="p">);</span>
    <span class="nx">locale_periods</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">d3_time_periodLookup</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">toLowerCase</span><span class="p">(),</span> <span class="nx">i</span><span class="p">);</span>
    <span class="p">});</span>
    <span class="kd">var</span> <span class="nx">d3_time_formats</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">a</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">locale_shortDays</span><span class="p">[</span><span class="nx">d</span><span class="p">.</span><span class="nx">getDay</span><span class="p">()];</span>
      <span class="p">},</span>
      <span class="nx">A</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">locale_days</span><span class="p">[</span><span class="nx">d</span><span class="p">.</span><span class="nx">getDay</span><span class="p">()];</span>
      <span class="p">},</span>
      <span class="nx">b</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">locale_shortMonths</span><span class="p">[</span><span class="nx">d</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()];</span>
      <span class="p">},</span>
      <span class="nx">B</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">locale_months</span><span class="p">[</span><span class="nx">d</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()];</span>
      <span class="p">},</span>
      <span class="nx">c</span><span class="o">:</span> <span class="nx">d3_time_format</span><span class="p">(</span><span class="nx">locale_dateTime</span><span class="p">),</span>
      <span class="nx">d</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">d3_time_formatPad</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">getDate</span><span class="p">(),</span> <span class="nx">p</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
      <span class="p">},</span>
      <span class="nx">e</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">d3_time_formatPad</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">getDate</span><span class="p">(),</span> <span class="nx">p</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
      <span class="p">},</span>
      <span class="nx">H</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">d3_time_formatPad</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">getHours</span><span class="p">(),</span> <span class="nx">p</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
      <span class="p">},</span>
      <span class="nx">I</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">d3_time_formatPad</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">getHours</span><span class="p">()</span> <span class="o">%</span> <span class="mi">12</span> <span class="o">||</span> <span class="mi">12</span><span class="p">,</span> <span class="nx">p</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
      <span class="p">},</span>
      <span class="nx">j</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">d3_time_formatPad</span><span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">dayOfYear</span><span class="p">(</span><span class="nx">d</span><span class="p">),</span> <span class="nx">p</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
      <span class="p">},</span>
      <span class="nx">L</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">d3_time_formatPad</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">getMilliseconds</span><span class="p">(),</span> <span class="nx">p</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
      <span class="p">},</span>
      <span class="nx">m</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">d3_time_formatPad</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">p</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
      <span class="p">},</span>
      <span class="nx">M</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">d3_time_formatPad</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">getMinutes</span><span class="p">(),</span> <span class="nx">p</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
      <span class="p">},</span>
      <span class="nx">p</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">locale_periods</span><span class="p">[</span><span class="o">+</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">getHours</span><span class="p">()</span> <span class="o">&gt;=</span> <span class="mi">12</span><span class="p">)];</span>
      <span class="p">},</span>
      <span class="nx">S</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">d3_time_formatPad</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">getSeconds</span><span class="p">(),</span> <span class="nx">p</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
      <span class="p">},</span>
      <span class="nx">U</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">d3_time_formatPad</span><span class="p">(</span><span class="nx">d3_time</span><span class="p">.</span><span class="nx">sundayOfYear</span><span class="p">(</span><span class="nx">d</span><span class="p">),</span> <span class="nx">p</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
      <span class="p">},</span>
      <span class="nx">w</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getDay</span><span class="p">();</span>
      <span class="p">},</span>
      <span class="nx">W</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">d3_time_formatPad</span><span class="p">(</span><span class="nx">d3_time</span><span class="p">.</span><span class="nx">mondayOfYear</span><span class="p">(</span><span class="nx">d</span><span class="p">),</span> <span class="nx">p</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
      <span class="p">},</span>
      <span class="nx">x</span><span class="o">:</span> <span class="nx">d3_time_format</span><span class="p">(</span><span class="nx">locale_date</span><span class="p">),</span>
      <span class="nx">X</span><span class="o">:</span> <span class="nx">d3_time_format</span><span class="p">(</span><span class="nx">locale_time</span><span class="p">),</span>
      <span class="nx">y</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">d3_time_formatPad</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">()</span> <span class="o">%</span> <span class="mi">100</span><span class="p">,</span> <span class="nx">p</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
      <span class="p">},</span>
      <span class="nx">Y</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">d3_time_formatPad</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">getFullYear</span><span class="p">()</span> <span class="o">%</span> <span class="mi">1</span><span class="nx">e4</span><span class="p">,</span> <span class="nx">p</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
      <span class="p">},</span>
      <span class="nx">Z</span><span class="o">:</span> <span class="nx">d3_time_zone</span><span class="p">,</span>
      <span class="s2">&quot;%&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s2">&quot;%&quot;</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">};</span>
    <span class="kd">var</span> <span class="nx">d3_time_parsers</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">a</span><span class="o">:</span> <span class="nx">d3_time_parseWeekdayAbbrev</span><span class="p">,</span>
      <span class="nx">A</span><span class="o">:</span> <span class="nx">d3_time_parseWeekday</span><span class="p">,</span>
      <span class="nx">b</span><span class="o">:</span> <span class="nx">d3_time_parseMonthAbbrev</span><span class="p">,</span>
      <span class="nx">B</span><span class="o">:</span> <span class="nx">d3_time_parseMonth</span><span class="p">,</span>
      <span class="nx">c</span><span class="o">:</span> <span class="nx">d3_time_parseLocaleFull</span><span class="p">,</span>
      <span class="nx">d</span><span class="o">:</span> <span class="nx">d3_time_parseDay</span><span class="p">,</span>
      <span class="nx">e</span><span class="o">:</span> <span class="nx">d3_time_parseDay</span><span class="p">,</span>
      <span class="nx">H</span><span class="o">:</span> <span class="nx">d3_time_parseHour24</span><span class="p">,</span>
      <span class="nx">I</span><span class="o">:</span> <span class="nx">d3_time_parseHour24</span><span class="p">,</span>
      <span class="nx">j</span><span class="o">:</span> <span class="nx">d3_time_parseDayOfYear</span><span class="p">,</span>
      <span class="nx">L</span><span class="o">:</span> <span class="nx">d3_time_parseMilliseconds</span><span class="p">,</span>
      <span class="nx">m</span><span class="o">:</span> <span class="nx">d3_time_parseMonthNumber</span><span class="p">,</span>
      <span class="nx">M</span><span class="o">:</span> <span class="nx">d3_time_parseMinutes</span><span class="p">,</span>
      <span class="nx">p</span><span class="o">:</span> <span class="nx">d3_time_parseAmPm</span><span class="p">,</span>
      <span class="nx">S</span><span class="o">:</span> <span class="nx">d3_time_parseSeconds</span><span class="p">,</span>
      <span class="nx">U</span><span class="o">:</span> <span class="nx">d3_time_parseWeekNumberSunday</span><span class="p">,</span>
      <span class="nx">w</span><span class="o">:</span> <span class="nx">d3_time_parseWeekdayNumber</span><span class="p">,</span>
      <span class="nx">W</span><span class="o">:</span> <span class="nx">d3_time_parseWeekNumberMonday</span><span class="p">,</span>
      <span class="nx">x</span><span class="o">:</span> <span class="nx">d3_time_parseLocaleDate</span><span class="p">,</span>
      <span class="nx">X</span><span class="o">:</span> <span class="nx">d3_time_parseLocaleTime</span><span class="p">,</span>
      <span class="nx">y</span><span class="o">:</span> <span class="nx">d3_time_parseYear</span><span class="p">,</span>
      <span class="nx">Y</span><span class="o">:</span> <span class="nx">d3_time_parseFullYear</span><span class="p">,</span>
      <span class="nx">Z</span><span class="o">:</span> <span class="nx">d3_time_parseZone</span><span class="p">,</span>
      <span class="s2">&quot;%&quot;</span><span class="o">:</span> <span class="nx">d3_time_parseLiteralPercent</span>
    <span class="p">};</span>
    <span class="kd">function</span> <span class="nx">d3_time_parseWeekdayAbbrev</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">d3_time_dayAbbrevRe</span><span class="p">.</span><span class="nx">lastIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">d3_time_dayAbbrevRe</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">string</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">i</span><span class="p">));</span>
      <span class="k">return</span> <span class="nx">n</span> <span class="o">?</span> <span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">w</span> <span class="o">=</span> <span class="nx">d3_time_dayAbbrevLookup</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">n</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">()),</span> <span class="nx">i</span> <span class="o">+</span> <span class="nx">n</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="p">)</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">d3_time_parseWeekday</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">d3_time_dayRe</span><span class="p">.</span><span class="nx">lastIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">d3_time_dayRe</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">string</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">i</span><span class="p">));</span>
      <span class="k">return</span> <span class="nx">n</span> <span class="o">?</span> <span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">w</span> <span class="o">=</span> <span class="nx">d3_time_dayLookup</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">n</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">()),</span> <span class="nx">i</span> <span class="o">+</span> <span class="nx">n</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="p">)</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">d3_time_parseMonthAbbrev</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">d3_time_monthAbbrevRe</span><span class="p">.</span><span class="nx">lastIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">d3_time_monthAbbrevRe</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">string</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">i</span><span class="p">));</span>
      <span class="k">return</span> <span class="nx">n</span> <span class="o">?</span> <span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">m</span> <span class="o">=</span> <span class="nx">d3_time_monthAbbrevLookup</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">n</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">()),</span> <span class="nx">i</span> <span class="o">+</span> <span class="nx">n</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="p">)</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">d3_time_parseMonth</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">d3_time_monthRe</span><span class="p">.</span><span class="nx">lastIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">d3_time_monthRe</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">string</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">i</span><span class="p">));</span>
      <span class="k">return</span> <span class="nx">n</span> <span class="o">?</span> <span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">m</span> <span class="o">=</span> <span class="nx">d3_time_monthLookup</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">n</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">()),</span> <span class="nx">i</span> <span class="o">+</span> <span class="nx">n</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="p">)</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">d3_time_parseLocaleFull</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_time_parse</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">d3_time_formats</span><span class="p">.</span><span class="nx">c</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">i</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">d3_time_parseLocaleDate</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_time_parse</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">d3_time_formats</span><span class="p">.</span><span class="nx">x</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">i</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">d3_time_parseLocaleTime</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_time_parse</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">d3_time_formats</span><span class="p">.</span><span class="nx">X</span><span class="p">.</span><span class="nx">toString</span><span class="p">(),</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">i</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">d3_time_parseAmPm</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">d3_time_periodLookup</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">string</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">i</span> <span class="o">+=</span> <span class="mi">2</span><span class="p">).</span><span class="nx">toLowerCase</span><span class="p">());</span>
      <span class="k">return</span> <span class="nx">n</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">p</span> <span class="o">=</span> <span class="nx">n</span><span class="p">,</span> <span class="nx">i</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">d3_time_format</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">d3_time_formatPads</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;-&quot;</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nx">_</span><span class="o">:</span> <span class="s2">&quot; &quot;</span><span class="p">,</span>
    <span class="s2">&quot;0&quot;</span><span class="o">:</span> <span class="s2">&quot;0&quot;</span>
  <span class="p">},</span> <span class="nx">d3_time_numberRe</span> <span class="o">=</span> <span class="sr">/^\s*\d+/</span><span class="p">,</span> <span class="nx">d3_time_percentRe</span> <span class="o">=</span> <span class="sr">/^%/</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">d3_time_formatPad</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">fill</span><span class="p">,</span> <span class="nx">width</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">sign</span> <span class="o">=</span> <span class="nx">value</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="s2">&quot;-&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="nx">string</span> <span class="o">=</span> <span class="p">(</span><span class="nx">sign</span> <span class="o">?</span> <span class="o">-</span><span class="nx">value</span> <span class="o">:</span> <span class="nx">value</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="nx">length</span> <span class="o">=</span> <span class="nx">string</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">sign</span> <span class="o">+</span> <span class="p">(</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="nx">width</span> <span class="o">?</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">width</span> <span class="o">-</span> <span class="nx">length</span> <span class="o">+</span> <span class="mi">1</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="nx">fill</span><span class="p">)</span> <span class="o">+</span> <span class="nx">string</span> <span class="o">:</span> <span class="nx">string</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_time_formatRe</span><span class="p">(</span><span class="nx">names</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s2">&quot;^(?:&quot;</span> <span class="o">+</span> <span class="nx">names</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">requote</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;|&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">,</span> <span class="s2">&quot;i&quot;</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_time_formatLookup</span><span class="p">(</span><span class="nx">names</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">d3_Map</span><span class="p">(),</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">names</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="nx">map</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">names</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">toLowerCase</span><span class="p">(),</span> <span class="nx">i</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">map</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_time_parseWeekdayNumber</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">d3_time_numberRe</span><span class="p">.</span><span class="nx">lastIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">d3_time_numberRe</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">string</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">));</span>
    <span class="k">return</span> <span class="nx">n</span> <span class="o">?</span> <span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">w</span> <span class="o">=</span> <span class="o">+</span><span class="nx">n</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">i</span> <span class="o">+</span> <span class="nx">n</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="p">)</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_time_parseWeekNumberSunday</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">d3_time_numberRe</span><span class="p">.</span><span class="nx">lastIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">d3_time_numberRe</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">string</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">i</span><span class="p">));</span>
    <span class="k">return</span> <span class="nx">n</span> <span class="o">?</span> <span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">U</span> <span class="o">=</span> <span class="o">+</span><span class="nx">n</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">i</span> <span class="o">+</span> <span class="nx">n</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="p">)</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_time_parseWeekNumberMonday</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">d3_time_numberRe</span><span class="p">.</span><span class="nx">lastIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">d3_time_numberRe</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">string</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">i</span><span class="p">));</span>
    <span class="k">return</span> <span class="nx">n</span> <span class="o">?</span> <span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">W</span> <span class="o">=</span> <span class="o">+</span><span class="nx">n</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">i</span> <span class="o">+</span> <span class="nx">n</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="p">)</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_time_parseFullYear</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">d3_time_numberRe</span><span class="p">.</span><span class="nx">lastIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">d3_time_numberRe</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">string</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">i</span> <span class="o">+</span> <span class="mi">4</span><span class="p">));</span>
    <span class="k">return</span> <span class="nx">n</span> <span class="o">?</span> <span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="o">+</span><span class="nx">n</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">i</span> <span class="o">+</span> <span class="nx">n</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="p">)</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_time_parseYear</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">d3_time_numberRe</span><span class="p">.</span><span class="nx">lastIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">d3_time_numberRe</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">string</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">));</span>
    <span class="k">return</span> <span class="nx">n</span> <span class="o">?</span> <span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">d3_time_expandYear</span><span class="p">(</span><span class="o">+</span><span class="nx">n</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nx">i</span> <span class="o">+</span> <span class="nx">n</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="p">)</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_time_parseZone</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="sr">/^[+-]\d{4}$/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">string</span> <span class="o">=</span> <span class="nx">string</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">i</span> <span class="o">+</span> <span class="mi">5</span><span class="p">))</span> <span class="o">?</span> <span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">Z</span> <span class="o">=</span> <span class="o">-</span><span class="nx">string</span><span class="p">,</span> 
    <span class="nx">i</span> <span class="o">+</span> <span class="mi">5</span><span class="p">)</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_time_expandYear</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d</span> <span class="o">+</span> <span class="p">(</span><span class="nx">d</span> <span class="o">&gt;</span> <span class="mi">68</span> <span class="o">?</span> <span class="mi">1900</span> <span class="o">:</span> <span class="mi">2</span><span class="nx">e3</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_time_parseMonthNumber</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">d3_time_numberRe</span><span class="p">.</span><span class="nx">lastIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">d3_time_numberRe</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">string</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">));</span>
    <span class="k">return</span> <span class="nx">n</span> <span class="o">?</span> <span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">m</span> <span class="o">=</span> <span class="nx">n</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">i</span> <span class="o">+</span> <span class="nx">n</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="p">)</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_time_parseDay</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">d3_time_numberRe</span><span class="p">.</span><span class="nx">lastIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">d3_time_numberRe</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">string</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">));</span>
    <span class="k">return</span> <span class="nx">n</span> <span class="o">?</span> <span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">d</span> <span class="o">=</span> <span class="o">+</span><span class="nx">n</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">i</span> <span class="o">+</span> <span class="nx">n</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="p">)</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_time_parseDayOfYear</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">d3_time_numberRe</span><span class="p">.</span><span class="nx">lastIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">d3_time_numberRe</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">string</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">i</span> <span class="o">+</span> <span class="mi">3</span><span class="p">));</span>
    <span class="k">return</span> <span class="nx">n</span> <span class="o">?</span> <span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">j</span> <span class="o">=</span> <span class="o">+</span><span class="nx">n</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">i</span> <span class="o">+</span> <span class="nx">n</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="p">)</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_time_parseHour24</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">d3_time_numberRe</span><span class="p">.</span><span class="nx">lastIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">d3_time_numberRe</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">string</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">));</span>
    <span class="k">return</span> <span class="nx">n</span> <span class="o">?</span> <span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">H</span> <span class="o">=</span> <span class="o">+</span><span class="nx">n</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">i</span> <span class="o">+</span> <span class="nx">n</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="p">)</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_time_parseMinutes</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">d3_time_numberRe</span><span class="p">.</span><span class="nx">lastIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">d3_time_numberRe</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">string</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">));</span>
    <span class="k">return</span> <span class="nx">n</span> <span class="o">?</span> <span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">M</span> <span class="o">=</span> <span class="o">+</span><span class="nx">n</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">i</span> <span class="o">+</span> <span class="nx">n</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="p">)</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_time_parseSeconds</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">d3_time_numberRe</span><span class="p">.</span><span class="nx">lastIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">d3_time_numberRe</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">string</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">i</span> <span class="o">+</span> <span class="mi">2</span><span class="p">));</span>
    <span class="k">return</span> <span class="nx">n</span> <span class="o">?</span> <span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">S</span> <span class="o">=</span> <span class="o">+</span><span class="nx">n</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">i</span> <span class="o">+</span> <span class="nx">n</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="p">)</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_time_parseMilliseconds</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">d3_time_numberRe</span><span class="p">.</span><span class="nx">lastIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">d3_time_numberRe</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">string</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">i</span> <span class="o">+</span> <span class="mi">3</span><span class="p">));</span>
    <span class="k">return</span> <span class="nx">n</span> <span class="o">?</span> <span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">L</span> <span class="o">=</span> <span class="o">+</span><span class="nx">n</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">i</span> <span class="o">+</span> <span class="nx">n</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="p">)</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_time_zone</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">z</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getTimezoneOffset</span><span class="p">(),</span> <span class="nx">zs</span> <span class="o">=</span> <span class="nx">z</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="s2">&quot;-&quot;</span> <span class="o">:</span> <span class="s2">&quot;+&quot;</span><span class="p">,</span> <span class="nx">zh</span> <span class="o">=</span> <span class="o">~~</span><span class="p">(</span><span class="nx">abs</span><span class="p">(</span><span class="nx">z</span><span class="p">)</span> <span class="o">/</span> <span class="mi">60</span><span class="p">),</span> <span class="nx">zm</span> <span class="o">=</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">z</span><span class="p">)</span> <span class="o">%</span> <span class="mi">60</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">zs</span> <span class="o">+</span> <span class="nx">d3_time_formatPad</span><span class="p">(</span><span class="nx">zh</span><span class="p">,</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">+</span> <span class="nx">d3_time_formatPad</span><span class="p">(</span><span class="nx">zm</span><span class="p">,</span> <span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_time_parseLiteralPercent</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">string</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">d3_time_percentRe</span><span class="p">.</span><span class="nx">lastIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">d3_time_percentRe</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">string</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">));</span>
    <span class="k">return</span> <span class="nx">n</span> <span class="o">?</span> <span class="nx">i</span> <span class="o">+</span> <span class="nx">n</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_time_formatMulti</span><span class="p">(</span><span class="nx">formats</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">formats</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="nx">formats</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">(</span><span class="nx">formats</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]);</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">formats</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="nx">f</span><span class="p">[</span><span class="mi">1</span><span class="p">](</span><span class="nx">date</span><span class="p">))</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">formats</span><span class="p">[</span><span class="o">++</span><span class="nx">i</span><span class="p">];</span>
      <span class="k">return</span> <span class="nx">f</span><span class="p">[</span><span class="mi">0</span><span class="p">](</span><span class="nx">date</span><span class="p">);</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">locale</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">locale</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">numberFormat</span><span class="o">:</span> <span class="nx">d3_locale_numberFormat</span><span class="p">(</span><span class="nx">locale</span><span class="p">),</span>
      <span class="nx">timeFormat</span><span class="o">:</span> <span class="nx">d3_locale_timeFormat</span><span class="p">(</span><span class="nx">locale</span><span class="p">)</span>
    <span class="p">};</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">d3_locale_enUS</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">locale</span><span class="p">({</span>
    <span class="nx">decimal</span><span class="o">:</span> <span class="s2">&quot;.&quot;</span><span class="p">,</span>
    <span class="nx">thousands</span><span class="o">:</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span>
    <span class="nx">grouping</span><span class="o">:</span> <span class="p">[</span> <span class="mi">3</span> <span class="p">],</span>
    <span class="nx">currency</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;$&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span> <span class="p">],</span>
    <span class="nx">dateTime</span><span class="o">:</span> <span class="s2">&quot;%a %b %e %X %Y&quot;</span><span class="p">,</span>
    <span class="nx">date</span><span class="o">:</span> <span class="s2">&quot;%m/%d/%Y&quot;</span><span class="p">,</span>
    <span class="nx">time</span><span class="o">:</span> <span class="s2">&quot;%H:%M:%S&quot;</span><span class="p">,</span>
    <span class="nx">periods</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;AM&quot;</span><span class="p">,</span> <span class="s2">&quot;PM&quot;</span> <span class="p">],</span>
    <span class="nx">days</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;Sunday&quot;</span><span class="p">,</span> <span class="s2">&quot;Monday&quot;</span><span class="p">,</span> <span class="s2">&quot;Tuesday&quot;</span><span class="p">,</span> <span class="s2">&quot;Wednesday&quot;</span><span class="p">,</span> <span class="s2">&quot;Thursday&quot;</span><span class="p">,</span> <span class="s2">&quot;Friday&quot;</span><span class="p">,</span> <span class="s2">&quot;Saturday&quot;</span> <span class="p">],</span>
    <span class="nx">shortDays</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;Sun&quot;</span><span class="p">,</span> <span class="s2">&quot;Mon&quot;</span><span class="p">,</span> <span class="s2">&quot;Tue&quot;</span><span class="p">,</span> <span class="s2">&quot;Wed&quot;</span><span class="p">,</span> <span class="s2">&quot;Thu&quot;</span><span class="p">,</span> <span class="s2">&quot;Fri&quot;</span><span class="p">,</span> <span class="s2">&quot;Sat&quot;</span> <span class="p">],</span>
    <span class="nx">months</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;January&quot;</span><span class="p">,</span> <span class="s2">&quot;February&quot;</span><span class="p">,</span> <span class="s2">&quot;March&quot;</span><span class="p">,</span> <span class="s2">&quot;April&quot;</span><span class="p">,</span> <span class="s2">&quot;May&quot;</span><span class="p">,</span> <span class="s2">&quot;June&quot;</span><span class="p">,</span> <span class="s2">&quot;July&quot;</span><span class="p">,</span> <span class="s2">&quot;August&quot;</span><span class="p">,</span> <span class="s2">&quot;September&quot;</span><span class="p">,</span> <span class="s2">&quot;October&quot;</span><span class="p">,</span> <span class="s2">&quot;November&quot;</span><span class="p">,</span> <span class="s2">&quot;December&quot;</span> <span class="p">],</span>
    <span class="nx">shortMonths</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;Jan&quot;</span><span class="p">,</span> <span class="s2">&quot;Feb&quot;</span><span class="p">,</span> <span class="s2">&quot;Mar&quot;</span><span class="p">,</span> <span class="s2">&quot;Apr&quot;</span><span class="p">,</span> <span class="s2">&quot;May&quot;</span><span class="p">,</span> <span class="s2">&quot;Jun&quot;</span><span class="p">,</span> <span class="s2">&quot;Jul&quot;</span><span class="p">,</span> <span class="s2">&quot;Aug&quot;</span><span class="p">,</span> <span class="s2">&quot;Sep&quot;</span><span class="p">,</span> <span class="s2">&quot;Oct&quot;</span><span class="p">,</span> <span class="s2">&quot;Nov&quot;</span><span class="p">,</span> <span class="s2">&quot;Dec&quot;</span> <span class="p">]</span>
  <span class="p">});</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">format</span> <span class="o">=</span> <span class="nx">d3_locale_enUS</span><span class="p">.</span><span class="nx">numberFormat</span><span class="p">;</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="kd">function</span> <span class="nx">d3_adder</span><span class="p">()</span> <span class="p">{}</span>
  <span class="nx">d3_adder</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">s</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">t</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">add</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">d3_adderSum</span><span class="p">(</span><span class="nx">y</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">t</span><span class="p">,</span> <span class="nx">d3_adderTemp</span><span class="p">);</span>
      <span class="nx">d3_adderSum</span><span class="p">(</span><span class="nx">d3_adderTemp</span><span class="p">.</span><span class="nx">s</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">s</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">s</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">t</span> <span class="o">+=</span> <span class="nx">d3_adderTemp</span><span class="p">.</span><span class="nx">t</span><span class="p">;</span> <span class="k">else</span> <span class="k">this</span><span class="p">.</span><span class="nx">s</span> <span class="o">=</span> <span class="nx">d3_adderTemp</span><span class="p">.</span><span class="nx">t</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">reset</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">s</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">t</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">valueOf</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">s</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">d3_adderTemp</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">d3_adder</span><span class="p">();</span>
  <span class="kd">function</span> <span class="nx">d3_adderSum</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">o</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">s</span> <span class="o">=</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">bv</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">-</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">av</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">-</span> <span class="nx">bv</span><span class="p">;</span>
    <span class="nx">o</span><span class="p">.</span><span class="nx">t</span> <span class="o">=</span> <span class="nx">a</span> <span class="o">-</span> <span class="nx">av</span> <span class="o">+</span> <span class="p">(</span><span class="nx">b</span> <span class="o">-</span> <span class="nx">bv</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">stream</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">object</span> <span class="o">&amp;&amp;</span> <span class="nx">d3_geo_streamObjectType</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">object</span><span class="p">.</span><span class="nx">type</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">d3_geo_streamObjectType</span><span class="p">[</span><span class="nx">object</span><span class="p">.</span><span class="nx">type</span><span class="p">](</span><span class="nx">object</span><span class="p">,</span> <span class="nx">listener</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">d3_geo_streamGeometry</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">listener</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_geo_streamGeometry</span><span class="p">(</span><span class="nx">geometry</span><span class="p">,</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">geometry</span> <span class="o">&amp;&amp;</span> <span class="nx">d3_geo_streamGeometryType</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">geometry</span><span class="p">.</span><span class="nx">type</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">d3_geo_streamGeometryType</span><span class="p">[</span><span class="nx">geometry</span><span class="p">.</span><span class="nx">type</span><span class="p">](</span><span class="nx">geometry</span><span class="p">,</span> <span class="nx">listener</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">d3_geo_streamObjectType</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">Feature</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">feature</span><span class="p">,</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">d3_geo_streamGeometry</span><span class="p">(</span><span class="nx">feature</span><span class="p">.</span><span class="nx">geometry</span><span class="p">,</span> <span class="nx">listener</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">FeatureCollection</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">features</span> <span class="o">=</span> <span class="nx">object</span><span class="p">.</span><span class="nx">features</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">features</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="nx">d3_geo_streamGeometry</span><span class="p">(</span><span class="nx">features</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">geometry</span><span class="p">,</span> <span class="nx">listener</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">d3_geo_streamGeometryType</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">Sphere</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">listener</span><span class="p">.</span><span class="nx">sphere</span><span class="p">();</span>
    <span class="p">},</span>
    <span class="nx">Point</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">object</span> <span class="o">=</span> <span class="nx">object</span><span class="p">.</span><span class="nx">coordinates</span><span class="p">;</span>
      <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="nx">object</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">object</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">object</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
    <span class="p">},</span>
    <span class="nx">MultiPoint</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">coordinates</span> <span class="o">=</span> <span class="nx">object</span><span class="p">.</span><span class="nx">coordinates</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">coordinates</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="nx">object</span> <span class="o">=</span> <span class="nx">coordinates</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="nx">object</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">object</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">object</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
    <span class="p">},</span>
    <span class="nx">LineString</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">d3_geo_streamLine</span><span class="p">(</span><span class="nx">object</span><span class="p">.</span><span class="nx">coordinates</span><span class="p">,</span> <span class="nx">listener</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">MultiLineString</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">coordinates</span> <span class="o">=</span> <span class="nx">object</span><span class="p">.</span><span class="nx">coordinates</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">coordinates</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="nx">d3_geo_streamLine</span><span class="p">(</span><span class="nx">coordinates</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">listener</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">Polygon</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">d3_geo_streamPolygon</span><span class="p">(</span><span class="nx">object</span><span class="p">.</span><span class="nx">coordinates</span><span class="p">,</span> <span class="nx">listener</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">MultiPolygon</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">coordinates</span> <span class="o">=</span> <span class="nx">object</span><span class="p">.</span><span class="nx">coordinates</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">coordinates</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="nx">d3_geo_streamPolygon</span><span class="p">(</span><span class="nx">coordinates</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">listener</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">GeometryCollection</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">geometries</span> <span class="o">=</span> <span class="nx">object</span><span class="p">.</span><span class="nx">geometries</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">geometries</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="nx">d3_geo_streamGeometry</span><span class="p">(</span><span class="nx">geometries</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">listener</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_geo_streamLine</span><span class="p">(</span><span class="nx">coordinates</span><span class="p">,</span> <span class="nx">listener</span><span class="p">,</span> <span class="nx">closed</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">coordinates</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="nx">closed</span><span class="p">,</span> <span class="nx">coordinate</span><span class="p">;</span>
    <span class="nx">listener</span><span class="p">.</span><span class="nx">lineStart</span><span class="p">();</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="nx">coordinate</span> <span class="o">=</span> <span class="nx">coordinates</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="nx">coordinate</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">coordinate</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">coordinate</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
    <span class="nx">listener</span><span class="p">.</span><span class="nx">lineEnd</span><span class="p">();</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_streamPolygon</span><span class="p">(</span><span class="nx">coordinates</span><span class="p">,</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">coordinates</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="nx">listener</span><span class="p">.</span><span class="nx">polygonStart</span><span class="p">();</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="nx">d3_geo_streamLine</span><span class="p">(</span><span class="nx">coordinates</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">listener</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="nx">listener</span><span class="p">.</span><span class="nx">polygonEnd</span><span class="p">();</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">area</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">d3_geo_areaSum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">stream</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">d3_geo_area</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">d3_geo_areaSum</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">d3_geo_areaSum</span><span class="p">,</span> <span class="nx">d3_geo_areaRingSum</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">d3_adder</span><span class="p">();</span>
  <span class="kd">var</span> <span class="nx">d3_geo_area</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">sphere</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">d3_geo_areaSum</span> <span class="o">+=</span> <span class="mi">4</span> <span class="o">*</span> <span class="err">π</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">point</span><span class="o">:</span> <span class="nx">d3_noop</span><span class="p">,</span>
    <span class="nx">lineStart</span><span class="o">:</span> <span class="nx">d3_noop</span><span class="p">,</span>
    <span class="nx">lineEnd</span><span class="o">:</span> <span class="nx">d3_noop</span><span class="p">,</span>
    <span class="nx">polygonStart</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">d3_geo_areaRingSum</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>
      <span class="nx">d3_geo_area</span><span class="p">.</span><span class="nx">lineStart</span> <span class="o">=</span> <span class="nx">d3_geo_areaRingStart</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">polygonEnd</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">area</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="nx">d3_geo_areaRingSum</span><span class="p">;</span>
      <span class="nx">d3_geo_areaSum</span> <span class="o">+=</span> <span class="nx">area</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">4</span> <span class="o">*</span> <span class="err">π</span> <span class="o">+</span> <span class="nx">area</span> <span class="o">:</span> <span class="nx">area</span><span class="p">;</span>
      <span class="nx">d3_geo_area</span><span class="p">.</span><span class="nx">lineStart</span> <span class="o">=</span> <span class="nx">d3_geo_area</span><span class="p">.</span><span class="nx">lineEnd</span> <span class="o">=</span> <span class="nx">d3_geo_area</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">d3_noop</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_geo_areaRingStart</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="err">λ</span><span class="mi">00</span><span class="p">,</span> <span class="err">φ</span><span class="mi">00</span><span class="p">,</span> <span class="err">λ</span><span class="mi">0</span><span class="p">,</span> <span class="nx">cos</span><span class="err">φ</span><span class="mi">0</span><span class="p">,</span> <span class="nx">sin</span><span class="err">φ</span><span class="mi">0</span><span class="p">;</span>
    <span class="nx">d3_geo_area</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">d3_geo_area</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">nextPoint</span><span class="p">;</span>
      <span class="err">λ</span><span class="mi">0</span> <span class="o">=</span> <span class="p">(</span><span class="err">λ</span><span class="mi">00</span> <span class="o">=</span> <span class="err">λ</span><span class="p">)</span> <span class="o">*</span> <span class="nx">d3_radians</span><span class="p">,</span> <span class="nx">cos</span><span class="err">φ</span><span class="mi">0</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">φ</span> <span class="o">=</span> <span class="p">(</span><span class="err">φ</span><span class="mi">00</span> <span class="o">=</span> <span class="err">φ</span><span class="p">)</span> <span class="o">*</span> <span class="nx">d3_radians</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="err">π</span> <span class="o">/</span> <span class="mi">4</span><span class="p">),</span> 
      <span class="nx">sin</span><span class="err">φ</span><span class="mi">0</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">φ</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="kd">function</span> <span class="nx">nextPoint</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
      <span class="err">λ</span> <span class="o">*=</span> <span class="nx">d3_radians</span><span class="p">;</span>
      <span class="err">φ</span> <span class="o">=</span> <span class="err">φ</span> <span class="o">*</span> <span class="nx">d3_radians</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="err">π</span> <span class="o">/</span> <span class="mi">4</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">d</span><span class="err">λ</span> <span class="o">=</span> <span class="err">λ</span> <span class="o">-</span> <span class="err">λ</span><span class="mi">0</span><span class="p">,</span> <span class="nx">sd</span><span class="err">λ</span> <span class="o">=</span> <span class="nx">d</span><span class="err">λ</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">ad</span><span class="err">λ</span> <span class="o">=</span> <span class="nx">sd</span><span class="err">λ</span> <span class="o">*</span> <span class="nx">d</span><span class="err">λ</span><span class="p">,</span> <span class="nx">cos</span><span class="err">φ</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">φ</span><span class="p">),</span> <span class="nx">sin</span><span class="err">φ</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">φ</span><span class="p">),</span> <span class="nx">k</span> <span class="o">=</span> <span class="nx">sin</span><span class="err">φ</span><span class="mi">0</span> <span class="o">*</span> <span class="nx">sin</span><span class="err">φ</span><span class="p">,</span> <span class="nx">u</span> <span class="o">=</span> <span class="nx">cos</span><span class="err">φ</span><span class="mi">0</span> <span class="o">*</span> <span class="nx">cos</span><span class="err">φ</span> <span class="o">+</span> <span class="nx">k</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">ad</span><span class="err">λ</span><span class="p">),</span> <span class="nx">v</span> <span class="o">=</span> <span class="nx">k</span> <span class="o">*</span> <span class="nx">sd</span><span class="err">λ</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">ad</span><span class="err">λ</span><span class="p">);</span>
      <span class="nx">d3_geo_areaRingSum</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">atan2</span><span class="p">(</span><span class="nx">v</span><span class="p">,</span> <span class="nx">u</span><span class="p">));</span>
      <span class="err">λ</span><span class="mi">0</span> <span class="o">=</span> <span class="err">λ</span><span class="p">,</span> <span class="nx">cos</span><span class="err">φ</span><span class="mi">0</span> <span class="o">=</span> <span class="nx">cos</span><span class="err">φ</span><span class="p">,</span> <span class="nx">sin</span><span class="err">φ</span><span class="mi">0</span> <span class="o">=</span> <span class="nx">sin</span><span class="err">φ</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">d3_geo_area</span><span class="p">.</span><span class="nx">lineEnd</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">nextPoint</span><span class="p">(</span><span class="err">λ</span><span class="mi">00</span><span class="p">,</span> <span class="err">φ</span><span class="mi">00</span><span class="p">);</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_cartesian</span><span class="p">(</span><span class="nx">spherical</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="err">λ</span> <span class="o">=</span> <span class="nx">spherical</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="err">φ</span> <span class="o">=</span> <span class="nx">spherical</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">cos</span><span class="err">φ</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">φ</span><span class="p">);</span>
    <span class="k">return</span> <span class="p">[</span> <span class="nx">cos</span><span class="err">φ</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">λ</span><span class="p">),</span> <span class="nx">cos</span><span class="err">φ</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">λ</span><span class="p">),</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">φ</span><span class="p">)</span> <span class="p">];</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_cartesianDot</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="nx">a</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="nx">b</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_cartesianCross</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span> <span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nx">b</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="nx">a</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">a</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nx">b</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">];</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_cartesianAdd</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="nx">a</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="nx">b</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_cartesianScale</span><span class="p">(</span><span class="nx">vector</span><span class="p">,</span> <span class="nx">k</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span> <span class="nx">vector</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">vector</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">vector</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="nx">k</span> <span class="p">];</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_cartesianNormalize</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">l</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nx">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">d</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nx">d</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="nx">d</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="nx">d</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
    <span class="nx">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/=</span> <span class="nx">l</span><span class="p">;</span>
    <span class="nx">d</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/=</span> <span class="nx">l</span><span class="p">;</span>
    <span class="nx">d</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">/=</span> <span class="nx">l</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_spherical</span><span class="p">(</span><span class="nx">cartesian</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan2</span><span class="p">(</span><span class="nx">cartesian</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">cartesian</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nx">d3_asin</span><span class="p">(</span><span class="nx">cartesian</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="p">];</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_sphericalEqual</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&lt;</span> <span class="err">ε</span> <span class="o">&amp;&amp;</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">&lt;</span> <span class="err">ε</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">bounds</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="err">λ</span><span class="mi">0</span><span class="p">,</span> <span class="err">φ</span><span class="mi">0</span><span class="p">,</span> <span class="err">λ</span><span class="mi">1</span><span class="p">,</span> <span class="err">φ</span><span class="mi">1</span><span class="p">,</span> <span class="err">λ</span><span class="nx">_</span><span class="p">,</span> <span class="err">λ</span><span class="nx">__</span><span class="p">,</span> <span class="err">φ</span><span class="nx">__</span><span class="p">,</span> <span class="nx">p0</span><span class="p">,</span> <span class="nx">d</span><span class="err">λ</span><span class="nx">Sum</span><span class="p">,</span> <span class="nx">ranges</span><span class="p">,</span> <span class="nx">range</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">bound</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">point</span><span class="o">:</span> <span class="nx">point</span><span class="p">,</span>
      <span class="nx">lineStart</span><span class="o">:</span> <span class="nx">lineStart</span><span class="p">,</span>
      <span class="nx">lineEnd</span><span class="o">:</span> <span class="nx">lineEnd</span><span class="p">,</span>
      <span class="nx">polygonStart</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">bound</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">ringPoint</span><span class="p">;</span>
        <span class="nx">bound</span><span class="p">.</span><span class="nx">lineStart</span> <span class="o">=</span> <span class="nx">ringStart</span><span class="p">;</span>
        <span class="nx">bound</span><span class="p">.</span><span class="nx">lineEnd</span> <span class="o">=</span> <span class="nx">ringEnd</span><span class="p">;</span>
        <span class="nx">d</span><span class="err">λ</span><span class="nx">Sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">d3_geo_area</span><span class="p">.</span><span class="nx">polygonStart</span><span class="p">();</span>
      <span class="p">},</span>
      <span class="nx">polygonEnd</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">d3_geo_area</span><span class="p">.</span><span class="nx">polygonEnd</span><span class="p">();</span>
        <span class="nx">bound</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">point</span><span class="p">;</span>
        <span class="nx">bound</span><span class="p">.</span><span class="nx">lineStart</span> <span class="o">=</span> <span class="nx">lineStart</span><span class="p">;</span>
        <span class="nx">bound</span><span class="p">.</span><span class="nx">lineEnd</span> <span class="o">=</span> <span class="nx">lineEnd</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">d3_geo_areaRingSum</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="err">λ</span><span class="mi">0</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="err">λ</span><span class="mi">1</span> <span class="o">=</span> <span class="mi">180</span><span class="p">),</span> <span class="err">φ</span><span class="mi">0</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="err">φ</span><span class="mi">1</span> <span class="o">=</span> <span class="mi">90</span><span class="p">);</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="err">λ</span><span class="nx">Sum</span> <span class="o">&gt;</span> <span class="err">ε</span><span class="p">)</span> <span class="err">φ</span><span class="mi">1</span> <span class="o">=</span> <span class="mi">90</span><span class="p">;</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="err">λ</span><span class="nx">Sum</span> <span class="o">&lt;</span> <span class="o">-</span><span class="err">ε</span><span class="p">)</span> <span class="err">φ</span><span class="mi">0</span> <span class="o">=</span> <span class="o">-</span><span class="mi">90</span><span class="p">;</span>
        <span class="nx">range</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="err">λ</span><span class="mi">0</span><span class="p">,</span> <span class="nx">range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="err">λ</span><span class="mi">1</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">};</span>
    <span class="kd">function</span> <span class="nx">point</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">ranges</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">range</span> <span class="o">=</span> <span class="p">[</span> <span class="err">λ</span><span class="mi">0</span> <span class="o">=</span> <span class="err">λ</span><span class="p">,</span> <span class="err">λ</span><span class="mi">1</span> <span class="o">=</span> <span class="err">λ</span> <span class="p">]);</span>
      <span class="k">if</span> <span class="p">(</span><span class="err">φ</span> <span class="o">&lt;</span> <span class="err">φ</span><span class="mi">0</span><span class="p">)</span> <span class="err">φ</span><span class="mi">0</span> <span class="o">=</span> <span class="err">φ</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="err">φ</span> <span class="o">&gt;</span> <span class="err">φ</span><span class="mi">1</span><span class="p">)</span> <span class="err">φ</span><span class="mi">1</span> <span class="o">=</span> <span class="err">φ</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">linePoint</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">p</span> <span class="o">=</span> <span class="nx">d3_geo_cartesian</span><span class="p">([</span> <span class="err">λ</span> <span class="o">*</span> <span class="nx">d3_radians</span><span class="p">,</span> <span class="err">φ</span> <span class="o">*</span> <span class="nx">d3_radians</span> <span class="p">]);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">p0</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">normal</span> <span class="o">=</span> <span class="nx">d3_geo_cartesianCross</span><span class="p">(</span><span class="nx">p0</span><span class="p">,</span> <span class="nx">p</span><span class="p">),</span> <span class="nx">equatorial</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">normal</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="o">-</span><span class="nx">normal</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span> <span class="p">],</span> <span class="nx">inflection</span> <span class="o">=</span> <span class="nx">d3_geo_cartesianCross</span><span class="p">(</span><span class="nx">equatorial</span><span class="p">,</span> <span class="nx">normal</span><span class="p">);</span>
        <span class="nx">d3_geo_cartesianNormalize</span><span class="p">(</span><span class="nx">inflection</span><span class="p">);</span>
        <span class="nx">inflection</span> <span class="o">=</span> <span class="nx">d3_geo_spherical</span><span class="p">(</span><span class="nx">inflection</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">d</span><span class="err">λ</span> <span class="o">=</span> <span class="err">λ</span> <span class="o">-</span> <span class="err">λ</span><span class="nx">_</span><span class="p">,</span> <span class="nx">s</span> <span class="o">=</span> <span class="nx">d</span><span class="err">λ</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="err">λ</span><span class="nx">i</span> <span class="o">=</span> <span class="nx">inflection</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nx">d3_degrees</span> <span class="o">*</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">antimeridian</span> <span class="o">=</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">d</span><span class="err">λ</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">antimeridian</span> <span class="o">^</span> <span class="p">(</span><span class="nx">s</span> <span class="o">*</span> <span class="err">λ</span><span class="nx">_</span> <span class="o">&lt;</span> <span class="err">λ</span><span class="nx">i</span> <span class="o">&amp;&amp;</span> <span class="err">λ</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">s</span> <span class="o">*</span> <span class="err">λ</span><span class="p">))</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="err">φ</span><span class="nx">i</span> <span class="o">=</span> <span class="nx">inflection</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nx">d3_degrees</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="err">φ</span><span class="nx">i</span> <span class="o">&gt;</span> <span class="err">φ</span><span class="mi">1</span><span class="p">)</span> <span class="err">φ</span><span class="mi">1</span> <span class="o">=</span> <span class="err">φ</span><span class="nx">i</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="err">λ</span><span class="nx">i</span> <span class="o">=</span> <span class="p">(</span><span class="err">λ</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">360</span><span class="p">)</span> <span class="o">%</span> <span class="mi">360</span> <span class="o">-</span> <span class="mi">180</span><span class="p">,</span> <span class="nx">antimeridian</span> <span class="o">^</span> <span class="p">(</span><span class="nx">s</span> <span class="o">*</span> <span class="err">λ</span><span class="nx">_</span> <span class="o">&lt;</span> <span class="err">λ</span><span class="nx">i</span> <span class="o">&amp;&amp;</span> <span class="err">λ</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">s</span> <span class="o">*</span> <span class="err">λ</span><span class="p">))</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="err">φ</span><span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="nx">inflection</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nx">d3_degrees</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="err">φ</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="err">φ</span><span class="mi">0</span><span class="p">)</span> <span class="err">φ</span><span class="mi">0</span> <span class="o">=</span> <span class="err">φ</span><span class="nx">i</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="err">φ</span> <span class="o">&lt;</span> <span class="err">φ</span><span class="mi">0</span><span class="p">)</span> <span class="err">φ</span><span class="mi">0</span> <span class="o">=</span> <span class="err">φ</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="err">φ</span> <span class="o">&gt;</span> <span class="err">φ</span><span class="mi">1</span><span class="p">)</span> <span class="err">φ</span><span class="mi">1</span> <span class="o">=</span> <span class="err">φ</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">antimeridian</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="err">λ</span> <span class="o">&lt;</span> <span class="err">λ</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">angle</span><span class="p">(</span><span class="err">λ</span><span class="mi">0</span><span class="p">,</span> <span class="err">λ</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nx">angle</span><span class="p">(</span><span class="err">λ</span><span class="mi">0</span><span class="p">,</span> <span class="err">λ</span><span class="mi">1</span><span class="p">))</span> <span class="err">λ</span><span class="mi">1</span> <span class="o">=</span> <span class="err">λ</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">angle</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">λ</span><span class="mi">1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nx">angle</span><span class="p">(</span><span class="err">λ</span><span class="mi">0</span><span class="p">,</span> <span class="err">λ</span><span class="mi">1</span><span class="p">))</span> <span class="err">λ</span><span class="mi">0</span> <span class="o">=</span> <span class="err">λ</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="err">λ</span><span class="mi">1</span> <span class="o">&gt;=</span> <span class="err">λ</span><span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="err">λ</span> <span class="o">&lt;</span> <span class="err">λ</span><span class="mi">0</span><span class="p">)</span> <span class="err">λ</span><span class="mi">0</span> <span class="o">=</span> <span class="err">λ</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="err">λ</span> <span class="o">&gt;</span> <span class="err">λ</span><span class="mi">1</span><span class="p">)</span> <span class="err">λ</span><span class="mi">1</span> <span class="o">=</span> <span class="err">λ</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="err">λ</span> <span class="o">&gt;</span> <span class="err">λ</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span><span class="nx">angle</span><span class="p">(</span><span class="err">λ</span><span class="mi">0</span><span class="p">,</span> <span class="err">λ</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nx">angle</span><span class="p">(</span><span class="err">λ</span><span class="mi">0</span><span class="p">,</span> <span class="err">λ</span><span class="mi">1</span><span class="p">))</span> <span class="err">λ</span><span class="mi">1</span> <span class="o">=</span> <span class="err">λ</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span><span class="nx">angle</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">λ</span><span class="mi">1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nx">angle</span><span class="p">(</span><span class="err">λ</span><span class="mi">0</span><span class="p">,</span> <span class="err">λ</span><span class="mi">1</span><span class="p">))</span> <span class="err">λ</span><span class="mi">0</span> <span class="o">=</span> <span class="err">λ</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">point</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="nx">p0</span> <span class="o">=</span> <span class="nx">p</span><span class="p">,</span> <span class="err">λ</span><span class="nx">_</span> <span class="o">=</span> <span class="err">λ</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">lineStart</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">bound</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">linePoint</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">lineEnd</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">range</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="err">λ</span><span class="mi">0</span><span class="p">,</span> <span class="nx">range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="err">λ</span><span class="mi">1</span><span class="p">;</span>
      <span class="nx">bound</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">point</span><span class="p">;</span>
      <span class="nx">p0</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">ringPoint</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">p0</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">d</span><span class="err">λ</span> <span class="o">=</span> <span class="err">λ</span> <span class="o">-</span> <span class="err">λ</span><span class="nx">_</span><span class="p">;</span>
        <span class="nx">d</span><span class="err">λ</span><span class="nx">Sum</span> <span class="o">+=</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">d</span><span class="err">λ</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">180</span> <span class="o">?</span> <span class="nx">d</span><span class="err">λ</span> <span class="o">+</span> <span class="p">(</span><span class="nx">d</span><span class="err">λ</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">360</span> <span class="o">:</span> <span class="o">-</span><span class="mi">360</span><span class="p">)</span> <span class="o">:</span> <span class="nx">d</span><span class="err">λ</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="err">λ</span><span class="nx">__</span> <span class="o">=</span> <span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="nx">__</span> <span class="o">=</span> <span class="err">φ</span><span class="p">;</span>
      <span class="nx">d3_geo_area</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">);</span>
      <span class="nx">linePoint</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">ringStart</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">d3_geo_area</span><span class="p">.</span><span class="nx">lineStart</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">ringEnd</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">ringPoint</span><span class="p">(</span><span class="err">λ</span><span class="nx">__</span><span class="p">,</span> <span class="err">φ</span><span class="nx">__</span><span class="p">);</span>
      <span class="nx">d3_geo_area</span><span class="p">.</span><span class="nx">lineEnd</span><span class="p">();</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">abs</span><span class="p">(</span><span class="nx">d</span><span class="err">λ</span><span class="nx">Sum</span><span class="p">)</span> <span class="o">&gt;</span> <span class="err">ε</span><span class="p">)</span> <span class="err">λ</span><span class="mi">0</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="err">λ</span><span class="mi">1</span> <span class="o">=</span> <span class="mi">180</span><span class="p">);</span>
      <span class="nx">range</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="err">λ</span><span class="mi">0</span><span class="p">,</span> <span class="nx">range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="err">λ</span><span class="mi">1</span><span class="p">;</span>
      <span class="nx">p0</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">angle</span><span class="p">(</span><span class="err">λ</span><span class="mi">0</span><span class="p">,</span> <span class="err">λ</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span><span class="err">λ</span><span class="mi">1</span> <span class="o">-=</span> <span class="err">λ</span><span class="mi">0</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="err">λ</span><span class="mi">1</span> <span class="o">+</span> <span class="mi">360</span> <span class="o">:</span> <span class="err">λ</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">compareRanges</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">withinRange</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">range</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">range</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="nx">range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">?</span> <span class="nx">range</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="nx">x</span> <span class="o">&amp;&amp;</span> <span class="nx">x</span> <span class="o">&lt;=</span> <span class="nx">range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">:</span> <span class="nx">x</span> <span class="o">&lt;</span> <span class="nx">range</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span> <span class="nx">range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="nx">x</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">feature</span><span class="p">)</span> <span class="p">{</span>
      <span class="err">φ</span><span class="mi">1</span> <span class="o">=</span> <span class="err">λ</span><span class="mi">1</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="err">λ</span><span class="mi">0</span> <span class="o">=</span> <span class="err">φ</span><span class="mi">0</span> <span class="o">=</span> <span class="kc">Infinity</span><span class="p">);</span>
      <span class="nx">ranges</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">stream</span><span class="p">(</span><span class="nx">feature</span><span class="p">,</span> <span class="nx">bound</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">ranges</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">ranges</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="nx">compareRanges</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">ranges</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">merged</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">a</span> <span class="p">];</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">b</span> <span class="o">=</span> <span class="nx">ranges</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">withinRange</span><span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">a</span><span class="p">)</span> <span class="o">||</span> <span class="nx">withinRange</span><span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">a</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">angle</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">&gt;</span> <span class="nx">angle</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span> <span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">angle</span><span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">&gt;</span> <span class="nx">angle</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span> <span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">merged</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">b</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="kd">var</span> <span class="nx">best</span> <span class="o">=</span> <span class="o">-</span><span class="kc">Infinity</span><span class="p">,</span> <span class="nx">d</span><span class="err">λ</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">merged</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">merged</span><span class="p">[</span><span class="nx">n</span><span class="p">],</span> <span class="nx">b</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;=</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">b</span><span class="p">,</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">b</span> <span class="o">=</span> <span class="nx">merged</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
          <span class="k">if</span> <span class="p">((</span><span class="nx">d</span><span class="err">λ</span> <span class="o">=</span> <span class="nx">angle</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="o">&gt;</span> <span class="nx">best</span><span class="p">)</span> <span class="nx">best</span> <span class="o">=</span> <span class="nx">d</span><span class="err">λ</span><span class="p">,</span> <span class="err">λ</span><span class="mi">0</span> <span class="o">=</span> <span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="err">λ</span><span class="mi">1</span> <span class="o">=</span> <span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="nx">ranges</span> <span class="o">=</span> <span class="nx">range</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="k">return</span> <span class="err">λ</span><span class="mi">0</span> <span class="o">===</span> <span class="kc">Infinity</span> <span class="o">||</span> <span class="err">φ</span><span class="mi">0</span> <span class="o">===</span> <span class="kc">Infinity</span> <span class="o">?</span> <span class="p">[</span> <span class="p">[</span> <span class="kc">NaN</span><span class="p">,</span> <span class="kc">NaN</span> <span class="p">],</span> <span class="p">[</span> <span class="kc">NaN</span><span class="p">,</span> <span class="kc">NaN</span> <span class="p">]</span> <span class="p">]</span> <span class="o">:</span> <span class="p">[</span> <span class="p">[</span> <span class="err">λ</span><span class="mi">0</span><span class="p">,</span> <span class="err">φ</span><span class="mi">0</span> <span class="p">],</span> <span class="p">[</span> <span class="err">λ</span><span class="mi">1</span><span class="p">,</span> <span class="err">φ</span><span class="mi">1</span> <span class="p">]</span> <span class="p">];</span>
    <span class="p">};</span>
  <span class="p">}();</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">centroid</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">d3_geo_centroidW0</span> <span class="o">=</span> <span class="nx">d3_geo_centroidW1</span> <span class="o">=</span> <span class="nx">d3_geo_centroidX0</span> <span class="o">=</span> <span class="nx">d3_geo_centroidY0</span> <span class="o">=</span> <span class="nx">d3_geo_centroidZ0</span> <span class="o">=</span> <span class="nx">d3_geo_centroidX1</span> <span class="o">=</span> <span class="nx">d3_geo_centroidY1</span> <span class="o">=</span> <span class="nx">d3_geo_centroidZ1</span> <span class="o">=</span> <span class="nx">d3_geo_centroidX2</span> <span class="o">=</span> <span class="nx">d3_geo_centroidY2</span> <span class="o">=</span> <span class="nx">d3_geo_centroidZ2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">stream</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">d3_geo_centroid</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">d3_geo_centroidX2</span><span class="p">,</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">d3_geo_centroidY2</span><span class="p">,</span> <span class="nx">z</span> <span class="o">=</span> <span class="nx">d3_geo_centroidZ2</span><span class="p">,</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span> <span class="o">*</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">z</span> <span class="o">*</span> <span class="nx">z</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">m</span> <span class="o">&lt;</span> <span class="err">ε</span><span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">x</span> <span class="o">=</span> <span class="nx">d3_geo_centroidX1</span><span class="p">,</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">d3_geo_centroidY1</span><span class="p">,</span> <span class="nx">z</span> <span class="o">=</span> <span class="nx">d3_geo_centroidZ1</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">d3_geo_centroidW1</span> <span class="o">&lt;</span> <span class="err">ε</span><span class="p">)</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">d3_geo_centroidX0</span><span class="p">,</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">d3_geo_centroidY0</span><span class="p">,</span> <span class="nx">z</span> <span class="o">=</span> <span class="nx">d3_geo_centroidZ0</span><span class="p">;</span>
      <span class="nx">m</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span> <span class="o">*</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">z</span> <span class="o">*</span> <span class="nx">z</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">m</span> <span class="o">&lt;</span> <span class="err">ε</span><span class="mi">2</span><span class="p">)</span> <span class="k">return</span> <span class="p">[</span> <span class="kc">NaN</span><span class="p">,</span> <span class="kc">NaN</span> <span class="p">];</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="p">[</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan2</span><span class="p">(</span><span class="nx">y</span><span class="p">,</span> <span class="nx">x</span><span class="p">)</span> <span class="o">*</span> <span class="nx">d3_degrees</span><span class="p">,</span> <span class="nx">d3_asin</span><span class="p">(</span><span class="nx">z</span> <span class="o">/</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">m</span><span class="p">))</span> <span class="o">*</span> <span class="nx">d3_degrees</span> <span class="p">];</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">d3_geo_centroidW0</span><span class="p">,</span> <span class="nx">d3_geo_centroidW1</span><span class="p">,</span> <span class="nx">d3_geo_centroidX0</span><span class="p">,</span> <span class="nx">d3_geo_centroidY0</span><span class="p">,</span> <span class="nx">d3_geo_centroidZ0</span><span class="p">,</span> <span class="nx">d3_geo_centroidX1</span><span class="p">,</span> <span class="nx">d3_geo_centroidY1</span><span class="p">,</span> <span class="nx">d3_geo_centroidZ1</span><span class="p">,</span> <span class="nx">d3_geo_centroidX2</span><span class="p">,</span> <span class="nx">d3_geo_centroidY2</span><span class="p">,</span> <span class="nx">d3_geo_centroidZ2</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">d3_geo_centroid</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">sphere</span><span class="o">:</span> <span class="nx">d3_noop</span><span class="p">,</span>
    <span class="nx">point</span><span class="o">:</span> <span class="nx">d3_geo_centroidPoint</span><span class="p">,</span>
    <span class="nx">lineStart</span><span class="o">:</span> <span class="nx">d3_geo_centroidLineStart</span><span class="p">,</span>
    <span class="nx">lineEnd</span><span class="o">:</span> <span class="nx">d3_geo_centroidLineEnd</span><span class="p">,</span>
    <span class="nx">polygonStart</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">d3_geo_centroid</span><span class="p">.</span><span class="nx">lineStart</span> <span class="o">=</span> <span class="nx">d3_geo_centroidRingStart</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">polygonEnd</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">d3_geo_centroid</span><span class="p">.</span><span class="nx">lineStart</span> <span class="o">=</span> <span class="nx">d3_geo_centroidLineStart</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_geo_centroidPoint</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
    <span class="err">λ</span> <span class="o">*=</span> <span class="nx">d3_radians</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">cos</span><span class="err">φ</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">φ</span> <span class="o">*=</span> <span class="nx">d3_radians</span><span class="p">);</span>
    <span class="nx">d3_geo_centroidPointXYZ</span><span class="p">(</span><span class="nx">cos</span><span class="err">φ</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">λ</span><span class="p">),</span> <span class="nx">cos</span><span class="err">φ</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">λ</span><span class="p">),</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">φ</span><span class="p">));</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_centroidPointXYZ</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">z</span><span class="p">)</span> <span class="p">{</span>
    <span class="o">++</span><span class="nx">d3_geo_centroidW0</span><span class="p">;</span>
    <span class="nx">d3_geo_centroidX0</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">d3_geo_centroidX0</span><span class="p">)</span> <span class="o">/</span> <span class="nx">d3_geo_centroidW0</span><span class="p">;</span>
    <span class="nx">d3_geo_centroidY0</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">d3_geo_centroidY0</span><span class="p">)</span> <span class="o">/</span> <span class="nx">d3_geo_centroidW0</span><span class="p">;</span>
    <span class="nx">d3_geo_centroidZ0</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">z</span> <span class="o">-</span> <span class="nx">d3_geo_centroidZ0</span><span class="p">)</span> <span class="o">/</span> <span class="nx">d3_geo_centroidW0</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_centroidLineStart</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">x0</span><span class="p">,</span> <span class="nx">y0</span><span class="p">,</span> <span class="nx">z0</span><span class="p">;</span>
    <span class="nx">d3_geo_centroid</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
      <span class="err">λ</span> <span class="o">*=</span> <span class="nx">d3_radians</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">cos</span><span class="err">φ</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">φ</span> <span class="o">*=</span> <span class="nx">d3_radians</span><span class="p">);</span>
      <span class="nx">x0</span> <span class="o">=</span> <span class="nx">cos</span><span class="err">φ</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">λ</span><span class="p">);</span>
      <span class="nx">y0</span> <span class="o">=</span> <span class="nx">cos</span><span class="err">φ</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">λ</span><span class="p">);</span>
      <span class="nx">z0</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">φ</span><span class="p">);</span>
      <span class="nx">d3_geo_centroid</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">nextPoint</span><span class="p">;</span>
      <span class="nx">d3_geo_centroidPointXYZ</span><span class="p">(</span><span class="nx">x0</span><span class="p">,</span> <span class="nx">y0</span><span class="p">,</span> <span class="nx">z0</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="kd">function</span> <span class="nx">nextPoint</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
      <span class="err">λ</span> <span class="o">*=</span> <span class="nx">d3_radians</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">cos</span><span class="err">φ</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">φ</span> <span class="o">*=</span> <span class="nx">d3_radians</span><span class="p">),</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">cos</span><span class="err">φ</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">λ</span><span class="p">),</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">cos</span><span class="err">φ</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">λ</span><span class="p">),</span> <span class="nx">z</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">φ</span><span class="p">),</span> <span class="nx">w</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan2</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">((</span><span class="nx">w</span> <span class="o">=</span> <span class="nx">y0</span> <span class="o">*</span> <span class="nx">z</span> <span class="o">-</span> <span class="nx">z0</span> <span class="o">*</span> <span class="nx">y</span><span class="p">)</span> <span class="o">*</span> <span class="nx">w</span> <span class="o">+</span> <span class="p">(</span><span class="nx">w</span> <span class="o">=</span> <span class="nx">z0</span> <span class="o">*</span> <span class="nx">x</span> <span class="o">-</span> <span class="nx">x0</span> <span class="o">*</span> <span class="nx">z</span><span class="p">)</span> <span class="o">*</span> <span class="nx">w</span> <span class="o">+</span> <span class="p">(</span><span class="nx">w</span> <span class="o">=</span> <span class="nx">x0</span> <span class="o">*</span> <span class="nx">y</span> <span class="o">-</span> <span class="nx">y0</span> <span class="o">*</span> <span class="nx">x</span><span class="p">)</span> <span class="o">*</span> <span class="nx">w</span><span class="p">),</span> <span class="nx">x0</span> <span class="o">*</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">y0</span> <span class="o">*</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">z0</span> <span class="o">*</span> <span class="nx">z</span><span class="p">);</span>
      <span class="nx">d3_geo_centroidW1</span> <span class="o">+=</span> <span class="nx">w</span><span class="p">;</span>
      <span class="nx">d3_geo_centroidX1</span> <span class="o">+=</span> <span class="nx">w</span> <span class="o">*</span> <span class="p">(</span><span class="nx">x0</span> <span class="o">+</span> <span class="p">(</span><span class="nx">x0</span> <span class="o">=</span> <span class="nx">x</span><span class="p">));</span>
      <span class="nx">d3_geo_centroidY1</span> <span class="o">+=</span> <span class="nx">w</span> <span class="o">*</span> <span class="p">(</span><span class="nx">y0</span> <span class="o">+</span> <span class="p">(</span><span class="nx">y0</span> <span class="o">=</span> <span class="nx">y</span><span class="p">));</span>
      <span class="nx">d3_geo_centroidZ1</span> <span class="o">+=</span> <span class="nx">w</span> <span class="o">*</span> <span class="p">(</span><span class="nx">z0</span> <span class="o">+</span> <span class="p">(</span><span class="nx">z0</span> <span class="o">=</span> <span class="nx">z</span><span class="p">));</span>
      <span class="nx">d3_geo_centroidPointXYZ</span><span class="p">(</span><span class="nx">x0</span><span class="p">,</span> <span class="nx">y0</span><span class="p">,</span> <span class="nx">z0</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_centroidLineEnd</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">d3_geo_centroid</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">d3_geo_centroidPoint</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_centroidRingStart</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="err">λ</span><span class="mi">00</span><span class="p">,</span> <span class="err">φ</span><span class="mi">00</span><span class="p">,</span> <span class="nx">x0</span><span class="p">,</span> <span class="nx">y0</span><span class="p">,</span> <span class="nx">z0</span><span class="p">;</span>
    <span class="nx">d3_geo_centroid</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
      <span class="err">λ</span><span class="mi">00</span> <span class="o">=</span> <span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="mi">00</span> <span class="o">=</span> <span class="err">φ</span><span class="p">;</span>
      <span class="nx">d3_geo_centroid</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">nextPoint</span><span class="p">;</span>
      <span class="err">λ</span> <span class="o">*=</span> <span class="nx">d3_radians</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">cos</span><span class="err">φ</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">φ</span> <span class="o">*=</span> <span class="nx">d3_radians</span><span class="p">);</span>
      <span class="nx">x0</span> <span class="o">=</span> <span class="nx">cos</span><span class="err">φ</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">λ</span><span class="p">);</span>
      <span class="nx">y0</span> <span class="o">=</span> <span class="nx">cos</span><span class="err">φ</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">λ</span><span class="p">);</span>
      <span class="nx">z0</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">φ</span><span class="p">);</span>
      <span class="nx">d3_geo_centroidPointXYZ</span><span class="p">(</span><span class="nx">x0</span><span class="p">,</span> <span class="nx">y0</span><span class="p">,</span> <span class="nx">z0</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="nx">d3_geo_centroid</span><span class="p">.</span><span class="nx">lineEnd</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">nextPoint</span><span class="p">(</span><span class="err">λ</span><span class="mi">00</span><span class="p">,</span> <span class="err">φ</span><span class="mi">00</span><span class="p">);</span>
      <span class="nx">d3_geo_centroid</span><span class="p">.</span><span class="nx">lineEnd</span> <span class="o">=</span> <span class="nx">d3_geo_centroidLineEnd</span><span class="p">;</span>
      <span class="nx">d3_geo_centroid</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">d3_geo_centroidPoint</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="kd">function</span> <span class="nx">nextPoint</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
      <span class="err">λ</span> <span class="o">*=</span> <span class="nx">d3_radians</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">cos</span><span class="err">φ</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">φ</span> <span class="o">*=</span> <span class="nx">d3_radians</span><span class="p">),</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">cos</span><span class="err">φ</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">λ</span><span class="p">),</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">cos</span><span class="err">φ</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">λ</span><span class="p">),</span> <span class="nx">z</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">φ</span><span class="p">),</span> <span class="nx">cx</span> <span class="o">=</span> <span class="nx">y0</span> <span class="o">*</span> <span class="nx">z</span> <span class="o">-</span> <span class="nx">z0</span> <span class="o">*</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">cy</span> <span class="o">=</span> <span class="nx">z0</span> <span class="o">*</span> <span class="nx">x</span> <span class="o">-</span> <span class="nx">x0</span> <span class="o">*</span> <span class="nx">z</span><span class="p">,</span> <span class="nx">cz</span> <span class="o">=</span> <span class="nx">x0</span> <span class="o">*</span> <span class="nx">y</span> <span class="o">-</span> <span class="nx">y0</span> <span class="o">*</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">m</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">cx</span> <span class="o">*</span> <span class="nx">cx</span> <span class="o">+</span> <span class="nx">cy</span> <span class="o">*</span> <span class="nx">cy</span> <span class="o">+</span> <span class="nx">cz</span> <span class="o">*</span> <span class="nx">cz</span><span class="p">),</span> <span class="nx">u</span> <span class="o">=</span> <span class="nx">x0</span> <span class="o">*</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">y0</span> <span class="o">*</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">z0</span> <span class="o">*</span> <span class="nx">z</span><span class="p">,</span> <span class="nx">v</span> <span class="o">=</span> <span class="nx">m</span> <span class="o">&amp;&amp;</span> <span class="o">-</span><span class="nx">d3_acos</span><span class="p">(</span><span class="nx">u</span><span class="p">)</span> <span class="o">/</span> <span class="nx">m</span><span class="p">,</span> <span class="nx">w</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan2</span><span class="p">(</span><span class="nx">m</span><span class="p">,</span> <span class="nx">u</span><span class="p">);</span>
      <span class="nx">d3_geo_centroidX2</span> <span class="o">+=</span> <span class="nx">v</span> <span class="o">*</span> <span class="nx">cx</span><span class="p">;</span>
      <span class="nx">d3_geo_centroidY2</span> <span class="o">+=</span> <span class="nx">v</span> <span class="o">*</span> <span class="nx">cy</span><span class="p">;</span>
      <span class="nx">d3_geo_centroidZ2</span> <span class="o">+=</span> <span class="nx">v</span> <span class="o">*</span> <span class="nx">cz</span><span class="p">;</span>
      <span class="nx">d3_geo_centroidW1</span> <span class="o">+=</span> <span class="nx">w</span><span class="p">;</span>
      <span class="nx">d3_geo_centroidX1</span> <span class="o">+=</span> <span class="nx">w</span> <span class="o">*</span> <span class="p">(</span><span class="nx">x0</span> <span class="o">+</span> <span class="p">(</span><span class="nx">x0</span> <span class="o">=</span> <span class="nx">x</span><span class="p">));</span>
      <span class="nx">d3_geo_centroidY1</span> <span class="o">+=</span> <span class="nx">w</span> <span class="o">*</span> <span class="p">(</span><span class="nx">y0</span> <span class="o">+</span> <span class="p">(</span><span class="nx">y0</span> <span class="o">=</span> <span class="nx">y</span><span class="p">));</span>
      <span class="nx">d3_geo_centroidZ1</span> <span class="o">+=</span> <span class="nx">w</span> <span class="o">*</span> <span class="p">(</span><span class="nx">z0</span> <span class="o">+</span> <span class="p">(</span><span class="nx">z0</span> <span class="o">=</span> <span class="nx">z</span><span class="p">));</span>
      <span class="nx">d3_geo_centroidPointXYZ</span><span class="p">(</span><span class="nx">x0</span><span class="p">,</span> <span class="nx">y0</span><span class="p">,</span> <span class="nx">z0</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_true</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_clipPolygon</span><span class="p">(</span><span class="nx">segments</span><span class="p">,</span> <span class="nx">compare</span><span class="p">,</span> <span class="nx">clipStartInside</span><span class="p">,</span> <span class="nx">interpolate</span><span class="p">,</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">subject</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">clip</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="nx">segments</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">segment</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">((</span><span class="nx">n</span> <span class="o">=</span> <span class="nx">segment</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">n</span><span class="p">,</span> <span class="nx">p0</span> <span class="o">=</span> <span class="nx">segment</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">p1</span> <span class="o">=</span> <span class="nx">segment</span><span class="p">[</span><span class="nx">n</span><span class="p">];</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">d3_geo_sphericalEqual</span><span class="p">(</span><span class="nx">p0</span><span class="p">,</span> <span class="nx">p1</span><span class="p">))</span> <span class="p">{</span>
        <span class="nx">listener</span><span class="p">.</span><span class="nx">lineStart</span><span class="p">();</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">((</span><span class="nx">p0</span> <span class="o">=</span> <span class="nx">segment</span><span class="p">[</span><span class="nx">i</span><span class="p">])[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">p0</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
        <span class="nx">listener</span><span class="p">.</span><span class="nx">lineEnd</span><span class="p">();</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">d3_geo_clipPolygonIntersection</span><span class="p">(</span><span class="nx">p0</span><span class="p">,</span> <span class="nx">segment</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="kc">true</span><span class="p">),</span> <span class="nx">b</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">d3_geo_clipPolygonIntersection</span><span class="p">(</span><span class="nx">p0</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
      <span class="nx">a</span><span class="p">.</span><span class="nx">o</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
      <span class="nx">subject</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
      <span class="nx">clip</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
      <span class="nx">a</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">d3_geo_clipPolygonIntersection</span><span class="p">(</span><span class="nx">p1</span><span class="p">,</span> <span class="nx">segment</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
      <span class="nx">b</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">d3_geo_clipPolygonIntersection</span><span class="p">(</span><span class="nx">p1</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
      <span class="nx">a</span><span class="p">.</span><span class="nx">o</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
      <span class="nx">subject</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
      <span class="nx">clip</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
    <span class="p">});</span>
    <span class="nx">clip</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="nx">compare</span><span class="p">);</span>
    <span class="nx">d3_geo_clipPolygonLinkCircular</span><span class="p">(</span><span class="nx">subject</span><span class="p">);</span>
    <span class="nx">d3_geo_clipPolygonLinkCircular</span><span class="p">(</span><span class="nx">clip</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">subject</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">entry</span> <span class="o">=</span> <span class="nx">clipStartInside</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">clip</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">clip</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">e</span> <span class="o">=</span> <span class="nx">entry</span> <span class="o">=</span> <span class="o">!</span><span class="nx">entry</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">var</span> <span class="nx">start</span> <span class="o">=</span> <span class="nx">subject</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">points</span><span class="p">,</span> <span class="nx">point</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">current</span> <span class="o">=</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">isSubject</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="nx">current</span><span class="p">.</span><span class="nx">v</span><span class="p">)</span> <span class="k">if</span> <span class="p">((</span><span class="nx">current</span> <span class="o">=</span> <span class="nx">current</span><span class="p">.</span><span class="nx">n</span><span class="p">)</span> <span class="o">===</span> <span class="nx">start</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
      <span class="nx">points</span> <span class="o">=</span> <span class="nx">current</span><span class="p">.</span><span class="nx">z</span><span class="p">;</span>
      <span class="nx">listener</span><span class="p">.</span><span class="nx">lineStart</span><span class="p">();</span>
      <span class="k">do</span> <span class="p">{</span>
        <span class="nx">current</span><span class="p">.</span><span class="nx">v</span> <span class="o">=</span> <span class="nx">current</span><span class="p">.</span><span class="nx">o</span><span class="p">.</span><span class="nx">v</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">current</span><span class="p">.</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">isSubject</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">((</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">])[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">point</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">interpolate</span><span class="p">(</span><span class="nx">current</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">current</span><span class="p">.</span><span class="nx">n</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">listener</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="nx">current</span> <span class="o">=</span> <span class="nx">current</span><span class="p">.</span><span class="nx">n</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">isSubject</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">points</span> <span class="o">=</span> <span class="nx">current</span><span class="p">.</span><span class="nx">p</span><span class="p">.</span><span class="nx">z</span><span class="p">;</span>
            <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="o">--</span><span class="nx">i</span><span class="p">)</span> <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">((</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">])[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">point</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">interpolate</span><span class="p">(</span><span class="nx">current</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">current</span><span class="p">.</span><span class="nx">p</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">listener</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="nx">current</span> <span class="o">=</span> <span class="nx">current</span><span class="p">.</span><span class="nx">p</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">current</span> <span class="o">=</span> <span class="nx">current</span><span class="p">.</span><span class="nx">o</span><span class="p">;</span>
        <span class="nx">points</span> <span class="o">=</span> <span class="nx">current</span><span class="p">.</span><span class="nx">z</span><span class="p">;</span>
        <span class="nx">isSubject</span> <span class="o">=</span> <span class="o">!</span><span class="nx">isSubject</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="nx">current</span><span class="p">.</span><span class="nx">v</span><span class="p">);</span>
      <span class="nx">listener</span><span class="p">.</span><span class="nx">lineEnd</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_clipPolygonLinkCircular</span><span class="p">(</span><span class="nx">array</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">n</span> <span class="o">=</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="p">))</span> <span class="k">return</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">n</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">b</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">a</span><span class="p">.</span><span class="nx">n</span> <span class="o">=</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
      <span class="nx">b</span><span class="p">.</span><span class="nx">p</span> <span class="o">=</span> <span class="nx">a</span><span class="p">;</span>
      <span class="nx">a</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">a</span><span class="p">.</span><span class="nx">n</span> <span class="o">=</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="nx">b</span><span class="p">.</span><span class="nx">p</span> <span class="o">=</span> <span class="nx">a</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_clipPolygonIntersection</span><span class="p">(</span><span class="nx">point</span><span class="p">,</span> <span class="nx">points</span><span class="p">,</span> <span class="nx">other</span><span class="p">,</span> <span class="nx">entry</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">point</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">z</span> <span class="o">=</span> <span class="nx">points</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">o</span> <span class="o">=</span> <span class="nx">other</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">e</span> <span class="o">=</span> <span class="nx">entry</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">v</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">n</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">p</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_clip</span><span class="p">(</span><span class="nx">pointVisible</span><span class="p">,</span> <span class="nx">clipLine</span><span class="p">,</span> <span class="nx">interpolate</span><span class="p">,</span> <span class="nx">clipStart</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">rotate</span><span class="p">,</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">line</span> <span class="o">=</span> <span class="nx">clipLine</span><span class="p">(</span><span class="nx">listener</span><span class="p">),</span> <span class="nx">rotatedClipStart</span> <span class="o">=</span> <span class="nx">rotate</span><span class="p">.</span><span class="nx">invert</span><span class="p">(</span><span class="nx">clipStart</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">clipStart</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
      <span class="kd">var</span> <span class="nx">clip</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">point</span><span class="o">:</span> <span class="nx">point</span><span class="p">,</span>
        <span class="nx">lineStart</span><span class="o">:</span> <span class="nx">lineStart</span><span class="p">,</span>
        <span class="nx">lineEnd</span><span class="o">:</span> <span class="nx">lineEnd</span><span class="p">,</span>
        <span class="nx">polygonStart</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">clip</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">pointRing</span><span class="p">;</span>
          <span class="nx">clip</span><span class="p">.</span><span class="nx">lineStart</span> <span class="o">=</span> <span class="nx">ringStart</span><span class="p">;</span>
          <span class="nx">clip</span><span class="p">.</span><span class="nx">lineEnd</span> <span class="o">=</span> <span class="nx">ringEnd</span><span class="p">;</span>
          <span class="nx">segments</span> <span class="o">=</span> <span class="p">[];</span>
          <span class="nx">polygon</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="p">},</span>
        <span class="nx">polygonEnd</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">clip</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">point</span><span class="p">;</span>
          <span class="nx">clip</span><span class="p">.</span><span class="nx">lineStart</span> <span class="o">=</span> <span class="nx">lineStart</span><span class="p">;</span>
          <span class="nx">clip</span><span class="p">.</span><span class="nx">lineEnd</span> <span class="o">=</span> <span class="nx">lineEnd</span><span class="p">;</span>
          <span class="nx">segments</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span><span class="nx">segments</span><span class="p">);</span>
          <span class="kd">var</span> <span class="nx">clipStartInside</span> <span class="o">=</span> <span class="nx">d3_geo_pointInPolygon</span><span class="p">(</span><span class="nx">rotatedClipStart</span><span class="p">,</span> <span class="nx">polygon</span><span class="p">);</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">segments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">polygonStarted</span><span class="p">)</span> <span class="nx">listener</span><span class="p">.</span><span class="nx">polygonStart</span><span class="p">(),</span> <span class="nx">polygonStarted</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="nx">d3_geo_clipPolygon</span><span class="p">(</span><span class="nx">segments</span><span class="p">,</span> <span class="nx">d3_geo_clipSort</span><span class="p">,</span> <span class="nx">clipStartInside</span><span class="p">,</span> <span class="nx">interpolate</span><span class="p">,</span> <span class="nx">listener</span><span class="p">);</span>
          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">clipStartInside</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">polygonStarted</span><span class="p">)</span> <span class="nx">listener</span><span class="p">.</span><span class="nx">polygonStart</span><span class="p">(),</span> <span class="nx">polygonStarted</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="nx">listener</span><span class="p">.</span><span class="nx">lineStart</span><span class="p">();</span>
            <span class="nx">interpolate</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">listener</span><span class="p">);</span>
            <span class="nx">listener</span><span class="p">.</span><span class="nx">lineEnd</span><span class="p">();</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">polygonStarted</span><span class="p">)</span> <span class="nx">listener</span><span class="p">.</span><span class="nx">polygonEnd</span><span class="p">(),</span> <span class="nx">polygonStarted</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
          <span class="nx">segments</span> <span class="o">=</span> <span class="nx">polygon</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">},</span>
        <span class="nx">sphere</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">listener</span><span class="p">.</span><span class="nx">polygonStart</span><span class="p">();</span>
          <span class="nx">listener</span><span class="p">.</span><span class="nx">lineStart</span><span class="p">();</span>
          <span class="nx">interpolate</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">listener</span><span class="p">);</span>
          <span class="nx">listener</span><span class="p">.</span><span class="nx">lineEnd</span><span class="p">();</span>
          <span class="nx">listener</span><span class="p">.</span><span class="nx">polygonEnd</span><span class="p">();</span>
        <span class="p">}</span>
      <span class="p">};</span>
      <span class="kd">function</span> <span class="nx">point</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">point</span> <span class="o">=</span> <span class="nx">rotate</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">pointVisible</span><span class="p">(</span><span class="err">λ</span> <span class="o">=</span> <span class="nx">point</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="err">φ</span> <span class="o">=</span> <span class="nx">point</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span> <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="kd">function</span> <span class="nx">pointLine</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">point</span> <span class="o">=</span> <span class="nx">rotate</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">);</span>
        <span class="nx">line</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="nx">point</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">point</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
      <span class="p">}</span>
      <span class="kd">function</span> <span class="nx">lineStart</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">clip</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">pointLine</span><span class="p">;</span>
        <span class="nx">line</span><span class="p">.</span><span class="nx">lineStart</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="kd">function</span> <span class="nx">lineEnd</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">clip</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">point</span><span class="p">;</span>
        <span class="nx">line</span><span class="p">.</span><span class="nx">lineEnd</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="kd">var</span> <span class="nx">segments</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">buffer</span> <span class="o">=</span> <span class="nx">d3_geo_clipBufferListener</span><span class="p">(),</span> <span class="nx">ringListener</span> <span class="o">=</span> <span class="nx">clipLine</span><span class="p">(</span><span class="nx">buffer</span><span class="p">),</span> <span class="nx">polygonStarted</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">polygon</span><span class="p">,</span> <span class="nx">ring</span><span class="p">;</span>
      <span class="kd">function</span> <span class="nx">pointRing</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">ring</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span> <span class="err">λ</span><span class="p">,</span> <span class="err">φ</span> <span class="p">]);</span>
        <span class="kd">var</span> <span class="nx">point</span> <span class="o">=</span> <span class="nx">rotate</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">);</span>
        <span class="nx">ringListener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="nx">point</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">point</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
      <span class="p">}</span>
      <span class="kd">function</span> <span class="nx">ringStart</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">ringListener</span><span class="p">.</span><span class="nx">lineStart</span><span class="p">();</span>
        <span class="nx">ring</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="p">}</span>
      <span class="kd">function</span> <span class="nx">ringEnd</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">pointRing</span><span class="p">(</span><span class="nx">ring</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="nx">ring</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]);</span>
        <span class="nx">ringListener</span><span class="p">.</span><span class="nx">lineEnd</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">clean</span> <span class="o">=</span> <span class="nx">ringListener</span><span class="p">.</span><span class="nx">clean</span><span class="p">(),</span> <span class="nx">ringSegments</span> <span class="o">=</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">buffer</span><span class="p">(),</span> <span class="nx">segment</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">ringSegments</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
        <span class="nx">ring</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
        <span class="nx">polygon</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">ring</span><span class="p">);</span>
        <span class="nx">ring</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">n</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">clean</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">segment</span> <span class="o">=</span> <span class="nx">ringSegments</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
          <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">segment</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">point</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">n</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">polygonStarted</span><span class="p">)</span> <span class="nx">listener</span><span class="p">.</span><span class="nx">polygonStart</span><span class="p">(),</span> <span class="nx">polygonStarted</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="nx">listener</span><span class="p">.</span><span class="nx">lineStart</span><span class="p">();</span>
            <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">((</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">segment</span><span class="p">[</span><span class="nx">i</span><span class="p">])[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">point</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
            <span class="nx">listener</span><span class="p">.</span><span class="nx">lineEnd</span><span class="p">();</span>
          <span class="p">}</span>
          <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">n</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">clean</span> <span class="o">&amp;</span> <span class="mi">2</span><span class="p">)</span> <span class="nx">ringSegments</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">ringSegments</span><span class="p">.</span><span class="nx">pop</span><span class="p">().</span><span class="nx">concat</span><span class="p">(</span><span class="nx">ringSegments</span><span class="p">.</span><span class="nx">shift</span><span class="p">()));</span>
        <span class="nx">segments</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">ringSegments</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">d3_geo_clipSegmentLength1</span><span class="p">));</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">clip</span><span class="p">;</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_clipSegmentLength1</span><span class="p">(</span><span class="nx">segment</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">segment</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_clipBufferListener</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">lines</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">line</span><span class="p">;</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">lineStart</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">lines</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">line</span> <span class="o">=</span> <span class="p">[]);</span>
      <span class="p">},</span>
      <span class="nx">point</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">line</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span> <span class="err">λ</span><span class="p">,</span> <span class="err">φ</span> <span class="p">]);</span>
      <span class="p">},</span>
      <span class="nx">lineEnd</span><span class="o">:</span> <span class="nx">d3_noop</span><span class="p">,</span>
      <span class="nx">buffer</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">buffer</span> <span class="o">=</span> <span class="nx">lines</span><span class="p">;</span>
        <span class="nx">lines</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="nx">line</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">buffer</span><span class="p">;</span>
      <span class="p">},</span>
      <span class="nx">rejoin</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">lines</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="nx">lines</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">lines</span><span class="p">.</span><span class="nx">pop</span><span class="p">().</span><span class="nx">concat</span><span class="p">(</span><span class="nx">lines</span><span class="p">.</span><span class="nx">shift</span><span class="p">()));</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_clipSort</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">((</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">x</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">half</span><span class="err">π</span> <span class="o">-</span> <span class="err">ε</span> <span class="o">:</span> <span class="nx">half</span><span class="err">π</span> <span class="o">-</span> <span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">-</span> <span class="p">((</span><span class="nx">b</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">x</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">half</span><span class="err">π</span> <span class="o">-</span> <span class="err">ε</span> <span class="o">:</span> <span class="nx">half</span><span class="err">π</span> <span class="o">-</span> <span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_pointInPolygon</span><span class="p">(</span><span class="nx">point</span><span class="p">,</span> <span class="nx">polygon</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">meridian</span> <span class="o">=</span> <span class="nx">point</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">parallel</span> <span class="o">=</span> <span class="nx">point</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">meridianNormal</span> <span class="o">=</span> <span class="p">[</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">meridian</span><span class="p">),</span> <span class="o">-</span><span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">meridian</span><span class="p">),</span> <span class="mi">0</span> <span class="p">],</span> <span class="nx">polarAngle</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">winding</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nx">d3_geo_areaRingSum</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">polygon</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">ring</span> <span class="o">=</span> <span class="nx">polygon</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">ring</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">m</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">point0</span> <span class="o">=</span> <span class="nx">ring</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="err">λ</span><span class="mi">0</span> <span class="o">=</span> <span class="nx">point0</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="err">φ</span><span class="mi">0</span> <span class="o">=</span> <span class="nx">point0</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="err">π</span> <span class="o">/</span> <span class="mi">4</span><span class="p">,</span> <span class="nx">sin</span><span class="err">φ</span><span class="mi">0</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">φ</span><span class="mi">0</span><span class="p">),</span> <span class="nx">cos</span><span class="err">φ</span><span class="mi">0</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">φ</span><span class="mi">0</span><span class="p">),</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">j</span> <span class="o">===</span> <span class="nx">m</span><span class="p">)</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="nx">point</span> <span class="o">=</span> <span class="nx">ring</span><span class="p">[</span><span class="nx">j</span><span class="p">];</span>
        <span class="kd">var</span> <span class="err">λ</span> <span class="o">=</span> <span class="nx">point</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="err">φ</span> <span class="o">=</span> <span class="nx">point</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="err">π</span> <span class="o">/</span> <span class="mi">4</span><span class="p">,</span> <span class="nx">sin</span><span class="err">φ</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">φ</span><span class="p">),</span> <span class="nx">cos</span><span class="err">φ</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">φ</span><span class="p">),</span> <span class="nx">d</span><span class="err">λ</span> <span class="o">=</span> <span class="err">λ</span> <span class="o">-</span> <span class="err">λ</span><span class="mi">0</span><span class="p">,</span> <span class="nx">sd</span><span class="err">λ</span> <span class="o">=</span> <span class="nx">d</span><span class="err">λ</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">ad</span><span class="err">λ</span> <span class="o">=</span> <span class="nx">sd</span><span class="err">λ</span> <span class="o">*</span> <span class="nx">d</span><span class="err">λ</span><span class="p">,</span> <span class="nx">antimeridian</span> <span class="o">=</span> <span class="nx">ad</span><span class="err">λ</span> <span class="o">&gt;</span> <span class="err">π</span><span class="p">,</span> <span class="nx">k</span> <span class="o">=</span> <span class="nx">sin</span><span class="err">φ</span><span class="mi">0</span> <span class="o">*</span> <span class="nx">sin</span><span class="err">φ</span><span class="p">;</span>
        <span class="nx">d3_geo_areaRingSum</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">atan2</span><span class="p">(</span><span class="nx">k</span> <span class="o">*</span> <span class="nx">sd</span><span class="err">λ</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">ad</span><span class="err">λ</span><span class="p">),</span> <span class="nx">cos</span><span class="err">φ</span><span class="mi">0</span> <span class="o">*</span> <span class="nx">cos</span><span class="err">φ</span> <span class="o">+</span> <span class="nx">k</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">ad</span><span class="err">λ</span><span class="p">)));</span>
        <span class="nx">polarAngle</span> <span class="o">+=</span> <span class="nx">antimeridian</span> <span class="o">?</span> <span class="nx">d</span><span class="err">λ</span> <span class="o">+</span> <span class="nx">sd</span><span class="err">λ</span> <span class="o">*</span> <span class="err">τ</span> <span class="o">:</span> <span class="nx">d</span><span class="err">λ</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">antimeridian</span> <span class="o">^</span> <span class="err">λ</span><span class="mi">0</span> <span class="o">&gt;=</span> <span class="nx">meridian</span> <span class="o">^</span> <span class="err">λ</span> <span class="o">&gt;=</span> <span class="nx">meridian</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">arc</span> <span class="o">=</span> <span class="nx">d3_geo_cartesianCross</span><span class="p">(</span><span class="nx">d3_geo_cartesian</span><span class="p">(</span><span class="nx">point0</span><span class="p">),</span> <span class="nx">d3_geo_cartesian</span><span class="p">(</span><span class="nx">point</span><span class="p">));</span>
          <span class="nx">d3_geo_cartesianNormalize</span><span class="p">(</span><span class="nx">arc</span><span class="p">);</span>
          <span class="kd">var</span> <span class="nx">intersection</span> <span class="o">=</span> <span class="nx">d3_geo_cartesianCross</span><span class="p">(</span><span class="nx">meridianNormal</span><span class="p">,</span> <span class="nx">arc</span><span class="p">);</span>
          <span class="nx">d3_geo_cartesianNormalize</span><span class="p">(</span><span class="nx">intersection</span><span class="p">);</span>
          <span class="kd">var</span> <span class="err">φ</span><span class="nx">arc</span> <span class="o">=</span> <span class="p">(</span><span class="nx">antimeridian</span> <span class="o">^</span> <span class="nx">d</span><span class="err">λ</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">?</span> <span class="o">-</span><span class="mi">1</span> <span class="o">:</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="nx">d3_asin</span><span class="p">(</span><span class="nx">intersection</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">parallel</span> <span class="o">&gt;</span> <span class="err">φ</span><span class="nx">arc</span> <span class="o">||</span> <span class="nx">parallel</span> <span class="o">===</span> <span class="err">φ</span><span class="nx">arc</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">arc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span> <span class="nx">arc</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span> <span class="p">{</span>
            <span class="nx">winding</span> <span class="o">+=</span> <span class="nx">antimeridian</span> <span class="o">^</span> <span class="nx">d</span><span class="err">λ</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
        <span class="err">λ</span><span class="mi">0</span> <span class="o">=</span> <span class="err">λ</span><span class="p">,</span> <span class="nx">sin</span><span class="err">φ</span><span class="mi">0</span> <span class="o">=</span> <span class="nx">sin</span><span class="err">φ</span><span class="p">,</span> <span class="nx">cos</span><span class="err">φ</span><span class="mi">0</span> <span class="o">=</span> <span class="nx">cos</span><span class="err">φ</span><span class="p">,</span> <span class="nx">point0</span> <span class="o">=</span> <span class="nx">point</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="p">(</span><span class="nx">polarAngle</span> <span class="o">&lt;</span> <span class="o">-</span><span class="err">ε</span> <span class="o">||</span> <span class="nx">polarAngle</span> <span class="o">&lt;</span> <span class="err">ε</span> <span class="o">&amp;&amp;</span> <span class="nx">d3_geo_areaRingSum</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">^</span> <span class="nx">winding</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">d3_geo_clipAntimeridian</span> <span class="o">=</span> <span class="nx">d3_geo_clip</span><span class="p">(</span><span class="nx">d3_true</span><span class="p">,</span> <span class="nx">d3_geo_clipAntimeridianLine</span><span class="p">,</span> <span class="nx">d3_geo_clipAntimeridianInterpolate</span><span class="p">,</span> <span class="p">[</span> <span class="o">-</span><span class="err">π</span><span class="p">,</span> <span class="o">-</span><span class="err">π</span> <span class="o">/</span> <span class="mi">2</span> <span class="p">]);</span>
  <span class="kd">function</span> <span class="nx">d3_geo_clipAntimeridianLine</span><span class="p">(</span><span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="err">λ</span><span class="mi">0</span> <span class="o">=</span> <span class="kc">NaN</span><span class="p">,</span> <span class="err">φ</span><span class="mi">0</span> <span class="o">=</span> <span class="kc">NaN</span><span class="p">,</span> <span class="nx">s</span><span class="err">λ</span><span class="mi">0</span> <span class="o">=</span> <span class="kc">NaN</span><span class="p">,</span> <span class="nx">clean</span><span class="p">;</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">lineStart</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">listener</span><span class="p">.</span><span class="nx">lineStart</span><span class="p">();</span>
        <span class="nx">clean</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
      <span class="p">},</span>
      <span class="nx">point</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="err">λ</span><span class="mi">1</span><span class="p">,</span> <span class="err">φ</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">s</span><span class="err">λ</span><span class="mi">1</span> <span class="o">=</span> <span class="err">λ</span><span class="mi">1</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="err">π</span> <span class="o">:</span> <span class="o">-</span><span class="err">π</span><span class="p">,</span> <span class="nx">d</span><span class="err">λ</span> <span class="o">=</span> <span class="nx">abs</span><span class="p">(</span><span class="err">λ</span><span class="mi">1</span> <span class="o">-</span> <span class="err">λ</span><span class="mi">0</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">abs</span><span class="p">(</span><span class="nx">d</span><span class="err">λ</span> <span class="o">-</span> <span class="err">π</span><span class="p">)</span> <span class="o">&lt;</span> <span class="err">ε</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="err">λ</span><span class="mi">0</span><span class="p">,</span> <span class="err">φ</span><span class="mi">0</span> <span class="o">=</span> <span class="p">(</span><span class="err">φ</span><span class="mi">0</span> <span class="o">+</span> <span class="err">φ</span><span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="nx">half</span><span class="err">π</span> <span class="o">:</span> <span class="o">-</span><span class="nx">half</span><span class="err">π</span><span class="p">);</span>
          <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="nx">s</span><span class="err">λ</span><span class="mi">0</span><span class="p">,</span> <span class="err">φ</span><span class="mi">0</span><span class="p">);</span>
          <span class="nx">listener</span><span class="p">.</span><span class="nx">lineEnd</span><span class="p">();</span>
          <span class="nx">listener</span><span class="p">.</span><span class="nx">lineStart</span><span class="p">();</span>
          <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="nx">s</span><span class="err">λ</span><span class="mi">1</span><span class="p">,</span> <span class="err">φ</span><span class="mi">0</span><span class="p">);</span>
          <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="err">λ</span><span class="mi">1</span><span class="p">,</span> <span class="err">φ</span><span class="mi">0</span><span class="p">);</span>
          <span class="nx">clean</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">s</span><span class="err">λ</span><span class="mi">0</span> <span class="o">!==</span> <span class="nx">s</span><span class="err">λ</span><span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">d</span><span class="err">λ</span> <span class="o">&gt;=</span> <span class="err">π</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">abs</span><span class="p">(</span><span class="err">λ</span><span class="mi">0</span> <span class="o">-</span> <span class="nx">s</span><span class="err">λ</span><span class="mi">0</span><span class="p">)</span> <span class="o">&lt;</span> <span class="err">ε</span><span class="p">)</span> <span class="err">λ</span><span class="mi">0</span> <span class="o">-=</span> <span class="nx">s</span><span class="err">λ</span><span class="mi">0</span> <span class="o">*</span> <span class="err">ε</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">abs</span><span class="p">(</span><span class="err">λ</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">s</span><span class="err">λ</span><span class="mi">1</span><span class="p">)</span> <span class="o">&lt;</span> <span class="err">ε</span><span class="p">)</span> <span class="err">λ</span><span class="mi">1</span> <span class="o">-=</span> <span class="nx">s</span><span class="err">λ</span><span class="mi">1</span> <span class="o">*</span> <span class="err">ε</span><span class="p">;</span>
          <span class="err">φ</span><span class="mi">0</span> <span class="o">=</span> <span class="nx">d3_geo_clipAntimeridianIntersect</span><span class="p">(</span><span class="err">λ</span><span class="mi">0</span><span class="p">,</span> <span class="err">φ</span><span class="mi">0</span><span class="p">,</span> <span class="err">λ</span><span class="mi">1</span><span class="p">,</span> <span class="err">φ</span><span class="mi">1</span><span class="p">);</span>
          <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="nx">s</span><span class="err">λ</span><span class="mi">0</span><span class="p">,</span> <span class="err">φ</span><span class="mi">0</span><span class="p">);</span>
          <span class="nx">listener</span><span class="p">.</span><span class="nx">lineEnd</span><span class="p">();</span>
          <span class="nx">listener</span><span class="p">.</span><span class="nx">lineStart</span><span class="p">();</span>
          <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="nx">s</span><span class="err">λ</span><span class="mi">1</span><span class="p">,</span> <span class="err">φ</span><span class="mi">0</span><span class="p">);</span>
          <span class="nx">clean</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="err">λ</span><span class="mi">0</span> <span class="o">=</span> <span class="err">λ</span><span class="mi">1</span><span class="p">,</span> <span class="err">φ</span><span class="mi">0</span> <span class="o">=</span> <span class="err">φ</span><span class="mi">1</span><span class="p">);</span>
        <span class="nx">s</span><span class="err">λ</span><span class="mi">0</span> <span class="o">=</span> <span class="nx">s</span><span class="err">λ</span><span class="mi">1</span><span class="p">;</span>
      <span class="p">},</span>
      <span class="nx">lineEnd</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">listener</span><span class="p">.</span><span class="nx">lineEnd</span><span class="p">();</span>
        <span class="err">λ</span><span class="mi">0</span> <span class="o">=</span> <span class="err">φ</span><span class="mi">0</span> <span class="o">=</span> <span class="kc">NaN</span><span class="p">;</span>
      <span class="p">},</span>
      <span class="nx">clean</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="mi">2</span> <span class="o">-</span> <span class="nx">clean</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_clipAntimeridianIntersect</span><span class="p">(</span><span class="err">λ</span><span class="mi">0</span><span class="p">,</span> <span class="err">φ</span><span class="mi">0</span><span class="p">,</span> <span class="err">λ</span><span class="mi">1</span><span class="p">,</span> <span class="err">φ</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">cos</span><span class="err">φ</span><span class="mi">0</span><span class="p">,</span> <span class="nx">cos</span><span class="err">φ</span><span class="mi">1</span><span class="p">,</span> <span class="nx">sin</span><span class="err">λ</span><span class="mi">0</span><span class="nx">_</span><span class="err">λ</span><span class="mi">1</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">λ</span><span class="mi">0</span> <span class="o">-</span> <span class="err">λ</span><span class="mi">1</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">sin</span><span class="err">λ</span><span class="mi">0</span><span class="nx">_</span><span class="err">λ</span><span class="mi">1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="err">ε</span> <span class="o">?</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan</span><span class="p">((</span><span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">φ</span><span class="mi">0</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="nx">cos</span><span class="err">φ</span><span class="mi">1</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">φ</span><span class="mi">1</span><span class="p">))</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">λ</span><span class="mi">1</span><span class="p">)</span> <span class="o">-</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">φ</span><span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="nx">cos</span><span class="err">φ</span><span class="mi">0</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">φ</span><span class="mi">0</span><span class="p">))</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">λ</span><span class="mi">0</span><span class="p">))</span> <span class="o">/</span> <span class="p">(</span><span class="nx">cos</span><span class="err">φ</span><span class="mi">0</span> <span class="o">*</span> <span class="nx">cos</span><span class="err">φ</span><span class="mi">1</span> <span class="o">*</span> <span class="nx">sin</span><span class="err">λ</span><span class="mi">0</span><span class="nx">_</span><span class="err">λ</span><span class="mi">1</span><span class="p">))</span> <span class="o">:</span> <span class="p">(</span><span class="err">φ</span><span class="mi">0</span> <span class="o">+</span> <span class="err">φ</span><span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_clipAntimeridianInterpolate</span><span class="p">(</span><span class="nx">from</span><span class="p">,</span> <span class="nx">to</span><span class="p">,</span> <span class="nx">direction</span><span class="p">,</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="err">φ</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">from</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
      <span class="err">φ</span> <span class="o">=</span> <span class="nx">direction</span> <span class="o">*</span> <span class="nx">half</span><span class="err">π</span><span class="p">;</span>
      <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="o">-</span><span class="err">π</span><span class="p">,</span> <span class="err">φ</span><span class="p">);</span>
      <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="err">φ</span><span class="p">);</span>
      <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="err">π</span><span class="p">,</span> <span class="err">φ</span><span class="p">);</span>
      <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="err">π</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
      <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="err">π</span><span class="p">,</span> <span class="o">-</span><span class="err">φ</span><span class="p">);</span>
      <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="err">φ</span><span class="p">);</span>
      <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="o">-</span><span class="err">π</span><span class="p">,</span> <span class="o">-</span><span class="err">φ</span><span class="p">);</span>
      <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="o">-</span><span class="err">π</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
      <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="o">-</span><span class="err">π</span><span class="p">,</span> <span class="err">φ</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">abs</span><span class="p">(</span><span class="nx">from</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">to</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&gt;</span> <span class="err">ε</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="nx">from</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="nx">to</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">?</span> <span class="err">π</span> <span class="o">:</span> <span class="o">-</span><span class="err">π</span><span class="p">;</span>
      <span class="err">φ</span> <span class="o">=</span> <span class="nx">direction</span> <span class="o">*</span> <span class="nx">s</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
      <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="o">-</span><span class="nx">s</span><span class="p">,</span> <span class="err">φ</span><span class="p">);</span>
      <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="err">φ</span><span class="p">);</span>
      <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="err">φ</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="nx">to</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">to</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_clipCircle</span><span class="p">(</span><span class="nx">radius</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">cr</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">radius</span><span class="p">),</span> <span class="nx">smallRadius</span> <span class="o">=</span> <span class="nx">cr</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">notHemisphere</span> <span class="o">=</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">cr</span><span class="p">)</span> <span class="o">&gt;</span> <span class="err">ε</span><span class="p">,</span> <span class="nx">interpolate</span> <span class="o">=</span> <span class="nx">d3_geo_circleInterpolate</span><span class="p">(</span><span class="nx">radius</span><span class="p">,</span> <span class="mi">6</span> <span class="o">*</span> <span class="nx">d3_radians</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">d3_geo_clip</span><span class="p">(</span><span class="nx">visible</span><span class="p">,</span> <span class="nx">clipLine</span><span class="p">,</span> <span class="nx">interpolate</span><span class="p">,</span> <span class="nx">smallRadius</span> <span class="o">?</span> <span class="p">[</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="nx">radius</span> <span class="p">]</span> <span class="o">:</span> <span class="p">[</span> <span class="o">-</span><span class="err">π</span><span class="p">,</span> <span class="nx">radius</span> <span class="o">-</span> <span class="err">π</span> <span class="p">]);</span>
    <span class="kd">function</span> <span class="nx">visible</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">λ</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">φ</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nx">cr</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">clipLine</span><span class="p">(</span><span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">point0</span><span class="p">,</span> <span class="nx">c0</span><span class="p">,</span> <span class="nx">v0</span><span class="p">,</span> <span class="nx">v00</span><span class="p">,</span> <span class="nx">clean</span><span class="p">;</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="nx">lineStart</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">v00</span> <span class="o">=</span> <span class="nx">v0</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
          <span class="nx">clean</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">},</span>
        <span class="nx">point</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">point1</span> <span class="o">=</span> <span class="p">[</span> <span class="err">λ</span><span class="p">,</span> <span class="err">φ</span> <span class="p">],</span> <span class="nx">point2</span><span class="p">,</span> <span class="nx">v</span> <span class="o">=</span> <span class="nx">visible</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">),</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">smallRadius</span> <span class="o">?</span> <span class="nx">v</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="nx">code</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">)</span> <span class="o">:</span> <span class="nx">v</span> <span class="o">?</span> <span class="nx">code</span><span class="p">(</span><span class="err">λ</span> <span class="o">+</span> <span class="p">(</span><span class="err">λ</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="err">π</span> <span class="o">:</span> <span class="o">-</span><span class="err">π</span><span class="p">),</span> <span class="err">φ</span><span class="p">)</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">point0</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">v00</span> <span class="o">=</span> <span class="nx">v0</span> <span class="o">=</span> <span class="nx">v</span><span class="p">))</span> <span class="nx">listener</span><span class="p">.</span><span class="nx">lineStart</span><span class="p">();</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">v</span> <span class="o">!==</span> <span class="nx">v0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">point2</span> <span class="o">=</span> <span class="nx">intersect</span><span class="p">(</span><span class="nx">point0</span><span class="p">,</span> <span class="nx">point1</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">d3_geo_sphericalEqual</span><span class="p">(</span><span class="nx">point0</span><span class="p">,</span> <span class="nx">point2</span><span class="p">)</span> <span class="o">||</span> <span class="nx">d3_geo_sphericalEqual</span><span class="p">(</span><span class="nx">point1</span><span class="p">,</span> <span class="nx">point2</span><span class="p">))</span> <span class="p">{</span>
              <span class="nx">point1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="err">ε</span><span class="p">;</span>
              <span class="nx">point1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="err">ε</span><span class="p">;</span>
              <span class="nx">v</span> <span class="o">=</span> <span class="nx">visible</span><span class="p">(</span><span class="nx">point1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">point1</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">v</span> <span class="o">!==</span> <span class="nx">v0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">clean</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">listener</span><span class="p">.</span><span class="nx">lineStart</span><span class="p">();</span>
              <span class="nx">point2</span> <span class="o">=</span> <span class="nx">intersect</span><span class="p">(</span><span class="nx">point1</span><span class="p">,</span> <span class="nx">point0</span><span class="p">);</span>
              <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="nx">point2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">point2</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
              <span class="nx">point2</span> <span class="o">=</span> <span class="nx">intersect</span><span class="p">(</span><span class="nx">point0</span><span class="p">,</span> <span class="nx">point1</span><span class="p">);</span>
              <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="nx">point2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">point2</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
              <span class="nx">listener</span><span class="p">.</span><span class="nx">lineEnd</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="nx">point0</span> <span class="o">=</span> <span class="nx">point2</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">notHemisphere</span> <span class="o">&amp;&amp;</span> <span class="nx">point0</span> <span class="o">&amp;&amp;</span> <span class="nx">smallRadius</span> <span class="o">^</span> <span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">t</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">c</span> <span class="o">&amp;</span> <span class="nx">c0</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">t</span> <span class="o">=</span> <span class="nx">intersect</span><span class="p">(</span><span class="nx">point1</span><span class="p">,</span> <span class="nx">point0</span><span class="p">,</span> <span class="kc">true</span><span class="p">)))</span> <span class="p">{</span>
              <span class="nx">clean</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
              <span class="k">if</span> <span class="p">(</span><span class="nx">smallRadius</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">listener</span><span class="p">.</span><span class="nx">lineStart</span><span class="p">();</span>
                <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="nx">t</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="nx">t</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]);</span>
                <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="nx">t</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="nx">t</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]);</span>
                <span class="nx">listener</span><span class="p">.</span><span class="nx">lineEnd</span><span class="p">();</span>
              <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="nx">t</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="nx">t</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]);</span>
                <span class="nx">listener</span><span class="p">.</span><span class="nx">lineEnd</span><span class="p">();</span>
                <span class="nx">listener</span><span class="p">.</span><span class="nx">lineStart</span><span class="p">();</span>
                <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="nx">t</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="nx">t</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]);</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">v</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nx">point0</span> <span class="o">||</span> <span class="o">!</span><span class="nx">d3_geo_sphericalEqual</span><span class="p">(</span><span class="nx">point0</span><span class="p">,</span> <span class="nx">point1</span><span class="p">)))</span> <span class="p">{</span>
            <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="nx">point1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">point1</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
          <span class="p">}</span>
          <span class="nx">point0</span> <span class="o">=</span> <span class="nx">point1</span><span class="p">,</span> <span class="nx">v0</span> <span class="o">=</span> <span class="nx">v</span><span class="p">,</span> <span class="nx">c0</span> <span class="o">=</span> <span class="nx">c</span><span class="p">;</span>
        <span class="p">},</span>
        <span class="nx">lineEnd</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">v0</span><span class="p">)</span> <span class="nx">listener</span><span class="p">.</span><span class="nx">lineEnd</span><span class="p">();</span>
          <span class="nx">point0</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">},</span>
        <span class="nx">clean</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">clean</span> <span class="o">|</span> <span class="p">(</span><span class="nx">v00</span> <span class="o">&amp;&amp;</span> <span class="nx">v0</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">intersect</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">two</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">pa</span> <span class="o">=</span> <span class="nx">d3_geo_cartesian</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span> <span class="nx">pb</span> <span class="o">=</span> <span class="nx">d3_geo_cartesian</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">n1</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">],</span> <span class="nx">n2</span> <span class="o">=</span> <span class="nx">d3_geo_cartesianCross</span><span class="p">(</span><span class="nx">pa</span><span class="p">,</span> <span class="nx">pb</span><span class="p">),</span> <span class="nx">n2n2</span> <span class="o">=</span> <span class="nx">d3_geo_cartesianDot</span><span class="p">(</span><span class="nx">n2</span><span class="p">,</span> <span class="nx">n2</span><span class="p">),</span> <span class="nx">n1n2</span> <span class="o">=</span> <span class="nx">n2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">determinant</span> <span class="o">=</span> <span class="nx">n2n2</span> <span class="o">-</span> <span class="nx">n1n2</span> <span class="o">*</span> <span class="nx">n1n2</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">determinant</span><span class="p">)</span> <span class="k">return</span> <span class="o">!</span><span class="nx">two</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">c1</span> <span class="o">=</span> <span class="nx">cr</span> <span class="o">*</span> <span class="nx">n2n2</span> <span class="o">/</span> <span class="nx">determinant</span><span class="p">,</span> <span class="nx">c2</span> <span class="o">=</span> <span class="o">-</span><span class="nx">cr</span> <span class="o">*</span> <span class="nx">n1n2</span> <span class="o">/</span> <span class="nx">determinant</span><span class="p">,</span> <span class="nx">n1xn2</span> <span class="o">=</span> <span class="nx">d3_geo_cartesianCross</span><span class="p">(</span><span class="nx">n1</span><span class="p">,</span> <span class="nx">n2</span><span class="p">),</span> <span class="nx">A</span> <span class="o">=</span> <span class="nx">d3_geo_cartesianScale</span><span class="p">(</span><span class="nx">n1</span><span class="p">,</span> <span class="nx">c1</span><span class="p">),</span> <span class="nx">B</span> <span class="o">=</span> <span class="nx">d3_geo_cartesianScale</span><span class="p">(</span><span class="nx">n2</span><span class="p">,</span> <span class="nx">c2</span><span class="p">);</span>
      <span class="nx">d3_geo_cartesianAdd</span><span class="p">(</span><span class="nx">A</span><span class="p">,</span> <span class="nx">B</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">u</span> <span class="o">=</span> <span class="nx">n1xn2</span><span class="p">,</span> <span class="nx">w</span> <span class="o">=</span> <span class="nx">d3_geo_cartesianDot</span><span class="p">(</span><span class="nx">A</span><span class="p">,</span> <span class="nx">u</span><span class="p">),</span> <span class="nx">uu</span> <span class="o">=</span> <span class="nx">d3_geo_cartesianDot</span><span class="p">(</span><span class="nx">u</span><span class="p">,</span> <span class="nx">u</span><span class="p">),</span> <span class="nx">t2</span> <span class="o">=</span> <span class="nx">w</span> <span class="o">*</span> <span class="nx">w</span> <span class="o">-</span> <span class="nx">uu</span> <span class="o">*</span> <span class="p">(</span><span class="nx">d3_geo_cartesianDot</span><span class="p">(</span><span class="nx">A</span><span class="p">,</span> <span class="nx">A</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">t2</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">t</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">t2</span><span class="p">),</span> <span class="nx">q</span> <span class="o">=</span> <span class="nx">d3_geo_cartesianScale</span><span class="p">(</span><span class="nx">u</span><span class="p">,</span> <span class="p">(</span><span class="o">-</span><span class="nx">w</span> <span class="o">-</span> <span class="nx">t</span><span class="p">)</span> <span class="o">/</span> <span class="nx">uu</span><span class="p">);</span>
      <span class="nx">d3_geo_cartesianAdd</span><span class="p">(</span><span class="nx">q</span><span class="p">,</span> <span class="nx">A</span><span class="p">);</span>
      <span class="nx">q</span> <span class="o">=</span> <span class="nx">d3_geo_spherical</span><span class="p">(</span><span class="nx">q</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">two</span><span class="p">)</span> <span class="k">return</span> <span class="nx">q</span><span class="p">;</span>
      <span class="kd">var</span> <span class="err">λ</span><span class="mi">0</span> <span class="o">=</span> <span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="err">λ</span><span class="mi">1</span> <span class="o">=</span> <span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="err">φ</span><span class="mi">0</span> <span class="o">=</span> <span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="err">φ</span><span class="mi">1</span> <span class="o">=</span> <span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">z</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="err">λ</span><span class="mi">1</span> <span class="o">&lt;</span> <span class="err">λ</span><span class="mi">0</span><span class="p">)</span> <span class="nx">z</span> <span class="o">=</span> <span class="err">λ</span><span class="mi">0</span><span class="p">,</span> <span class="err">λ</span><span class="mi">0</span> <span class="o">=</span> <span class="err">λ</span><span class="mi">1</span><span class="p">,</span> <span class="err">λ</span><span class="mi">1</span> <span class="o">=</span> <span class="nx">z</span><span class="p">;</span>
      <span class="kd">var</span> <span class="err">δλ</span> <span class="o">=</span> <span class="err">λ</span><span class="mi">1</span> <span class="o">-</span> <span class="err">λ</span><span class="mi">0</span><span class="p">,</span> <span class="nx">polar</span> <span class="o">=</span> <span class="nx">abs</span><span class="p">(</span><span class="err">δλ</span> <span class="o">-</span> <span class="err">π</span><span class="p">)</span> <span class="o">&lt;</span> <span class="err">ε</span><span class="p">,</span> <span class="nx">meridian</span> <span class="o">=</span> <span class="nx">polar</span> <span class="o">||</span> <span class="err">δλ</span> <span class="o">&lt;</span> <span class="err">ε</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">polar</span> <span class="o">&amp;&amp;</span> <span class="err">φ</span><span class="mi">1</span> <span class="o">&lt;</span> <span class="err">φ</span><span class="mi">0</span><span class="p">)</span> <span class="nx">z</span> <span class="o">=</span> <span class="err">φ</span><span class="mi">0</span><span class="p">,</span> <span class="err">φ</span><span class="mi">0</span> <span class="o">=</span> <span class="err">φ</span><span class="mi">1</span><span class="p">,</span> <span class="err">φ</span><span class="mi">1</span> <span class="o">=</span> <span class="nx">z</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">meridian</span> <span class="o">?</span> <span class="nx">polar</span> <span class="o">?</span> <span class="err">φ</span><span class="mi">0</span> <span class="o">+</span> <span class="err">φ</span><span class="mi">1</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">^</span> <span class="nx">q</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="p">(</span><span class="nx">abs</span><span class="p">(</span><span class="nx">q</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="err">λ</span><span class="mi">0</span><span class="p">)</span> <span class="o">&lt;</span> <span class="err">ε</span> <span class="o">?</span> <span class="err">φ</span><span class="mi">0</span> <span class="o">:</span> <span class="err">φ</span><span class="mi">1</span><span class="p">)</span> <span class="o">:</span> <span class="err">φ</span><span class="mi">0</span> <span class="o">&lt;=</span> <span class="nx">q</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">q</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="err">φ</span><span class="mi">1</span> <span class="o">:</span> <span class="err">δλ</span> <span class="o">&gt;</span> <span class="err">π</span> <span class="o">^</span> <span class="p">(</span><span class="err">λ</span><span class="mi">0</span> <span class="o">&lt;=</span> <span class="nx">q</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">q</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="err">λ</span><span class="mi">1</span><span class="p">))</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">q1</span> <span class="o">=</span> <span class="nx">d3_geo_cartesianScale</span><span class="p">(</span><span class="nx">u</span><span class="p">,</span> <span class="p">(</span><span class="o">-</span><span class="nx">w</span> <span class="o">+</span> <span class="nx">t</span><span class="p">)</span> <span class="o">/</span> <span class="nx">uu</span><span class="p">);</span>
        <span class="nx">d3_geo_cartesianAdd</span><span class="p">(</span><span class="nx">q1</span><span class="p">,</span> <span class="nx">A</span><span class="p">);</span>
        <span class="k">return</span> <span class="p">[</span> <span class="nx">q</span><span class="p">,</span> <span class="nx">d3_geo_spherical</span><span class="p">(</span><span class="nx">q1</span><span class="p">)</span> <span class="p">];</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">code</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="nx">smallRadius</span> <span class="o">?</span> <span class="nx">radius</span> <span class="o">:</span> <span class="err">π</span> <span class="o">-</span> <span class="nx">radius</span><span class="p">,</span> <span class="nx">code</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="err">λ</span> <span class="o">&lt;</span> <span class="o">-</span><span class="nx">r</span><span class="p">)</span> <span class="nx">code</span> <span class="o">|=</span> <span class="mi">1</span><span class="p">;</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="err">λ</span> <span class="o">&gt;</span> <span class="nx">r</span><span class="p">)</span> <span class="nx">code</span> <span class="o">|=</span> <span class="mi">2</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="err">φ</span> <span class="o">&lt;</span> <span class="o">-</span><span class="nx">r</span><span class="p">)</span> <span class="nx">code</span> <span class="o">|=</span> <span class="mi">4</span><span class="p">;</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="err">φ</span> <span class="o">&gt;</span> <span class="nx">r</span><span class="p">)</span> <span class="nx">code</span> <span class="o">|=</span> <span class="mi">8</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">code</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geom_clipLine</span><span class="p">(</span><span class="nx">x0</span><span class="p">,</span> <span class="nx">y0</span><span class="p">,</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">line</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">line</span><span class="p">.</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">line</span><span class="p">.</span><span class="nx">b</span><span class="p">,</span> <span class="nx">ax</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">ay</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">bx</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">by</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">t0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">t1</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">dx</span> <span class="o">=</span> <span class="nx">bx</span> <span class="o">-</span> <span class="nx">ax</span><span class="p">,</span> <span class="nx">dy</span> <span class="o">=</span> <span class="nx">by</span> <span class="o">-</span> <span class="nx">ay</span><span class="p">,</span> <span class="nx">r</span><span class="p">;</span>
      <span class="nx">r</span> <span class="o">=</span> <span class="nx">x0</span> <span class="o">-</span> <span class="nx">ax</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">dx</span> <span class="o">&amp;&amp;</span> <span class="nx">r</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
      <span class="nx">r</span> <span class="o">/=</span> <span class="nx">dx</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">dx</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">r</span> <span class="o">&lt;</span> <span class="nx">t0</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">r</span> <span class="o">&lt;</span> <span class="nx">t1</span><span class="p">)</span> <span class="nx">t1</span> <span class="o">=</span> <span class="nx">r</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">dx</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">r</span> <span class="o">&gt;</span> <span class="nx">t1</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">r</span> <span class="o">&gt;</span> <span class="nx">t0</span><span class="p">)</span> <span class="nx">t0</span> <span class="o">=</span> <span class="nx">r</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="nx">r</span> <span class="o">=</span> <span class="nx">x1</span> <span class="o">-</span> <span class="nx">ax</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">dx</span> <span class="o">&amp;&amp;</span> <span class="nx">r</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
      <span class="nx">r</span> <span class="o">/=</span> <span class="nx">dx</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">dx</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">r</span> <span class="o">&gt;</span> <span class="nx">t1</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">r</span> <span class="o">&gt;</span> <span class="nx">t0</span><span class="p">)</span> <span class="nx">t0</span> <span class="o">=</span> <span class="nx">r</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">dx</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">r</span> <span class="o">&lt;</span> <span class="nx">t0</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">r</span> <span class="o">&lt;</span> <span class="nx">t1</span><span class="p">)</span> <span class="nx">t1</span> <span class="o">=</span> <span class="nx">r</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="nx">r</span> <span class="o">=</span> <span class="nx">y0</span> <span class="o">-</span> <span class="nx">ay</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">dy</span> <span class="o">&amp;&amp;</span> <span class="nx">r</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
      <span class="nx">r</span> <span class="o">/=</span> <span class="nx">dy</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">dy</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">r</span> <span class="o">&lt;</span> <span class="nx">t0</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">r</span> <span class="o">&lt;</span> <span class="nx">t1</span><span class="p">)</span> <span class="nx">t1</span> <span class="o">=</span> <span class="nx">r</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">dy</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">r</span> <span class="o">&gt;</span> <span class="nx">t1</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">r</span> <span class="o">&gt;</span> <span class="nx">t0</span><span class="p">)</span> <span class="nx">t0</span> <span class="o">=</span> <span class="nx">r</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="nx">r</span> <span class="o">=</span> <span class="nx">y1</span> <span class="o">-</span> <span class="nx">ay</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">dy</span> <span class="o">&amp;&amp;</span> <span class="nx">r</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
      <span class="nx">r</span> <span class="o">/=</span> <span class="nx">dy</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">dy</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">r</span> <span class="o">&gt;</span> <span class="nx">t1</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">r</span> <span class="o">&gt;</span> <span class="nx">t0</span><span class="p">)</span> <span class="nx">t0</span> <span class="o">=</span> <span class="nx">r</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">dy</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">r</span> <span class="o">&lt;</span> <span class="nx">t0</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">r</span> <span class="o">&lt;</span> <span class="nx">t1</span><span class="p">)</span> <span class="nx">t1</span> <span class="o">=</span> <span class="nx">r</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">t0</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="nx">line</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">x</span><span class="o">:</span> <span class="nx">ax</span> <span class="o">+</span> <span class="nx">t0</span> <span class="o">*</span> <span class="nx">dx</span><span class="p">,</span>
        <span class="nx">y</span><span class="o">:</span> <span class="nx">ay</span> <span class="o">+</span> <span class="nx">t0</span> <span class="o">*</span> <span class="nx">dy</span>
      <span class="p">};</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">t1</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="nx">line</span><span class="p">.</span><span class="nx">b</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">x</span><span class="o">:</span> <span class="nx">ax</span> <span class="o">+</span> <span class="nx">t1</span> <span class="o">*</span> <span class="nx">dx</span><span class="p">,</span>
        <span class="nx">y</span><span class="o">:</span> <span class="nx">ay</span> <span class="o">+</span> <span class="nx">t1</span> <span class="o">*</span> <span class="nx">dy</span>
      <span class="p">};</span>
      <span class="k">return</span> <span class="nx">line</span><span class="p">;</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">d3_geo_clipExtentMAX</span> <span class="o">=</span> <span class="mi">1</span><span class="nx">e9</span><span class="p">;</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">clipExtent</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">x0</span><span class="p">,</span> <span class="nx">y0</span><span class="p">,</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span><span class="p">,</span> <span class="nx">stream</span><span class="p">,</span> <span class="nx">clip</span><span class="p">,</span> <span class="nx">clipExtent</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">stream</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">output</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">stream</span><span class="p">)</span> <span class="nx">stream</span><span class="p">.</span><span class="nx">valid</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nx">stream</span> <span class="o">=</span> <span class="nx">clip</span><span class="p">(</span><span class="nx">output</span><span class="p">);</span>
        <span class="nx">stream</span><span class="p">.</span><span class="nx">valid</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">stream</span><span class="p">;</span>
      <span class="p">},</span>
      <span class="nx">extent</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="p">[</span> <span class="p">[</span> <span class="nx">x0</span><span class="p">,</span> <span class="nx">y0</span> <span class="p">],</span> <span class="p">[</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span> <span class="p">]</span> <span class="p">];</span>
        <span class="nx">clip</span> <span class="o">=</span> <span class="nx">d3_geo_clipExtent</span><span class="p">(</span><span class="nx">x0</span> <span class="o">=</span> <span class="o">+</span><span class="nx">_</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y0</span> <span class="o">=</span> <span class="o">+</span><span class="nx">_</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="nx">x1</span> <span class="o">=</span> <span class="o">+</span><span class="nx">_</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y1</span> <span class="o">=</span> <span class="o">+</span><span class="nx">_</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">stream</span><span class="p">)</span> <span class="nx">stream</span><span class="p">.</span><span class="nx">valid</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">stream</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">clipExtent</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">clipExtent</span><span class="p">.</span><span class="nx">extent</span><span class="p">([</span> <span class="p">[</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">],</span> <span class="p">[</span> <span class="mi">960</span><span class="p">,</span> <span class="mi">500</span> <span class="p">]</span> <span class="p">]);</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_geo_clipExtent</span><span class="p">(</span><span class="nx">x0</span><span class="p">,</span> <span class="nx">y0</span><span class="p">,</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">listener_</span> <span class="o">=</span> <span class="nx">listener</span><span class="p">,</span> <span class="nx">bufferListener</span> <span class="o">=</span> <span class="nx">d3_geo_clipBufferListener</span><span class="p">(),</span> <span class="nx">clipLine</span> <span class="o">=</span> <span class="nx">d3_geom_clipLine</span><span class="p">(</span><span class="nx">x0</span><span class="p">,</span> <span class="nx">y0</span><span class="p">,</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span><span class="p">),</span> <span class="nx">segments</span><span class="p">,</span> <span class="nx">polygon</span><span class="p">,</span> <span class="nx">ring</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">clip</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">point</span><span class="o">:</span> <span class="nx">point</span><span class="p">,</span>
        <span class="nx">lineStart</span><span class="o">:</span> <span class="nx">lineStart</span><span class="p">,</span>
        <span class="nx">lineEnd</span><span class="o">:</span> <span class="nx">lineEnd</span><span class="p">,</span>
        <span class="nx">polygonStart</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">listener</span> <span class="o">=</span> <span class="nx">bufferListener</span><span class="p">;</span>
          <span class="nx">segments</span> <span class="o">=</span> <span class="p">[];</span>
          <span class="nx">polygon</span> <span class="o">=</span> <span class="p">[];</span>
          <span class="nx">clean</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">},</span>
        <span class="nx">polygonEnd</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">listener</span> <span class="o">=</span> <span class="nx">listener_</span><span class="p">;</span>
          <span class="nx">segments</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span><span class="nx">segments</span><span class="p">);</span>
          <span class="kd">var</span> <span class="nx">clipStartInside</span> <span class="o">=</span> <span class="nx">insidePolygon</span><span class="p">([</span> <span class="nx">x0</span><span class="p">,</span> <span class="nx">y1</span> <span class="p">]),</span> <span class="nx">inside</span> <span class="o">=</span> <span class="nx">clean</span> <span class="o">&amp;&amp;</span> <span class="nx">clipStartInside</span><span class="p">,</span> <span class="nx">visible</span> <span class="o">=</span> <span class="nx">segments</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">inside</span> <span class="o">||</span> <span class="nx">visible</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">listener</span><span class="p">.</span><span class="nx">polygonStart</span><span class="p">();</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">inside</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">listener</span><span class="p">.</span><span class="nx">lineStart</span><span class="p">();</span>
              <span class="nx">interpolate</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">listener</span><span class="p">);</span>
              <span class="nx">listener</span><span class="p">.</span><span class="nx">lineEnd</span><span class="p">();</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">visible</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">d3_geo_clipPolygon</span><span class="p">(</span><span class="nx">segments</span><span class="p">,</span> <span class="nx">compare</span><span class="p">,</span> <span class="nx">clipStartInside</span><span class="p">,</span> <span class="nx">interpolate</span><span class="p">,</span> <span class="nx">listener</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="nx">listener</span><span class="p">.</span><span class="nx">polygonEnd</span><span class="p">();</span>
          <span class="p">}</span>
          <span class="nx">segments</span> <span class="o">=</span> <span class="nx">polygon</span> <span class="o">=</span> <span class="nx">ring</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>
      <span class="kd">function</span> <span class="nx">insidePolygon</span><span class="p">(</span><span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">wn</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">polygon</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">p</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">v</span> <span class="o">=</span> <span class="nx">polygon</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">v</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">v</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">b</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="o">++</span><span class="nx">j</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">b</span> <span class="o">=</span> <span class="nx">v</span><span class="p">[</span><span class="nx">j</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="nx">y</span> <span class="o">&amp;&amp;</span> <span class="nx">d3_cross2d</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">++</span><span class="nx">wn</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="nx">y</span> <span class="o">&amp;&amp;</span> <span class="nx">d3_cross2d</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">--</span><span class="nx">wn</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">a</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">wn</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="kd">function</span> <span class="nx">interpolate</span><span class="p">(</span><span class="nx">from</span><span class="p">,</span> <span class="nx">to</span><span class="p">,</span> <span class="nx">direction</span><span class="p">,</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">a1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">from</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="p">(</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">corner</span><span class="p">(</span><span class="nx">from</span><span class="p">,</span> <span class="nx">direction</span><span class="p">))</span> <span class="o">!==</span> <span class="p">(</span><span class="nx">a1</span> <span class="o">=</span> <span class="nx">corner</span><span class="p">(</span><span class="nx">to</span><span class="p">,</span> <span class="nx">direction</span><span class="p">))</span> <span class="o">||</span> <span class="nx">comparePoints</span><span class="p">(</span><span class="nx">from</span><span class="p">,</span> <span class="nx">to</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">^</span> <span class="nx">direction</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">do</span> <span class="p">{</span>
            <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="nx">a</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">a</span> <span class="o">===</span> <span class="mi">3</span> <span class="o">?</span> <span class="nx">x0</span> <span class="o">:</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">a</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">?</span> <span class="nx">y1</span> <span class="o">:</span> <span class="nx">y0</span><span class="p">);</span>
          <span class="p">}</span> <span class="k">while</span> <span class="p">((</span><span class="nx">a</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a</span> <span class="o">+</span> <span class="nx">direction</span> <span class="o">+</span> <span class="mi">4</span><span class="p">)</span> <span class="o">%</span> <span class="mi">4</span><span class="p">)</span> <span class="o">!==</span> <span class="nx">a1</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="nx">to</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">to</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="kd">function</span> <span class="nx">pointVisible</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">x0</span> <span class="o">&lt;=</span> <span class="nx">x</span> <span class="o">&amp;&amp;</span> <span class="nx">x</span> <span class="o">&lt;=</span> <span class="nx">x1</span> <span class="o">&amp;&amp;</span> <span class="nx">y0</span> <span class="o">&lt;=</span> <span class="nx">y</span> <span class="o">&amp;&amp;</span> <span class="nx">y</span> <span class="o">&lt;=</span> <span class="nx">y1</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="kd">function</span> <span class="nx">point</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">pointVisible</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">))</span> <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="kd">var</span> <span class="nx">x__</span><span class="p">,</span> <span class="nx">y__</span><span class="p">,</span> <span class="nx">v__</span><span class="p">,</span> <span class="nx">x_</span><span class="p">,</span> <span class="nx">y_</span><span class="p">,</span> <span class="nx">v_</span><span class="p">,</span> <span class="nx">first</span><span class="p">,</span> <span class="nx">clean</span><span class="p">;</span>
      <span class="kd">function</span> <span class="nx">lineStart</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">clip</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">linePoint</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">polygon</span><span class="p">)</span> <span class="nx">polygon</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">ring</span> <span class="o">=</span> <span class="p">[]);</span>
        <span class="nx">first</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="nx">v_</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nx">x_</span> <span class="o">=</span> <span class="nx">y_</span> <span class="o">=</span> <span class="kc">NaN</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="kd">function</span> <span class="nx">lineEnd</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">segments</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">linePoint</span><span class="p">(</span><span class="nx">x__</span><span class="p">,</span> <span class="nx">y__</span><span class="p">);</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">v__</span> <span class="o">&amp;&amp;</span> <span class="nx">v_</span><span class="p">)</span> <span class="nx">bufferListener</span><span class="p">.</span><span class="nx">rejoin</span><span class="p">();</span>
          <span class="nx">segments</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">bufferListener</span><span class="p">.</span><span class="nx">buffer</span><span class="p">());</span>
        <span class="p">}</span>
        <span class="nx">clip</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">point</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">v_</span><span class="p">)</span> <span class="nx">listener</span><span class="p">.</span><span class="nx">lineEnd</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="kd">function</span> <span class="nx">linePoint</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">x</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="o">-</span><span class="nx">d3_geo_clipExtentMAX</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">d3_geo_clipExtentMAX</span><span class="p">,</span> <span class="nx">x</span><span class="p">));</span>
        <span class="nx">y</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="o">-</span><span class="nx">d3_geo_clipExtentMAX</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">d3_geo_clipExtentMAX</span><span class="p">,</span> <span class="nx">y</span><span class="p">));</span>
        <span class="kd">var</span> <span class="nx">v</span> <span class="o">=</span> <span class="nx">pointVisible</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">polygon</span><span class="p">)</span> <span class="nx">ring</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span> <span class="p">]);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">first</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">x__</span> <span class="o">=</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y__</span> <span class="o">=</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">v__</span> <span class="o">=</span> <span class="nx">v</span><span class="p">;</span>
          <span class="nx">first</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">listener</span><span class="p">.</span><span class="nx">lineStart</span><span class="p">();</span>
            <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">v</span> <span class="o">&amp;&amp;</span> <span class="nx">v_</span><span class="p">)</span> <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span> <span class="k">else</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">l</span> <span class="o">=</span> <span class="p">{</span>
              <span class="nx">a</span><span class="o">:</span> <span class="p">{</span>
                <span class="nx">x</span><span class="o">:</span> <span class="nx">x_</span><span class="p">,</span>
                <span class="nx">y</span><span class="o">:</span> <span class="nx">y_</span>
              <span class="p">},</span>
              <span class="nx">b</span><span class="o">:</span> <span class="p">{</span>
                <span class="nx">x</span><span class="o">:</span> <span class="nx">x</span><span class="p">,</span>
                <span class="nx">y</span><span class="o">:</span> <span class="nx">y</span>
              <span class="p">}</span>
            <span class="p">};</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">clipLine</span><span class="p">(</span><span class="nx">l</span><span class="p">))</span> <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">v_</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">listener</span><span class="p">.</span><span class="nx">lineStart</span><span class="p">();</span>
                <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="nx">l</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">l</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
              <span class="p">}</span>
              <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="nx">l</span><span class="p">.</span><span class="nx">b</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">l</span><span class="p">.</span><span class="nx">b</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
              <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">v</span><span class="p">)</span> <span class="nx">listener</span><span class="p">.</span><span class="nx">lineEnd</span><span class="p">();</span>
              <span class="nx">clean</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">listener</span><span class="p">.</span><span class="nx">lineStart</span><span class="p">();</span>
              <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
              <span class="nx">clean</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="nx">x_</span> <span class="o">=</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y_</span> <span class="o">=</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">v_</span> <span class="o">=</span> <span class="nx">v</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">clip</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="kd">function</span> <span class="nx">corner</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="nx">direction</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">x0</span><span class="p">)</span> <span class="o">&lt;</span> <span class="err">ε</span> <span class="o">?</span> <span class="nx">direction</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="mi">3</span> <span class="o">:</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">x1</span><span class="p">)</span> <span class="o">&lt;</span> <span class="err">ε</span> <span class="o">?</span> <span class="nx">direction</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">2</span> <span class="o">:</span> <span class="mi">1</span> <span class="o">:</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">y0</span><span class="p">)</span> <span class="o">&lt;</span> <span class="err">ε</span> <span class="o">?</span> <span class="nx">direction</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span> <span class="o">:</span> <span class="nx">direction</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">3</span> <span class="o">:</span> <span class="mi">2</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">compare</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">comparePoints</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">b</span><span class="p">.</span><span class="nx">x</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">comparePoints</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">ca</span> <span class="o">=</span> <span class="nx">corner</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="nx">cb</span> <span class="o">=</span> <span class="nx">corner</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">ca</span> <span class="o">!==</span> <span class="nx">cb</span> <span class="o">?</span> <span class="nx">ca</span> <span class="o">-</span> <span class="nx">cb</span> <span class="o">:</span> <span class="nx">ca</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">?</span> <span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">:</span> <span class="nx">ca</span> <span class="o">===</span> <span class="mi">1</span> <span class="o">?</span> <span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="nx">ca</span> <span class="o">===</span> <span class="mi">2</span> <span class="o">?</span> <span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">:</span> <span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_compose</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">function</span> <span class="nx">compose</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">a</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">),</span> <span class="nx">b</span><span class="p">(</span><span class="nx">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">invert</span> <span class="o">&amp;&amp;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">invert</span><span class="p">)</span> <span class="nx">compose</span><span class="p">.</span><span class="nx">invert</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">invert</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">),</span> <span class="nx">x</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">invert</span><span class="p">(</span><span class="nx">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">compose</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_conic</span><span class="p">(</span><span class="nx">projectAt</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="err">φ</span><span class="mi">0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="err">φ</span><span class="mi">1</span> <span class="o">=</span> <span class="err">π</span> <span class="o">/</span> <span class="mi">3</span><span class="p">,</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">d3_geo_projectionMutator</span><span class="p">(</span><span class="nx">projectAt</span><span class="p">),</span> <span class="nx">p</span> <span class="o">=</span> <span class="nx">m</span><span class="p">(</span><span class="err">φ</span><span class="mi">0</span><span class="p">,</span> <span class="err">φ</span><span class="mi">1</span><span class="p">);</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">parallels</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="p">[</span> <span class="err">φ</span><span class="mi">0</span> <span class="o">/</span> <span class="err">π</span> <span class="o">*</span> <span class="mi">180</span><span class="p">,</span> <span class="err">φ</span><span class="mi">1</span> <span class="o">/</span> <span class="err">π</span> <span class="o">*</span> <span class="mi">180</span> <span class="p">];</span>
      <span class="k">return</span> <span class="nx">m</span><span class="p">(</span><span class="err">φ</span><span class="mi">0</span> <span class="o">=</span> <span class="nx">_</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="err">π</span> <span class="o">/</span> <span class="mi">180</span><span class="p">,</span> <span class="err">φ</span><span class="mi">1</span> <span class="o">=</span> <span class="nx">_</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="err">π</span> <span class="o">/</span> <span class="mi">180</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">p</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_conicEqualArea</span><span class="p">(</span><span class="err">φ</span><span class="mi">0</span><span class="p">,</span> <span class="err">φ</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">sin</span><span class="err">φ</span><span class="mi">0</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">φ</span><span class="mi">0</span><span class="p">),</span> <span class="nx">n</span> <span class="o">=</span> <span class="p">(</span><span class="nx">sin</span><span class="err">φ</span><span class="mi">0</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">φ</span><span class="mi">1</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">C</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="nx">sin</span><span class="err">φ</span><span class="mi">0</span> <span class="o">*</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="nx">n</span> <span class="o">-</span> <span class="nx">sin</span><span class="err">φ</span><span class="mi">0</span><span class="p">),</span> <span class="err">ρ</span><span class="mi">0</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">C</span><span class="p">)</span> <span class="o">/</span> <span class="nx">n</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">forward</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="err">ρ</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">C</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="nx">n</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">φ</span><span class="p">))</span> <span class="o">/</span> <span class="nx">n</span><span class="p">;</span>
      <span class="k">return</span> <span class="p">[</span> <span class="err">ρ</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">λ</span> <span class="o">*=</span> <span class="nx">n</span><span class="p">),</span> <span class="err">ρ</span><span class="mi">0</span> <span class="o">-</span> <span class="err">ρ</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">λ</span><span class="p">)</span> <span class="p">];</span>
    <span class="p">}</span>
    <span class="nx">forward</span><span class="p">.</span><span class="nx">invert</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="err">ρ</span><span class="mi">0</span><span class="nx">_y</span> <span class="o">=</span> <span class="err">ρ</span><span class="mi">0</span> <span class="o">-</span> <span class="nx">y</span><span class="p">;</span>
      <span class="k">return</span> <span class="p">[</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan2</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="err">ρ</span><span class="mi">0</span><span class="nx">_y</span><span class="p">)</span> <span class="o">/</span> <span class="nx">n</span><span class="p">,</span> <span class="nx">d3_asin</span><span class="p">((</span><span class="nx">C</span> <span class="o">-</span> <span class="p">(</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">x</span> <span class="o">+</span> <span class="err">ρ</span><span class="mi">0</span><span class="nx">_y</span> <span class="o">*</span> <span class="err">ρ</span><span class="mi">0</span><span class="nx">_y</span><span class="p">)</span> <span class="o">*</span> <span class="nx">n</span> <span class="o">*</span> <span class="nx">n</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="nx">n</span><span class="p">))</span> <span class="p">];</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">forward</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">conicEqualArea</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_geo_conic</span><span class="p">(</span><span class="nx">d3_geo_conicEqualArea</span><span class="p">);</span>
  <span class="p">}).</span><span class="nx">raw</span> <span class="o">=</span> <span class="nx">d3_geo_conicEqualArea</span><span class="p">;</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">albers</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">conicEqualArea</span><span class="p">().</span><span class="nx">rotate</span><span class="p">([</span> <span class="mi">96</span><span class="p">,</span> <span class="mi">0</span> <span class="p">]).</span><span class="nx">center</span><span class="p">([</span> <span class="o">-</span><span class="p">.</span><span class="mi">6</span><span class="p">,</span> <span class="mf">38.7</span> <span class="p">]).</span><span class="nx">parallels</span><span class="p">([</span> <span class="mf">29.5</span><span class="p">,</span> <span class="mf">45.5</span> <span class="p">]).</span><span class="nx">scale</span><span class="p">(</span><span class="mi">1070</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">albersUsa</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">lower48</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">albers</span><span class="p">();</span>
    <span class="kd">var</span> <span class="nx">alaska</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">conicEqualArea</span><span class="p">().</span><span class="nx">rotate</span><span class="p">([</span> <span class="mi">154</span><span class="p">,</span> <span class="mi">0</span> <span class="p">]).</span><span class="nx">center</span><span class="p">([</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mf">58.5</span> <span class="p">]).</span><span class="nx">parallels</span><span class="p">([</span> <span class="mi">55</span><span class="p">,</span> <span class="mi">65</span> <span class="p">]);</span>
    <span class="kd">var</span> <span class="nx">hawaii</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">conicEqualArea</span><span class="p">().</span><span class="nx">rotate</span><span class="p">([</span> <span class="mi">157</span><span class="p">,</span> <span class="mi">0</span> <span class="p">]).</span><span class="nx">center</span><span class="p">([</span> <span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mf">19.9</span> <span class="p">]).</span><span class="nx">parallels</span><span class="p">([</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">18</span> <span class="p">]);</span>
    <span class="kd">var</span> <span class="nx">point</span><span class="p">,</span> <span class="nx">pointStream</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">point</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">point</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span> <span class="p">];</span>
      <span class="p">}</span>
    <span class="p">},</span> <span class="nx">lower48Point</span><span class="p">,</span> <span class="nx">alaskaPoint</span><span class="p">,</span> <span class="nx">hawaiiPoint</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">albersUsa</span><span class="p">(</span><span class="nx">coordinates</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">coordinates</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
      <span class="nx">point</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="p">(</span><span class="nx">lower48Point</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">),</span> <span class="nx">point</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nx">alaskaPoint</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">),</span> <span class="nx">point</span><span class="p">)</span> <span class="o">||</span> <span class="nx">hawaiiPoint</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">point</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">albersUsa</span><span class="p">.</span><span class="nx">invert</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">coordinates</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">k</span> <span class="o">=</span> <span class="nx">lower48</span><span class="p">.</span><span class="nx">scale</span><span class="p">(),</span> <span class="nx">t</span> <span class="o">=</span> <span class="nx">lower48</span><span class="p">.</span><span class="nx">translate</span><span class="p">(),</span> <span class="nx">x</span> <span class="o">=</span> <span class="p">(</span><span class="nx">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">t</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">y</span> <span class="o">=</span> <span class="p">(</span><span class="nx">coordinates</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">t</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="nx">k</span><span class="p">;</span>
      <span class="k">return</span> <span class="p">(</span><span class="nx">y</span> <span class="o">&gt;=</span> <span class="p">.</span><span class="mi">12</span> <span class="o">&amp;&amp;</span> <span class="nx">y</span> <span class="o">&lt;</span> <span class="p">.</span><span class="mi">234</span> <span class="o">&amp;&amp;</span> <span class="nx">x</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="p">.</span><span class="mi">425</span> <span class="o">&amp;&amp;</span> <span class="nx">x</span> <span class="o">&lt;</span> <span class="o">-</span><span class="p">.</span><span class="mi">214</span> <span class="o">?</span> <span class="nx">alaska</span> <span class="o">:</span> <span class="nx">y</span> <span class="o">&gt;=</span> <span class="p">.</span><span class="mi">166</span> <span class="o">&amp;&amp;</span> <span class="nx">y</span> <span class="o">&lt;</span> <span class="p">.</span><span class="mi">234</span> <span class="o">&amp;&amp;</span> <span class="nx">x</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="p">.</span><span class="mi">214</span> <span class="o">&amp;&amp;</span> <span class="nx">x</span> <span class="o">&lt;</span> <span class="o">-</span><span class="p">.</span><span class="mi">115</span> <span class="o">?</span> <span class="nx">hawaii</span> <span class="o">:</span> <span class="nx">lower48</span><span class="p">).</span><span class="nx">invert</span><span class="p">(</span><span class="nx">coordinates</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="nx">albersUsa</span><span class="p">.</span><span class="nx">stream</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">stream</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">lower48Stream</span> <span class="o">=</span> <span class="nx">lower48</span><span class="p">.</span><span class="nx">stream</span><span class="p">(</span><span class="nx">stream</span><span class="p">),</span> <span class="nx">alaskaStream</span> <span class="o">=</span> <span class="nx">alaska</span><span class="p">.</span><span class="nx">stream</span><span class="p">(</span><span class="nx">stream</span><span class="p">),</span> <span class="nx">hawaiiStream</span> <span class="o">=</span> <span class="nx">hawaii</span><span class="p">.</span><span class="nx">stream</span><span class="p">(</span><span class="nx">stream</span><span class="p">);</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="nx">point</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">lower48Stream</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
          <span class="nx">alaskaStream</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
          <span class="nx">hawaiiStream</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
        <span class="p">},</span>
        <span class="nx">sphere</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">lower48Stream</span><span class="p">.</span><span class="nx">sphere</span><span class="p">();</span>
          <span class="nx">alaskaStream</span><span class="p">.</span><span class="nx">sphere</span><span class="p">();</span>
          <span class="nx">hawaiiStream</span><span class="p">.</span><span class="nx">sphere</span><span class="p">();</span>
        <span class="p">},</span>
        <span class="nx">lineStart</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">lower48Stream</span><span class="p">.</span><span class="nx">lineStart</span><span class="p">();</span>
          <span class="nx">alaskaStream</span><span class="p">.</span><span class="nx">lineStart</span><span class="p">();</span>
          <span class="nx">hawaiiStream</span><span class="p">.</span><span class="nx">lineStart</span><span class="p">();</span>
        <span class="p">},</span>
        <span class="nx">lineEnd</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">lower48Stream</span><span class="p">.</span><span class="nx">lineEnd</span><span class="p">();</span>
          <span class="nx">alaskaStream</span><span class="p">.</span><span class="nx">lineEnd</span><span class="p">();</span>
          <span class="nx">hawaiiStream</span><span class="p">.</span><span class="nx">lineEnd</span><span class="p">();</span>
        <span class="p">},</span>
        <span class="nx">polygonStart</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">lower48Stream</span><span class="p">.</span><span class="nx">polygonStart</span><span class="p">();</span>
          <span class="nx">alaskaStream</span><span class="p">.</span><span class="nx">polygonStart</span><span class="p">();</span>
          <span class="nx">hawaiiStream</span><span class="p">.</span><span class="nx">polygonStart</span><span class="p">();</span>
        <span class="p">},</span>
        <span class="nx">polygonEnd</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">lower48Stream</span><span class="p">.</span><span class="nx">polygonEnd</span><span class="p">();</span>
          <span class="nx">alaskaStream</span><span class="p">.</span><span class="nx">polygonEnd</span><span class="p">();</span>
          <span class="nx">hawaiiStream</span><span class="p">.</span><span class="nx">polygonEnd</span><span class="p">();</span>
        <span class="p">}</span>
      <span class="p">};</span>
    <span class="p">};</span>
    <span class="nx">albersUsa</span><span class="p">.</span><span class="nx">precision</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">lower48</span><span class="p">.</span><span class="nx">precision</span><span class="p">();</span>
      <span class="nx">lower48</span><span class="p">.</span><span class="nx">precision</span><span class="p">(</span><span class="nx">_</span><span class="p">);</span>
      <span class="nx">alaska</span><span class="p">.</span><span class="nx">precision</span><span class="p">(</span><span class="nx">_</span><span class="p">);</span>
      <span class="nx">hawaii</span><span class="p">.</span><span class="nx">precision</span><span class="p">(</span><span class="nx">_</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">albersUsa</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">albersUsa</span><span class="p">.</span><span class="nx">scale</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">lower48</span><span class="p">.</span><span class="nx">scale</span><span class="p">();</span>
      <span class="nx">lower48</span><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="nx">_</span><span class="p">);</span>
      <span class="nx">alaska</span><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="nx">_</span> <span class="o">*</span> <span class="p">.</span><span class="mi">35</span><span class="p">);</span>
      <span class="nx">hawaii</span><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="nx">_</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">albersUsa</span><span class="p">.</span><span class="nx">translate</span><span class="p">(</span><span class="nx">lower48</span><span class="p">.</span><span class="nx">translate</span><span class="p">());</span>
    <span class="p">};</span>
    <span class="nx">albersUsa</span><span class="p">.</span><span class="nx">translate</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">lower48</span><span class="p">.</span><span class="nx">translate</span><span class="p">();</span>
      <span class="kd">var</span> <span class="nx">k</span> <span class="o">=</span> <span class="nx">lower48</span><span class="p">.</span><span class="nx">scale</span><span class="p">(),</span> <span class="nx">x</span> <span class="o">=</span> <span class="o">+</span><span class="nx">_</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y</span> <span class="o">=</span> <span class="o">+</span><span class="nx">_</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
      <span class="nx">lower48Point</span> <span class="o">=</span> <span class="nx">lower48</span><span class="p">.</span><span class="nx">translate</span><span class="p">(</span><span class="nx">_</span><span class="p">).</span><span class="nx">clipExtent</span><span class="p">([</span> <span class="p">[</span> <span class="nx">x</span> <span class="o">-</span> <span class="p">.</span><span class="mi">455</span> <span class="o">*</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">y</span> <span class="o">-</span> <span class="p">.</span><span class="mi">238</span> <span class="o">*</span> <span class="nx">k</span> <span class="p">],</span> <span class="p">[</span> <span class="nx">x</span> <span class="o">+</span> <span class="p">.</span><span class="mi">455</span> <span class="o">*</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">y</span> <span class="o">+</span> <span class="p">.</span><span class="mi">238</span> <span class="o">*</span> <span class="nx">k</span> <span class="p">]</span> <span class="p">]).</span><span class="nx">stream</span><span class="p">(</span><span class="nx">pointStream</span><span class="p">).</span><span class="nx">point</span><span class="p">;</span>
      <span class="nx">alaskaPoint</span> <span class="o">=</span> <span class="nx">alaska</span><span class="p">.</span><span class="nx">translate</span><span class="p">([</span> <span class="nx">x</span> <span class="o">-</span> <span class="p">.</span><span class="mi">307</span> <span class="o">*</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">y</span> <span class="o">+</span> <span class="p">.</span><span class="mi">201</span> <span class="o">*</span> <span class="nx">k</span> <span class="p">]).</span><span class="nx">clipExtent</span><span class="p">([</span> <span class="p">[</span> <span class="nx">x</span> <span class="o">-</span> <span class="p">.</span><span class="mi">425</span> <span class="o">*</span> <span class="nx">k</span> <span class="o">+</span> <span class="err">ε</span><span class="p">,</span> <span class="nx">y</span> <span class="o">+</span> <span class="p">.</span><span class="mi">12</span> <span class="o">*</span> <span class="nx">k</span> <span class="o">+</span> <span class="err">ε</span> <span class="p">],</span> <span class="p">[</span> <span class="nx">x</span> <span class="o">-</span> <span class="p">.</span><span class="mi">214</span> <span class="o">*</span> <span class="nx">k</span> <span class="o">-</span> <span class="err">ε</span><span class="p">,</span> <span class="nx">y</span> <span class="o">+</span> <span class="p">.</span><span class="mi">234</span> <span class="o">*</span> <span class="nx">k</span> <span class="o">-</span> <span class="err">ε</span> <span class="p">]</span> <span class="p">]).</span><span class="nx">stream</span><span class="p">(</span><span class="nx">pointStream</span><span class="p">).</span><span class="nx">point</span><span class="p">;</span>
      <span class="nx">hawaiiPoint</span> <span class="o">=</span> <span class="nx">hawaii</span><span class="p">.</span><span class="nx">translate</span><span class="p">([</span> <span class="nx">x</span> <span class="o">-</span> <span class="p">.</span><span class="mi">205</span> <span class="o">*</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">y</span> <span class="o">+</span> <span class="p">.</span><span class="mi">212</span> <span class="o">*</span> <span class="nx">k</span> <span class="p">]).</span><span class="nx">clipExtent</span><span class="p">([</span> <span class="p">[</span> <span class="nx">x</span> <span class="o">-</span> <span class="p">.</span><span class="mi">214</span> <span class="o">*</span> <span class="nx">k</span> <span class="o">+</span> <span class="err">ε</span><span class="p">,</span> <span class="nx">y</span> <span class="o">+</span> <span class="p">.</span><span class="mi">166</span> <span class="o">*</span> <span class="nx">k</span> <span class="o">+</span> <span class="err">ε</span> <span class="p">],</span> <span class="p">[</span> <span class="nx">x</span> <span class="o">-</span> <span class="p">.</span><span class="mi">115</span> <span class="o">*</span> <span class="nx">k</span> <span class="o">-</span> <span class="err">ε</span><span class="p">,</span> <span class="nx">y</span> <span class="o">+</span> <span class="p">.</span><span class="mi">234</span> <span class="o">*</span> <span class="nx">k</span> <span class="o">-</span> <span class="err">ε</span> <span class="p">]</span> <span class="p">]).</span><span class="nx">stream</span><span class="p">(</span><span class="nx">pointStream</span><span class="p">).</span><span class="nx">point</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">albersUsa</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">albersUsa</span><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="mi">1070</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">d3_geo_pathAreaSum</span><span class="p">,</span> <span class="nx">d3_geo_pathAreaPolygon</span><span class="p">,</span> <span class="nx">d3_geo_pathArea</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">point</span><span class="o">:</span> <span class="nx">d3_noop</span><span class="p">,</span>
    <span class="nx">lineStart</span><span class="o">:</span> <span class="nx">d3_noop</span><span class="p">,</span>
    <span class="nx">lineEnd</span><span class="o">:</span> <span class="nx">d3_noop</span><span class="p">,</span>
    <span class="nx">polygonStart</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">d3_geo_pathAreaPolygon</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">d3_geo_pathArea</span><span class="p">.</span><span class="nx">lineStart</span> <span class="o">=</span> <span class="nx">d3_geo_pathAreaRingStart</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">polygonEnd</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">d3_geo_pathArea</span><span class="p">.</span><span class="nx">lineStart</span> <span class="o">=</span> <span class="nx">d3_geo_pathArea</span><span class="p">.</span><span class="nx">lineEnd</span> <span class="o">=</span> <span class="nx">d3_geo_pathArea</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">d3_noop</span><span class="p">;</span>
      <span class="nx">d3_geo_pathAreaSum</span> <span class="o">+=</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">d3_geo_pathAreaPolygon</span> <span class="o">/</span> <span class="mi">2</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_geo_pathAreaRingStart</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">x00</span><span class="p">,</span> <span class="nx">y00</span><span class="p">,</span> <span class="nx">x0</span><span class="p">,</span> <span class="nx">y0</span><span class="p">;</span>
    <span class="nx">d3_geo_pathArea</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">d3_geo_pathArea</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">nextPoint</span><span class="p">;</span>
      <span class="nx">x00</span> <span class="o">=</span> <span class="nx">x0</span> <span class="o">=</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y00</span> <span class="o">=</span> <span class="nx">y0</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="kd">function</span> <span class="nx">nextPoint</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">d3_geo_pathAreaPolygon</span> <span class="o">+=</span> <span class="nx">y0</span> <span class="o">*</span> <span class="nx">x</span> <span class="o">-</span> <span class="nx">x0</span> <span class="o">*</span> <span class="nx">y</span><span class="p">;</span>
      <span class="nx">x0</span> <span class="o">=</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y0</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">d3_geo_pathArea</span><span class="p">.</span><span class="nx">lineEnd</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">nextPoint</span><span class="p">(</span><span class="nx">x00</span><span class="p">,</span> <span class="nx">y00</span><span class="p">);</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">d3_geo_pathBoundsX0</span><span class="p">,</span> <span class="nx">d3_geo_pathBoundsY0</span><span class="p">,</span> <span class="nx">d3_geo_pathBoundsX1</span><span class="p">,</span> <span class="nx">d3_geo_pathBoundsY1</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">d3_geo_pathBounds</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">point</span><span class="o">:</span> <span class="nx">d3_geo_pathBoundsPoint</span><span class="p">,</span>
    <span class="nx">lineStart</span><span class="o">:</span> <span class="nx">d3_noop</span><span class="p">,</span>
    <span class="nx">lineEnd</span><span class="o">:</span> <span class="nx">d3_noop</span><span class="p">,</span>
    <span class="nx">polygonStart</span><span class="o">:</span> <span class="nx">d3_noop</span><span class="p">,</span>
    <span class="nx">polygonEnd</span><span class="o">:</span> <span class="nx">d3_noop</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_geo_pathBoundsPoint</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">x</span> <span class="o">&lt;</span> <span class="nx">d3_geo_pathBoundsX0</span><span class="p">)</span> <span class="nx">d3_geo_pathBoundsX0</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">x</span> <span class="o">&gt;</span> <span class="nx">d3_geo_pathBoundsX1</span><span class="p">)</span> <span class="nx">d3_geo_pathBoundsX1</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">y</span> <span class="o">&lt;</span> <span class="nx">d3_geo_pathBoundsY0</span><span class="p">)</span> <span class="nx">d3_geo_pathBoundsY0</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">y</span> <span class="o">&gt;</span> <span class="nx">d3_geo_pathBoundsY1</span><span class="p">)</span> <span class="nx">d3_geo_pathBoundsY1</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_pathBuffer</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">pointCircle</span> <span class="o">=</span> <span class="nx">d3_geo_pathBufferCircle</span><span class="p">(</span><span class="mf">4.5</span><span class="p">),</span> <span class="nx">buffer</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="kd">var</span> <span class="nx">stream</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">point</span><span class="o">:</span> <span class="nx">point</span><span class="p">,</span>
      <span class="nx">lineStart</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">stream</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">pointLineStart</span><span class="p">;</span>
      <span class="p">},</span>
      <span class="nx">lineEnd</span><span class="o">:</span> <span class="nx">lineEnd</span><span class="p">,</span>
      <span class="nx">polygonStart</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">stream</span><span class="p">.</span><span class="nx">lineEnd</span> <span class="o">=</span> <span class="nx">lineEndPolygon</span><span class="p">;</span>
      <span class="p">},</span>
      <span class="nx">polygonEnd</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">stream</span><span class="p">.</span><span class="nx">lineEnd</span> <span class="o">=</span> <span class="nx">lineEnd</span><span class="p">;</span>
        <span class="nx">stream</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">point</span><span class="p">;</span>
      <span class="p">},</span>
      <span class="nx">pointRadius</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">pointCircle</span> <span class="o">=</span> <span class="nx">d3_geo_pathBufferCircle</span><span class="p">(</span><span class="nx">_</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">stream</span><span class="p">;</span>
      <span class="p">},</span>
      <span class="nx">result</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">buffer</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">);</span>
          <span class="nx">buffer</span> <span class="o">=</span> <span class="p">[];</span>
          <span class="k">return</span> <span class="nx">result</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">};</span>
    <span class="kd">function</span> <span class="nx">point</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">buffer</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;M&quot;</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">pointCircle</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">pointLineStart</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">buffer</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;M&quot;</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
      <span class="nx">stream</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">pointLine</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">pointLine</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">buffer</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;L&quot;</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">lineEnd</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">stream</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">point</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">lineEndPolygon</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">buffer</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;Z&quot;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">stream</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_pathBufferCircle</span><span class="p">(</span><span class="nx">radius</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">&quot;m0,&quot;</span> <span class="o">+</span> <span class="nx">radius</span> <span class="o">+</span> <span class="s2">&quot;a&quot;</span> <span class="o">+</span> <span class="nx">radius</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">radius</span> <span class="o">+</span> <span class="s2">&quot; 0 1,1 0,&quot;</span> <span class="o">+</span> <span class="o">-</span><span class="mi">2</span> <span class="o">*</span> <span class="nx">radius</span> <span class="o">+</span> <span class="s2">&quot;a&quot;</span> <span class="o">+</span> <span class="nx">radius</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">radius</span> <span class="o">+</span> <span class="s2">&quot; 0 1,1 0,&quot;</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="nx">radius</span> <span class="o">+</span> <span class="s2">&quot;z&quot;</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">d3_geo_pathCentroid</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">point</span><span class="o">:</span> <span class="nx">d3_geo_pathCentroidPoint</span><span class="p">,</span>
    <span class="nx">lineStart</span><span class="o">:</span> <span class="nx">d3_geo_pathCentroidLineStart</span><span class="p">,</span>
    <span class="nx">lineEnd</span><span class="o">:</span> <span class="nx">d3_geo_pathCentroidLineEnd</span><span class="p">,</span>
    <span class="nx">polygonStart</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">d3_geo_pathCentroid</span><span class="p">.</span><span class="nx">lineStart</span> <span class="o">=</span> <span class="nx">d3_geo_pathCentroidRingStart</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">polygonEnd</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">d3_geo_pathCentroid</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">d3_geo_pathCentroidPoint</span><span class="p">;</span>
      <span class="nx">d3_geo_pathCentroid</span><span class="p">.</span><span class="nx">lineStart</span> <span class="o">=</span> <span class="nx">d3_geo_pathCentroidLineStart</span><span class="p">;</span>
      <span class="nx">d3_geo_pathCentroid</span><span class="p">.</span><span class="nx">lineEnd</span> <span class="o">=</span> <span class="nx">d3_geo_pathCentroidLineEnd</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_geo_pathCentroidPoint</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">d3_geo_centroidX0</span> <span class="o">+=</span> <span class="nx">x</span><span class="p">;</span>
    <span class="nx">d3_geo_centroidY0</span> <span class="o">+=</span> <span class="nx">y</span><span class="p">;</span>
    <span class="o">++</span><span class="nx">d3_geo_centroidZ0</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_pathCentroidLineStart</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">x0</span><span class="p">,</span> <span class="nx">y0</span><span class="p">;</span>
    <span class="nx">d3_geo_pathCentroid</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">d3_geo_pathCentroid</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">nextPoint</span><span class="p">;</span>
      <span class="nx">d3_geo_pathCentroidPoint</span><span class="p">(</span><span class="nx">x0</span> <span class="o">=</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y0</span> <span class="o">=</span> <span class="nx">y</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="kd">function</span> <span class="nx">nextPoint</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">dx</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">-</span> <span class="nx">x0</span><span class="p">,</span> <span class="nx">dy</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">-</span> <span class="nx">y0</span><span class="p">,</span> <span class="nx">z</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">dx</span> <span class="o">*</span> <span class="nx">dx</span> <span class="o">+</span> <span class="nx">dy</span> <span class="o">*</span> <span class="nx">dy</span><span class="p">);</span>
      <span class="nx">d3_geo_centroidX1</span> <span class="o">+=</span> <span class="nx">z</span> <span class="o">*</span> <span class="p">(</span><span class="nx">x0</span> <span class="o">+</span> <span class="nx">x</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
      <span class="nx">d3_geo_centroidY1</span> <span class="o">+=</span> <span class="nx">z</span> <span class="o">*</span> <span class="p">(</span><span class="nx">y0</span> <span class="o">+</span> <span class="nx">y</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
      <span class="nx">d3_geo_centroidZ1</span> <span class="o">+=</span> <span class="nx">z</span><span class="p">;</span>
      <span class="nx">d3_geo_pathCentroidPoint</span><span class="p">(</span><span class="nx">x0</span> <span class="o">=</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y0</span> <span class="o">=</span> <span class="nx">y</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_pathCentroidLineEnd</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">d3_geo_pathCentroid</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">d3_geo_pathCentroidPoint</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_pathCentroidRingStart</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">x00</span><span class="p">,</span> <span class="nx">y00</span><span class="p">,</span> <span class="nx">x0</span><span class="p">,</span> <span class="nx">y0</span><span class="p">;</span>
    <span class="nx">d3_geo_pathCentroid</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">d3_geo_pathCentroid</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">nextPoint</span><span class="p">;</span>
      <span class="nx">d3_geo_pathCentroidPoint</span><span class="p">(</span><span class="nx">x00</span> <span class="o">=</span> <span class="nx">x0</span> <span class="o">=</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y00</span> <span class="o">=</span> <span class="nx">y0</span> <span class="o">=</span> <span class="nx">y</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="kd">function</span> <span class="nx">nextPoint</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">dx</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">-</span> <span class="nx">x0</span><span class="p">,</span> <span class="nx">dy</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">-</span> <span class="nx">y0</span><span class="p">,</span> <span class="nx">z</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">dx</span> <span class="o">*</span> <span class="nx">dx</span> <span class="o">+</span> <span class="nx">dy</span> <span class="o">*</span> <span class="nx">dy</span><span class="p">);</span>
      <span class="nx">d3_geo_centroidX1</span> <span class="o">+=</span> <span class="nx">z</span> <span class="o">*</span> <span class="p">(</span><span class="nx">x0</span> <span class="o">+</span> <span class="nx">x</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
      <span class="nx">d3_geo_centroidY1</span> <span class="o">+=</span> <span class="nx">z</span> <span class="o">*</span> <span class="p">(</span><span class="nx">y0</span> <span class="o">+</span> <span class="nx">y</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
      <span class="nx">d3_geo_centroidZ1</span> <span class="o">+=</span> <span class="nx">z</span><span class="p">;</span>
      <span class="nx">z</span> <span class="o">=</span> <span class="nx">y0</span> <span class="o">*</span> <span class="nx">x</span> <span class="o">-</span> <span class="nx">x0</span> <span class="o">*</span> <span class="nx">y</span><span class="p">;</span>
      <span class="nx">d3_geo_centroidX2</span> <span class="o">+=</span> <span class="nx">z</span> <span class="o">*</span> <span class="p">(</span><span class="nx">x0</span> <span class="o">+</span> <span class="nx">x</span><span class="p">);</span>
      <span class="nx">d3_geo_centroidY2</span> <span class="o">+=</span> <span class="nx">z</span> <span class="o">*</span> <span class="p">(</span><span class="nx">y0</span> <span class="o">+</span> <span class="nx">y</span><span class="p">);</span>
      <span class="nx">d3_geo_centroidZ2</span> <span class="o">+=</span> <span class="nx">z</span> <span class="o">*</span> <span class="mi">3</span><span class="p">;</span>
      <span class="nx">d3_geo_pathCentroidPoint</span><span class="p">(</span><span class="nx">x0</span> <span class="o">=</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y0</span> <span class="o">=</span> <span class="nx">y</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">d3_geo_pathCentroid</span><span class="p">.</span><span class="nx">lineEnd</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">nextPoint</span><span class="p">(</span><span class="nx">x00</span><span class="p">,</span> <span class="nx">y00</span><span class="p">);</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_pathContext</span><span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">pointRadius</span> <span class="o">=</span> <span class="mf">4.5</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">stream</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">point</span><span class="o">:</span> <span class="nx">point</span><span class="p">,</span>
      <span class="nx">lineStart</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">stream</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">pointLineStart</span><span class="p">;</span>
      <span class="p">},</span>
      <span class="nx">lineEnd</span><span class="o">:</span> <span class="nx">lineEnd</span><span class="p">,</span>
      <span class="nx">polygonStart</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">stream</span><span class="p">.</span><span class="nx">lineEnd</span> <span class="o">=</span> <span class="nx">lineEndPolygon</span><span class="p">;</span>
      <span class="p">},</span>
      <span class="nx">polygonEnd</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">stream</span><span class="p">.</span><span class="nx">lineEnd</span> <span class="o">=</span> <span class="nx">lineEnd</span><span class="p">;</span>
        <span class="nx">stream</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">point</span><span class="p">;</span>
      <span class="p">},</span>
      <span class="nx">pointRadius</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">pointRadius</span> <span class="o">=</span> <span class="nx">_</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">stream</span><span class="p">;</span>
      <span class="p">},</span>
      <span class="nx">result</span><span class="o">:</span> <span class="nx">d3_noop</span>
    <span class="p">};</span>
    <span class="kd">function</span> <span class="nx">point</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">context</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
      <span class="nx">context</span><span class="p">.</span><span class="nx">arc</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">pointRadius</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="err">τ</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">pointLineStart</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">context</span><span class="p">.</span><span class="nx">moveTo</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
      <span class="nx">stream</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">pointLine</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">pointLine</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">context</span><span class="p">.</span><span class="nx">lineTo</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">lineEnd</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">stream</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">point</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">lineEndPolygon</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">context</span><span class="p">.</span><span class="nx">closePath</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">stream</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_resample</span><span class="p">(</span><span class="nx">project</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="err">δ</span><span class="mi">2</span> <span class="o">=</span> <span class="p">.</span><span class="mi">5</span><span class="p">,</span> <span class="nx">cosMinDistance</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="mi">30</span> <span class="o">*</span> <span class="nx">d3_radians</span><span class="p">),</span> <span class="nx">maxDepth</span> <span class="o">=</span> <span class="mi">16</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">resample</span><span class="p">(</span><span class="nx">stream</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span><span class="nx">maxDepth</span> <span class="o">?</span> <span class="nx">resampleRecursive</span> <span class="o">:</span> <span class="nx">resampleNone</span><span class="p">)(</span><span class="nx">stream</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">resampleNone</span><span class="p">(</span><span class="nx">stream</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_geo_transformPoint</span><span class="p">(</span><span class="nx">stream</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">x</span> <span class="o">=</span> <span class="nx">project</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
        <span class="nx">stream</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="nx">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
      <span class="p">});</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">resampleRecursive</span><span class="p">(</span><span class="nx">stream</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="err">λ</span><span class="mi">00</span><span class="p">,</span> <span class="err">φ</span><span class="mi">00</span><span class="p">,</span> <span class="nx">x00</span><span class="p">,</span> <span class="nx">y00</span><span class="p">,</span> <span class="nx">a00</span><span class="p">,</span> <span class="nx">b00</span><span class="p">,</span> <span class="nx">c00</span><span class="p">,</span> <span class="err">λ</span><span class="mi">0</span><span class="p">,</span> <span class="nx">x0</span><span class="p">,</span> <span class="nx">y0</span><span class="p">,</span> <span class="nx">a0</span><span class="p">,</span> <span class="nx">b0</span><span class="p">,</span> <span class="nx">c0</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">resample</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">point</span><span class="o">:</span> <span class="nx">point</span><span class="p">,</span>
        <span class="nx">lineStart</span><span class="o">:</span> <span class="nx">lineStart</span><span class="p">,</span>
        <span class="nx">lineEnd</span><span class="o">:</span> <span class="nx">lineEnd</span><span class="p">,</span>
        <span class="nx">polygonStart</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">stream</span><span class="p">.</span><span class="nx">polygonStart</span><span class="p">();</span>
          <span class="nx">resample</span><span class="p">.</span><span class="nx">lineStart</span> <span class="o">=</span> <span class="nx">ringStart</span><span class="p">;</span>
        <span class="p">},</span>
        <span class="nx">polygonEnd</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">stream</span><span class="p">.</span><span class="nx">polygonEnd</span><span class="p">();</span>
          <span class="nx">resample</span><span class="p">.</span><span class="nx">lineStart</span> <span class="o">=</span> <span class="nx">lineStart</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">};</span>
      <span class="kd">function</span> <span class="nx">point</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">x</span> <span class="o">=</span> <span class="nx">project</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
        <span class="nx">stream</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="nx">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
      <span class="p">}</span>
      <span class="kd">function</span> <span class="nx">lineStart</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">x0</span> <span class="o">=</span> <span class="kc">NaN</span><span class="p">;</span>
        <span class="nx">resample</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">linePoint</span><span class="p">;</span>
        <span class="nx">stream</span><span class="p">.</span><span class="nx">lineStart</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="kd">function</span> <span class="nx">linePoint</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">d3_geo_cartesian</span><span class="p">([</span> <span class="err">λ</span><span class="p">,</span> <span class="err">φ</span> <span class="p">]),</span> <span class="nx">p</span> <span class="o">=</span> <span class="nx">project</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">);</span>
        <span class="nx">resampleLineTo</span><span class="p">(</span><span class="nx">x0</span><span class="p">,</span> <span class="nx">y0</span><span class="p">,</span> <span class="err">λ</span><span class="mi">0</span><span class="p">,</span> <span class="nx">a0</span><span class="p">,</span> <span class="nx">b0</span><span class="p">,</span> <span class="nx">c0</span><span class="p">,</span> <span class="nx">x0</span> <span class="o">=</span> <span class="nx">p</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y0</span> <span class="o">=</span> <span class="nx">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="err">λ</span><span class="mi">0</span> <span class="o">=</span> <span class="err">λ</span><span class="p">,</span> <span class="nx">a0</span> <span class="o">=</span> <span class="nx">c</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">b0</span> <span class="o">=</span> <span class="nx">c</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">c0</span> <span class="o">=</span> <span class="nx">c</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nx">maxDepth</span><span class="p">,</span> <span class="nx">stream</span><span class="p">);</span>
        <span class="nx">stream</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="nx">x0</span><span class="p">,</span> <span class="nx">y0</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="kd">function</span> <span class="nx">lineEnd</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">resample</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">point</span><span class="p">;</span>
        <span class="nx">stream</span><span class="p">.</span><span class="nx">lineEnd</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="kd">function</span> <span class="nx">ringStart</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">lineStart</span><span class="p">();</span>
        <span class="nx">resample</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">ringPoint</span><span class="p">;</span>
        <span class="nx">resample</span><span class="p">.</span><span class="nx">lineEnd</span> <span class="o">=</span> <span class="nx">ringEnd</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="kd">function</span> <span class="nx">ringPoint</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">linePoint</span><span class="p">(</span><span class="err">λ</span><span class="mi">00</span> <span class="o">=</span> <span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="mi">00</span> <span class="o">=</span> <span class="err">φ</span><span class="p">),</span> <span class="nx">x00</span> <span class="o">=</span> <span class="nx">x0</span><span class="p">,</span> <span class="nx">y00</span> <span class="o">=</span> <span class="nx">y0</span><span class="p">,</span> <span class="nx">a00</span> <span class="o">=</span> <span class="nx">a0</span><span class="p">,</span> <span class="nx">b00</span> <span class="o">=</span> <span class="nx">b0</span><span class="p">,</span> <span class="nx">c00</span> <span class="o">=</span> <span class="nx">c0</span><span class="p">;</span>
        <span class="nx">resample</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">linePoint</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="kd">function</span> <span class="nx">ringEnd</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">resampleLineTo</span><span class="p">(</span><span class="nx">x0</span><span class="p">,</span> <span class="nx">y0</span><span class="p">,</span> <span class="err">λ</span><span class="mi">0</span><span class="p">,</span> <span class="nx">a0</span><span class="p">,</span> <span class="nx">b0</span><span class="p">,</span> <span class="nx">c0</span><span class="p">,</span> <span class="nx">x00</span><span class="p">,</span> <span class="nx">y00</span><span class="p">,</span> <span class="err">λ</span><span class="mi">00</span><span class="p">,</span> <span class="nx">a00</span><span class="p">,</span> <span class="nx">b00</span><span class="p">,</span> <span class="nx">c00</span><span class="p">,</span> <span class="nx">maxDepth</span><span class="p">,</span> <span class="nx">stream</span><span class="p">);</span>
        <span class="nx">resample</span><span class="p">.</span><span class="nx">lineEnd</span> <span class="o">=</span> <span class="nx">lineEnd</span><span class="p">;</span>
        <span class="nx">lineEnd</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">resample</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">resampleLineTo</span><span class="p">(</span><span class="nx">x0</span><span class="p">,</span> <span class="nx">y0</span><span class="p">,</span> <span class="err">λ</span><span class="mi">0</span><span class="p">,</span> <span class="nx">a0</span><span class="p">,</span> <span class="nx">b0</span><span class="p">,</span> <span class="nx">c0</span><span class="p">,</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span><span class="p">,</span> <span class="err">λ</span><span class="mi">1</span><span class="p">,</span> <span class="nx">a1</span><span class="p">,</span> <span class="nx">b1</span><span class="p">,</span> <span class="nx">c1</span><span class="p">,</span> <span class="nx">depth</span><span class="p">,</span> <span class="nx">stream</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">dx</span> <span class="o">=</span> <span class="nx">x1</span> <span class="o">-</span> <span class="nx">x0</span><span class="p">,</span> <span class="nx">dy</span> <span class="o">=</span> <span class="nx">y1</span> <span class="o">-</span> <span class="nx">y0</span><span class="p">,</span> <span class="nx">d2</span> <span class="o">=</span> <span class="nx">dx</span> <span class="o">*</span> <span class="nx">dx</span> <span class="o">+</span> <span class="nx">dy</span> <span class="o">*</span> <span class="nx">dy</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">d2</span> <span class="o">&gt;</span> <span class="mi">4</span> <span class="o">*</span> <span class="err">δ</span><span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="nx">depth</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">a0</span> <span class="o">+</span> <span class="nx">a1</span><span class="p">,</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">b0</span> <span class="o">+</span> <span class="nx">b1</span><span class="p">,</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">c0</span> <span class="o">+</span> <span class="nx">c1</span><span class="p">,</span> <span class="nx">m</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">a</span> <span class="o">*</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">*</span> <span class="nx">b</span> <span class="o">+</span> <span class="nx">c</span> <span class="o">*</span> <span class="nx">c</span><span class="p">),</span> <span class="err">φ</span><span class="mi">2</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">asin</span><span class="p">(</span><span class="nx">c</span> <span class="o">/=</span> <span class="nx">m</span><span class="p">),</span> <span class="err">λ</span><span class="mi">2</span> <span class="o">=</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">abs</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&lt;</span> <span class="err">ε</span> <span class="o">||</span> <span class="nx">abs</span><span class="p">(</span><span class="err">λ</span><span class="mi">0</span> <span class="o">-</span> <span class="err">λ</span><span class="mi">1</span><span class="p">)</span> <span class="o">&lt;</span> <span class="err">ε</span> <span class="o">?</span> <span class="p">(</span><span class="err">λ</span><span class="mi">0</span> <span class="o">+</span> <span class="err">λ</span><span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan2</span><span class="p">(</span><span class="nx">b</span><span class="p">,</span> <span class="nx">a</span><span class="p">),</span> <span class="nx">p</span> <span class="o">=</span> <span class="nx">project</span><span class="p">(</span><span class="err">λ</span><span class="mi">2</span><span class="p">,</span> <span class="err">φ</span><span class="mi">2</span><span class="p">),</span> <span class="nx">x2</span> <span class="o">=</span> <span class="nx">p</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y2</span> <span class="o">=</span> <span class="nx">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">dx2</span> <span class="o">=</span> <span class="nx">x2</span> <span class="o">-</span> <span class="nx">x0</span><span class="p">,</span> <span class="nx">dy2</span> <span class="o">=</span> <span class="nx">y2</span> <span class="o">-</span> <span class="nx">y0</span><span class="p">,</span> <span class="nx">dz</span> <span class="o">=</span> <span class="nx">dy</span> <span class="o">*</span> <span class="nx">dx2</span> <span class="o">-</span> <span class="nx">dx</span> <span class="o">*</span> <span class="nx">dy2</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">dz</span> <span class="o">*</span> <span class="nx">dz</span> <span class="o">/</span> <span class="nx">d2</span> <span class="o">&gt;</span> <span class="err">δ</span><span class="mi">2</span> <span class="o">||</span> <span class="nx">abs</span><span class="p">((</span><span class="nx">dx</span> <span class="o">*</span> <span class="nx">dx2</span> <span class="o">+</span> <span class="nx">dy</span> <span class="o">*</span> <span class="nx">dy2</span><span class="p">)</span> <span class="o">/</span> <span class="nx">d2</span> <span class="o">-</span> <span class="p">.</span><span class="mi">5</span><span class="p">)</span> <span class="o">&gt;</span> <span class="p">.</span><span class="mi">3</span> <span class="o">||</span> <span class="nx">a0</span> <span class="o">*</span> <span class="nx">a1</span> <span class="o">+</span> <span class="nx">b0</span> <span class="o">*</span> <span class="nx">b1</span> <span class="o">+</span> <span class="nx">c0</span> <span class="o">*</span> <span class="nx">c1</span> <span class="o">&lt;</span> <span class="nx">cosMinDistance</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">resampleLineTo</span><span class="p">(</span><span class="nx">x0</span><span class="p">,</span> <span class="nx">y0</span><span class="p">,</span> <span class="err">λ</span><span class="mi">0</span><span class="p">,</span> <span class="nx">a0</span><span class="p">,</span> <span class="nx">b0</span><span class="p">,</span> <span class="nx">c0</span><span class="p">,</span> <span class="nx">x2</span><span class="p">,</span> <span class="nx">y2</span><span class="p">,</span> <span class="err">λ</span><span class="mi">2</span><span class="p">,</span> <span class="nx">a</span> <span class="o">/=</span> <span class="nx">m</span><span class="p">,</span> <span class="nx">b</span> <span class="o">/=</span> <span class="nx">m</span><span class="p">,</span> <span class="nx">c</span><span class="p">,</span> <span class="nx">depth</span><span class="p">,</span> <span class="nx">stream</span><span class="p">);</span>
          <span class="nx">stream</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="nx">x2</span><span class="p">,</span> <span class="nx">y2</span><span class="p">);</span>
          <span class="nx">resampleLineTo</span><span class="p">(</span><span class="nx">x2</span><span class="p">,</span> <span class="nx">y2</span><span class="p">,</span> <span class="err">λ</span><span class="mi">2</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">,</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span><span class="p">,</span> <span class="err">λ</span><span class="mi">1</span><span class="p">,</span> <span class="nx">a1</span><span class="p">,</span> <span class="nx">b1</span><span class="p">,</span> <span class="nx">c1</span><span class="p">,</span> <span class="nx">depth</span><span class="p">,</span> <span class="nx">stream</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="nx">resample</span><span class="p">.</span><span class="nx">precision</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="err">δ</span><span class="mi">2</span><span class="p">);</span>
      <span class="nx">maxDepth</span> <span class="o">=</span> <span class="p">(</span><span class="err">δ</span><span class="mi">2</span> <span class="o">=</span> <span class="nx">_</span> <span class="o">*</span> <span class="nx">_</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="mi">16</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">resample</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">resample</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">path</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">pointRadius</span> <span class="o">=</span> <span class="mf">4.5</span><span class="p">,</span> <span class="nx">projection</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">projectStream</span><span class="p">,</span> <span class="nx">contextStream</span><span class="p">,</span> <span class="nx">cacheStream</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">path</span><span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">pointRadius</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span><span class="p">)</span> <span class="nx">contextStream</span><span class="p">.</span><span class="nx">pointRadius</span><span class="p">(</span><span class="o">+</span><span class="nx">pointRadius</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">));</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">cacheStream</span> <span class="o">||</span> <span class="o">!</span><span class="nx">cacheStream</span><span class="p">.</span><span class="nx">valid</span><span class="p">)</span> <span class="nx">cacheStream</span> <span class="o">=</span> <span class="nx">projectStream</span><span class="p">(</span><span class="nx">contextStream</span><span class="p">);</span>
        <span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">stream</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">cacheStream</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">contextStream</span><span class="p">.</span><span class="nx">result</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="nx">path</span><span class="p">.</span><span class="nx">area</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">d3_geo_pathAreaSum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">stream</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">projectStream</span><span class="p">(</span><span class="nx">d3_geo_pathArea</span><span class="p">));</span>
      <span class="k">return</span> <span class="nx">d3_geo_pathAreaSum</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">path</span><span class="p">.</span><span class="nx">centroid</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">d3_geo_centroidX0</span> <span class="o">=</span> <span class="nx">d3_geo_centroidY0</span> <span class="o">=</span> <span class="nx">d3_geo_centroidZ0</span> <span class="o">=</span> <span class="nx">d3_geo_centroidX1</span> <span class="o">=</span> <span class="nx">d3_geo_centroidY1</span> <span class="o">=</span> <span class="nx">d3_geo_centroidZ1</span> <span class="o">=</span> <span class="nx">d3_geo_centroidX2</span> <span class="o">=</span> <span class="nx">d3_geo_centroidY2</span> <span class="o">=</span> <span class="nx">d3_geo_centroidZ2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">stream</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">projectStream</span><span class="p">(</span><span class="nx">d3_geo_pathCentroid</span><span class="p">));</span>
      <span class="k">return</span> <span class="nx">d3_geo_centroidZ2</span> <span class="o">?</span> <span class="p">[</span> <span class="nx">d3_geo_centroidX2</span> <span class="o">/</span> <span class="nx">d3_geo_centroidZ2</span><span class="p">,</span> <span class="nx">d3_geo_centroidY2</span> <span class="o">/</span> <span class="nx">d3_geo_centroidZ2</span> <span class="p">]</span> <span class="o">:</span> <span class="nx">d3_geo_centroidZ1</span> <span class="o">?</span> <span class="p">[</span> <span class="nx">d3_geo_centroidX1</span> <span class="o">/</span> <span class="nx">d3_geo_centroidZ1</span><span class="p">,</span> <span class="nx">d3_geo_centroidY1</span> <span class="o">/</span> <span class="nx">d3_geo_centroidZ1</span> <span class="p">]</span> <span class="o">:</span> <span class="nx">d3_geo_centroidZ0</span> <span class="o">?</span> <span class="p">[</span> <span class="nx">d3_geo_centroidX0</span> <span class="o">/</span> <span class="nx">d3_geo_centroidZ0</span><span class="p">,</span> <span class="nx">d3_geo_centroidY0</span> <span class="o">/</span> <span class="nx">d3_geo_centroidZ0</span> <span class="p">]</span> <span class="o">:</span> <span class="p">[</span> <span class="kc">NaN</span><span class="p">,</span> <span class="kc">NaN</span> <span class="p">];</span>
    <span class="p">};</span>
    <span class="nx">path</span><span class="p">.</span><span class="nx">bounds</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">d3_geo_pathBoundsX1</span> <span class="o">=</span> <span class="nx">d3_geo_pathBoundsY1</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="nx">d3_geo_pathBoundsX0</span> <span class="o">=</span> <span class="nx">d3_geo_pathBoundsY0</span> <span class="o">=</span> <span class="kc">Infinity</span><span class="p">);</span>
      <span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">stream</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">projectStream</span><span class="p">(</span><span class="nx">d3_geo_pathBounds</span><span class="p">));</span>
      <span class="k">return</span> <span class="p">[</span> <span class="p">[</span> <span class="nx">d3_geo_pathBoundsX0</span><span class="p">,</span> <span class="nx">d3_geo_pathBoundsY0</span> <span class="p">],</span> <span class="p">[</span> <span class="nx">d3_geo_pathBoundsX1</span><span class="p">,</span> <span class="nx">d3_geo_pathBoundsY1</span> <span class="p">]</span> <span class="p">];</span>
    <span class="p">};</span>
    <span class="nx">path</span><span class="p">.</span><span class="nx">projection</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">projection</span><span class="p">;</span>
      <span class="nx">projectStream</span> <span class="o">=</span> <span class="p">(</span><span class="nx">projection</span> <span class="o">=</span> <span class="nx">_</span><span class="p">)</span> <span class="o">?</span> <span class="nx">_</span><span class="p">.</span><span class="nx">stream</span> <span class="o">||</span> <span class="nx">d3_geo_pathProjectStream</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="o">:</span> <span class="nx">d3_identity</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">reset</span><span class="p">();</span>
    <span class="p">};</span>
    <span class="nx">path</span><span class="p">.</span><span class="nx">context</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">context</span><span class="p">;</span>
      <span class="nx">contextStream</span> <span class="o">=</span> <span class="p">(</span><span class="nx">context</span> <span class="o">=</span> <span class="nx">_</span><span class="p">)</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="k">new</span> <span class="nx">d3_geo_pathBuffer</span><span class="p">()</span> <span class="o">:</span> <span class="k">new</span> <span class="nx">d3_geo_pathContext</span><span class="p">(</span><span class="nx">_</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">pointRadius</span> <span class="o">!==</span> <span class="s2">&quot;function&quot;</span><span class="p">)</span> <span class="nx">contextStream</span><span class="p">.</span><span class="nx">pointRadius</span><span class="p">(</span><span class="nx">pointRadius</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">reset</span><span class="p">();</span>
    <span class="p">};</span>
    <span class="nx">path</span><span class="p">.</span><span class="nx">pointRadius</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">pointRadius</span><span class="p">;</span>
      <span class="nx">pointRadius</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">_</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">?</span> <span class="nx">_</span> <span class="o">:</span> <span class="p">(</span><span class="nx">contextStream</span><span class="p">.</span><span class="nx">pointRadius</span><span class="p">(</span><span class="o">+</span><span class="nx">_</span><span class="p">),</span> <span class="o">+</span><span class="nx">_</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">path</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="kd">function</span> <span class="nx">reset</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">cacheStream</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">path</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">path</span><span class="p">.</span><span class="nx">projection</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">albersUsa</span><span class="p">()).</span><span class="nx">context</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_geo_pathProjectStream</span><span class="p">(</span><span class="nx">project</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">resample</span> <span class="o">=</span> <span class="nx">d3_geo_resample</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">project</span><span class="p">([</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">d3_degrees</span><span class="p">,</span> <span class="nx">y</span> <span class="o">*</span> <span class="nx">d3_degrees</span> <span class="p">]);</span>
    <span class="p">});</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">stream</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_geo_projectionRadians</span><span class="p">(</span><span class="nx">resample</span><span class="p">(</span><span class="nx">stream</span><span class="p">));</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">transform</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">methods</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">stream</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">stream</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">transform</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">d3_geo_transform</span><span class="p">(</span><span class="nx">stream</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">k</span> <span class="k">in</span> <span class="nx">methods</span><span class="p">)</span> <span class="nx">transform</span><span class="p">[</span><span class="nx">k</span><span class="p">]</span> <span class="o">=</span> <span class="nx">methods</span><span class="p">[</span><span class="nx">k</span><span class="p">];</span>
        <span class="k">return</span> <span class="nx">transform</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_geo_transform</span><span class="p">(</span><span class="nx">stream</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">stream</span> <span class="o">=</span> <span class="nx">stream</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">d3_geo_transform</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">point</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">stream</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">sphere</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">stream</span><span class="p">.</span><span class="nx">sphere</span><span class="p">();</span>
    <span class="p">},</span>
    <span class="nx">lineStart</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">stream</span><span class="p">.</span><span class="nx">lineStart</span><span class="p">();</span>
    <span class="p">},</span>
    <span class="nx">lineEnd</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">stream</span><span class="p">.</span><span class="nx">lineEnd</span><span class="p">();</span>
    <span class="p">},</span>
    <span class="nx">polygonStart</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">stream</span><span class="p">.</span><span class="nx">polygonStart</span><span class="p">();</span>
    <span class="p">},</span>
    <span class="nx">polygonEnd</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">stream</span><span class="p">.</span><span class="nx">polygonEnd</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_geo_transformPoint</span><span class="p">(</span><span class="nx">stream</span><span class="p">,</span> <span class="nx">point</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">point</span><span class="o">:</span> <span class="nx">point</span><span class="p">,</span>
      <span class="nx">sphere</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">stream</span><span class="p">.</span><span class="nx">sphere</span><span class="p">();</span>
      <span class="p">},</span>
      <span class="nx">lineStart</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">stream</span><span class="p">.</span><span class="nx">lineStart</span><span class="p">();</span>
      <span class="p">},</span>
      <span class="nx">lineEnd</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">stream</span><span class="p">.</span><span class="nx">lineEnd</span><span class="p">();</span>
      <span class="p">},</span>
      <span class="nx">polygonStart</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">stream</span><span class="p">.</span><span class="nx">polygonStart</span><span class="p">();</span>
      <span class="p">},</span>
      <span class="nx">polygonEnd</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">stream</span><span class="p">.</span><span class="nx">polygonEnd</span><span class="p">();</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">projection</span> <span class="o">=</span> <span class="nx">d3_geo_projection</span><span class="p">;</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">projectionMutator</span> <span class="o">=</span> <span class="nx">d3_geo_projectionMutator</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">d3_geo_projection</span><span class="p">(</span><span class="nx">project</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_geo_projectionMutator</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">project</span><span class="p">;</span>
    <span class="p">})();</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_projectionMutator</span><span class="p">(</span><span class="nx">projectAt</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">project</span><span class="p">,</span> <span class="nx">rotate</span><span class="p">,</span> <span class="nx">projectRotate</span><span class="p">,</span> <span class="nx">projectResample</span> <span class="o">=</span> <span class="nx">d3_geo_resample</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">x</span> <span class="o">=</span> <span class="nx">project</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
      <span class="k">return</span> <span class="p">[</span> <span class="nx">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nx">k</span> <span class="o">+</span> <span class="err">δ</span><span class="nx">x</span><span class="p">,</span> <span class="err">δ</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nx">k</span> <span class="p">];</span>
    <span class="p">}),</span> <span class="nx">k</span> <span class="o">=</span> <span class="mi">150</span><span class="p">,</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">480</span><span class="p">,</span> <span class="nx">y</span> <span class="o">=</span> <span class="mi">250</span><span class="p">,</span> <span class="err">λ</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="err">φ</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="err">δλ</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="err">δφ</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="err">δγ</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="err">δ</span><span class="nx">x</span><span class="p">,</span> <span class="err">δ</span><span class="nx">y</span><span class="p">,</span> <span class="nx">preclip</span> <span class="o">=</span> <span class="nx">d3_geo_clipAntimeridian</span><span class="p">,</span> <span class="nx">postclip</span> <span class="o">=</span> <span class="nx">d3_identity</span><span class="p">,</span> <span class="nx">clipAngle</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">clipExtent</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">stream</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">projection</span><span class="p">(</span><span class="nx">point</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">point</span> <span class="o">=</span> <span class="nx">projectRotate</span><span class="p">(</span><span class="nx">point</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nx">d3_radians</span><span class="p">,</span> <span class="nx">point</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nx">d3_radians</span><span class="p">);</span>
      <span class="k">return</span> <span class="p">[</span> <span class="nx">point</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nx">k</span> <span class="o">+</span> <span class="err">δ</span><span class="nx">x</span><span class="p">,</span> <span class="err">δ</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">point</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nx">k</span> <span class="p">];</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">invert</span><span class="p">(</span><span class="nx">point</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">point</span> <span class="o">=</span> <span class="nx">projectRotate</span><span class="p">.</span><span class="nx">invert</span><span class="p">((</span><span class="nx">point</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="err">δ</span><span class="nx">x</span><span class="p">)</span> <span class="o">/</span> <span class="nx">k</span><span class="p">,</span> <span class="p">(</span><span class="err">δ</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">point</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="nx">k</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">point</span> <span class="o">&amp;&amp;</span> <span class="p">[</span> <span class="nx">point</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nx">d3_degrees</span><span class="p">,</span> <span class="nx">point</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nx">d3_degrees</span> <span class="p">];</span>
    <span class="p">}</span>
    <span class="nx">projection</span><span class="p">.</span><span class="nx">stream</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">output</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">stream</span><span class="p">)</span> <span class="nx">stream</span><span class="p">.</span><span class="nx">valid</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
      <span class="nx">stream</span> <span class="o">=</span> <span class="nx">d3_geo_projectionRadians</span><span class="p">(</span><span class="nx">preclip</span><span class="p">(</span><span class="nx">rotate</span><span class="p">,</span> <span class="nx">projectResample</span><span class="p">(</span><span class="nx">postclip</span><span class="p">(</span><span class="nx">output</span><span class="p">))));</span>
      <span class="nx">stream</span><span class="p">.</span><span class="nx">valid</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">stream</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">projection</span><span class="p">.</span><span class="nx">clipAngle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">clipAngle</span><span class="p">;</span>
      <span class="nx">preclip</span> <span class="o">=</span> <span class="nx">_</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="p">(</span><span class="nx">clipAngle</span> <span class="o">=</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">d3_geo_clipAntimeridian</span><span class="p">)</span> <span class="o">:</span> <span class="nx">d3_geo_clipCircle</span><span class="p">((</span><span class="nx">clipAngle</span> <span class="o">=</span> <span class="o">+</span><span class="nx">_</span><span class="p">)</span> <span class="o">*</span> <span class="nx">d3_radians</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">invalidate</span><span class="p">();</span>
    <span class="p">};</span>
    <span class="nx">projection</span><span class="p">.</span><span class="nx">clipExtent</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">clipExtent</span><span class="p">;</span>
      <span class="nx">clipExtent</span> <span class="o">=</span> <span class="nx">_</span><span class="p">;</span>
      <span class="nx">postclip</span> <span class="o">=</span> <span class="nx">_</span> <span class="o">?</span> <span class="nx">d3_geo_clipExtent</span><span class="p">(</span><span class="nx">_</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="nx">_</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="nx">_</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="nx">_</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="o">:</span> <span class="nx">d3_identity</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">invalidate</span><span class="p">();</span>
    <span class="p">};</span>
    <span class="nx">projection</span><span class="p">.</span><span class="nx">scale</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">k</span><span class="p">;</span>
      <span class="nx">k</span> <span class="o">=</span> <span class="o">+</span><span class="nx">_</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">reset</span><span class="p">();</span>
    <span class="p">};</span>
    <span class="nx">projection</span><span class="p">.</span><span class="nx">translate</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="p">[</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span> <span class="p">];</span>
      <span class="nx">x</span> <span class="o">=</span> <span class="o">+</span><span class="nx">_</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
      <span class="nx">y</span> <span class="o">=</span> <span class="o">+</span><span class="nx">_</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
      <span class="k">return</span> <span class="nx">reset</span><span class="p">();</span>
    <span class="p">};</span>
    <span class="nx">projection</span><span class="p">.</span><span class="nx">center</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="p">[</span> <span class="err">λ</span> <span class="o">*</span> <span class="nx">d3_degrees</span><span class="p">,</span> <span class="err">φ</span> <span class="o">*</span> <span class="nx">d3_degrees</span> <span class="p">];</span>
      <span class="err">λ</span> <span class="o">=</span> <span class="nx">_</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">%</span> <span class="mi">360</span> <span class="o">*</span> <span class="nx">d3_radians</span><span class="p">;</span>
      <span class="err">φ</span> <span class="o">=</span> <span class="nx">_</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">%</span> <span class="mi">360</span> <span class="o">*</span> <span class="nx">d3_radians</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">reset</span><span class="p">();</span>
    <span class="p">};</span>
    <span class="nx">projection</span><span class="p">.</span><span class="nx">rotate</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="p">[</span> <span class="err">δλ</span> <span class="o">*</span> <span class="nx">d3_degrees</span><span class="p">,</span> <span class="err">δφ</span> <span class="o">*</span> <span class="nx">d3_degrees</span><span class="p">,</span> <span class="err">δγ</span> <span class="o">*</span> <span class="nx">d3_degrees</span> <span class="p">];</span>
      <span class="err">δλ</span> <span class="o">=</span> <span class="nx">_</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">%</span> <span class="mi">360</span> <span class="o">*</span> <span class="nx">d3_radians</span><span class="p">;</span>
      <span class="err">δφ</span> <span class="o">=</span> <span class="nx">_</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">%</span> <span class="mi">360</span> <span class="o">*</span> <span class="nx">d3_radians</span><span class="p">;</span>
      <span class="err">δγ</span> <span class="o">=</span> <span class="nx">_</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="o">?</span> <span class="nx">_</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">%</span> <span class="mi">360</span> <span class="o">*</span> <span class="nx">d3_radians</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">reset</span><span class="p">();</span>
    <span class="p">};</span>
    <span class="nx">d3</span><span class="p">.</span><span class="nx">rebind</span><span class="p">(</span><span class="nx">projection</span><span class="p">,</span> <span class="nx">projectResample</span><span class="p">,</span> <span class="s2">&quot;precision&quot;</span><span class="p">);</span>
    <span class="kd">function</span> <span class="nx">reset</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">projectRotate</span> <span class="o">=</span> <span class="nx">d3_geo_compose</span><span class="p">(</span><span class="nx">rotate</span> <span class="o">=</span> <span class="nx">d3_geo_rotation</span><span class="p">(</span><span class="err">δλ</span><span class="p">,</span> <span class="err">δφ</span><span class="p">,</span> <span class="err">δγ</span><span class="p">),</span> <span class="nx">project</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">center</span> <span class="o">=</span> <span class="nx">project</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">);</span>
      <span class="err">δ</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">-</span> <span class="nx">center</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nx">k</span><span class="p">;</span>
      <span class="err">δ</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">center</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nx">k</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">invalidate</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">invalidate</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">stream</span><span class="p">)</span> <span class="nx">stream</span><span class="p">.</span><span class="nx">valid</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">stream</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">projection</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">project</span> <span class="o">=</span> <span class="nx">projectAt</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
      <span class="nx">projection</span><span class="p">.</span><span class="nx">invert</span> <span class="o">=</span> <span class="nx">project</span><span class="p">.</span><span class="nx">invert</span> <span class="o">&amp;&amp;</span> <span class="nx">invert</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">reset</span><span class="p">();</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_projectionRadians</span><span class="p">(</span><span class="nx">stream</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_geo_transformPoint</span><span class="p">(</span><span class="nx">stream</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">stream</span><span class="p">.</span><span class="nx">point</span><span class="p">(</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">d3_radians</span><span class="p">,</span> <span class="nx">y</span> <span class="o">*</span> <span class="nx">d3_radians</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_equirectangular</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span> <span class="err">λ</span><span class="p">,</span> <span class="err">φ</span> <span class="p">];</span>
  <span class="p">}</span>
  <span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">equirectangular</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_geo_projection</span><span class="p">(</span><span class="nx">d3_geo_equirectangular</span><span class="p">);</span>
  <span class="p">}).</span><span class="nx">raw</span> <span class="o">=</span> <span class="nx">d3_geo_equirectangular</span><span class="p">.</span><span class="nx">invert</span> <span class="o">=</span> <span class="nx">d3_geo_equirectangular</span><span class="p">;</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">rotation</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">rotate</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">rotate</span> <span class="o">=</span> <span class="nx">d3_geo_rotation</span><span class="p">(</span><span class="nx">rotate</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">%</span> <span class="mi">360</span> <span class="o">*</span> <span class="nx">d3_radians</span><span class="p">,</span> <span class="nx">rotate</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nx">d3_radians</span><span class="p">,</span> <span class="nx">rotate</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="o">?</span> <span class="nx">rotate</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="nx">d3_radians</span> <span class="o">:</span> <span class="mi">0</span><span class="p">);</span>
    <span class="kd">function</span> <span class="nx">forward</span><span class="p">(</span><span class="nx">coordinates</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">coordinates</span> <span class="o">=</span> <span class="nx">rotate</span><span class="p">(</span><span class="nx">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nx">d3_radians</span><span class="p">,</span> <span class="nx">coordinates</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nx">d3_radians</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*=</span> <span class="nx">d3_degrees</span><span class="p">,</span> <span class="nx">coordinates</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*=</span> <span class="nx">d3_degrees</span><span class="p">,</span> <span class="nx">coordinates</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">forward</span><span class="p">.</span><span class="nx">invert</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">coordinates</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">coordinates</span> <span class="o">=</span> <span class="nx">rotate</span><span class="p">.</span><span class="nx">invert</span><span class="p">(</span><span class="nx">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nx">d3_radians</span><span class="p">,</span> <span class="nx">coordinates</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nx">d3_radians</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*=</span> <span class="nx">d3_degrees</span><span class="p">,</span> <span class="nx">coordinates</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*=</span> <span class="nx">d3_degrees</span><span class="p">,</span> <span class="nx">coordinates</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">forward</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_geo_identityRotation</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span> <span class="err">λ</span> <span class="o">&gt;</span> <span class="err">π</span> <span class="o">?</span> <span class="err">λ</span> <span class="o">-</span> <span class="err">τ</span> <span class="o">:</span> <span class="err">λ</span> <span class="o">&lt;</span> <span class="o">-</span><span class="err">π</span> <span class="o">?</span> <span class="err">λ</span> <span class="o">+</span> <span class="err">τ</span> <span class="o">:</span> <span class="err">λ</span><span class="p">,</span> <span class="err">φ</span> <span class="p">];</span>
  <span class="p">}</span>
  <span class="nx">d3_geo_identityRotation</span><span class="p">.</span><span class="nx">invert</span> <span class="o">=</span> <span class="nx">d3_geo_equirectangular</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">d3_geo_rotation</span><span class="p">(</span><span class="err">δλ</span><span class="p">,</span> <span class="err">δφ</span><span class="p">,</span> <span class="err">δγ</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="err">δλ</span> <span class="o">?</span> <span class="err">δφ</span> <span class="o">||</span> <span class="err">δγ</span> <span class="o">?</span> <span class="nx">d3_geo_compose</span><span class="p">(</span><span class="nx">d3_geo_rotation</span><span class="err">λ</span><span class="p">(</span><span class="err">δλ</span><span class="p">),</span> <span class="nx">d3_geo_rotation</span><span class="err">φγ</span><span class="p">(</span><span class="err">δφ</span><span class="p">,</span> <span class="err">δγ</span><span class="p">))</span> <span class="o">:</span> <span class="nx">d3_geo_rotation</span><span class="err">λ</span><span class="p">(</span><span class="err">δλ</span><span class="p">)</span> <span class="o">:</span> <span class="err">δφ</span> <span class="o">||</span> <span class="err">δγ</span> <span class="o">?</span> <span class="nx">d3_geo_rotation</span><span class="err">φγ</span><span class="p">(</span><span class="err">δφ</span><span class="p">,</span> <span class="err">δγ</span><span class="p">)</span> <span class="o">:</span> <span class="nx">d3_geo_identityRotation</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_forwardRotation</span><span class="err">λ</span><span class="p">(</span><span class="err">δλ</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="err">λ</span> <span class="o">+=</span> <span class="err">δλ</span><span class="p">,</span> <span class="p">[</span> <span class="err">λ</span> <span class="o">&gt;</span> <span class="err">π</span> <span class="o">?</span> <span class="err">λ</span> <span class="o">-</span> <span class="err">τ</span> <span class="o">:</span> <span class="err">λ</span> <span class="o">&lt;</span> <span class="o">-</span><span class="err">π</span> <span class="o">?</span> <span class="err">λ</span> <span class="o">+</span> <span class="err">τ</span> <span class="o">:</span> <span class="err">λ</span><span class="p">,</span> <span class="err">φ</span> <span class="p">];</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_rotation</span><span class="err">λ</span><span class="p">(</span><span class="err">δλ</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">rotation</span> <span class="o">=</span> <span class="nx">d3_geo_forwardRotation</span><span class="err">λ</span><span class="p">(</span><span class="err">δλ</span><span class="p">);</span>
    <span class="nx">rotation</span><span class="p">.</span><span class="nx">invert</span> <span class="o">=</span> <span class="nx">d3_geo_forwardRotation</span><span class="err">λ</span><span class="p">(</span><span class="o">-</span><span class="err">δλ</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">rotation</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_rotation</span><span class="err">φγ</span><span class="p">(</span><span class="err">δφ</span><span class="p">,</span> <span class="err">δγ</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">cos</span><span class="err">δφ</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">δφ</span><span class="p">),</span> <span class="nx">sin</span><span class="err">δφ</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">δφ</span><span class="p">),</span> <span class="nx">cos</span><span class="err">δγ</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">δγ</span><span class="p">),</span> <span class="nx">sin</span><span class="err">δγ</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">δγ</span><span class="p">);</span>
    <span class="kd">function</span> <span class="nx">rotation</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">cos</span><span class="err">φ</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">φ</span><span class="p">),</span> <span class="nx">x</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">λ</span><span class="p">)</span> <span class="o">*</span> <span class="nx">cos</span><span class="err">φ</span><span class="p">,</span> <span class="nx">y</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">λ</span><span class="p">)</span> <span class="o">*</span> <span class="nx">cos</span><span class="err">φ</span><span class="p">,</span> <span class="nx">z</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">φ</span><span class="p">),</span> <span class="nx">k</span> <span class="o">=</span> <span class="nx">z</span> <span class="o">*</span> <span class="nx">cos</span><span class="err">δφ</span> <span class="o">+</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">sin</span><span class="err">δφ</span><span class="p">;</span>
      <span class="k">return</span> <span class="p">[</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan2</span><span class="p">(</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">cos</span><span class="err">δγ</span> <span class="o">-</span> <span class="nx">k</span> <span class="o">*</span> <span class="nx">sin</span><span class="err">δγ</span><span class="p">,</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">cos</span><span class="err">δφ</span> <span class="o">-</span> <span class="nx">z</span> <span class="o">*</span> <span class="nx">sin</span><span class="err">δφ</span><span class="p">),</span> <span class="nx">d3_asin</span><span class="p">(</span><span class="nx">k</span> <span class="o">*</span> <span class="nx">cos</span><span class="err">δγ</span> <span class="o">+</span> <span class="nx">y</span> <span class="o">*</span> <span class="nx">sin</span><span class="err">δγ</span><span class="p">)</span> <span class="p">];</span>
    <span class="p">}</span>
    <span class="nx">rotation</span><span class="p">.</span><span class="nx">invert</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">cos</span><span class="err">φ</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">φ</span><span class="p">),</span> <span class="nx">x</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">λ</span><span class="p">)</span> <span class="o">*</span> <span class="nx">cos</span><span class="err">φ</span><span class="p">,</span> <span class="nx">y</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">λ</span><span class="p">)</span> <span class="o">*</span> <span class="nx">cos</span><span class="err">φ</span><span class="p">,</span> <span class="nx">z</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">φ</span><span class="p">),</span> <span class="nx">k</span> <span class="o">=</span> <span class="nx">z</span> <span class="o">*</span> <span class="nx">cos</span><span class="err">δγ</span> <span class="o">-</span> <span class="nx">y</span> <span class="o">*</span> <span class="nx">sin</span><span class="err">δγ</span><span class="p">;</span>
      <span class="k">return</span> <span class="p">[</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan2</span><span class="p">(</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">cos</span><span class="err">δγ</span> <span class="o">+</span> <span class="nx">z</span> <span class="o">*</span> <span class="nx">sin</span><span class="err">δγ</span><span class="p">,</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">cos</span><span class="err">δφ</span> <span class="o">+</span> <span class="nx">k</span> <span class="o">*</span> <span class="nx">sin</span><span class="err">δφ</span><span class="p">),</span> <span class="nx">d3_asin</span><span class="p">(</span><span class="nx">k</span> <span class="o">*</span> <span class="nx">cos</span><span class="err">δφ</span> <span class="o">-</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">sin</span><span class="err">δφ</span><span class="p">)</span> <span class="p">];</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">rotation</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">circle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">origin</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">],</span> <span class="nx">angle</span><span class="p">,</span> <span class="nx">precision</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span> <span class="nx">interpolate</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">circle</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">center</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">origin</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">?</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span> <span class="o">:</span> <span class="nx">origin</span><span class="p">,</span> <span class="nx">rotate</span> <span class="o">=</span> <span class="nx">d3_geo_rotation</span><span class="p">(</span><span class="o">-</span><span class="nx">center</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nx">d3_radians</span><span class="p">,</span> <span class="o">-</span><span class="nx">center</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nx">d3_radians</span><span class="p">,</span> <span class="mi">0</span><span class="p">).</span><span class="nx">invert</span><span class="p">,</span> <span class="nx">ring</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="nx">interpolate</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">point</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">ring</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">rotate</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">));</span>
          <span class="nx">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*=</span> <span class="nx">d3_degrees</span><span class="p">,</span> <span class="nx">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*=</span> <span class="nx">d3_degrees</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">});</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;Polygon&quot;</span><span class="p">,</span>
        <span class="nx">coordinates</span><span class="o">:</span> <span class="p">[</span> <span class="nx">ring</span> <span class="p">]</span>
      <span class="p">};</span>
    <span class="p">}</span>
    <span class="nx">circle</span><span class="p">.</span><span class="nx">origin</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">origin</span><span class="p">;</span>
      <span class="nx">origin</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">circle</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">circle</span><span class="p">.</span><span class="nx">angle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">angle</span><span class="p">;</span>
      <span class="nx">interpolate</span> <span class="o">=</span> <span class="nx">d3_geo_circleInterpolate</span><span class="p">((</span><span class="nx">angle</span> <span class="o">=</span> <span class="o">+</span><span class="nx">x</span><span class="p">)</span> <span class="o">*</span> <span class="nx">d3_radians</span><span class="p">,</span> <span class="nx">precision</span> <span class="o">*</span> <span class="nx">d3_radians</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">circle</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">circle</span><span class="p">.</span><span class="nx">precision</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">precision</span><span class="p">;</span>
      <span class="nx">interpolate</span> <span class="o">=</span> <span class="nx">d3_geo_circleInterpolate</span><span class="p">(</span><span class="nx">angle</span> <span class="o">*</span> <span class="nx">d3_radians</span><span class="p">,</span> <span class="p">(</span><span class="nx">precision</span> <span class="o">=</span> <span class="o">+</span><span class="nx">_</span><span class="p">)</span> <span class="o">*</span> <span class="nx">d3_radians</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">circle</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">circle</span><span class="p">.</span><span class="nx">angle</span><span class="p">(</span><span class="mi">90</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_geo_circleInterpolate</span><span class="p">(</span><span class="nx">radius</span><span class="p">,</span> <span class="nx">precision</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">cr</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">radius</span><span class="p">),</span> <span class="nx">sr</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">radius</span><span class="p">);</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">from</span><span class="p">,</span> <span class="nx">to</span><span class="p">,</span> <span class="nx">direction</span><span class="p">,</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">step</span> <span class="o">=</span> <span class="nx">direction</span> <span class="o">*</span> <span class="nx">precision</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">from</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">from</span> <span class="o">=</span> <span class="nx">d3_geo_circleAngle</span><span class="p">(</span><span class="nx">cr</span><span class="p">,</span> <span class="nx">from</span><span class="p">);</span>
        <span class="nx">to</span> <span class="o">=</span> <span class="nx">d3_geo_circleAngle</span><span class="p">(</span><span class="nx">cr</span><span class="p">,</span> <span class="nx">to</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">direction</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="nx">from</span> <span class="o">&lt;</span> <span class="nx">to</span> <span class="o">:</span> <span class="nx">from</span> <span class="o">&gt;</span> <span class="nx">to</span><span class="p">)</span> <span class="nx">from</span> <span class="o">+=</span> <span class="nx">direction</span> <span class="o">*</span> <span class="err">τ</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">from</span> <span class="o">=</span> <span class="nx">radius</span> <span class="o">+</span> <span class="nx">direction</span> <span class="o">*</span> <span class="err">τ</span><span class="p">;</span>
        <span class="nx">to</span> <span class="o">=</span> <span class="nx">radius</span> <span class="o">-</span> <span class="p">.</span><span class="mi">5</span> <span class="o">*</span> <span class="nx">step</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">point</span><span class="p">,</span> <span class="nx">t</span> <span class="o">=</span> <span class="nx">from</span><span class="p">;</span> <span class="nx">direction</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="nx">t</span> <span class="o">&gt;</span> <span class="nx">to</span> <span class="o">:</span> <span class="nx">t</span> <span class="o">&lt;</span> <span class="nx">to</span><span class="p">;</span> <span class="nx">t</span> <span class="o">-=</span> <span class="nx">step</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">listener</span><span class="p">.</span><span class="nx">point</span><span class="p">((</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">d3_geo_spherical</span><span class="p">([</span> <span class="nx">cr</span><span class="p">,</span> <span class="o">-</span><span class="nx">sr</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">t</span><span class="p">),</span> <span class="o">-</span><span class="nx">sr</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">]))[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">point</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
      <span class="p">}</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_circleAngle</span><span class="p">(</span><span class="nx">cr</span><span class="p">,</span> <span class="nx">point</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">d3_geo_cartesian</span><span class="p">(</span><span class="nx">point</span><span class="p">);</span>
    <span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-=</span> <span class="nx">cr</span><span class="p">;</span>
    <span class="nx">d3_geo_cartesianNormalize</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">angle</span> <span class="o">=</span> <span class="nx">d3_acos</span><span class="p">(</span><span class="o">-</span><span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
    <span class="k">return</span> <span class="p">((</span><span class="o">-</span><span class="nx">a</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="o">-</span><span class="nx">angle</span> <span class="o">:</span> <span class="nx">angle</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span> <span class="o">-</span> <span class="err">ε</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">PI</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">distance</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="err">Δλ</span> <span class="o">=</span> <span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="nx">d3_radians</span><span class="p">,</span> <span class="err">φ</span><span class="mi">0</span> <span class="o">=</span> <span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nx">d3_radians</span><span class="p">,</span> <span class="err">φ</span><span class="mi">1</span> <span class="o">=</span> <span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nx">d3_radians</span><span class="p">,</span> <span class="nx">sin</span><span class="err">Δλ</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">Δλ</span><span class="p">),</span> <span class="nx">cos</span><span class="err">Δλ</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">Δλ</span><span class="p">),</span> <span class="nx">sin</span><span class="err">φ</span><span class="mi">0</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">φ</span><span class="mi">0</span><span class="p">),</span> <span class="nx">cos</span><span class="err">φ</span><span class="mi">0</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">φ</span><span class="mi">0</span><span class="p">),</span> <span class="nx">sin</span><span class="err">φ</span><span class="mi">1</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">φ</span><span class="mi">1</span><span class="p">),</span> <span class="nx">cos</span><span class="err">φ</span><span class="mi">1</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">φ</span><span class="mi">1</span><span class="p">),</span> <span class="nx">t</span><span class="p">;</span>
    <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan2</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">((</span><span class="nx">t</span> <span class="o">=</span> <span class="nx">cos</span><span class="err">φ</span><span class="mi">1</span> <span class="o">*</span> <span class="nx">sin</span><span class="err">Δλ</span><span class="p">)</span> <span class="o">*</span> <span class="nx">t</span> <span class="o">+</span> <span class="p">(</span><span class="nx">t</span> <span class="o">=</span> <span class="nx">cos</span><span class="err">φ</span><span class="mi">0</span> <span class="o">*</span> <span class="nx">sin</span><span class="err">φ</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">sin</span><span class="err">φ</span><span class="mi">0</span> <span class="o">*</span> <span class="nx">cos</span><span class="err">φ</span><span class="mi">1</span> <span class="o">*</span> <span class="nx">cos</span><span class="err">Δλ</span><span class="p">)</span> <span class="o">*</span> <span class="nx">t</span><span class="p">),</span> <span class="nx">sin</span><span class="err">φ</span><span class="mi">0</span> <span class="o">*</span> <span class="nx">sin</span><span class="err">φ</span><span class="mi">1</span> <span class="o">+</span> <span class="nx">cos</span><span class="err">φ</span><span class="mi">0</span> <span class="o">*</span> <span class="nx">cos</span><span class="err">φ</span><span class="mi">1</span> <span class="o">*</span> <span class="nx">cos</span><span class="err">Δλ</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">graticule</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">x0</span><span class="p">,</span> <span class="nx">X1</span><span class="p">,</span> <span class="nx">X0</span><span class="p">,</span> <span class="nx">y1</span><span class="p">,</span> <span class="nx">y0</span><span class="p">,</span> <span class="nx">Y1</span><span class="p">,</span> <span class="nx">Y0</span><span class="p">,</span> <span class="nx">dx</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="nx">dy</span> <span class="o">=</span> <span class="nx">dx</span><span class="p">,</span> <span class="nx">DX</span> <span class="o">=</span> <span class="mi">90</span><span class="p">,</span> <span class="nx">DY</span> <span class="o">=</span> <span class="mi">360</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">X</span><span class="p">,</span> <span class="nx">Y</span><span class="p">,</span> <span class="nx">precision</span> <span class="o">=</span> <span class="mf">2.5</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">graticule</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;MultiLineString&quot;</span><span class="p">,</span>
        <span class="nx">coordinates</span><span class="o">:</span> <span class="nx">lines</span><span class="p">()</span>
      <span class="p">};</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">lines</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="nx">X0</span> <span class="o">/</span> <span class="nx">DX</span><span class="p">)</span> <span class="o">*</span> <span class="nx">DX</span><span class="p">,</span> <span class="nx">X1</span><span class="p">,</span> <span class="nx">DX</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="nx">X</span><span class="p">).</span><span class="nx">concat</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="nx">Y0</span> <span class="o">/</span> <span class="nx">DY</span><span class="p">)</span> <span class="o">*</span> <span class="nx">DY</span><span class="p">,</span> <span class="nx">Y1</span><span class="p">,</span> <span class="nx">DY</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="nx">Y</span><span class="p">)).</span><span class="nx">concat</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="nx">x0</span> <span class="o">/</span> <span class="nx">dx</span><span class="p">)</span> <span class="o">*</span> <span class="nx">dx</span><span class="p">,</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">dx</span><span class="p">).</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">x</span> <span class="o">%</span> <span class="nx">DX</span><span class="p">)</span> <span class="o">&gt;</span> <span class="err">ε</span><span class="p">;</span>
      <span class="p">}).</span><span class="nx">map</span><span class="p">(</span><span class="nx">x</span><span class="p">)).</span><span class="nx">concat</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="nx">y0</span> <span class="o">/</span> <span class="nx">dy</span><span class="p">)</span> <span class="o">*</span> <span class="nx">dy</span><span class="p">,</span> <span class="nx">y1</span><span class="p">,</span> <span class="nx">dy</span><span class="p">).</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">y</span> <span class="o">%</span> <span class="nx">DY</span><span class="p">)</span> <span class="o">&gt;</span> <span class="err">ε</span><span class="p">;</span>
      <span class="p">}).</span><span class="nx">map</span><span class="p">(</span><span class="nx">y</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="nx">graticule</span><span class="p">.</span><span class="nx">lines</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">lines</span><span class="p">().</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">coordinates</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">{</span>
          <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;LineString&quot;</span><span class="p">,</span>
          <span class="nx">coordinates</span><span class="o">:</span> <span class="nx">coordinates</span>
        <span class="p">};</span>
      <span class="p">});</span>
    <span class="p">};</span>
    <span class="nx">graticule</span><span class="p">.</span><span class="nx">outline</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;Polygon&quot;</span><span class="p">,</span>
        <span class="nx">coordinates</span><span class="o">:</span> <span class="p">[</span> <span class="nx">X</span><span class="p">(</span><span class="nx">X0</span><span class="p">).</span><span class="nx">concat</span><span class="p">(</span><span class="nx">Y</span><span class="p">(</span><span class="nx">Y1</span><span class="p">).</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="nx">X</span><span class="p">(</span><span class="nx">X1</span><span class="p">).</span><span class="nx">reverse</span><span class="p">().</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="nx">Y</span><span class="p">(</span><span class="nx">Y0</span><span class="p">).</span><span class="nx">reverse</span><span class="p">().</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="p">]</span>
      <span class="p">};</span>
    <span class="p">};</span>
    <span class="nx">graticule</span><span class="p">.</span><span class="nx">extent</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">graticule</span><span class="p">.</span><span class="nx">minorExtent</span><span class="p">();</span>
      <span class="k">return</span> <span class="nx">graticule</span><span class="p">.</span><span class="nx">majorExtent</span><span class="p">(</span><span class="nx">_</span><span class="p">).</span><span class="nx">minorExtent</span><span class="p">(</span><span class="nx">_</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="nx">graticule</span><span class="p">.</span><span class="nx">majorExtent</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="p">[</span> <span class="p">[</span> <span class="nx">X0</span><span class="p">,</span> <span class="nx">Y0</span> <span class="p">],</span> <span class="p">[</span> <span class="nx">X1</span><span class="p">,</span> <span class="nx">Y1</span> <span class="p">]</span> <span class="p">];</span>
      <span class="nx">X0</span> <span class="o">=</span> <span class="o">+</span><span class="nx">_</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="nx">X1</span> <span class="o">=</span> <span class="o">+</span><span class="nx">_</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">];</span>
      <span class="nx">Y0</span> <span class="o">=</span> <span class="o">+</span><span class="nx">_</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="nx">Y1</span> <span class="o">=</span> <span class="o">+</span><span class="nx">_</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">];</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">X0</span> <span class="o">&gt;</span> <span class="nx">X1</span><span class="p">)</span> <span class="nx">_</span> <span class="o">=</span> <span class="nx">X0</span><span class="p">,</span> <span class="nx">X0</span> <span class="o">=</span> <span class="nx">X1</span><span class="p">,</span> <span class="nx">X1</span> <span class="o">=</span> <span class="nx">_</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">Y0</span> <span class="o">&gt;</span> <span class="nx">Y1</span><span class="p">)</span> <span class="nx">_</span> <span class="o">=</span> <span class="nx">Y0</span><span class="p">,</span> <span class="nx">Y0</span> <span class="o">=</span> <span class="nx">Y1</span><span class="p">,</span> <span class="nx">Y1</span> <span class="o">=</span> <span class="nx">_</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">graticule</span><span class="p">.</span><span class="nx">precision</span><span class="p">(</span><span class="nx">precision</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="nx">graticule</span><span class="p">.</span><span class="nx">minorExtent</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="p">[</span> <span class="p">[</span> <span class="nx">x0</span><span class="p">,</span> <span class="nx">y0</span> <span class="p">],</span> <span class="p">[</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span> <span class="p">]</span> <span class="p">];</span>
      <span class="nx">x0</span> <span class="o">=</span> <span class="o">+</span><span class="nx">_</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="nx">x1</span> <span class="o">=</span> <span class="o">+</span><span class="nx">_</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">];</span>
      <span class="nx">y0</span> <span class="o">=</span> <span class="o">+</span><span class="nx">_</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="nx">y1</span> <span class="o">=</span> <span class="o">+</span><span class="nx">_</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">];</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">x0</span> <span class="o">&gt;</span> <span class="nx">x1</span><span class="p">)</span> <span class="nx">_</span> <span class="o">=</span> <span class="nx">x0</span><span class="p">,</span> <span class="nx">x0</span> <span class="o">=</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">x1</span> <span class="o">=</span> <span class="nx">_</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">y0</span> <span class="o">&gt;</span> <span class="nx">y1</span><span class="p">)</span> <span class="nx">_</span> <span class="o">=</span> <span class="nx">y0</span><span class="p">,</span> <span class="nx">y0</span> <span class="o">=</span> <span class="nx">y1</span><span class="p">,</span> <span class="nx">y1</span> <span class="o">=</span> <span class="nx">_</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">graticule</span><span class="p">.</span><span class="nx">precision</span><span class="p">(</span><span class="nx">precision</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="nx">graticule</span><span class="p">.</span><span class="nx">step</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">graticule</span><span class="p">.</span><span class="nx">minorStep</span><span class="p">();</span>
      <span class="k">return</span> <span class="nx">graticule</span><span class="p">.</span><span class="nx">majorStep</span><span class="p">(</span><span class="nx">_</span><span class="p">).</span><span class="nx">minorStep</span><span class="p">(</span><span class="nx">_</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="nx">graticule</span><span class="p">.</span><span class="nx">majorStep</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="p">[</span> <span class="nx">DX</span><span class="p">,</span> <span class="nx">DY</span> <span class="p">];</span>
      <span class="nx">DX</span> <span class="o">=</span> <span class="o">+</span><span class="nx">_</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">DY</span> <span class="o">=</span> <span class="o">+</span><span class="nx">_</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
      <span class="k">return</span> <span class="nx">graticule</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">graticule</span><span class="p">.</span><span class="nx">minorStep</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="p">[</span> <span class="nx">dx</span><span class="p">,</span> <span class="nx">dy</span> <span class="p">];</span>
      <span class="nx">dx</span> <span class="o">=</span> <span class="o">+</span><span class="nx">_</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">dy</span> <span class="o">=</span> <span class="o">+</span><span class="nx">_</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
      <span class="k">return</span> <span class="nx">graticule</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">graticule</span><span class="p">.</span><span class="nx">precision</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">precision</span><span class="p">;</span>
      <span class="nx">precision</span> <span class="o">=</span> <span class="o">+</span><span class="nx">_</span><span class="p">;</span>
      <span class="nx">x</span> <span class="o">=</span> <span class="nx">d3_geo_graticuleX</span><span class="p">(</span><span class="nx">y0</span><span class="p">,</span> <span class="nx">y1</span><span class="p">,</span> <span class="mi">90</span><span class="p">);</span>
      <span class="nx">y</span> <span class="o">=</span> <span class="nx">d3_geo_graticuleY</span><span class="p">(</span><span class="nx">x0</span><span class="p">,</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">precision</span><span class="p">);</span>
      <span class="nx">X</span> <span class="o">=</span> <span class="nx">d3_geo_graticuleX</span><span class="p">(</span><span class="nx">Y0</span><span class="p">,</span> <span class="nx">Y1</span><span class="p">,</span> <span class="mi">90</span><span class="p">);</span>
      <span class="nx">Y</span> <span class="o">=</span> <span class="nx">d3_geo_graticuleY</span><span class="p">(</span><span class="nx">X0</span><span class="p">,</span> <span class="nx">X1</span><span class="p">,</span> <span class="nx">precision</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">graticule</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">graticule</span><span class="p">.</span><span class="nx">majorExtent</span><span class="p">([</span> <span class="p">[</span> <span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="o">-</span><span class="mi">90</span> <span class="o">+</span> <span class="err">ε</span> <span class="p">],</span> <span class="p">[</span> <span class="mi">180</span><span class="p">,</span> <span class="mi">90</span> <span class="o">-</span> <span class="err">ε</span> <span class="p">]</span> <span class="p">]).</span><span class="nx">minorExtent</span><span class="p">([</span> <span class="p">[</span> <span class="o">-</span><span class="mi">180</span><span class="p">,</span> <span class="o">-</span><span class="mi">80</span> <span class="o">-</span> <span class="err">ε</span> <span class="p">],</span> <span class="p">[</span> <span class="mi">180</span><span class="p">,</span> <span class="mi">80</span> <span class="o">+</span> <span class="err">ε</span> <span class="p">]</span> <span class="p">]);</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_geo_graticuleX</span><span class="p">(</span><span class="nx">y0</span><span class="p">,</span> <span class="nx">y1</span><span class="p">,</span> <span class="nx">dy</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">y0</span><span class="p">,</span> <span class="nx">y1</span> <span class="o">-</span> <span class="err">ε</span><span class="p">,</span> <span class="nx">dy</span><span class="p">).</span><span class="nx">concat</span><span class="p">(</span><span class="nx">y1</span><span class="p">);</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">y</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span> <span class="p">];</span>
      <span class="p">});</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_graticuleY</span><span class="p">(</span><span class="nx">x0</span><span class="p">,</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">dx</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">x0</span><span class="p">,</span> <span class="nx">x1</span> <span class="o">-</span> <span class="err">ε</span><span class="p">,</span> <span class="nx">dx</span><span class="p">).</span><span class="nx">concat</span><span class="p">(</span><span class="nx">x1</span><span class="p">);</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">x</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span> <span class="p">];</span>
      <span class="p">});</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_source</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">source</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_target</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">target</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">greatArc</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">source</span> <span class="o">=</span> <span class="nx">d3_source</span><span class="p">,</span> <span class="nx">source_</span><span class="p">,</span> <span class="nx">target</span> <span class="o">=</span> <span class="nx">d3_target</span><span class="p">,</span> <span class="nx">target_</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">greatArc</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;LineString&quot;</span><span class="p">,</span>
        <span class="nx">coordinates</span><span class="o">:</span> <span class="p">[</span> <span class="nx">source_</span> <span class="o">||</span> <span class="nx">source</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">),</span> <span class="nx">target_</span> <span class="o">||</span> <span class="nx">target</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span> <span class="p">]</span>
      <span class="p">};</span>
    <span class="p">}</span>
    <span class="nx">greatArc</span><span class="p">.</span><span class="nx">distance</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">distance</span><span class="p">(</span><span class="nx">source_</span> <span class="o">||</span> <span class="nx">source</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">),</span> <span class="nx">target_</span> <span class="o">||</span> <span class="nx">target</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">));</span>
    <span class="p">};</span>
    <span class="nx">greatArc</span><span class="p">.</span><span class="nx">source</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">source</span><span class="p">;</span>
      <span class="nx">source</span> <span class="o">=</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">source_</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">_</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="nx">_</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">greatArc</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">greatArc</span><span class="p">.</span><span class="nx">target</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">target</span><span class="p">;</span>
      <span class="nx">target</span> <span class="o">=</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">target_</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">_</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="nx">_</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">greatArc</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">greatArc</span><span class="p">.</span><span class="nx">precision</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">greatArc</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">greatArc</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">interpolate</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">source</span><span class="p">,</span> <span class="nx">target</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_geo_interpolate</span><span class="p">(</span><span class="nx">source</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nx">d3_radians</span><span class="p">,</span> <span class="nx">source</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nx">d3_radians</span><span class="p">,</span> <span class="nx">target</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nx">d3_radians</span><span class="p">,</span> <span class="nx">target</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nx">d3_radians</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_geo_interpolate</span><span class="p">(</span><span class="nx">x0</span><span class="p">,</span> <span class="nx">y0</span><span class="p">,</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">cy0</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">y0</span><span class="p">),</span> <span class="nx">sy0</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">y0</span><span class="p">),</span> <span class="nx">cy1</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">y1</span><span class="p">),</span> <span class="nx">sy1</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">y1</span><span class="p">),</span> <span class="nx">kx0</span> <span class="o">=</span> <span class="nx">cy0</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x0</span><span class="p">),</span> <span class="nx">ky0</span> <span class="o">=</span> <span class="nx">cy0</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x0</span><span class="p">),</span> <span class="nx">kx1</span> <span class="o">=</span> <span class="nx">cy1</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">x1</span><span class="p">),</span> <span class="nx">ky1</span> <span class="o">=</span> <span class="nx">cy1</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">x1</span><span class="p">),</span> <span class="nx">d</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">asin</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">d3_haversin</span><span class="p">(</span><span class="nx">y1</span> <span class="o">-</span> <span class="nx">y0</span><span class="p">)</span> <span class="o">+</span> <span class="nx">cy0</span> <span class="o">*</span> <span class="nx">cy1</span> <span class="o">*</span> <span class="nx">d3_haversin</span><span class="p">(</span><span class="nx">x1</span> <span class="o">-</span> <span class="nx">x0</span><span class="p">))),</span> <span class="nx">k</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">d</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">interpolate</span> <span class="o">=</span> <span class="nx">d</span> <span class="o">?</span> <span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">B</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">t</span> <span class="o">*=</span> <span class="nx">d</span><span class="p">)</span> <span class="o">*</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">A</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">d</span> <span class="o">-</span> <span class="nx">t</span><span class="p">)</span> <span class="o">*</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">A</span> <span class="o">*</span> <span class="nx">kx0</span> <span class="o">+</span> <span class="nx">B</span> <span class="o">*</span> <span class="nx">kx1</span><span class="p">,</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">A</span> <span class="o">*</span> <span class="nx">ky0</span> <span class="o">+</span> <span class="nx">B</span> <span class="o">*</span> <span class="nx">ky1</span><span class="p">,</span> <span class="nx">z</span> <span class="o">=</span> <span class="nx">A</span> <span class="o">*</span> <span class="nx">sy0</span> <span class="o">+</span> <span class="nx">B</span> <span class="o">*</span> <span class="nx">sy1</span><span class="p">;</span>
      <span class="k">return</span> <span class="p">[</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan2</span><span class="p">(</span><span class="nx">y</span><span class="p">,</span> <span class="nx">x</span><span class="p">)</span> <span class="o">*</span> <span class="nx">d3_degrees</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan2</span><span class="p">(</span><span class="nx">z</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span> <span class="o">*</span> <span class="nx">y</span><span class="p">))</span> <span class="o">*</span> <span class="nx">d3_degrees</span> <span class="p">];</span>
    <span class="p">}</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">[</span> <span class="nx">x0</span> <span class="o">*</span> <span class="nx">d3_degrees</span><span class="p">,</span> <span class="nx">y0</span> <span class="o">*</span> <span class="nx">d3_degrees</span> <span class="p">];</span>
    <span class="p">};</span>
    <span class="nx">interpolate</span><span class="p">.</span><span class="nx">distance</span> <span class="o">=</span> <span class="nx">d</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">interpolate</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">object</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">d3_geo_lengthSum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">stream</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">d3_geo_length</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">d3_geo_lengthSum</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">d3_geo_lengthSum</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">d3_geo_length</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">sphere</span><span class="o">:</span> <span class="nx">d3_noop</span><span class="p">,</span>
    <span class="nx">point</span><span class="o">:</span> <span class="nx">d3_noop</span><span class="p">,</span>
    <span class="nx">lineStart</span><span class="o">:</span> <span class="nx">d3_geo_lengthLineStart</span><span class="p">,</span>
    <span class="nx">lineEnd</span><span class="o">:</span> <span class="nx">d3_noop</span><span class="p">,</span>
    <span class="nx">polygonStart</span><span class="o">:</span> <span class="nx">d3_noop</span><span class="p">,</span>
    <span class="nx">polygonEnd</span><span class="o">:</span> <span class="nx">d3_noop</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_geo_lengthLineStart</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="err">λ</span><span class="mi">0</span><span class="p">,</span> <span class="nx">sin</span><span class="err">φ</span><span class="mi">0</span><span class="p">,</span> <span class="nx">cos</span><span class="err">φ</span><span class="mi">0</span><span class="p">;</span>
    <span class="nx">d3_geo_length</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
      <span class="err">λ</span><span class="mi">0</span> <span class="o">=</span> <span class="err">λ</span> <span class="o">*</span> <span class="nx">d3_radians</span><span class="p">,</span> <span class="nx">sin</span><span class="err">φ</span><span class="mi">0</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">φ</span> <span class="o">*=</span> <span class="nx">d3_radians</span><span class="p">),</span> <span class="nx">cos</span><span class="err">φ</span><span class="mi">0</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">φ</span><span class="p">);</span>
      <span class="nx">d3_geo_length</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">nextPoint</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">d3_geo_length</span><span class="p">.</span><span class="nx">lineEnd</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">d3_geo_length</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">d3_geo_length</span><span class="p">.</span><span class="nx">lineEnd</span> <span class="o">=</span> <span class="nx">d3_noop</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="kd">function</span> <span class="nx">nextPoint</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">sin</span><span class="err">φ</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">φ</span> <span class="o">*=</span> <span class="nx">d3_radians</span><span class="p">),</span> <span class="nx">cos</span><span class="err">φ</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">φ</span><span class="p">),</span> <span class="nx">t</span> <span class="o">=</span> <span class="nx">abs</span><span class="p">((</span><span class="err">λ</span> <span class="o">*=</span> <span class="nx">d3_radians</span><span class="p">)</span> <span class="o">-</span> <span class="err">λ</span><span class="mi">0</span><span class="p">),</span> <span class="nx">cos</span><span class="err">Δλ</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">t</span><span class="p">);</span>
      <span class="nx">d3_geo_lengthSum</span> <span class="o">+=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan2</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">((</span><span class="nx">t</span> <span class="o">=</span> <span class="nx">cos</span><span class="err">φ</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">t</span><span class="p">))</span> <span class="o">*</span> <span class="nx">t</span> <span class="o">+</span> <span class="p">(</span><span class="nx">t</span> <span class="o">=</span> <span class="nx">cos</span><span class="err">φ</span><span class="mi">0</span> <span class="o">*</span> <span class="nx">sin</span><span class="err">φ</span> <span class="o">-</span> <span class="nx">sin</span><span class="err">φ</span><span class="mi">0</span> <span class="o">*</span> <span class="nx">cos</span><span class="err">φ</span> <span class="o">*</span> <span class="nx">cos</span><span class="err">Δλ</span><span class="p">)</span> <span class="o">*</span> <span class="nx">t</span><span class="p">),</span> <span class="nx">sin</span><span class="err">φ</span><span class="mi">0</span> <span class="o">*</span> <span class="nx">sin</span><span class="err">φ</span> <span class="o">+</span> <span class="nx">cos</span><span class="err">φ</span><span class="mi">0</span> <span class="o">*</span> <span class="nx">cos</span><span class="err">φ</span> <span class="o">*</span> <span class="nx">cos</span><span class="err">Δλ</span><span class="p">);</span>
      <span class="err">λ</span><span class="mi">0</span> <span class="o">=</span> <span class="err">λ</span><span class="p">,</span> <span class="nx">sin</span><span class="err">φ</span><span class="mi">0</span> <span class="o">=</span> <span class="nx">sin</span><span class="err">φ</span><span class="p">,</span> <span class="nx">cos</span><span class="err">φ</span><span class="mi">0</span> <span class="o">=</span> <span class="nx">cos</span><span class="err">φ</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geo_azimuthal</span><span class="p">(</span><span class="nx">scale</span><span class="p">,</span> <span class="nx">angle</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">function</span> <span class="nx">azimuthal</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">cos</span><span class="err">λ</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">λ</span><span class="p">),</span> <span class="nx">cos</span><span class="err">φ</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">φ</span><span class="p">),</span> <span class="nx">k</span> <span class="o">=</span> <span class="nx">scale</span><span class="p">(</span><span class="nx">cos</span><span class="err">λ</span> <span class="o">*</span> <span class="nx">cos</span><span class="err">φ</span><span class="p">);</span>
      <span class="k">return</span> <span class="p">[</span> <span class="nx">k</span> <span class="o">*</span> <span class="nx">cos</span><span class="err">φ</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">λ</span><span class="p">),</span> <span class="nx">k</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">φ</span><span class="p">)</span> <span class="p">];</span>
    <span class="p">}</span>
    <span class="nx">azimuthal</span><span class="p">.</span><span class="nx">invert</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="err">ρ</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span> <span class="o">*</span> <span class="nx">y</span><span class="p">),</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">angle</span><span class="p">(</span><span class="err">ρ</span><span class="p">),</span> <span class="nx">sinc</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">c</span><span class="p">),</span> <span class="nx">cosc</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span>
      <span class="k">return</span> <span class="p">[</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan2</span><span class="p">(</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">sinc</span><span class="p">,</span> <span class="err">ρ</span> <span class="o">*</span> <span class="nx">cosc</span><span class="p">),</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">asin</span><span class="p">(</span><span class="err">ρ</span> <span class="o">&amp;&amp;</span> <span class="nx">y</span> <span class="o">*</span> <span class="nx">sinc</span> <span class="o">/</span> <span class="err">ρ</span><span class="p">)</span> <span class="p">];</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">azimuthal</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">d3_geo_azimuthalEqualArea</span> <span class="o">=</span> <span class="nx">d3_geo_azimuthal</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">cos</span><span class="err">λ</span><span class="nx">cos</span><span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="mi">2</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="nx">cos</span><span class="err">λ</span><span class="nx">cos</span><span class="err">φ</span><span class="p">));</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="err">ρ</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">asin</span><span class="p">(</span><span class="err">ρ</span> <span class="o">/</span> <span class="mi">2</span><span class="p">);</span>
  <span class="p">});</span>
  <span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">azimuthalEqualArea</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_geo_projection</span><span class="p">(</span><span class="nx">d3_geo_azimuthalEqualArea</span><span class="p">);</span>
  <span class="p">}).</span><span class="nx">raw</span> <span class="o">=</span> <span class="nx">d3_geo_azimuthalEqualArea</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">d3_geo_azimuthalEquidistant</span> <span class="o">=</span> <span class="nx">d3_geo_azimuthal</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">cos</span><span class="err">λ</span><span class="nx">cos</span><span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">acos</span><span class="p">(</span><span class="nx">cos</span><span class="err">λ</span><span class="nx">cos</span><span class="err">φ</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">c</span> <span class="o">&amp;&amp;</span> <span class="nx">c</span> <span class="o">/</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span>
  <span class="p">},</span> <span class="nx">d3_identity</span><span class="p">);</span>
  <span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">azimuthalEquidistant</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_geo_projection</span><span class="p">(</span><span class="nx">d3_geo_azimuthalEquidistant</span><span class="p">);</span>
  <span class="p">}).</span><span class="nx">raw</span> <span class="o">=</span> <span class="nx">d3_geo_azimuthalEquidistant</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">d3_geo_conicConformal</span><span class="p">(</span><span class="err">φ</span><span class="mi">0</span><span class="p">,</span> <span class="err">φ</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">cos</span><span class="err">φ</span><span class="mi">0</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">φ</span><span class="mi">0</span><span class="p">),</span> <span class="nx">t</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">tan</span><span class="p">(</span><span class="err">π</span> <span class="o">/</span> <span class="mi">4</span> <span class="o">+</span> <span class="err">φ</span> <span class="o">/</span> <span class="mi">2</span><span class="p">);</span>
    <span class="p">},</span> <span class="nx">n</span> <span class="o">=</span> <span class="err">φ</span><span class="mi">0</span> <span class="o">===</span> <span class="err">φ</span><span class="mi">1</span> <span class="o">?</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">φ</span><span class="mi">0</span><span class="p">)</span> <span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">cos</span><span class="err">φ</span><span class="mi">0</span> <span class="o">/</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">φ</span><span class="mi">1</span><span class="p">))</span> <span class="o">/</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">t</span><span class="p">(</span><span class="err">φ</span><span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="nx">t</span><span class="p">(</span><span class="err">φ</span><span class="mi">0</span><span class="p">)),</span> <span class="nx">F</span> <span class="o">=</span> <span class="nx">cos</span><span class="err">φ</span><span class="mi">0</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nx">t</span><span class="p">(</span><span class="err">φ</span><span class="mi">0</span><span class="p">),</span> <span class="nx">n</span><span class="p">)</span> <span class="o">/</span> <span class="nx">n</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">n</span><span class="p">)</span> <span class="k">return</span> <span class="nx">d3_geo_mercator</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">forward</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">F</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="err">φ</span> <span class="o">&lt;</span> <span class="o">-</span><span class="nx">half</span><span class="err">π</span> <span class="o">+</span> <span class="err">ε</span><span class="p">)</span> <span class="err">φ</span> <span class="o">=</span> <span class="o">-</span><span class="nx">half</span><span class="err">π</span> <span class="o">+</span> <span class="err">ε</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="err">φ</span> <span class="o">&gt;</span> <span class="nx">half</span><span class="err">π</span> <span class="o">-</span> <span class="err">ε</span><span class="p">)</span> <span class="err">φ</span> <span class="o">=</span> <span class="nx">half</span><span class="err">π</span> <span class="o">-</span> <span class="err">ε</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="kd">var</span> <span class="err">ρ</span> <span class="o">=</span> <span class="nx">F</span> <span class="o">/</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nx">t</span><span class="p">(</span><span class="err">φ</span><span class="p">),</span> <span class="nx">n</span><span class="p">);</span>
      <span class="k">return</span> <span class="p">[</span> <span class="err">ρ</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">n</span> <span class="o">*</span> <span class="err">λ</span><span class="p">),</span> <span class="nx">F</span> <span class="o">-</span> <span class="err">ρ</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">n</span> <span class="o">*</span> <span class="err">λ</span><span class="p">)</span> <span class="p">];</span>
    <span class="p">}</span>
    <span class="nx">forward</span><span class="p">.</span><span class="nx">invert</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="err">ρ</span><span class="mi">0</span><span class="nx">_y</span> <span class="o">=</span> <span class="nx">F</span> <span class="o">-</span> <span class="nx">y</span><span class="p">,</span> <span class="err">ρ</span> <span class="o">=</span> <span class="nx">d3_sgn</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">x</span> <span class="o">+</span> <span class="err">ρ</span><span class="mi">0</span><span class="nx">_y</span> <span class="o">*</span> <span class="err">ρ</span><span class="mi">0</span><span class="nx">_y</span><span class="p">);</span>
      <span class="k">return</span> <span class="p">[</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan2</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="err">ρ</span><span class="mi">0</span><span class="nx">_y</span><span class="p">)</span> <span class="o">/</span> <span class="nx">n</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nx">F</span> <span class="o">/</span> <span class="err">ρ</span><span class="p">,</span> <span class="mi">1</span> <span class="o">/</span> <span class="nx">n</span><span class="p">))</span> <span class="o">-</span> <span class="nx">half</span><span class="err">π</span> <span class="p">];</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">forward</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">conicConformal</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_geo_conic</span><span class="p">(</span><span class="nx">d3_geo_conicConformal</span><span class="p">);</span>
  <span class="p">}).</span><span class="nx">raw</span> <span class="o">=</span> <span class="nx">d3_geo_conicConformal</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">d3_geo_conicEquidistant</span><span class="p">(</span><span class="err">φ</span><span class="mi">0</span><span class="p">,</span> <span class="err">φ</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">cos</span><span class="err">φ</span><span class="mi">0</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">φ</span><span class="mi">0</span><span class="p">),</span> <span class="nx">n</span> <span class="o">=</span> <span class="err">φ</span><span class="mi">0</span> <span class="o">===</span> <span class="err">φ</span><span class="mi">1</span> <span class="o">?</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="err">φ</span><span class="mi">0</span><span class="p">)</span> <span class="o">:</span> <span class="p">(</span><span class="nx">cos</span><span class="err">φ</span><span class="mi">0</span> <span class="o">-</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="err">φ</span><span class="mi">1</span><span class="p">))</span> <span class="o">/</span> <span class="p">(</span><span class="err">φ</span><span class="mi">1</span> <span class="o">-</span> <span class="err">φ</span><span class="mi">0</span><span class="p">),</span> <span class="nx">G</span> <span class="o">=</span> <span class="nx">cos</span><span class="err">φ</span><span class="mi">0</span> <span class="o">/</span> <span class="nx">n</span> <span class="o">+</span> <span class="err">φ</span><span class="mi">0</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">abs</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span> <span class="o">&lt;</span> <span class="err">ε</span><span class="p">)</span> <span class="k">return</span> <span class="nx">d3_geo_equirectangular</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">forward</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="err">ρ</span> <span class="o">=</span> <span class="nx">G</span> <span class="o">-</span> <span class="err">φ</span><span class="p">;</span>
      <span class="k">return</span> <span class="p">[</span> <span class="err">ρ</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">n</span> <span class="o">*</span> <span class="err">λ</span><span class="p">),</span> <span class="nx">G</span> <span class="o">-</span> <span class="err">ρ</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">n</span> <span class="o">*</span> <span class="err">λ</span><span class="p">)</span> <span class="p">];</span>
    <span class="p">}</span>
    <span class="nx">forward</span><span class="p">.</span><span class="nx">invert</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="err">ρ</span><span class="mi">0</span><span class="nx">_y</span> <span class="o">=</span> <span class="nx">G</span> <span class="o">-</span> <span class="nx">y</span><span class="p">;</span>
      <span class="k">return</span> <span class="p">[</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan2</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="err">ρ</span><span class="mi">0</span><span class="nx">_y</span><span class="p">)</span> <span class="o">/</span> <span class="nx">n</span><span class="p">,</span> <span class="nx">G</span> <span class="o">-</span> <span class="nx">d3_sgn</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">x</span> <span class="o">+</span> <span class="err">ρ</span><span class="mi">0</span><span class="nx">_y</span> <span class="o">*</span> <span class="err">ρ</span><span class="mi">0</span><span class="nx">_y</span><span class="p">)</span> <span class="p">];</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">forward</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">conicEquidistant</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_geo_conic</span><span class="p">(</span><span class="nx">d3_geo_conicEquidistant</span><span class="p">);</span>
  <span class="p">}).</span><span class="nx">raw</span> <span class="o">=</span> <span class="nx">d3_geo_conicEquidistant</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">d3_geo_gnomonic</span> <span class="o">=</span> <span class="nx">d3_geo_azimuthal</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">cos</span><span class="err">λ</span><span class="nx">cos</span><span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="mi">1</span> <span class="o">/</span> <span class="nx">cos</span><span class="err">λ</span><span class="nx">cos</span><span class="err">φ</span><span class="p">;</span>
  <span class="p">},</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan</span><span class="p">);</span>
  <span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">gnomonic</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_geo_projection</span><span class="p">(</span><span class="nx">d3_geo_gnomonic</span><span class="p">);</span>
  <span class="p">}).</span><span class="nx">raw</span> <span class="o">=</span> <span class="nx">d3_geo_gnomonic</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">d3_geo_mercator</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span> <span class="err">λ</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">tan</span><span class="p">(</span><span class="err">π</span> <span class="o">/</span> <span class="mi">4</span> <span class="o">+</span> <span class="err">φ</span> <span class="o">/</span> <span class="mi">2</span><span class="p">))</span> <span class="p">];</span>
  <span class="p">}</span>
  <span class="nx">d3_geo_mercator</span><span class="p">.</span><span class="nx">invert</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span> <span class="nx">x</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">exp</span><span class="p">(</span><span class="nx">y</span><span class="p">))</span> <span class="o">-</span> <span class="nx">half</span><span class="err">π</span> <span class="p">];</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_geo_mercatorProjection</span><span class="p">(</span><span class="nx">project</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">d3_geo_projection</span><span class="p">(</span><span class="nx">project</span><span class="p">),</span> <span class="nx">scale</span> <span class="o">=</span> <span class="nx">m</span><span class="p">.</span><span class="nx">scale</span><span class="p">,</span> <span class="nx">translate</span> <span class="o">=</span> <span class="nx">m</span><span class="p">.</span><span class="nx">translate</span><span class="p">,</span> <span class="nx">clipExtent</span> <span class="o">=</span> <span class="nx">m</span><span class="p">.</span><span class="nx">clipExtent</span><span class="p">,</span> <span class="nx">clipAuto</span><span class="p">;</span>
    <span class="nx">m</span><span class="p">.</span><span class="nx">scale</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">v</span> <span class="o">=</span> <span class="nx">scale</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">m</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">v</span> <span class="o">===</span> <span class="nx">m</span> <span class="o">?</span> <span class="nx">clipAuto</span> <span class="o">?</span> <span class="nx">m</span><span class="p">.</span><span class="nx">clipExtent</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span> <span class="o">:</span> <span class="nx">m</span> <span class="o">:</span> <span class="nx">v</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">m</span><span class="p">.</span><span class="nx">translate</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">v</span> <span class="o">=</span> <span class="nx">translate</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">m</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">v</span> <span class="o">===</span> <span class="nx">m</span> <span class="o">?</span> <span class="nx">clipAuto</span> <span class="o">?</span> <span class="nx">m</span><span class="p">.</span><span class="nx">clipExtent</span><span class="p">(</span><span class="kc">null</span><span class="p">)</span> <span class="o">:</span> <span class="nx">m</span> <span class="o">:</span> <span class="nx">v</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">m</span><span class="p">.</span><span class="nx">clipExtent</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">v</span> <span class="o">=</span> <span class="nx">clipExtent</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">m</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">v</span> <span class="o">===</span> <span class="nx">m</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">clipAuto</span> <span class="o">=</span> <span class="nx">_</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">k</span> <span class="o">=</span> <span class="err">π</span> <span class="o">*</span> <span class="nx">scale</span><span class="p">(),</span> <span class="nx">t</span> <span class="o">=</span> <span class="nx">translate</span><span class="p">();</span>
          <span class="nx">clipExtent</span><span class="p">([</span> <span class="p">[</span> <span class="nx">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">t</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">k</span> <span class="p">],</span> <span class="p">[</span> <span class="nx">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">t</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="nx">k</span> <span class="p">]</span> <span class="p">]);</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">clipAuto</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">v</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">v</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">m</span><span class="p">.</span><span class="nx">clipExtent</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">mercator</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_geo_mercatorProjection</span><span class="p">(</span><span class="nx">d3_geo_mercator</span><span class="p">);</span>
  <span class="p">}).</span><span class="nx">raw</span> <span class="o">=</span> <span class="nx">d3_geo_mercator</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">d3_geo_orthographic</span> <span class="o">=</span> <span class="nx">d3_geo_azimuthal</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">},</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">asin</span><span class="p">);</span>
  <span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">orthographic</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_geo_projection</span><span class="p">(</span><span class="nx">d3_geo_orthographic</span><span class="p">);</span>
  <span class="p">}).</span><span class="nx">raw</span> <span class="o">=</span> <span class="nx">d3_geo_orthographic</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">d3_geo_stereographic</span> <span class="o">=</span> <span class="nx">d3_geo_azimuthal</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">cos</span><span class="err">λ</span><span class="nx">cos</span><span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="nx">cos</span><span class="err">λ</span><span class="nx">cos</span><span class="err">φ</span><span class="p">);</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="err">ρ</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="mi">2</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan</span><span class="p">(</span><span class="err">ρ</span><span class="p">);</span>
  <span class="p">});</span>
  <span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">stereographic</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_geo_projection</span><span class="p">(</span><span class="nx">d3_geo_stereographic</span><span class="p">);</span>
  <span class="p">}).</span><span class="nx">raw</span> <span class="o">=</span> <span class="nx">d3_geo_stereographic</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">d3_geo_transverseMercator</span><span class="p">(</span><span class="err">λ</span><span class="p">,</span> <span class="err">φ</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">tan</span><span class="p">(</span><span class="err">π</span> <span class="o">/</span> <span class="mi">4</span> <span class="o">+</span> <span class="err">φ</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)),</span> <span class="o">-</span><span class="err">λ</span> <span class="p">];</span>
  <span class="p">}</span>
  <span class="nx">d3_geo_transverseMercator</span><span class="p">.</span><span class="nx">invert</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span> <span class="o">-</span><span class="nx">y</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">exp</span><span class="p">(</span><span class="nx">x</span><span class="p">))</span> <span class="o">-</span> <span class="nx">half</span><span class="err">π</span> <span class="p">];</span>
  <span class="p">};</span>
  <span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">geo</span><span class="p">.</span><span class="nx">transverseMercator</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">projection</span> <span class="o">=</span> <span class="nx">d3_geo_mercatorProjection</span><span class="p">(</span><span class="nx">d3_geo_transverseMercator</span><span class="p">),</span> <span class="nx">center</span> <span class="o">=</span> <span class="nx">projection</span><span class="p">.</span><span class="nx">center</span><span class="p">,</span> <span class="nx">rotate</span> <span class="o">=</span> <span class="nx">projection</span><span class="p">.</span><span class="nx">rotate</span><span class="p">;</span>
    <span class="nx">projection</span><span class="p">.</span><span class="nx">center</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">_</span> <span class="o">?</span> <span class="nx">center</span><span class="p">([</span> <span class="o">-</span><span class="nx">_</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">_</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">])</span> <span class="o">:</span> <span class="p">(</span><span class="nx">_</span> <span class="o">=</span> <span class="nx">center</span><span class="p">(),</span> <span class="p">[</span> <span class="o">-</span><span class="nx">_</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">_</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">]);</span>
    <span class="p">};</span>
    <span class="nx">projection</span><span class="p">.</span><span class="nx">rotate</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">_</span> <span class="o">?</span> <span class="nx">rotate</span><span class="p">([</span> <span class="nx">_</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">_</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">_</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="o">?</span> <span class="nx">_</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="mi">90</span> <span class="o">:</span> <span class="mi">90</span> <span class="p">])</span> <span class="o">:</span> <span class="p">(</span><span class="nx">_</span> <span class="o">=</span> <span class="nx">rotate</span><span class="p">(),</span> 
      <span class="p">[</span> <span class="nx">_</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">_</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">_</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="mi">90</span> <span class="p">]);</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">projection</span><span class="p">.</span><span class="nx">rotate</span><span class="p">([</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">]);</span>
  <span class="p">}).</span><span class="nx">raw</span> <span class="o">=</span> <span class="nx">d3_geo_transverseMercator</span><span class="p">;</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">geom</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="kd">function</span> <span class="nx">d3_geom_pointX</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geom_pointY</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">geom</span><span class="p">.</span><span class="nx">hull</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">vertices</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">d3_geom_pointX</span><span class="p">,</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">d3_geom_pointY</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">hull</span><span class="p">(</span><span class="nx">vertices</span><span class="p">);</span>
    <span class="kd">function</span> <span class="nx">hull</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="k">return</span> <span class="p">[];</span>
      <span class="kd">var</span> <span class="nx">fx</span> <span class="o">=</span> <span class="nx">d3_functor</span><span class="p">(</span><span class="nx">x</span><span class="p">),</span> <span class="nx">fy</span> <span class="o">=</span> <span class="nx">d3_functor</span><span class="p">(</span><span class="nx">y</span><span class="p">),</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">points</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">flippedPoints</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">points</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span> <span class="o">+</span><span class="nx">fx</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">),</span> <span class="o">+</span><span class="nx">fy</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">),</span> <span class="nx">i</span> <span class="p">]);</span>
      <span class="p">}</span>
      <span class="nx">points</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="nx">d3_geom_hullOrder</span><span class="p">);</span>
      <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="nx">flippedPoints</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="o">-</span><span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="p">]);</span>
      <span class="kd">var</span> <span class="nx">upper</span> <span class="o">=</span> <span class="nx">d3_geom_hullUpper</span><span class="p">(</span><span class="nx">points</span><span class="p">),</span> <span class="nx">lower</span> <span class="o">=</span> <span class="nx">d3_geom_hullUpper</span><span class="p">(</span><span class="nx">flippedPoints</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">skipLeft</span> <span class="o">=</span> <span class="nx">lower</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">===</span> <span class="nx">upper</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">skipRight</span> <span class="o">=</span> <span class="nx">lower</span><span class="p">[</span><span class="nx">lower</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">===</span> <span class="nx">upper</span><span class="p">[</span><span class="nx">upper</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">],</span> <span class="nx">polygon</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="nx">upper</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="o">--</span><span class="nx">i</span><span class="p">)</span> <span class="nx">polygon</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="nx">points</span><span class="p">[</span><span class="nx">upper</span><span class="p">[</span><span class="nx">i</span><span class="p">]][</span><span class="mi">2</span><span class="p">]]);</span>
      <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="o">+</span><span class="nx">skipLeft</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">lower</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="nx">skipRight</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="nx">polygon</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="nx">points</span><span class="p">[</span><span class="nx">lower</span><span class="p">[</span><span class="nx">i</span><span class="p">]][</span><span class="mi">2</span><span class="p">]]);</span>
      <span class="k">return</span> <span class="nx">polygon</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">hull</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="p">(</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">hull</span><span class="p">)</span> <span class="o">:</span> <span class="nx">x</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">hull</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="p">(</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">hull</span><span class="p">)</span> <span class="o">:</span> <span class="nx">y</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">hull</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_geom_hullUpper</span><span class="p">(</span><span class="nx">points</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">hull</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span> <span class="p">],</span> <span class="nx">hs</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">while</span> <span class="p">(</span><span class="nx">hs</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="nx">d3_cross2d</span><span class="p">(</span><span class="nx">points</span><span class="p">[</span><span class="nx">hull</span><span class="p">[</span><span class="nx">hs</span> <span class="o">-</span> <span class="mi">2</span><span class="p">]],</span> <span class="nx">points</span><span class="p">[</span><span class="nx">hull</span><span class="p">[</span><span class="nx">hs</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]],</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">--</span><span class="nx">hs</span><span class="p">;</span>
      <span class="nx">hull</span><span class="p">[</span><span class="nx">hs</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">hull</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">hs</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geom_hullOrder</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span> <span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">geom</span><span class="p">.</span><span class="nx">polygon</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">coordinates</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">d3_subclass</span><span class="p">(</span><span class="nx">coordinates</span><span class="p">,</span> <span class="nx">d3_geom_polygonPrototype</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">coordinates</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">d3_geom_polygonPrototype</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">geom</span><span class="p">.</span><span class="nx">polygon</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="nx">d3_geom_polygonPrototype</span><span class="p">.</span><span class="nx">area</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">],</span> <span class="nx">area</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">a</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
      <span class="nx">b</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
      <span class="nx">area</span> <span class="o">+=</span> <span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">area</span> <span class="o">*</span> <span class="p">.</span><span class="mi">5</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nx">d3_geom_polygonPrototype</span><span class="p">.</span><span class="nx">centroid</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">k</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">],</span> <span class="nx">c</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="nx">k</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="mi">6</span> <span class="o">*</span> <span class="k">this</span><span class="p">.</span><span class="nx">area</span><span class="p">());</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">a</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
      <span class="nx">b</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
      <span class="nx">c</span> <span class="o">=</span> <span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
      <span class="nx">x</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="nx">c</span><span class="p">;</span>
      <span class="nx">y</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">*</span> <span class="nx">c</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="p">[</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">y</span> <span class="o">*</span> <span class="nx">k</span> <span class="p">];</span>
  <span class="p">};</span>
  <span class="nx">d3_geom_polygonPrototype</span><span class="p">.</span><span class="nx">clip</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">subject</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">input</span><span class="p">,</span> <span class="nx">closed</span> <span class="o">=</span> <span class="nx">d3_geom_polygonClosed</span><span class="p">(</span><span class="nx">subject</span><span class="p">),</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="nx">d3_geom_polygonClosed</span><span class="p">(</span><span class="k">this</span><span class="p">),</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">m</span><span class="p">,</span> <span class="nx">a</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">],</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">,</span> <span class="nx">d</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">input</span> <span class="o">=</span> <span class="nx">subject</span><span class="p">.</span><span class="nx">slice</span><span class="p">();</span>
      <span class="nx">subject</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">b</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
      <span class="nx">c</span> <span class="o">=</span> <span class="nx">input</span><span class="p">[(</span><span class="nx">m</span> <span class="o">=</span> <span class="nx">input</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="nx">closed</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
      <span class="nx">j</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">d</span> <span class="o">=</span> <span class="nx">input</span><span class="p">[</span><span class="nx">j</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">d3_geom_polygonInside</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">))</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">d3_geom_polygonInside</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">subject</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">d3_geom_polygonIntersect</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">));</span>
          <span class="p">}</span>
          <span class="nx">subject</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">d</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">d3_geom_polygonInside</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">))</span> <span class="p">{</span>
          <span class="nx">subject</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">d3_geom_polygonIntersect</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">));</span>
        <span class="p">}</span>
        <span class="nx">c</span> <span class="o">=</span> <span class="nx">d</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">closed</span><span class="p">)</span> <span class="nx">subject</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">subject</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
      <span class="nx">a</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">subject</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_geom_polygonInside</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">*</span> <span class="p">(</span><span class="nx">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">&lt;</span> <span class="p">(</span><span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">*</span> <span class="p">(</span><span class="nx">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geom_polygonIntersect</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">x1</span> <span class="o">=</span> <span class="nx">c</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">x3</span> <span class="o">=</span> <span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">x21</span> <span class="o">=</span> <span class="nx">d</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">x43</span> <span class="o">=</span> <span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">x3</span><span class="p">,</span> <span class="nx">y1</span> <span class="o">=</span> <span class="nx">c</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">y3</span> <span class="o">=</span> <span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">y21</span> <span class="o">=</span> <span class="nx">d</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">y1</span><span class="p">,</span> <span class="nx">y43</span> <span class="o">=</span> <span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">y3</span><span class="p">,</span> <span class="nx">ua</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x43</span> <span class="o">*</span> <span class="p">(</span><span class="nx">y1</span> <span class="o">-</span> <span class="nx">y3</span><span class="p">)</span> <span class="o">-</span> <span class="nx">y43</span> <span class="o">*</span> <span class="p">(</span><span class="nx">x1</span> <span class="o">-</span> <span class="nx">x3</span><span class="p">))</span> <span class="o">/</span> <span class="p">(</span><span class="nx">y43</span> <span class="o">*</span> <span class="nx">x21</span> <span class="o">-</span> <span class="nx">x43</span> <span class="o">*</span> <span class="nx">y21</span><span class="p">);</span>
    <span class="k">return</span> <span class="p">[</span> <span class="nx">x1</span> <span class="o">+</span> <span class="nx">ua</span> <span class="o">*</span> <span class="nx">x21</span><span class="p">,</span> <span class="nx">y1</span> <span class="o">+</span> <span class="nx">ua</span> <span class="o">*</span> <span class="nx">y21</span> <span class="p">];</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geom_polygonClosed</span><span class="p">(</span><span class="nx">coordinates</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">coordinates</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">coordinates</span><span class="p">[</span><span class="nx">coordinates</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
    <span class="k">return</span> <span class="o">!</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span> <span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">d3_geom_voronoiEdges</span><span class="p">,</span> <span class="nx">d3_geom_voronoiCells</span><span class="p">,</span> <span class="nx">d3_geom_voronoiBeaches</span><span class="p">,</span> <span class="nx">d3_geom_voronoiBeachPool</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">d3_geom_voronoiFirstCircle</span><span class="p">,</span> <span class="nx">d3_geom_voronoiCircles</span><span class="p">,</span> <span class="nx">d3_geom_voronoiCirclePool</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="kd">function</span> <span class="nx">d3_geom_voronoiBeach</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">d3_geom_voronoiRedBlackNode</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">edge</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">site</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">circle</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geom_voronoiCreateBeach</span><span class="p">(</span><span class="nx">site</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">beach</span> <span class="o">=</span> <span class="nx">d3_geom_voronoiBeachPool</span><span class="p">.</span><span class="nx">pop</span><span class="p">()</span> <span class="o">||</span> <span class="k">new</span> <span class="nx">d3_geom_voronoiBeach</span><span class="p">();</span>
    <span class="nx">beach</span><span class="p">.</span><span class="nx">site</span> <span class="o">=</span> <span class="nx">site</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">beach</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geom_voronoiDetachBeach</span><span class="p">(</span><span class="nx">beach</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">d3_geom_voronoiDetachCircle</span><span class="p">(</span><span class="nx">beach</span><span class="p">);</span>
    <span class="nx">d3_geom_voronoiBeaches</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">beach</span><span class="p">);</span>
    <span class="nx">d3_geom_voronoiBeachPool</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">beach</span><span class="p">);</span>
    <span class="nx">d3_geom_voronoiRedBlackNode</span><span class="p">(</span><span class="nx">beach</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geom_voronoiRemoveBeach</span><span class="p">(</span><span class="nx">beach</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">circle</span> <span class="o">=</span> <span class="nx">beach</span><span class="p">.</span><span class="nx">circle</span><span class="p">,</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">circle</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">circle</span><span class="p">.</span><span class="nx">cy</span><span class="p">,</span> <span class="nx">vertex</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">x</span><span class="o">:</span> <span class="nx">x</span><span class="p">,</span>
      <span class="nx">y</span><span class="o">:</span> <span class="nx">y</span>
    <span class="p">},</span> <span class="nx">previous</span> <span class="o">=</span> <span class="nx">beach</span><span class="p">.</span><span class="nx">P</span><span class="p">,</span> <span class="nx">next</span> <span class="o">=</span> <span class="nx">beach</span><span class="p">.</span><span class="nx">N</span><span class="p">,</span> <span class="nx">disappearing</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">beach</span> <span class="p">];</span>
    <span class="nx">d3_geom_voronoiDetachBeach</span><span class="p">(</span><span class="nx">beach</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">lArc</span> <span class="o">=</span> <span class="nx">previous</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="nx">lArc</span><span class="p">.</span><span class="nx">circle</span> <span class="o">&amp;&amp;</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">lArc</span><span class="p">.</span><span class="nx">circle</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="o">&lt;</span> <span class="err">ε</span> <span class="o">&amp;&amp;</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">lArc</span><span class="p">.</span><span class="nx">circle</span><span class="p">.</span><span class="nx">cy</span><span class="p">)</span> <span class="o">&lt;</span> <span class="err">ε</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">previous</span> <span class="o">=</span> <span class="nx">lArc</span><span class="p">.</span><span class="nx">P</span><span class="p">;</span>
      <span class="nx">disappearing</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">lArc</span><span class="p">);</span>
      <span class="nx">d3_geom_voronoiDetachBeach</span><span class="p">(</span><span class="nx">lArc</span><span class="p">);</span>
      <span class="nx">lArc</span> <span class="o">=</span> <span class="nx">previous</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">disappearing</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">lArc</span><span class="p">);</span>
    <span class="nx">d3_geom_voronoiDetachCircle</span><span class="p">(</span><span class="nx">lArc</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">rArc</span> <span class="o">=</span> <span class="nx">next</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="nx">rArc</span><span class="p">.</span><span class="nx">circle</span> <span class="o">&amp;&amp;</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">rArc</span><span class="p">.</span><span class="nx">circle</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="o">&lt;</span> <span class="err">ε</span> <span class="o">&amp;&amp;</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">rArc</span><span class="p">.</span><span class="nx">circle</span><span class="p">.</span><span class="nx">cy</span><span class="p">)</span> <span class="o">&lt;</span> <span class="err">ε</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">next</span> <span class="o">=</span> <span class="nx">rArc</span><span class="p">.</span><span class="nx">N</span><span class="p">;</span>
      <span class="nx">disappearing</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">rArc</span><span class="p">);</span>
      <span class="nx">d3_geom_voronoiDetachBeach</span><span class="p">(</span><span class="nx">rArc</span><span class="p">);</span>
      <span class="nx">rArc</span> <span class="o">=</span> <span class="nx">next</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">disappearing</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">rArc</span><span class="p">);</span>
    <span class="nx">d3_geom_voronoiDetachCircle</span><span class="p">(</span><span class="nx">rArc</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">nArcs</span> <span class="o">=</span> <span class="nx">disappearing</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">iArc</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="nx">iArc</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">iArc</span> <span class="o">&lt;</span> <span class="nx">nArcs</span><span class="p">;</span> <span class="o">++</span><span class="nx">iArc</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">rArc</span> <span class="o">=</span> <span class="nx">disappearing</span><span class="p">[</span><span class="nx">iArc</span><span class="p">];</span>
      <span class="nx">lArc</span> <span class="o">=</span> <span class="nx">disappearing</span><span class="p">[</span><span class="nx">iArc</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
      <span class="nx">d3_geom_voronoiSetEdgeEnd</span><span class="p">(</span><span class="nx">rArc</span><span class="p">.</span><span class="nx">edge</span><span class="p">,</span> <span class="nx">lArc</span><span class="p">.</span><span class="nx">site</span><span class="p">,</span> <span class="nx">rArc</span><span class="p">.</span><span class="nx">site</span><span class="p">,</span> <span class="nx">vertex</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">lArc</span> <span class="o">=</span> <span class="nx">disappearing</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="nx">rArc</span> <span class="o">=</span> <span class="nx">disappearing</span><span class="p">[</span><span class="nx">nArcs</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
    <span class="nx">rArc</span><span class="p">.</span><span class="nx">edge</span> <span class="o">=</span> <span class="nx">d3_geom_voronoiCreateEdge</span><span class="p">(</span><span class="nx">lArc</span><span class="p">.</span><span class="nx">site</span><span class="p">,</span> <span class="nx">rArc</span><span class="p">.</span><span class="nx">site</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">vertex</span><span class="p">);</span>
    <span class="nx">d3_geom_voronoiAttachCircle</span><span class="p">(</span><span class="nx">lArc</span><span class="p">);</span>
    <span class="nx">d3_geom_voronoiAttachCircle</span><span class="p">(</span><span class="nx">rArc</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geom_voronoiAddBeach</span><span class="p">(</span><span class="nx">site</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">site</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">directrix</span> <span class="o">=</span> <span class="nx">site</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">lArc</span><span class="p">,</span> <span class="nx">rArc</span><span class="p">,</span> <span class="nx">dxl</span><span class="p">,</span> <span class="nx">dxr</span><span class="p">,</span> <span class="nx">node</span> <span class="o">=</span> <span class="nx">d3_geom_voronoiBeaches</span><span class="p">.</span><span class="nx">_</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">dxl</span> <span class="o">=</span> <span class="nx">d3_geom_voronoiLeftBreakPoint</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">directrix</span><span class="p">)</span> <span class="o">-</span> <span class="nx">x</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">dxl</span> <span class="o">&gt;</span> <span class="err">ε</span><span class="p">)</span> <span class="nx">node</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">L</span><span class="p">;</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">dxr</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">-</span> <span class="nx">d3_geom_voronoiRightBreakPoint</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">directrix</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">dxr</span> <span class="o">&gt;</span> <span class="err">ε</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">node</span><span class="p">.</span><span class="nx">R</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">lArc</span> <span class="o">=</span> <span class="nx">node</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="nx">node</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">R</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">dxl</span> <span class="o">&gt;</span> <span class="o">-</span><span class="err">ε</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">lArc</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">P</span><span class="p">;</span>
            <span class="nx">rArc</span> <span class="o">=</span> <span class="nx">node</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">dxr</span> <span class="o">&gt;</span> <span class="o">-</span><span class="err">ε</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">lArc</span> <span class="o">=</span> <span class="nx">node</span><span class="p">;</span>
            <span class="nx">rArc</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">N</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">lArc</span> <span class="o">=</span> <span class="nx">rArc</span> <span class="o">=</span> <span class="nx">node</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="kd">var</span> <span class="nx">newArc</span> <span class="o">=</span> <span class="nx">d3_geom_voronoiCreateBeach</span><span class="p">(</span><span class="nx">site</span><span class="p">);</span>
    <span class="nx">d3_geom_voronoiBeaches</span><span class="p">.</span><span class="nx">insert</span><span class="p">(</span><span class="nx">lArc</span><span class="p">,</span> <span class="nx">newArc</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">lArc</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">rArc</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">lArc</span> <span class="o">===</span> <span class="nx">rArc</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">d3_geom_voronoiDetachCircle</span><span class="p">(</span><span class="nx">lArc</span><span class="p">);</span>
      <span class="nx">rArc</span> <span class="o">=</span> <span class="nx">d3_geom_voronoiCreateBeach</span><span class="p">(</span><span class="nx">lArc</span><span class="p">.</span><span class="nx">site</span><span class="p">);</span>
      <span class="nx">d3_geom_voronoiBeaches</span><span class="p">.</span><span class="nx">insert</span><span class="p">(</span><span class="nx">newArc</span><span class="p">,</span> <span class="nx">rArc</span><span class="p">);</span>
      <span class="nx">newArc</span><span class="p">.</span><span class="nx">edge</span> <span class="o">=</span> <span class="nx">rArc</span><span class="p">.</span><span class="nx">edge</span> <span class="o">=</span> <span class="nx">d3_geom_voronoiCreateEdge</span><span class="p">(</span><span class="nx">lArc</span><span class="p">.</span><span class="nx">site</span><span class="p">,</span> <span class="nx">newArc</span><span class="p">.</span><span class="nx">site</span><span class="p">);</span>
      <span class="nx">d3_geom_voronoiAttachCircle</span><span class="p">(</span><span class="nx">lArc</span><span class="p">);</span>
      <span class="nx">d3_geom_voronoiAttachCircle</span><span class="p">(</span><span class="nx">rArc</span><span class="p">);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">rArc</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">newArc</span><span class="p">.</span><span class="nx">edge</span> <span class="o">=</span> <span class="nx">d3_geom_voronoiCreateEdge</span><span class="p">(</span><span class="nx">lArc</span><span class="p">.</span><span class="nx">site</span><span class="p">,</span> <span class="nx">newArc</span><span class="p">.</span><span class="nx">site</span><span class="p">);</span>
      <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">d3_geom_voronoiDetachCircle</span><span class="p">(</span><span class="nx">lArc</span><span class="p">);</span>
    <span class="nx">d3_geom_voronoiDetachCircle</span><span class="p">(</span><span class="nx">rArc</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">lSite</span> <span class="o">=</span> <span class="nx">lArc</span><span class="p">.</span><span class="nx">site</span><span class="p">,</span> <span class="nx">ax</span> <span class="o">=</span> <span class="nx">lSite</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">ay</span> <span class="o">=</span> <span class="nx">lSite</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">bx</span> <span class="o">=</span> <span class="nx">site</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">ax</span><span class="p">,</span> <span class="nx">by</span> <span class="o">=</span> <span class="nx">site</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">ay</span><span class="p">,</span> <span class="nx">rSite</span> <span class="o">=</span> <span class="nx">rArc</span><span class="p">.</span><span class="nx">site</span><span class="p">,</span> <span class="nx">cx</span> <span class="o">=</span> <span class="nx">rSite</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">ax</span><span class="p">,</span> <span class="nx">cy</span> <span class="o">=</span> <span class="nx">rSite</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">ay</span><span class="p">,</span> <span class="nx">d</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="nx">bx</span> <span class="o">*</span> <span class="nx">cy</span> <span class="o">-</span> <span class="nx">by</span> <span class="o">*</span> <span class="nx">cx</span><span class="p">),</span> <span class="nx">hb</span> <span class="o">=</span> <span class="nx">bx</span> <span class="o">*</span> <span class="nx">bx</span> <span class="o">+</span> <span class="nx">by</span> <span class="o">*</span> <span class="nx">by</span><span class="p">,</span> <span class="nx">hc</span> <span class="o">=</span> <span class="nx">cx</span> <span class="o">*</span> <span class="nx">cx</span> <span class="o">+</span> <span class="nx">cy</span> <span class="o">*</span> <span class="nx">cy</span><span class="p">,</span> <span class="nx">vertex</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">x</span><span class="o">:</span> <span class="p">(</span><span class="nx">cy</span> <span class="o">*</span> <span class="nx">hb</span> <span class="o">-</span> <span class="nx">by</span> <span class="o">*</span> <span class="nx">hc</span><span class="p">)</span> <span class="o">/</span> <span class="nx">d</span> <span class="o">+</span> <span class="nx">ax</span><span class="p">,</span>
      <span class="nx">y</span><span class="o">:</span> <span class="p">(</span><span class="nx">bx</span> <span class="o">*</span> <span class="nx">hc</span> <span class="o">-</span> <span class="nx">cx</span> <span class="o">*</span> <span class="nx">hb</span><span class="p">)</span> <span class="o">/</span> <span class="nx">d</span> <span class="o">+</span> <span class="nx">ay</span>
    <span class="p">};</span>
    <span class="nx">d3_geom_voronoiSetEdgeEnd</span><span class="p">(</span><span class="nx">rArc</span><span class="p">.</span><span class="nx">edge</span><span class="p">,</span> <span class="nx">lSite</span><span class="p">,</span> <span class="nx">rSite</span><span class="p">,</span> <span class="nx">vertex</span><span class="p">);</span>
    <span class="nx">newArc</span><span class="p">.</span><span class="nx">edge</span> <span class="o">=</span> <span class="nx">d3_geom_voronoiCreateEdge</span><span class="p">(</span><span class="nx">lSite</span><span class="p">,</span> <span class="nx">site</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">vertex</span><span class="p">);</span>
    <span class="nx">rArc</span><span class="p">.</span><span class="nx">edge</span> <span class="o">=</span> <span class="nx">d3_geom_voronoiCreateEdge</span><span class="p">(</span><span class="nx">site</span><span class="p">,</span> <span class="nx">rSite</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">vertex</span><span class="p">);</span>
    <span class="nx">d3_geom_voronoiAttachCircle</span><span class="p">(</span><span class="nx">lArc</span><span class="p">);</span>
    <span class="nx">d3_geom_voronoiAttachCircle</span><span class="p">(</span><span class="nx">rArc</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geom_voronoiLeftBreakPoint</span><span class="p">(</span><span class="nx">arc</span><span class="p">,</span> <span class="nx">directrix</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">site</span> <span class="o">=</span> <span class="nx">arc</span><span class="p">.</span><span class="nx">site</span><span class="p">,</span> <span class="nx">rfocx</span> <span class="o">=</span> <span class="nx">site</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">rfocy</span> <span class="o">=</span> <span class="nx">site</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">pby2</span> <span class="o">=</span> <span class="nx">rfocy</span> <span class="o">-</span> <span class="nx">directrix</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">pby2</span><span class="p">)</span> <span class="k">return</span> <span class="nx">rfocx</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">lArc</span> <span class="o">=</span> <span class="nx">arc</span><span class="p">.</span><span class="nx">P</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">lArc</span><span class="p">)</span> <span class="k">return</span> <span class="o">-</span><span class="kc">Infinity</span><span class="p">;</span>
    <span class="nx">site</span> <span class="o">=</span> <span class="nx">lArc</span><span class="p">.</span><span class="nx">site</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">lfocx</span> <span class="o">=</span> <span class="nx">site</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">lfocy</span> <span class="o">=</span> <span class="nx">site</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">plby2</span> <span class="o">=</span> <span class="nx">lfocy</span> <span class="o">-</span> <span class="nx">directrix</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">plby2</span><span class="p">)</span> <span class="k">return</span> <span class="nx">lfocx</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">hl</span> <span class="o">=</span> <span class="nx">lfocx</span> <span class="o">-</span> <span class="nx">rfocx</span><span class="p">,</span> <span class="nx">aby2</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="nx">pby2</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">/</span> <span class="nx">plby2</span><span class="p">,</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">hl</span> <span class="o">/</span> <span class="nx">plby2</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">aby2</span><span class="p">)</span> <span class="k">return</span> <span class="p">(</span><span class="o">-</span><span class="nx">b</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">b</span> <span class="o">*</span> <span class="nx">b</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="nx">aby2</span> <span class="o">*</span> <span class="p">(</span><span class="nx">hl</span> <span class="o">*</span> <span class="nx">hl</span> <span class="o">/</span> <span class="p">(</span><span class="o">-</span><span class="mi">2</span> <span class="o">*</span> <span class="nx">plby2</span><span class="p">)</span> <span class="o">-</span> <span class="nx">lfocy</span> <span class="o">+</span> <span class="nx">plby2</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="nx">rfocy</span> <span class="o">-</span> <span class="nx">pby2</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)))</span> <span class="o">/</span> <span class="nx">aby2</span> <span class="o">+</span> <span class="nx">rfocx</span><span class="p">;</span>
    <span class="k">return</span> <span class="p">(</span><span class="nx">rfocx</span> <span class="o">+</span> <span class="nx">lfocx</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geom_voronoiRightBreakPoint</span><span class="p">(</span><span class="nx">arc</span><span class="p">,</span> <span class="nx">directrix</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">rArc</span> <span class="o">=</span> <span class="nx">arc</span><span class="p">.</span><span class="nx">N</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">rArc</span><span class="p">)</span> <span class="k">return</span> <span class="nx">d3_geom_voronoiLeftBreakPoint</span><span class="p">(</span><span class="nx">rArc</span><span class="p">,</span> <span class="nx">directrix</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">site</span> <span class="o">=</span> <span class="nx">arc</span><span class="p">.</span><span class="nx">site</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">site</span><span class="p">.</span><span class="nx">y</span> <span class="o">===</span> <span class="nx">directrix</span> <span class="o">?</span> <span class="nx">site</span><span class="p">.</span><span class="nx">x</span> <span class="o">:</span> <span class="kc">Infinity</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geom_voronoiCell</span><span class="p">(</span><span class="nx">site</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">site</span> <span class="o">=</span> <span class="nx">site</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">edges</span> <span class="o">=</span> <span class="p">[];</span>
  <span class="p">}</span>
  <span class="nx">d3_geom_voronoiCell</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">prepare</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">halfEdges</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">edges</span><span class="p">,</span> <span class="nx">iHalfEdge</span> <span class="o">=</span> <span class="nx">halfEdges</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">edge</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="nx">iHalfEdge</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">edge</span> <span class="o">=</span> <span class="nx">halfEdges</span><span class="p">[</span><span class="nx">iHalfEdge</span><span class="p">].</span><span class="nx">edge</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">edge</span><span class="p">.</span><span class="nx">b</span> <span class="o">||</span> <span class="o">!</span><span class="nx">edge</span><span class="p">.</span><span class="nx">a</span><span class="p">)</span> <span class="nx">halfEdges</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">iHalfEdge</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">halfEdges</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="nx">d3_geom_voronoiHalfEdgeOrder</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">halfEdges</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_geom_voronoiCloseCells</span><span class="p">(</span><span class="nx">extent</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">x0</span> <span class="o">=</span> <span class="nx">extent</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="nx">x1</span> <span class="o">=</span> <span class="nx">extent</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y0</span> <span class="o">=</span> <span class="nx">extent</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="nx">y1</span> <span class="o">=</span> <span class="nx">extent</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="nx">x2</span><span class="p">,</span> <span class="nx">y2</span><span class="p">,</span> <span class="nx">x3</span><span class="p">,</span> <span class="nx">y3</span><span class="p">,</span> <span class="nx">cells</span> <span class="o">=</span> <span class="nx">d3_geom_voronoiCells</span><span class="p">,</span> <span class="nx">iCell</span> <span class="o">=</span> <span class="nx">cells</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">cell</span><span class="p">,</span> <span class="nx">iHalfEdge</span><span class="p">,</span> <span class="nx">halfEdges</span><span class="p">,</span> <span class="nx">nHalfEdges</span><span class="p">,</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">end</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="nx">iCell</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">cell</span> <span class="o">=</span> <span class="nx">cells</span><span class="p">[</span><span class="nx">iCell</span><span class="p">];</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">cell</span> <span class="o">||</span> <span class="o">!</span><span class="nx">cell</span><span class="p">.</span><span class="nx">prepare</span><span class="p">())</span> <span class="k">continue</span><span class="p">;</span>
      <span class="nx">halfEdges</span> <span class="o">=</span> <span class="nx">cell</span><span class="p">.</span><span class="nx">edges</span><span class="p">;</span>
      <span class="nx">nHalfEdges</span> <span class="o">=</span> <span class="nx">halfEdges</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
      <span class="nx">iHalfEdge</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="nx">iHalfEdge</span> <span class="o">&lt;</span> <span class="nx">nHalfEdges</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">end</span> <span class="o">=</span> <span class="nx">halfEdges</span><span class="p">[</span><span class="nx">iHalfEdge</span><span class="p">].</span><span class="nx">end</span><span class="p">(),</span> <span class="nx">x3</span> <span class="o">=</span> <span class="nx">end</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y3</span> <span class="o">=</span> <span class="nx">end</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
        <span class="nx">start</span> <span class="o">=</span> <span class="nx">halfEdges</span><span class="p">[</span><span class="o">++</span><span class="nx">iHalfEdge</span> <span class="o">%</span> <span class="nx">nHalfEdges</span><span class="p">].</span><span class="nx">start</span><span class="p">(),</span> <span class="nx">x2</span> <span class="o">=</span> <span class="nx">start</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y2</span> <span class="o">=</span> <span class="nx">start</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">abs</span><span class="p">(</span><span class="nx">x3</span> <span class="o">-</span> <span class="nx">x2</span><span class="p">)</span> <span class="o">&gt;</span> <span class="err">ε</span> <span class="o">||</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">y3</span> <span class="o">-</span> <span class="nx">y2</span><span class="p">)</span> <span class="o">&gt;</span> <span class="err">ε</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">halfEdges</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">iHalfEdge</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">new</span> <span class="nx">d3_geom_voronoiHalfEdge</span><span class="p">(</span><span class="nx">d3_geom_voronoiCreateBorderEdge</span><span class="p">(</span><span class="nx">cell</span><span class="p">.</span><span class="nx">site</span><span class="p">,</span> <span class="nx">end</span><span class="p">,</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">x3</span> <span class="o">-</span> <span class="nx">x0</span><span class="p">)</span> <span class="o">&lt;</span> <span class="err">ε</span> <span class="o">&amp;&amp;</span> <span class="nx">y1</span> <span class="o">-</span> <span class="nx">y3</span> <span class="o">&gt;</span> <span class="err">ε</span> <span class="o">?</span> <span class="p">{</span>
            <span class="nx">x</span><span class="o">:</span> <span class="nx">x0</span><span class="p">,</span>
            <span class="nx">y</span><span class="o">:</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">x2</span> <span class="o">-</span> <span class="nx">x0</span><span class="p">)</span> <span class="o">&lt;</span> <span class="err">ε</span> <span class="o">?</span> <span class="nx">y2</span> <span class="o">:</span> <span class="nx">y1</span>
          <span class="p">}</span> <span class="o">:</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">y3</span> <span class="o">-</span> <span class="nx">y1</span><span class="p">)</span> <span class="o">&lt;</span> <span class="err">ε</span> <span class="o">&amp;&amp;</span> <span class="nx">x1</span> <span class="o">-</span> <span class="nx">x3</span> <span class="o">&gt;</span> <span class="err">ε</span> <span class="o">?</span> <span class="p">{</span>
            <span class="nx">x</span><span class="o">:</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">y2</span> <span class="o">-</span> <span class="nx">y1</span><span class="p">)</span> <span class="o">&lt;</span> <span class="err">ε</span> <span class="o">?</span> <span class="nx">x2</span> <span class="o">:</span> <span class="nx">x1</span><span class="p">,</span>
            <span class="nx">y</span><span class="o">:</span> <span class="nx">y1</span>
          <span class="p">}</span> <span class="o">:</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">x3</span> <span class="o">-</span> <span class="nx">x1</span><span class="p">)</span> <span class="o">&lt;</span> <span class="err">ε</span> <span class="o">&amp;&amp;</span> <span class="nx">y3</span> <span class="o">-</span> <span class="nx">y0</span> <span class="o">&gt;</span> <span class="err">ε</span> <span class="o">?</span> <span class="p">{</span>
            <span class="nx">x</span><span class="o">:</span> <span class="nx">x1</span><span class="p">,</span>
            <span class="nx">y</span><span class="o">:</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">x2</span> <span class="o">-</span> <span class="nx">x1</span><span class="p">)</span> <span class="o">&lt;</span> <span class="err">ε</span> <span class="o">?</span> <span class="nx">y2</span> <span class="o">:</span> <span class="nx">y0</span>
          <span class="p">}</span> <span class="o">:</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">y3</span> <span class="o">-</span> <span class="nx">y0</span><span class="p">)</span> <span class="o">&lt;</span> <span class="err">ε</span> <span class="o">&amp;&amp;</span> <span class="nx">x3</span> <span class="o">-</span> <span class="nx">x0</span> <span class="o">&gt;</span> <span class="err">ε</span> <span class="o">?</span> <span class="p">{</span>
            <span class="nx">x</span><span class="o">:</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">y2</span> <span class="o">-</span> <span class="nx">y0</span><span class="p">)</span> <span class="o">&lt;</span> <span class="err">ε</span> <span class="o">?</span> <span class="nx">x2</span> <span class="o">:</span> <span class="nx">x0</span><span class="p">,</span>
            <span class="nx">y</span><span class="o">:</span> <span class="nx">y0</span>
          <span class="p">}</span> <span class="o">:</span> <span class="kc">null</span><span class="p">),</span> <span class="nx">cell</span><span class="p">.</span><span class="nx">site</span><span class="p">,</span> <span class="kc">null</span><span class="p">));</span>
          <span class="o">++</span><span class="nx">nHalfEdges</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geom_voronoiHalfEdgeOrder</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">angle</span> <span class="o">-</span> <span class="nx">a</span><span class="p">.</span><span class="nx">angle</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geom_voronoiCircle</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">d3_geom_voronoiRedBlackNode</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">arc</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">site</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">cy</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geom_voronoiAttachCircle</span><span class="p">(</span><span class="nx">arc</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">lArc</span> <span class="o">=</span> <span class="nx">arc</span><span class="p">.</span><span class="nx">P</span><span class="p">,</span> <span class="nx">rArc</span> <span class="o">=</span> <span class="nx">arc</span><span class="p">.</span><span class="nx">N</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">lArc</span> <span class="o">||</span> <span class="o">!</span><span class="nx">rArc</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">lSite</span> <span class="o">=</span> <span class="nx">lArc</span><span class="p">.</span><span class="nx">site</span><span class="p">,</span> <span class="nx">cSite</span> <span class="o">=</span> <span class="nx">arc</span><span class="p">.</span><span class="nx">site</span><span class="p">,</span> <span class="nx">rSite</span> <span class="o">=</span> <span class="nx">rArc</span><span class="p">.</span><span class="nx">site</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">lSite</span> <span class="o">===</span> <span class="nx">rSite</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">bx</span> <span class="o">=</span> <span class="nx">cSite</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">by</span> <span class="o">=</span> <span class="nx">cSite</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">ax</span> <span class="o">=</span> <span class="nx">lSite</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">bx</span><span class="p">,</span> <span class="nx">ay</span> <span class="o">=</span> <span class="nx">lSite</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">by</span><span class="p">,</span> <span class="nx">cx</span> <span class="o">=</span> <span class="nx">rSite</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">bx</span><span class="p">,</span> <span class="nx">cy</span> <span class="o">=</span> <span class="nx">rSite</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">by</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="p">(</span><span class="nx">ax</span> <span class="o">*</span> <span class="nx">cy</span> <span class="o">-</span> <span class="nx">ay</span> <span class="o">*</span> <span class="nx">cx</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">d</span> <span class="o">&gt;=</span> <span class="o">-</span><span class="err">ε</span><span class="mi">2</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">ha</span> <span class="o">=</span> <span class="nx">ax</span> <span class="o">*</span> <span class="nx">ax</span> <span class="o">+</span> <span class="nx">ay</span> <span class="o">*</span> <span class="nx">ay</span><span class="p">,</span> <span class="nx">hc</span> <span class="o">=</span> <span class="nx">cx</span> <span class="o">*</span> <span class="nx">cx</span> <span class="o">+</span> <span class="nx">cy</span> <span class="o">*</span> <span class="nx">cy</span><span class="p">,</span> <span class="nx">x</span> <span class="o">=</span> <span class="p">(</span><span class="nx">cy</span> <span class="o">*</span> <span class="nx">ha</span> <span class="o">-</span> <span class="nx">ay</span> <span class="o">*</span> <span class="nx">hc</span><span class="p">)</span> <span class="o">/</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">y</span> <span class="o">=</span> <span class="p">(</span><span class="nx">ax</span> <span class="o">*</span> <span class="nx">hc</span> <span class="o">-</span> <span class="nx">cx</span> <span class="o">*</span> <span class="nx">ha</span><span class="p">)</span> <span class="o">/</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">cy</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">by</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">circle</span> <span class="o">=</span> <span class="nx">d3_geom_voronoiCirclePool</span><span class="p">.</span><span class="nx">pop</span><span class="p">()</span> <span class="o">||</span> <span class="k">new</span> <span class="nx">d3_geom_voronoiCircle</span><span class="p">();</span>
    <span class="nx">circle</span><span class="p">.</span><span class="nx">arc</span> <span class="o">=</span> <span class="nx">arc</span><span class="p">;</span>
    <span class="nx">circle</span><span class="p">.</span><span class="nx">site</span> <span class="o">=</span> <span class="nx">cSite</span><span class="p">;</span>
    <span class="nx">circle</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">bx</span><span class="p">;</span>
    <span class="nx">circle</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">cy</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span> <span class="o">*</span> <span class="nx">y</span><span class="p">);</span>
    <span class="nx">circle</span><span class="p">.</span><span class="nx">cy</span> <span class="o">=</span> <span class="nx">cy</span><span class="p">;</span>
    <span class="nx">arc</span><span class="p">.</span><span class="nx">circle</span> <span class="o">=</span> <span class="nx">circle</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">before</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">node</span> <span class="o">=</span> <span class="nx">d3_geom_voronoiCircles</span><span class="p">.</span><span class="nx">_</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">circle</span><span class="p">.</span><span class="nx">y</span> <span class="o">&lt;</span> <span class="nx">node</span><span class="p">.</span><span class="nx">y</span> <span class="o">||</span> <span class="nx">circle</span><span class="p">.</span><span class="nx">y</span> <span class="o">===</span> <span class="nx">node</span><span class="p">.</span><span class="nx">y</span> <span class="o">&amp;&amp;</span> <span class="nx">circle</span><span class="p">.</span><span class="nx">x</span> <span class="o">&lt;=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">L</span><span class="p">)</span> <span class="nx">node</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">L</span><span class="p">;</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">before</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">P</span><span class="p">;</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">R</span><span class="p">)</span> <span class="nx">node</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">R</span><span class="p">;</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">before</span> <span class="o">=</span> <span class="nx">node</span><span class="p">;</span>
          <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="nx">d3_geom_voronoiCircles</span><span class="p">.</span><span class="nx">insert</span><span class="p">(</span><span class="nx">before</span><span class="p">,</span> <span class="nx">circle</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">before</span><span class="p">)</span> <span class="nx">d3_geom_voronoiFirstCircle</span> <span class="o">=</span> <span class="nx">circle</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geom_voronoiDetachCircle</span><span class="p">(</span><span class="nx">arc</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">circle</span> <span class="o">=</span> <span class="nx">arc</span><span class="p">.</span><span class="nx">circle</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">circle</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">circle</span><span class="p">.</span><span class="nx">P</span><span class="p">)</span> <span class="nx">d3_geom_voronoiFirstCircle</span> <span class="o">=</span> <span class="nx">circle</span><span class="p">.</span><span class="nx">N</span><span class="p">;</span>
      <span class="nx">d3_geom_voronoiCircles</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">circle</span><span class="p">);</span>
      <span class="nx">d3_geom_voronoiCirclePool</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">circle</span><span class="p">);</span>
      <span class="nx">d3_geom_voronoiRedBlackNode</span><span class="p">(</span><span class="nx">circle</span><span class="p">);</span>
      <span class="nx">arc</span><span class="p">.</span><span class="nx">circle</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geom_voronoiClipEdges</span><span class="p">(</span><span class="nx">extent</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">edges</span> <span class="o">=</span> <span class="nx">d3_geom_voronoiEdges</span><span class="p">,</span> <span class="nx">clip</span> <span class="o">=</span> <span class="nx">d3_geom_clipLine</span><span class="p">(</span><span class="nx">extent</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="nx">extent</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="nx">extent</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="nx">extent</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]),</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">edges</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">e</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="nx">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">e</span> <span class="o">=</span> <span class="nx">edges</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">d3_geom_voronoiConnectEdge</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">extent</span><span class="p">)</span> <span class="o">||</span> <span class="o">!</span><span class="nx">clip</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">||</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">e</span><span class="p">.</span><span class="nx">b</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="o">&lt;</span> <span class="err">ε</span> <span class="o">&amp;&amp;</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">e</span><span class="p">.</span><span class="nx">b</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="o">&lt;</span> <span class="err">ε</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">e</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">b</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="nx">edges</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geom_voronoiConnectEdge</span><span class="p">(</span><span class="nx">edge</span><span class="p">,</span> <span class="nx">extent</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">vb</span> <span class="o">=</span> <span class="nx">edge</span><span class="p">.</span><span class="nx">b</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">vb</span><span class="p">)</span> <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">va</span> <span class="o">=</span> <span class="nx">edge</span><span class="p">.</span><span class="nx">a</span><span class="p">,</span> <span class="nx">x0</span> <span class="o">=</span> <span class="nx">extent</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="nx">x1</span> <span class="o">=</span> <span class="nx">extent</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y0</span> <span class="o">=</span> <span class="nx">extent</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="nx">y1</span> <span class="o">=</span> <span class="nx">extent</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="nx">lSite</span> <span class="o">=</span> <span class="nx">edge</span><span class="p">.</span><span class="nx">l</span><span class="p">,</span> <span class="nx">rSite</span> <span class="o">=</span> <span class="nx">edge</span><span class="p">.</span><span class="nx">r</span><span class="p">,</span> <span class="nx">lx</span> <span class="o">=</span> <span class="nx">lSite</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">ly</span> <span class="o">=</span> <span class="nx">lSite</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">rx</span> <span class="o">=</span> <span class="nx">rSite</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">ry</span> <span class="o">=</span> <span class="nx">rSite</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">fx</span> <span class="o">=</span> <span class="p">(</span><span class="nx">lx</span> <span class="o">+</span> <span class="nx">rx</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">fy</span> <span class="o">=</span> <span class="p">(</span><span class="nx">ly</span> <span class="o">+</span> <span class="nx">ry</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">fm</span><span class="p">,</span> <span class="nx">fb</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">ry</span> <span class="o">===</span> <span class="nx">ly</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">fx</span> <span class="o">&lt;</span> <span class="nx">x0</span> <span class="o">||</span> <span class="nx">fx</span> <span class="o">&gt;=</span> <span class="nx">x1</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">lx</span> <span class="o">&gt;</span> <span class="nx">rx</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">va</span><span class="p">)</span> <span class="nx">va</span> <span class="o">=</span> <span class="p">{</span>
          <span class="nx">x</span><span class="o">:</span> <span class="nx">fx</span><span class="p">,</span>
          <span class="nx">y</span><span class="o">:</span> <span class="nx">y0</span>
        <span class="p">};</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">va</span><span class="p">.</span><span class="nx">y</span> <span class="o">&gt;=</span> <span class="nx">y1</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="nx">vb</span> <span class="o">=</span> <span class="p">{</span>
          <span class="nx">x</span><span class="o">:</span> <span class="nx">fx</span><span class="p">,</span>
          <span class="nx">y</span><span class="o">:</span> <span class="nx">y1</span>
        <span class="p">};</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">va</span><span class="p">)</span> <span class="nx">va</span> <span class="o">=</span> <span class="p">{</span>
          <span class="nx">x</span><span class="o">:</span> <span class="nx">fx</span><span class="p">,</span>
          <span class="nx">y</span><span class="o">:</span> <span class="nx">y1</span>
        <span class="p">};</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">va</span><span class="p">.</span><span class="nx">y</span> <span class="o">&lt;</span> <span class="nx">y0</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="nx">vb</span> <span class="o">=</span> <span class="p">{</span>
          <span class="nx">x</span><span class="o">:</span> <span class="nx">fx</span><span class="p">,</span>
          <span class="nx">y</span><span class="o">:</span> <span class="nx">y0</span>
        <span class="p">};</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">fm</span> <span class="o">=</span> <span class="p">(</span><span class="nx">lx</span> <span class="o">-</span> <span class="nx">rx</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nx">ry</span> <span class="o">-</span> <span class="nx">ly</span><span class="p">);</span>
      <span class="nx">fb</span> <span class="o">=</span> <span class="nx">fy</span> <span class="o">-</span> <span class="nx">fm</span> <span class="o">*</span> <span class="nx">fx</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">fm</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">1</span> <span class="o">||</span> <span class="nx">fm</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">lx</span> <span class="o">&gt;</span> <span class="nx">rx</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">va</span><span class="p">)</span> <span class="nx">va</span> <span class="o">=</span> <span class="p">{</span>
            <span class="nx">x</span><span class="o">:</span> <span class="p">(</span><span class="nx">y0</span> <span class="o">-</span> <span class="nx">fb</span><span class="p">)</span> <span class="o">/</span> <span class="nx">fm</span><span class="p">,</span>
            <span class="nx">y</span><span class="o">:</span> <span class="nx">y0</span>
          <span class="p">};</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">va</span><span class="p">.</span><span class="nx">y</span> <span class="o">&gt;=</span> <span class="nx">y1</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
          <span class="nx">vb</span> <span class="o">=</span> <span class="p">{</span>
            <span class="nx">x</span><span class="o">:</span> <span class="p">(</span><span class="nx">y1</span> <span class="o">-</span> <span class="nx">fb</span><span class="p">)</span> <span class="o">/</span> <span class="nx">fm</span><span class="p">,</span>
            <span class="nx">y</span><span class="o">:</span> <span class="nx">y1</span>
          <span class="p">};</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">va</span><span class="p">)</span> <span class="nx">va</span> <span class="o">=</span> <span class="p">{</span>
            <span class="nx">x</span><span class="o">:</span> <span class="p">(</span><span class="nx">y1</span> <span class="o">-</span> <span class="nx">fb</span><span class="p">)</span> <span class="o">/</span> <span class="nx">fm</span><span class="p">,</span>
            <span class="nx">y</span><span class="o">:</span> <span class="nx">y1</span>
          <span class="p">};</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">va</span><span class="p">.</span><span class="nx">y</span> <span class="o">&lt;</span> <span class="nx">y0</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
          <span class="nx">vb</span> <span class="o">=</span> <span class="p">{</span>
            <span class="nx">x</span><span class="o">:</span> <span class="p">(</span><span class="nx">y0</span> <span class="o">-</span> <span class="nx">fb</span><span class="p">)</span> <span class="o">/</span> <span class="nx">fm</span><span class="p">,</span>
            <span class="nx">y</span><span class="o">:</span> <span class="nx">y0</span>
          <span class="p">};</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">ly</span> <span class="o">&lt;</span> <span class="nx">ry</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">va</span><span class="p">)</span> <span class="nx">va</span> <span class="o">=</span> <span class="p">{</span>
            <span class="nx">x</span><span class="o">:</span> <span class="nx">x0</span><span class="p">,</span>
            <span class="nx">y</span><span class="o">:</span> <span class="nx">fm</span> <span class="o">*</span> <span class="nx">x0</span> <span class="o">+</span> <span class="nx">fb</span>
          <span class="p">};</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">va</span><span class="p">.</span><span class="nx">x</span> <span class="o">&gt;=</span> <span class="nx">x1</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
          <span class="nx">vb</span> <span class="o">=</span> <span class="p">{</span>
            <span class="nx">x</span><span class="o">:</span> <span class="nx">x1</span><span class="p">,</span>
            <span class="nx">y</span><span class="o">:</span> <span class="nx">fm</span> <span class="o">*</span> <span class="nx">x1</span> <span class="o">+</span> <span class="nx">fb</span>
          <span class="p">};</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">va</span><span class="p">)</span> <span class="nx">va</span> <span class="o">=</span> <span class="p">{</span>
            <span class="nx">x</span><span class="o">:</span> <span class="nx">x1</span><span class="p">,</span>
            <span class="nx">y</span><span class="o">:</span> <span class="nx">fm</span> <span class="o">*</span> <span class="nx">x1</span> <span class="o">+</span> <span class="nx">fb</span>
          <span class="p">};</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">va</span><span class="p">.</span><span class="nx">x</span> <span class="o">&lt;</span> <span class="nx">x0</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
          <span class="nx">vb</span> <span class="o">=</span> <span class="p">{</span>
            <span class="nx">x</span><span class="o">:</span> <span class="nx">x0</span><span class="p">,</span>
            <span class="nx">y</span><span class="o">:</span> <span class="nx">fm</span> <span class="o">*</span> <span class="nx">x0</span> <span class="o">+</span> <span class="nx">fb</span>
          <span class="p">};</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="nx">edge</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">va</span><span class="p">;</span>
    <span class="nx">edge</span><span class="p">.</span><span class="nx">b</span> <span class="o">=</span> <span class="nx">vb</span><span class="p">;</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geom_voronoiEdge</span><span class="p">(</span><span class="nx">lSite</span><span class="p">,</span> <span class="nx">rSite</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">l</span> <span class="o">=</span> <span class="nx">lSite</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">r</span> <span class="o">=</span> <span class="nx">rSite</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">b</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geom_voronoiCreateEdge</span><span class="p">(</span><span class="nx">lSite</span><span class="p">,</span> <span class="nx">rSite</span><span class="p">,</span> <span class="nx">va</span><span class="p">,</span> <span class="nx">vb</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">edge</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">d3_geom_voronoiEdge</span><span class="p">(</span><span class="nx">lSite</span><span class="p">,</span> <span class="nx">rSite</span><span class="p">);</span>
    <span class="nx">d3_geom_voronoiEdges</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">edge</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">va</span><span class="p">)</span> <span class="nx">d3_geom_voronoiSetEdgeEnd</span><span class="p">(</span><span class="nx">edge</span><span class="p">,</span> <span class="nx">lSite</span><span class="p">,</span> <span class="nx">rSite</span><span class="p">,</span> <span class="nx">va</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">vb</span><span class="p">)</span> <span class="nx">d3_geom_voronoiSetEdgeEnd</span><span class="p">(</span><span class="nx">edge</span><span class="p">,</span> <span class="nx">rSite</span><span class="p">,</span> <span class="nx">lSite</span><span class="p">,</span> <span class="nx">vb</span><span class="p">);</span>
    <span class="nx">d3_geom_voronoiCells</span><span class="p">[</span><span class="nx">lSite</span><span class="p">.</span><span class="nx">i</span><span class="p">].</span><span class="nx">edges</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">new</span> <span class="nx">d3_geom_voronoiHalfEdge</span><span class="p">(</span><span class="nx">edge</span><span class="p">,</span> <span class="nx">lSite</span><span class="p">,</span> <span class="nx">rSite</span><span class="p">));</span>
    <span class="nx">d3_geom_voronoiCells</span><span class="p">[</span><span class="nx">rSite</span><span class="p">.</span><span class="nx">i</span><span class="p">].</span><span class="nx">edges</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="k">new</span> <span class="nx">d3_geom_voronoiHalfEdge</span><span class="p">(</span><span class="nx">edge</span><span class="p">,</span> <span class="nx">rSite</span><span class="p">,</span> <span class="nx">lSite</span><span class="p">));</span>
    <span class="k">return</span> <span class="nx">edge</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geom_voronoiCreateBorderEdge</span><span class="p">(</span><span class="nx">lSite</span><span class="p">,</span> <span class="nx">va</span><span class="p">,</span> <span class="nx">vb</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">edge</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">d3_geom_voronoiEdge</span><span class="p">(</span><span class="nx">lSite</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>
    <span class="nx">edge</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">va</span><span class="p">;</span>
    <span class="nx">edge</span><span class="p">.</span><span class="nx">b</span> <span class="o">=</span> <span class="nx">vb</span><span class="p">;</span>
    <span class="nx">d3_geom_voronoiEdges</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">edge</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">edge</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geom_voronoiSetEdgeEnd</span><span class="p">(</span><span class="nx">edge</span><span class="p">,</span> <span class="nx">lSite</span><span class="p">,</span> <span class="nx">rSite</span><span class="p">,</span> <span class="nx">vertex</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">edge</span><span class="p">.</span><span class="nx">a</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">edge</span><span class="p">.</span><span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">edge</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">vertex</span><span class="p">;</span>
      <span class="nx">edge</span><span class="p">.</span><span class="nx">l</span> <span class="o">=</span> <span class="nx">lSite</span><span class="p">;</span>
      <span class="nx">edge</span><span class="p">.</span><span class="nx">r</span> <span class="o">=</span> <span class="nx">rSite</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">edge</span><span class="p">.</span><span class="nx">l</span> <span class="o">===</span> <span class="nx">rSite</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">edge</span><span class="p">.</span><span class="nx">b</span> <span class="o">=</span> <span class="nx">vertex</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">edge</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">vertex</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geom_voronoiHalfEdge</span><span class="p">(</span><span class="nx">edge</span><span class="p">,</span> <span class="nx">lSite</span><span class="p">,</span> <span class="nx">rSite</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">va</span> <span class="o">=</span> <span class="nx">edge</span><span class="p">.</span><span class="nx">a</span><span class="p">,</span> <span class="nx">vb</span> <span class="o">=</span> <span class="nx">edge</span><span class="p">.</span><span class="nx">b</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">edge</span> <span class="o">=</span> <span class="nx">edge</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">site</span> <span class="o">=</span> <span class="nx">lSite</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">angle</span> <span class="o">=</span> <span class="nx">rSite</span> <span class="o">?</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan2</span><span class="p">(</span><span class="nx">rSite</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">lSite</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">rSite</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">lSite</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="o">:</span> <span class="nx">edge</span><span class="p">.</span><span class="nx">l</span> <span class="o">===</span> <span class="nx">lSite</span> <span class="o">?</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan2</span><span class="p">(</span><span class="nx">vb</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">va</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">va</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">vb</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan2</span><span class="p">(</span><span class="nx">va</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">vb</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">vb</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">va</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">d3_geom_voronoiHalfEdge</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">start</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">edge</span><span class="p">.</span><span class="nx">l</span> <span class="o">===</span> <span class="k">this</span><span class="p">.</span><span class="nx">site</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">edge</span><span class="p">.</span><span class="nx">a</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">edge</span><span class="p">.</span><span class="nx">b</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">end</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">edge</span><span class="p">.</span><span class="nx">l</span> <span class="o">===</span> <span class="k">this</span><span class="p">.</span><span class="nx">site</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">edge</span><span class="p">.</span><span class="nx">b</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">edge</span><span class="p">.</span><span class="nx">a</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_geom_voronoiRedBlackTree</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">_</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geom_voronoiRedBlackNode</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">node</span><span class="p">.</span><span class="nx">U</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">C</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">L</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">R</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">P</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">N</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">d3_geom_voronoiRedBlackTree</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">insert</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">after</span><span class="p">,</span> <span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">parent</span><span class="p">,</span> <span class="nx">grandpa</span><span class="p">,</span> <span class="nx">uncle</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">after</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">node</span><span class="p">.</span><span class="nx">P</span> <span class="o">=</span> <span class="nx">after</span><span class="p">;</span>
        <span class="nx">node</span><span class="p">.</span><span class="nx">N</span> <span class="o">=</span> <span class="nx">after</span><span class="p">.</span><span class="nx">N</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">after</span><span class="p">.</span><span class="nx">N</span><span class="p">)</span> <span class="nx">after</span><span class="p">.</span><span class="nx">N</span><span class="p">.</span><span class="nx">P</span> <span class="o">=</span> <span class="nx">node</span><span class="p">;</span>
        <span class="nx">after</span><span class="p">.</span><span class="nx">N</span> <span class="o">=</span> <span class="nx">node</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">after</span><span class="p">.</span><span class="nx">R</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">after</span> <span class="o">=</span> <span class="nx">after</span><span class="p">.</span><span class="nx">R</span><span class="p">;</span>
          <span class="k">while</span> <span class="p">(</span><span class="nx">after</span><span class="p">.</span><span class="nx">L</span><span class="p">)</span> <span class="nx">after</span> <span class="o">=</span> <span class="nx">after</span><span class="p">.</span><span class="nx">L</span><span class="p">;</span>
          <span class="nx">after</span><span class="p">.</span><span class="nx">L</span> <span class="o">=</span> <span class="nx">node</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">after</span><span class="p">.</span><span class="nx">R</span> <span class="o">=</span> <span class="nx">node</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">parent</span> <span class="o">=</span> <span class="nx">after</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">after</span> <span class="o">=</span> <span class="nx">d3_geom_voronoiRedBlackFirst</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_</span><span class="p">);</span>
        <span class="nx">node</span><span class="p">.</span><span class="nx">P</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="nx">node</span><span class="p">.</span><span class="nx">N</span> <span class="o">=</span> <span class="nx">after</span><span class="p">;</span>
        <span class="nx">after</span><span class="p">.</span><span class="nx">P</span> <span class="o">=</span> <span class="nx">after</span><span class="p">.</span><span class="nx">L</span> <span class="o">=</span> <span class="nx">node</span><span class="p">;</span>
        <span class="nx">parent</span> <span class="o">=</span> <span class="nx">after</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">node</span><span class="p">.</span><span class="nx">P</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">N</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_</span> <span class="o">=</span> <span class="nx">node</span><span class="p">;</span>
        <span class="nx">parent</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="nx">node</span><span class="p">.</span><span class="nx">L</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">R</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="nx">node</span><span class="p">.</span><span class="nx">U</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">;</span>
      <span class="nx">node</span><span class="p">.</span><span class="nx">C</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
      <span class="nx">after</span> <span class="o">=</span> <span class="nx">node</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="nx">parent</span> <span class="o">&amp;&amp;</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">C</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">grandpa</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">U</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">parent</span> <span class="o">===</span> <span class="nx">grandpa</span><span class="p">.</span><span class="nx">L</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">uncle</span> <span class="o">=</span> <span class="nx">grandpa</span><span class="p">.</span><span class="nx">R</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">uncle</span> <span class="o">&amp;&amp;</span> <span class="nx">uncle</span><span class="p">.</span><span class="nx">C</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">parent</span><span class="p">.</span><span class="nx">C</span> <span class="o">=</span> <span class="nx">uncle</span><span class="p">.</span><span class="nx">C</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">grandpa</span><span class="p">.</span><span class="nx">C</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="nx">after</span> <span class="o">=</span> <span class="nx">grandpa</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">after</span> <span class="o">===</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">R</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">d3_geom_voronoiRedBlackRotateLeft</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">parent</span><span class="p">);</span>
              <span class="nx">after</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">;</span>
              <span class="nx">parent</span> <span class="o">=</span> <span class="nx">after</span><span class="p">.</span><span class="nx">U</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">parent</span><span class="p">.</span><span class="nx">C</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">grandpa</span><span class="p">.</span><span class="nx">C</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="nx">d3_geom_voronoiRedBlackRotateRight</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">grandpa</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">uncle</span> <span class="o">=</span> <span class="nx">grandpa</span><span class="p">.</span><span class="nx">L</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">uncle</span> <span class="o">&amp;&amp;</span> <span class="nx">uncle</span><span class="p">.</span><span class="nx">C</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">parent</span><span class="p">.</span><span class="nx">C</span> <span class="o">=</span> <span class="nx">uncle</span><span class="p">.</span><span class="nx">C</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">grandpa</span><span class="p">.</span><span class="nx">C</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="nx">after</span> <span class="o">=</span> <span class="nx">grandpa</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">after</span> <span class="o">===</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">L</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">d3_geom_voronoiRedBlackRotateRight</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">parent</span><span class="p">);</span>
              <span class="nx">after</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">;</span>
              <span class="nx">parent</span> <span class="o">=</span> <span class="nx">after</span><span class="p">.</span><span class="nx">U</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">parent</span><span class="p">.</span><span class="nx">C</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">grandpa</span><span class="p">.</span><span class="nx">C</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="nx">d3_geom_voronoiRedBlackRotateLeft</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">grandpa</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="nx">parent</span> <span class="o">=</span> <span class="nx">after</span><span class="p">.</span><span class="nx">U</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">_</span><span class="p">.</span><span class="nx">C</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">remove</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">N</span><span class="p">)</span> <span class="nx">node</span><span class="p">.</span><span class="nx">N</span><span class="p">.</span><span class="nx">P</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">P</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">P</span><span class="p">)</span> <span class="nx">node</span><span class="p">.</span><span class="nx">P</span><span class="p">.</span><span class="nx">N</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">N</span><span class="p">;</span>
      <span class="nx">node</span><span class="p">.</span><span class="nx">N</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">P</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">parent</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">U</span><span class="p">,</span> <span class="nx">sibling</span><span class="p">,</span> <span class="nx">left</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">L</span><span class="p">,</span> <span class="nx">right</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">R</span><span class="p">,</span> <span class="nx">next</span><span class="p">,</span> <span class="nx">red</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">left</span><span class="p">)</span> <span class="nx">next</span> <span class="o">=</span> <span class="nx">right</span><span class="p">;</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">right</span><span class="p">)</span> <span class="nx">next</span> <span class="o">=</span> <span class="nx">left</span><span class="p">;</span> <span class="k">else</span> <span class="nx">next</span> <span class="o">=</span> <span class="nx">d3_geom_voronoiRedBlackFirst</span><span class="p">(</span><span class="nx">right</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">parent</span><span class="p">.</span><span class="nx">L</span> <span class="o">===</span> <span class="nx">node</span><span class="p">)</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">L</span> <span class="o">=</span> <span class="nx">next</span><span class="p">;</span> <span class="k">else</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">R</span> <span class="o">=</span> <span class="nx">next</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">_</span> <span class="o">=</span> <span class="nx">next</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">left</span> <span class="o">&amp;&amp;</span> <span class="nx">right</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">red</span> <span class="o">=</span> <span class="nx">next</span><span class="p">.</span><span class="nx">C</span><span class="p">;</span>
        <span class="nx">next</span><span class="p">.</span><span class="nx">C</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">C</span><span class="p">;</span>
        <span class="nx">next</span><span class="p">.</span><span class="nx">L</span> <span class="o">=</span> <span class="nx">left</span><span class="p">;</span>
        <span class="nx">left</span><span class="p">.</span><span class="nx">U</span> <span class="o">=</span> <span class="nx">next</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">next</span> <span class="o">!==</span> <span class="nx">right</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">parent</span> <span class="o">=</span> <span class="nx">next</span><span class="p">.</span><span class="nx">U</span><span class="p">;</span>
          <span class="nx">next</span><span class="p">.</span><span class="nx">U</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">U</span><span class="p">;</span>
          <span class="nx">node</span> <span class="o">=</span> <span class="nx">next</span><span class="p">.</span><span class="nx">R</span><span class="p">;</span>
          <span class="nx">parent</span><span class="p">.</span><span class="nx">L</span> <span class="o">=</span> <span class="nx">node</span><span class="p">;</span>
          <span class="nx">next</span><span class="p">.</span><span class="nx">R</span> <span class="o">=</span> <span class="nx">right</span><span class="p">;</span>
          <span class="nx">right</span><span class="p">.</span><span class="nx">U</span> <span class="o">=</span> <span class="nx">next</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">next</span><span class="p">.</span><span class="nx">U</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">;</span>
          <span class="nx">parent</span> <span class="o">=</span> <span class="nx">next</span><span class="p">;</span>
          <span class="nx">node</span> <span class="o">=</span> <span class="nx">next</span><span class="p">.</span><span class="nx">R</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">red</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">C</span><span class="p">;</span>
        <span class="nx">node</span> <span class="o">=</span> <span class="nx">next</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="nx">node</span><span class="p">.</span><span class="nx">U</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">red</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">node</span> <span class="o">&amp;&amp;</span> <span class="nx">node</span><span class="p">.</span><span class="nx">C</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">node</span><span class="p">.</span><span class="nx">C</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="k">return</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">do</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">node</span> <span class="o">===</span> <span class="k">this</span><span class="p">.</span><span class="nx">_</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">node</span> <span class="o">===</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">L</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">sibling</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">R</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">sibling</span><span class="p">.</span><span class="nx">C</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">sibling</span><span class="p">.</span><span class="nx">C</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">parent</span><span class="p">.</span><span class="nx">C</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="nx">d3_geom_voronoiRedBlackRotateLeft</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">parent</span><span class="p">);</span>
            <span class="nx">sibling</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">R</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">sibling</span><span class="p">.</span><span class="nx">L</span> <span class="o">&amp;&amp;</span> <span class="nx">sibling</span><span class="p">.</span><span class="nx">L</span><span class="p">.</span><span class="nx">C</span> <span class="o">||</span> <span class="nx">sibling</span><span class="p">.</span><span class="nx">R</span> <span class="o">&amp;&amp;</span> <span class="nx">sibling</span><span class="p">.</span><span class="nx">R</span><span class="p">.</span><span class="nx">C</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">sibling</span><span class="p">.</span><span class="nx">R</span> <span class="o">||</span> <span class="o">!</span><span class="nx">sibling</span><span class="p">.</span><span class="nx">R</span><span class="p">.</span><span class="nx">C</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">sibling</span><span class="p">.</span><span class="nx">L</span><span class="p">.</span><span class="nx">C</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
              <span class="nx">sibling</span><span class="p">.</span><span class="nx">C</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
              <span class="nx">d3_geom_voronoiRedBlackRotateRight</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">sibling</span><span class="p">);</span>
              <span class="nx">sibling</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">R</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">sibling</span><span class="p">.</span><span class="nx">C</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">C</span><span class="p">;</span>
            <span class="nx">parent</span><span class="p">.</span><span class="nx">C</span> <span class="o">=</span> <span class="nx">sibling</span><span class="p">.</span><span class="nx">R</span><span class="p">.</span><span class="nx">C</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">d3_geom_voronoiRedBlackRotateLeft</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">parent</span><span class="p">);</span>
            <span class="nx">node</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">sibling</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">L</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">sibling</span><span class="p">.</span><span class="nx">C</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">sibling</span><span class="p">.</span><span class="nx">C</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">parent</span><span class="p">.</span><span class="nx">C</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
            <span class="nx">d3_geom_voronoiRedBlackRotateRight</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">parent</span><span class="p">);</span>
            <span class="nx">sibling</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">L</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">sibling</span><span class="p">.</span><span class="nx">L</span> <span class="o">&amp;&amp;</span> <span class="nx">sibling</span><span class="p">.</span><span class="nx">L</span><span class="p">.</span><span class="nx">C</span> <span class="o">||</span> <span class="nx">sibling</span><span class="p">.</span><span class="nx">R</span> <span class="o">&amp;&amp;</span> <span class="nx">sibling</span><span class="p">.</span><span class="nx">R</span><span class="p">.</span><span class="nx">C</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">sibling</span><span class="p">.</span><span class="nx">L</span> <span class="o">||</span> <span class="o">!</span><span class="nx">sibling</span><span class="p">.</span><span class="nx">L</span><span class="p">.</span><span class="nx">C</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">sibling</span><span class="p">.</span><span class="nx">R</span><span class="p">.</span><span class="nx">C</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
              <span class="nx">sibling</span><span class="p">.</span><span class="nx">C</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
              <span class="nx">d3_geom_voronoiRedBlackRotateLeft</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">sibling</span><span class="p">);</span>
              <span class="nx">sibling</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">L</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="nx">sibling</span><span class="p">.</span><span class="nx">C</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">C</span><span class="p">;</span>
            <span class="nx">parent</span><span class="p">.</span><span class="nx">C</span> <span class="o">=</span> <span class="nx">sibling</span><span class="p">.</span><span class="nx">L</span><span class="p">.</span><span class="nx">C</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
            <span class="nx">d3_geom_voronoiRedBlackRotateRight</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">parent</span><span class="p">);</span>
            <span class="nx">node</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_</span><span class="p">;</span>
            <span class="k">break</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="nx">sibling</span><span class="p">.</span><span class="nx">C</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="nx">node</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">;</span>
        <span class="nx">parent</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">U</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="nx">node</span><span class="p">.</span><span class="nx">C</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="nx">node</span><span class="p">.</span><span class="nx">C</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_geom_voronoiRedBlackRotateLeft</span><span class="p">(</span><span class="nx">tree</span><span class="p">,</span> <span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">p</span> <span class="o">=</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">q</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">R</span><span class="p">,</span> <span class="nx">parent</span> <span class="o">=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">U</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">parent</span><span class="p">.</span><span class="nx">L</span> <span class="o">===</span> <span class="nx">p</span><span class="p">)</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">L</span> <span class="o">=</span> <span class="nx">q</span><span class="p">;</span> <span class="k">else</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">R</span> <span class="o">=</span> <span class="nx">q</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">tree</span><span class="p">.</span><span class="nx">_</span> <span class="o">=</span> <span class="nx">q</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">q</span><span class="p">.</span><span class="nx">U</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">;</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">U</span> <span class="o">=</span> <span class="nx">q</span><span class="p">;</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">R</span> <span class="o">=</span> <span class="nx">q</span><span class="p">.</span><span class="nx">L</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">R</span><span class="p">)</span> <span class="nx">p</span><span class="p">.</span><span class="nx">R</span><span class="p">.</span><span class="nx">U</span> <span class="o">=</span> <span class="nx">p</span><span class="p">;</span>
    <span class="nx">q</span><span class="p">.</span><span class="nx">L</span> <span class="o">=</span> <span class="nx">p</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geom_voronoiRedBlackRotateRight</span><span class="p">(</span><span class="nx">tree</span><span class="p">,</span> <span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">p</span> <span class="o">=</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">q</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">L</span><span class="p">,</span> <span class="nx">parent</span> <span class="o">=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">U</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">parent</span><span class="p">.</span><span class="nx">L</span> <span class="o">===</span> <span class="nx">p</span><span class="p">)</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">L</span> <span class="o">=</span> <span class="nx">q</span><span class="p">;</span> <span class="k">else</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">R</span> <span class="o">=</span> <span class="nx">q</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">tree</span><span class="p">.</span><span class="nx">_</span> <span class="o">=</span> <span class="nx">q</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">q</span><span class="p">.</span><span class="nx">U</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">;</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">U</span> <span class="o">=</span> <span class="nx">q</span><span class="p">;</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">L</span> <span class="o">=</span> <span class="nx">q</span><span class="p">.</span><span class="nx">R</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">p</span><span class="p">.</span><span class="nx">L</span><span class="p">)</span> <span class="nx">p</span><span class="p">.</span><span class="nx">L</span><span class="p">.</span><span class="nx">U</span> <span class="o">=</span> <span class="nx">p</span><span class="p">;</span>
    <span class="nx">q</span><span class="p">.</span><span class="nx">R</span> <span class="o">=</span> <span class="nx">p</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geom_voronoiRedBlackFirst</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">while</span> <span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">L</span><span class="p">)</span> <span class="nx">node</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">L</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">node</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geom_voronoi</span><span class="p">(</span><span class="nx">sites</span><span class="p">,</span> <span class="nx">bbox</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">site</span> <span class="o">=</span> <span class="nx">sites</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="nx">d3_geom_voronoiVertexOrder</span><span class="p">).</span><span class="nx">pop</span><span class="p">(),</span> <span class="nx">x0</span><span class="p">,</span> <span class="nx">y0</span><span class="p">,</span> <span class="nx">circle</span><span class="p">;</span>
    <span class="nx">d3_geom_voronoiEdges</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="nx">d3_geom_voronoiCells</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">sites</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
    <span class="nx">d3_geom_voronoiBeaches</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">d3_geom_voronoiRedBlackTree</span><span class="p">();</span>
    <span class="nx">d3_geom_voronoiCircles</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">d3_geom_voronoiRedBlackTree</span><span class="p">();</span>
    <span class="k">while</span> <span class="p">(</span><span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">circle</span> <span class="o">=</span> <span class="nx">d3_geom_voronoiFirstCircle</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">site</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="o">!</span><span class="nx">circle</span> <span class="o">||</span> <span class="nx">site</span><span class="p">.</span><span class="nx">y</span> <span class="o">&lt;</span> <span class="nx">circle</span><span class="p">.</span><span class="nx">y</span> <span class="o">||</span> <span class="nx">site</span><span class="p">.</span><span class="nx">y</span> <span class="o">===</span> <span class="nx">circle</span><span class="p">.</span><span class="nx">y</span> <span class="o">&amp;&amp;</span> <span class="nx">site</span><span class="p">.</span><span class="nx">x</span> <span class="o">&lt;</span> <span class="nx">circle</span><span class="p">.</span><span class="nx">x</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">site</span><span class="p">.</span><span class="nx">x</span> <span class="o">!==</span> <span class="nx">x0</span> <span class="o">||</span> <span class="nx">site</span><span class="p">.</span><span class="nx">y</span> <span class="o">!==</span> <span class="nx">y0</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">d3_geom_voronoiCells</span><span class="p">[</span><span class="nx">site</span><span class="p">.</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">d3_geom_voronoiCell</span><span class="p">(</span><span class="nx">site</span><span class="p">);</span>
          <span class="nx">d3_geom_voronoiAddBeach</span><span class="p">(</span><span class="nx">site</span><span class="p">);</span>
          <span class="nx">x0</span> <span class="o">=</span> <span class="nx">site</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y0</span> <span class="o">=</span> <span class="nx">site</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">site</span> <span class="o">=</span> <span class="nx">sites</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">circle</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">d3_geom_voronoiRemoveBeach</span><span class="p">(</span><span class="nx">circle</span><span class="p">.</span><span class="nx">arc</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">break</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">bbox</span><span class="p">)</span> <span class="nx">d3_geom_voronoiClipEdges</span><span class="p">(</span><span class="nx">bbox</span><span class="p">),</span> <span class="nx">d3_geom_voronoiCloseCells</span><span class="p">(</span><span class="nx">bbox</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">diagram</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">cells</span><span class="o">:</span> <span class="nx">d3_geom_voronoiCells</span><span class="p">,</span>
      <span class="nx">edges</span><span class="o">:</span> <span class="nx">d3_geom_voronoiEdges</span>
    <span class="p">};</span>
    <span class="nx">d3_geom_voronoiBeaches</span> <span class="o">=</span> <span class="nx">d3_geom_voronoiCircles</span> <span class="o">=</span> <span class="nx">d3_geom_voronoiEdges</span> <span class="o">=</span> <span class="nx">d3_geom_voronoiCells</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">diagram</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geom_voronoiVertexOrder</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">a</span><span class="p">.</span><span class="nx">y</span> <span class="o">||</span> <span class="nx">b</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">a</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">geom</span><span class="p">.</span><span class="nx">voronoi</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">points</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">d3_geom_pointX</span><span class="p">,</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">d3_geom_pointY</span><span class="p">,</span> <span class="nx">fx</span> <span class="o">=</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">fy</span> <span class="o">=</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">clipExtent</span> <span class="o">=</span> <span class="nx">d3_geom_voronoiClipExtent</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">points</span><span class="p">)</span> <span class="k">return</span> <span class="nx">voronoi</span><span class="p">(</span><span class="nx">points</span><span class="p">);</span>
    <span class="kd">function</span> <span class="nx">voronoi</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">polygons</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">),</span> <span class="nx">x0</span> <span class="o">=</span> <span class="nx">clipExtent</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y0</span> <span class="o">=</span> <span class="nx">clipExtent</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="nx">x1</span> <span class="o">=</span> <span class="nx">clipExtent</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y1</span> <span class="o">=</span> <span class="nx">clipExtent</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">];</span>
      <span class="nx">d3_geom_voronoi</span><span class="p">(</span><span class="nx">sites</span><span class="p">(</span><span class="nx">data</span><span class="p">),</span> <span class="nx">clipExtent</span><span class="p">).</span><span class="nx">cells</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">cell</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">edges</span> <span class="o">=</span> <span class="nx">cell</span><span class="p">.</span><span class="nx">edges</span><span class="p">,</span> <span class="nx">site</span> <span class="o">=</span> <span class="nx">cell</span><span class="p">.</span><span class="nx">site</span><span class="p">,</span> <span class="nx">polygon</span> <span class="o">=</span> <span class="nx">polygons</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">edges</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">edges</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">start</span><span class="p">();</span>
          <span class="k">return</span> <span class="p">[</span> <span class="nx">s</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">y</span> <span class="p">];</span>
        <span class="p">})</span> <span class="o">:</span> <span class="nx">site</span><span class="p">.</span><span class="nx">x</span> <span class="o">&gt;=</span> <span class="nx">x0</span> <span class="o">&amp;&amp;</span> <span class="nx">site</span><span class="p">.</span><span class="nx">x</span> <span class="o">&lt;=</span> <span class="nx">x1</span> <span class="o">&amp;&amp;</span> <span class="nx">site</span><span class="p">.</span><span class="nx">y</span> <span class="o">&gt;=</span> <span class="nx">y0</span> <span class="o">&amp;&amp;</span> <span class="nx">site</span><span class="p">.</span><span class="nx">y</span> <span class="o">&lt;=</span> <span class="nx">y1</span> <span class="o">?</span> <span class="p">[</span> <span class="p">[</span> <span class="nx">x0</span><span class="p">,</span> <span class="nx">y1</span> <span class="p">],</span> <span class="p">[</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span> <span class="p">],</span> <span class="p">[</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">y0</span> <span class="p">],</span> <span class="p">[</span> <span class="nx">x0</span><span class="p">,</span> <span class="nx">y0</span> <span class="p">]</span> <span class="p">]</span> <span class="o">:</span> <span class="p">[];</span>
        <span class="nx">polygon</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
      <span class="p">});</span>
      <span class="k">return</span> <span class="nx">polygons</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">sites</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">{</span>
          <span class="nx">x</span><span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">fx</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="o">/</span> <span class="err">ε</span><span class="p">)</span> <span class="o">*</span> <span class="err">ε</span><span class="p">,</span>
          <span class="nx">y</span><span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">fy</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="o">/</span> <span class="err">ε</span><span class="p">)</span> <span class="o">*</span> <span class="err">ε</span><span class="p">,</span>
          <span class="nx">i</span><span class="o">:</span> <span class="nx">i</span>
        <span class="p">};</span>
      <span class="p">});</span>
    <span class="p">}</span>
    <span class="nx">voronoi</span><span class="p">.</span><span class="nx">links</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_geom_voronoi</span><span class="p">(</span><span class="nx">sites</span><span class="p">(</span><span class="nx">data</span><span class="p">)).</span><span class="nx">edges</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">edge</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">edge</span><span class="p">.</span><span class="nx">l</span> <span class="o">&amp;&amp;</span> <span class="nx">edge</span><span class="p">.</span><span class="nx">r</span><span class="p">;</span>
      <span class="p">}).</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">edge</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">{</span>
          <span class="nx">source</span><span class="o">:</span> <span class="nx">data</span><span class="p">[</span><span class="nx">edge</span><span class="p">.</span><span class="nx">l</span><span class="p">.</span><span class="nx">i</span><span class="p">],</span>
          <span class="nx">target</span><span class="o">:</span> <span class="nx">data</span><span class="p">[</span><span class="nx">edge</span><span class="p">.</span><span class="nx">r</span><span class="p">.</span><span class="nx">i</span><span class="p">]</span>
        <span class="p">};</span>
      <span class="p">});</span>
    <span class="p">};</span>
    <span class="nx">voronoi</span><span class="p">.</span><span class="nx">triangles</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">triangles</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="nx">d3_geom_voronoi</span><span class="p">(</span><span class="nx">sites</span><span class="p">(</span><span class="nx">data</span><span class="p">)).</span><span class="nx">cells</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">cell</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">site</span> <span class="o">=</span> <span class="nx">cell</span><span class="p">.</span><span class="nx">site</span><span class="p">,</span> <span class="nx">edges</span> <span class="o">=</span> <span class="nx">cell</span><span class="p">.</span><span class="nx">edges</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="nx">d3_geom_voronoiHalfEdgeOrder</span><span class="p">),</span> <span class="nx">j</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">edges</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">e0</span><span class="p">,</span> <span class="nx">s0</span><span class="p">,</span> <span class="nx">e1</span> <span class="o">=</span> <span class="nx">edges</span><span class="p">[</span><span class="nx">m</span> <span class="o">-</span> <span class="mi">1</span><span class="p">].</span><span class="nx">edge</span><span class="p">,</span> <span class="nx">s1</span> <span class="o">=</span> <span class="nx">e1</span><span class="p">.</span><span class="nx">l</span> <span class="o">===</span> <span class="nx">site</span> <span class="o">?</span> <span class="nx">e1</span><span class="p">.</span><span class="nx">r</span> <span class="o">:</span> <span class="nx">e1</span><span class="p">.</span><span class="nx">l</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">e0</span> <span class="o">=</span> <span class="nx">e1</span><span class="p">;</span>
          <span class="nx">s0</span> <span class="o">=</span> <span class="nx">s1</span><span class="p">;</span>
          <span class="nx">e1</span> <span class="o">=</span> <span class="nx">edges</span><span class="p">[</span><span class="nx">j</span><span class="p">].</span><span class="nx">edge</span><span class="p">;</span>
          <span class="nx">s1</span> <span class="o">=</span> <span class="nx">e1</span><span class="p">.</span><span class="nx">l</span> <span class="o">===</span> <span class="nx">site</span> <span class="o">?</span> <span class="nx">e1</span><span class="p">.</span><span class="nx">r</span> <span class="o">:</span> <span class="nx">e1</span><span class="p">.</span><span class="nx">l</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">s0</span><span class="p">.</span><span class="nx">i</span> <span class="o">&amp;&amp;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">s1</span><span class="p">.</span><span class="nx">i</span> <span class="o">&amp;&amp;</span> <span class="nx">d3_geom_voronoiTriangleArea</span><span class="p">(</span><span class="nx">site</span><span class="p">,</span> <span class="nx">s0</span><span class="p">,</span> <span class="nx">s1</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">triangles</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">data</span><span class="p">[</span><span class="nx">s0</span><span class="p">.</span><span class="nx">i</span><span class="p">],</span> <span class="nx">data</span><span class="p">[</span><span class="nx">s1</span><span class="p">.</span><span class="nx">i</span><span class="p">]</span> <span class="p">]);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">});</span>
      <span class="k">return</span> <span class="nx">triangles</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">voronoi</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="p">(</span><span class="nx">fx</span> <span class="o">=</span> <span class="nx">d3_functor</span><span class="p">(</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">_</span><span class="p">),</span> <span class="nx">voronoi</span><span class="p">)</span> <span class="o">:</span> <span class="nx">x</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">voronoi</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="p">(</span><span class="nx">fy</span> <span class="o">=</span> <span class="nx">d3_functor</span><span class="p">(</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">_</span><span class="p">),</span> <span class="nx">voronoi</span><span class="p">)</span> <span class="o">:</span> <span class="nx">y</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">voronoi</span><span class="p">.</span><span class="nx">clipExtent</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">clipExtent</span> <span class="o">===</span> <span class="nx">d3_geom_voronoiClipExtent</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="nx">clipExtent</span><span class="p">;</span>
      <span class="nx">clipExtent</span> <span class="o">=</span> <span class="nx">_</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">d3_geom_voronoiClipExtent</span> <span class="o">:</span> <span class="nx">_</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">voronoi</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">voronoi</span><span class="p">.</span><span class="nx">size</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">clipExtent</span> <span class="o">===</span> <span class="nx">d3_geom_voronoiClipExtent</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="nx">clipExtent</span> <span class="o">&amp;&amp;</span> <span class="nx">clipExtent</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
      <span class="k">return</span> <span class="nx">voronoi</span><span class="p">.</span><span class="nx">clipExtent</span><span class="p">(</span><span class="nx">_</span> <span class="o">&amp;&amp;</span> <span class="p">[</span> <span class="p">[</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">],</span> <span class="nx">_</span> <span class="p">]);</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">voronoi</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">d3_geom_voronoiClipExtent</span> <span class="o">=</span> <span class="p">[</span> <span class="p">[</span> <span class="o">-</span><span class="mi">1</span><span class="nx">e6</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="nx">e6</span> <span class="p">],</span> <span class="p">[</span> <span class="mi">1</span><span class="nx">e6</span><span class="p">,</span> <span class="mi">1</span><span class="nx">e6</span> <span class="p">]</span> <span class="p">];</span>
  <span class="kd">function</span> <span class="nx">d3_geom_voronoiTriangleArea</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">c</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">a</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">b</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">a</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">geom</span><span class="p">.</span><span class="nx">delaunay</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">vertices</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">geom</span><span class="p">.</span><span class="nx">voronoi</span><span class="p">().</span><span class="nx">triangles</span><span class="p">(</span><span class="nx">vertices</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">geom</span><span class="p">.</span><span class="nx">quadtree</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">points</span><span class="p">,</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span><span class="p">,</span> <span class="nx">x2</span><span class="p">,</span> <span class="nx">y2</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">d3_geom_pointX</span><span class="p">,</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">d3_geom_pointY</span><span class="p">,</span> <span class="nx">compat</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">compat</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">x</span> <span class="o">=</span> <span class="nx">d3_geom_quadtreeCompatX</span><span class="p">;</span>
      <span class="nx">y</span> <span class="o">=</span> <span class="nx">d3_geom_quadtreeCompatY</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">compat</span> <span class="o">===</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">y2</span> <span class="o">=</span> <span class="nx">y1</span><span class="p">;</span>
        <span class="nx">x2</span> <span class="o">=</span> <span class="nx">x1</span><span class="p">;</span>
        <span class="nx">y1</span> <span class="o">=</span> <span class="nx">x1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">quadtree</span><span class="p">(</span><span class="nx">points</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">quadtree</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">fx</span> <span class="o">=</span> <span class="nx">d3_functor</span><span class="p">(</span><span class="nx">x</span><span class="p">),</span> <span class="nx">fy</span> <span class="o">=</span> <span class="nx">d3_functor</span><span class="p">(</span><span class="nx">y</span><span class="p">),</span> <span class="nx">xs</span><span class="p">,</span> <span class="nx">ys</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">n</span><span class="p">,</span> <span class="nx">x1_</span><span class="p">,</span> <span class="nx">y1_</span><span class="p">,</span> <span class="nx">x2_</span><span class="p">,</span> <span class="nx">y2_</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">x1</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">x1_</span> <span class="o">=</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">y1_</span> <span class="o">=</span> <span class="nx">y1</span><span class="p">,</span> <span class="nx">x2_</span> <span class="o">=</span> <span class="nx">x2</span><span class="p">,</span> <span class="nx">y2_</span> <span class="o">=</span> <span class="nx">y2</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">x2_</span> <span class="o">=</span> <span class="nx">y2_</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="nx">x1_</span> <span class="o">=</span> <span class="nx">y1_</span> <span class="o">=</span> <span class="kc">Infinity</span><span class="p">);</span>
        <span class="nx">xs</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">ys</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="nx">n</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">compat</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">d</span> <span class="o">=</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">x</span> <span class="o">&lt;</span> <span class="nx">x1_</span><span class="p">)</span> <span class="nx">x1_</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">y</span> <span class="o">&lt;</span> <span class="nx">y1_</span><span class="p">)</span> <span class="nx">y1_</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">x</span> <span class="o">&gt;</span> <span class="nx">x2_</span><span class="p">)</span> <span class="nx">x2_</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">y</span> <span class="o">&gt;</span> <span class="nx">y2_</span><span class="p">)</span> <span class="nx">y2_</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
          <span class="nx">xs</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">x</span><span class="p">);</span>
          <span class="nx">ys</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">x_</span> <span class="o">=</span> <span class="o">+</span><span class="nx">fx</span><span class="p">(</span><span class="nx">d</span> <span class="o">=</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">),</span> <span class="nx">y_</span> <span class="o">=</span> <span class="o">+</span><span class="nx">fy</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">);</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">x_</span> <span class="o">&lt;</span> <span class="nx">x1_</span><span class="p">)</span> <span class="nx">x1_</span> <span class="o">=</span> <span class="nx">x_</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">y_</span> <span class="o">&lt;</span> <span class="nx">y1_</span><span class="p">)</span> <span class="nx">y1_</span> <span class="o">=</span> <span class="nx">y_</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">x_</span> <span class="o">&gt;</span> <span class="nx">x2_</span><span class="p">)</span> <span class="nx">x2_</span> <span class="o">=</span> <span class="nx">x_</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">y_</span> <span class="o">&gt;</span> <span class="nx">y2_</span><span class="p">)</span> <span class="nx">y2_</span> <span class="o">=</span> <span class="nx">y_</span><span class="p">;</span>
          <span class="nx">xs</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">x_</span><span class="p">);</span>
          <span class="nx">ys</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">y_</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="kd">var</span> <span class="nx">dx</span> <span class="o">=</span> <span class="nx">x2_</span> <span class="o">-</span> <span class="nx">x1_</span><span class="p">,</span> <span class="nx">dy</span> <span class="o">=</span> <span class="nx">y2_</span> <span class="o">-</span> <span class="nx">y1_</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">dx</span> <span class="o">&gt;</span> <span class="nx">dy</span><span class="p">)</span> <span class="nx">y2_</span> <span class="o">=</span> <span class="nx">y1_</span> <span class="o">+</span> <span class="nx">dx</span><span class="p">;</span> <span class="k">else</span> <span class="nx">x2_</span> <span class="o">=</span> <span class="nx">x1_</span> <span class="o">+</span> <span class="nx">dy</span><span class="p">;</span>
      <span class="kd">function</span> <span class="nx">insert</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span><span class="p">,</span> <span class="nx">x2</span><span class="p">,</span> <span class="nx">y2</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="o">||</span> <span class="nb">isNaN</span><span class="p">(</span><span class="nx">y</span><span class="p">))</span> <span class="k">return</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">n</span><span class="p">.</span><span class="nx">leaf</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">nx</span> <span class="o">=</span> <span class="nx">n</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">ny</span> <span class="o">=</span> <span class="nx">n</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">nx</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">abs</span><span class="p">(</span><span class="nx">nx</span> <span class="o">-</span> <span class="nx">x</span><span class="p">)</span> <span class="o">+</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">ny</span> <span class="o">-</span> <span class="nx">y</span><span class="p">)</span> <span class="o">&lt;</span> <span class="p">.</span><span class="mi">01</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">insertChild</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span><span class="p">,</span> <span class="nx">x2</span><span class="p">,</span> <span class="nx">y2</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
              <span class="kd">var</span> <span class="nx">nPoint</span> <span class="o">=</span> <span class="nx">n</span><span class="p">.</span><span class="nx">point</span><span class="p">;</span>
              <span class="nx">n</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">n</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">n</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
              <span class="nx">insertChild</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span> <span class="nx">nPoint</span><span class="p">,</span> <span class="nx">nx</span><span class="p">,</span> <span class="nx">ny</span><span class="p">,</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span><span class="p">,</span> <span class="nx">x2</span><span class="p">,</span> <span class="nx">y2</span><span class="p">);</span>
              <span class="nx">insertChild</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span><span class="p">,</span> <span class="nx">x2</span><span class="p">,</span> <span class="nx">y2</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">n</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">n</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">n</span><span class="p">.</span><span class="nx">point</span> <span class="o">=</span> <span class="nx">d</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">insertChild</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span><span class="p">,</span> <span class="nx">x2</span><span class="p">,</span> <span class="nx">y2</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="kd">function</span> <span class="nx">insertChild</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span><span class="p">,</span> <span class="nx">x2</span><span class="p">,</span> <span class="nx">y2</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">sx</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x1</span> <span class="o">+</span> <span class="nx">x2</span><span class="p">)</span> <span class="o">*</span> <span class="p">.</span><span class="mi">5</span><span class="p">,</span> <span class="nx">sy</span> <span class="o">=</span> <span class="p">(</span><span class="nx">y1</span> <span class="o">+</span> <span class="nx">y2</span><span class="p">)</span> <span class="o">*</span> <span class="p">.</span><span class="mi">5</span><span class="p">,</span> <span class="nx">right</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">&gt;=</span> <span class="nx">sx</span><span class="p">,</span> <span class="nx">bottom</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">&gt;=</span> <span class="nx">sy</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="p">(</span><span class="nx">bottom</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="nx">right</span><span class="p">;</span>
        <span class="nx">n</span><span class="p">.</span><span class="nx">leaf</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nx">n</span> <span class="o">=</span> <span class="nx">n</span><span class="p">.</span><span class="nx">nodes</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">||</span> <span class="p">(</span><span class="nx">n</span><span class="p">.</span><span class="nx">nodes</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">d3_geom_quadtreeNode</span><span class="p">());</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">right</span><span class="p">)</span> <span class="nx">x1</span> <span class="o">=</span> <span class="nx">sx</span><span class="p">;</span> <span class="k">else</span> <span class="nx">x2</span> <span class="o">=</span> <span class="nx">sx</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">bottom</span><span class="p">)</span> <span class="nx">y1</span> <span class="o">=</span> <span class="nx">sy</span><span class="p">;</span> <span class="k">else</span> <span class="nx">y2</span> <span class="o">=</span> <span class="nx">sy</span><span class="p">;</span>
        <span class="nx">insert</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span><span class="p">,</span> <span class="nx">x2</span><span class="p">,</span> <span class="nx">y2</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="kd">var</span> <span class="nx">root</span> <span class="o">=</span> <span class="nx">d3_geom_quadtreeNode</span><span class="p">();</span>
      <span class="nx">root</span><span class="p">.</span><span class="nx">add</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">insert</span><span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="o">+</span><span class="nx">fx</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="o">++</span><span class="nx">i</span><span class="p">),</span> <span class="o">+</span><span class="nx">fy</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">),</span> <span class="nx">x1_</span><span class="p">,</span> <span class="nx">y1_</span><span class="p">,</span> <span class="nx">x2_</span><span class="p">,</span> <span class="nx">y2_</span><span class="p">);</span>
      <span class="p">};</span>
      <span class="nx">root</span><span class="p">.</span><span class="nx">visit</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">d3_geom_quadtreeVisit</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span> <span class="nx">root</span><span class="p">,</span> <span class="nx">x1_</span><span class="p">,</span> <span class="nx">y1_</span><span class="p">,</span> <span class="nx">x2_</span><span class="p">,</span> <span class="nx">y2_</span><span class="p">);</span>
      <span class="p">};</span>
      <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">x1</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">insert</span><span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">xs</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">ys</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">x1_</span><span class="p">,</span> <span class="nx">y1_</span><span class="p">,</span> <span class="nx">x2_</span><span class="p">,</span> <span class="nx">y2_</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="o">--</span><span class="nx">i</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="nx">data</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">root</span><span class="p">.</span><span class="nx">add</span><span class="p">);</span>
      <span class="nx">xs</span> <span class="o">=</span> <span class="nx">ys</span> <span class="o">=</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">d</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">root</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">quadtree</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="p">(</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">quadtree</span><span class="p">)</span> <span class="o">:</span> <span class="nx">x</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">quadtree</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="p">(</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">quadtree</span><span class="p">)</span> <span class="o">:</span> <span class="nx">y</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">quadtree</span><span class="p">.</span><span class="nx">extent</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">x1</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="p">[</span> <span class="p">[</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span> <span class="p">],</span> <span class="p">[</span> <span class="nx">x2</span><span class="p">,</span> <span class="nx">y2</span> <span class="p">]</span> <span class="p">];</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">_</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="nx">x1</span> <span class="o">=</span> <span class="nx">y1</span> <span class="o">=</span> <span class="nx">x2</span> <span class="o">=</span> <span class="nx">y2</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span> <span class="k">else</span> <span class="nx">x1</span> <span class="o">=</span> <span class="o">+</span><span class="nx">_</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y1</span> <span class="o">=</span> <span class="o">+</span><span class="nx">_</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="nx">x2</span> <span class="o">=</span> <span class="o">+</span><span class="nx">_</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> 
      <span class="nx">y2</span> <span class="o">=</span> <span class="o">+</span><span class="nx">_</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">];</span>
      <span class="k">return</span> <span class="nx">quadtree</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">quadtree</span><span class="p">.</span><span class="nx">size</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">x1</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="p">[</span> <span class="nx">x2</span> <span class="o">-</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">y2</span> <span class="o">-</span> <span class="nx">y1</span> <span class="p">];</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">_</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="nx">x1</span> <span class="o">=</span> <span class="nx">y1</span> <span class="o">=</span> <span class="nx">x2</span> <span class="o">=</span> <span class="nx">y2</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span> <span class="k">else</span> <span class="nx">x1</span> <span class="o">=</span> <span class="nx">y1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">x2</span> <span class="o">=</span> <span class="o">+</span><span class="nx">_</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y2</span> <span class="o">=</span> <span class="o">+</span><span class="nx">_</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
      <span class="k">return</span> <span class="nx">quadtree</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">quadtree</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_geom_quadtreeCompatX</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geom_quadtreeCompatY</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geom_quadtreeNode</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">leaf</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nx">nodes</span><span class="o">:</span> <span class="p">[],</span>
      <span class="nx">point</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">x</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nx">y</span><span class="o">:</span> <span class="kc">null</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_geom_quadtreeVisit</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span><span class="p">,</span> <span class="nx">x2</span><span class="p">,</span> <span class="nx">y2</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">f</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span><span class="p">,</span> <span class="nx">x2</span><span class="p">,</span> <span class="nx">y2</span><span class="p">))</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">sx</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x1</span> <span class="o">+</span> <span class="nx">x2</span><span class="p">)</span> <span class="o">*</span> <span class="p">.</span><span class="mi">5</span><span class="p">,</span> <span class="nx">sy</span> <span class="o">=</span> <span class="p">(</span><span class="nx">y1</span> <span class="o">+</span> <span class="nx">y2</span><span class="p">)</span> <span class="o">*</span> <span class="p">.</span><span class="mi">5</span><span class="p">,</span> <span class="nx">children</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">nodes</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">children</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="nx">d3_geom_quadtreeVisit</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span> <span class="nx">children</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span><span class="p">,</span> <span class="nx">sx</span><span class="p">,</span> <span class="nx">sy</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">children</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="nx">d3_geom_quadtreeVisit</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span> <span class="nx">children</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">sx</span><span class="p">,</span> <span class="nx">y1</span><span class="p">,</span> <span class="nx">x2</span><span class="p">,</span> <span class="nx">sy</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">children</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="nx">d3_geom_quadtreeVisit</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span> <span class="nx">children</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">sy</span><span class="p">,</span> <span class="nx">sx</span><span class="p">,</span> <span class="nx">y2</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">children</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span> <span class="nx">d3_geom_quadtreeVisit</span><span class="p">(</span><span class="nx">f</span><span class="p">,</span> <span class="nx">children</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="nx">sx</span><span class="p">,</span> <span class="nx">sy</span><span class="p">,</span> <span class="nx">x2</span><span class="p">,</span> <span class="nx">y2</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">interpolateRgb</span> <span class="o">=</span> <span class="nx">d3_interpolateRgb</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">d3_interpolateRgb</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">a</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">rgb</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
    <span class="nx">b</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">rgb</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">ar</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">r</span><span class="p">,</span> <span class="nx">ag</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">g</span><span class="p">,</span> <span class="nx">ab</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">b</span><span class="p">,</span> <span class="nx">br</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">r</span> <span class="o">-</span> <span class="nx">ar</span><span class="p">,</span> <span class="nx">bg</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">g</span> <span class="o">-</span> <span class="nx">ag</span><span class="p">,</span> <span class="nx">bb</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">b</span> <span class="o">-</span> <span class="nx">ab</span><span class="p">;</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="s2">&quot;#&quot;</span> <span class="o">+</span> <span class="nx">d3_rgb_hex</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">ar</span> <span class="o">+</span> <span class="nx">br</span> <span class="o">*</span> <span class="nx">t</span><span class="p">))</span> <span class="o">+</span> <span class="nx">d3_rgb_hex</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">ag</span> <span class="o">+</span> <span class="nx">bg</span> <span class="o">*</span> <span class="nx">t</span><span class="p">))</span> <span class="o">+</span> <span class="nx">d3_rgb_hex</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">ab</span> <span class="o">+</span> <span class="nx">bb</span> <span class="o">*</span> <span class="nx">t</span><span class="p">));</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">interpolateObject</span> <span class="o">=</span> <span class="nx">d3_interpolateObject</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">d3_interpolateObject</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="p">{},</span> <span class="nx">c</span> <span class="o">=</span> <span class="p">{},</span> <span class="nx">k</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="nx">k</span> <span class="k">in</span> <span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">k</span> <span class="k">in</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">i</span><span class="p">[</span><span class="nx">k</span><span class="p">]</span> <span class="o">=</span> <span class="nx">d3_interpolate</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">k</span><span class="p">],</span> <span class="nx">b</span><span class="p">[</span><span class="nx">k</span><span class="p">]);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">c</span><span class="p">[</span><span class="nx">k</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a</span><span class="p">[</span><span class="nx">k</span><span class="p">];</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">for</span> <span class="p">(</span><span class="nx">k</span> <span class="k">in</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">k</span> <span class="k">in</span> <span class="nx">a</span><span class="p">))</span> <span class="p">{</span>
        <span class="nx">c</span><span class="p">[</span><span class="nx">k</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b</span><span class="p">[</span><span class="nx">k</span><span class="p">];</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="nx">k</span> <span class="k">in</span> <span class="nx">i</span><span class="p">)</span> <span class="nx">c</span><span class="p">[</span><span class="nx">k</span><span class="p">]</span> <span class="o">=</span> <span class="nx">i</span><span class="p">[</span><span class="nx">k</span><span class="p">](</span><span class="nx">t</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">c</span><span class="p">;</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">interpolateNumber</span> <span class="o">=</span> <span class="nx">d3_interpolateNumber</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">d3_interpolateNumber</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">b</span> <span class="o">-=</span> <span class="nx">a</span> <span class="o">=</span> <span class="o">+</span><span class="nx">a</span><span class="p">;</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">*</span> <span class="nx">t</span><span class="p">;</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">interpolateString</span> <span class="o">=</span> <span class="nx">d3_interpolateString</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">d3_interpolateString</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">bi</span> <span class="o">=</span> <span class="nx">d3_interpolate_numberA</span><span class="p">.</span><span class="nx">lastIndex</span> <span class="o">=</span> <span class="nx">d3_interpolate_numberB</span><span class="p">.</span><span class="nx">lastIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">am</span><span class="p">,</span> <span class="nx">bm</span><span class="p">,</span> <span class="nx">bs</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">s</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">q</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="nx">a</span> <span class="o">=</span> <span class="nx">a</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">b</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">((</span><span class="nx">am</span> <span class="o">=</span> <span class="nx">d3_interpolate_numberA</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">a</span><span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">bm</span> <span class="o">=</span> <span class="nx">d3_interpolate_numberB</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">b</span><span class="p">)))</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">((</span><span class="nx">bs</span> <span class="o">=</span> <span class="nx">bm</span><span class="p">.</span><span class="nx">index</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nx">bi</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">bs</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">bi</span><span class="p">,</span> <span class="nx">bs</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">s</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="nx">s</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">+=</span> <span class="nx">bs</span><span class="p">;</span> <span class="k">else</span> <span class="nx">s</span><span class="p">[</span><span class="o">++</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">bs</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">((</span><span class="nx">am</span> <span class="o">=</span> <span class="nx">am</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">===</span> <span class="p">(</span><span class="nx">bm</span> <span class="o">=</span> <span class="nx">bm</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">s</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="nx">s</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">+=</span> <span class="nx">bm</span><span class="p">;</span> <span class="k">else</span> <span class="nx">s</span><span class="p">[</span><span class="o">++</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">bm</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">s</span><span class="p">[</span><span class="o">++</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="nx">q</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
          <span class="nx">i</span><span class="o">:</span> <span class="nx">i</span><span class="p">,</span>
          <span class="nx">x</span><span class="o">:</span> <span class="nx">d3_interpolateNumber</span><span class="p">(</span><span class="nx">am</span><span class="p">,</span> <span class="nx">bm</span><span class="p">)</span>
        <span class="p">});</span>
      <span class="p">}</span>
      <span class="nx">bi</span> <span class="o">=</span> <span class="nx">d3_interpolate_numberB</span><span class="p">.</span><span class="nx">lastIndex</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">bi</span> <span class="o">&lt;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">bs</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">bi</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">s</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="nx">s</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">+=</span> <span class="nx">bs</span><span class="p">;</span> <span class="k">else</span> <span class="nx">s</span><span class="p">[</span><span class="o">++</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">bs</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">s</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="o">?</span> <span class="nx">q</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">?</span> <span class="p">(</span><span class="nx">b</span> <span class="o">=</span> <span class="nx">q</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">x</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">b</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
    <span class="p">})</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">b</span><span class="p">;</span>
    <span class="p">}</span> <span class="o">:</span> <span class="p">(</span><span class="nx">b</span> <span class="o">=</span> <span class="nx">q</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">o</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">b</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="nx">s</span><span class="p">[(</span><span class="nx">o</span> <span class="o">=</span> <span class="nx">q</span><span class="p">[</span><span class="nx">i</span><span class="p">]).</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">x</span><span class="p">(</span><span class="nx">t</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">s</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">d3_interpolate_numberA</span> <span class="o">=</span> <span class="sr">/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g</span><span class="p">,</span> <span class="nx">d3_interpolate_numberB</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="nx">d3_interpolate_numberA</span><span class="p">.</span><span class="nx">source</span><span class="p">,</span> <span class="s2">&quot;g&quot;</span><span class="p">);</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">interpolate</span> <span class="o">=</span> <span class="nx">d3_interpolate</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">d3_interpolate</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">interpolators</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">f</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">--</span><span class="nx">i</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="p">(</span><span class="nx">f</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">interpolators</span><span class="p">[</span><span class="nx">i</span><span class="p">](</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)))</span> <span class="p">;</span>
    <span class="k">return</span> <span class="nx">f</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">interpolators</span> <span class="o">=</span> <span class="p">[</span> <span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">t</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">b</span><span class="p">;</span>
    <span class="k">return</span> <span class="p">(</span><span class="nx">t</span> <span class="o">===</span> <span class="s2">&quot;string&quot;</span> <span class="o">?</span> <span class="nx">d3_rgb_names</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="o">||</span> <span class="sr">/^(#|rgb\(|hsl\()/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="o">?</span> <span class="nx">d3_interpolateRgb</span> <span class="o">:</span> <span class="nx">d3_interpolateString</span> <span class="o">:</span> <span class="nx">b</span> <span class="k">instanceof</span> <span class="nx">d3_color</span> <span class="o">?</span> <span class="nx">d3_interpolateRgb</span> <span class="o">:</span> <span class="nb">Array</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="o">?</span> <span class="nx">d3_interpolateArray</span> <span class="o">:</span> <span class="nx">t</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="o">&amp;&amp;</span> <span class="nb">isNaN</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="o">?</span> <span class="nx">d3_interpolateObject</span> <span class="o">:</span> <span class="nx">d3_interpolateNumber</span><span class="p">)(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">);</span>
  <span class="p">}</span> <span class="p">];</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">interpolateArray</span> <span class="o">=</span> <span class="nx">d3_interpolateArray</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">d3_interpolateArray</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">c</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">na</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">nb</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">n0</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">a</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">b</span><span class="p">.</span><span class="nx">length</span><span class="p">),</span> <span class="nx">i</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n0</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="nx">x</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">d3_interpolate</span><span class="p">(</span><span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">b</span><span class="p">[</span><span class="nx">i</span><span class="p">]));</span>
    <span class="k">for</span> <span class="p">(;</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">na</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="nx">c</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">a</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
    <span class="k">for</span> <span class="p">(;</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">nb</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="nx">c</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">b</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n0</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="nx">c</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">x</span><span class="p">[</span><span class="nx">i</span><span class="p">](</span><span class="nx">t</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">c</span><span class="p">;</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">d3_ease_default</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_identity</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">d3_ease</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">map</span><span class="p">({</span>
    <span class="nx">linear</span><span class="o">:</span> <span class="nx">d3_ease_default</span><span class="p">,</span>
    <span class="nx">poly</span><span class="o">:</span> <span class="nx">d3_ease_poly</span><span class="p">,</span>
    <span class="nx">quad</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_ease_quad</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">cubic</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_ease_cubic</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">sin</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_ease_sin</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">exp</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_ease_exp</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">circle</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_ease_circle</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">elastic</span><span class="o">:</span> <span class="nx">d3_ease_elastic</span><span class="p">,</span>
    <span class="nx">back</span><span class="o">:</span> <span class="nx">d3_ease_back</span><span class="p">,</span>
    <span class="nx">bounce</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_ease_bounce</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">});</span>
  <span class="kd">var</span> <span class="nx">d3_ease_mode</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">map</span><span class="p">({</span>
    <span class="s2">&quot;in&quot;</span><span class="o">:</span> <span class="nx">d3_identity</span><span class="p">,</span>
    <span class="nx">out</span><span class="o">:</span> <span class="nx">d3_ease_reverse</span><span class="p">,</span>
    <span class="s2">&quot;in-out&quot;</span><span class="o">:</span> <span class="nx">d3_ease_reflect</span><span class="p">,</span>
    <span class="s2">&quot;out-in&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_ease_reflect</span><span class="p">(</span><span class="nx">d3_ease_reverse</span><span class="p">(</span><span class="nx">f</span><span class="p">));</span>
    <span class="p">}</span>
  <span class="p">});</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">ease</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">),</span> <span class="nx">t</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">?</span> <span class="nx">name</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="o">:</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">?</span> <span class="nx">name</span><span class="p">.</span><span class="nx">substring</span><span class="p">(</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">:</span> <span class="s2">&quot;in&quot;</span><span class="p">;</span>
    <span class="nx">t</span> <span class="o">=</span> <span class="nx">d3_ease</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="o">||</span> <span class="nx">d3_ease_default</span><span class="p">;</span>
    <span class="nx">m</span> <span class="o">=</span> <span class="nx">d3_ease_mode</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">m</span><span class="p">)</span> <span class="o">||</span> <span class="nx">d3_identity</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">d3_ease_clamp</span><span class="p">(</span><span class="nx">m</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">d3_arraySlice</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">arguments</span><span class="p">,</span> <span class="mi">1</span><span class="p">))));</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_ease_clamp</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">t</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="nx">t</span> <span class="o">&gt;=</span> <span class="mi">1</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="nx">f</span><span class="p">(</span><span class="nx">t</span><span class="p">);</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_ease_reverse</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="mi">1</span> <span class="o">-</span> <span class="nx">f</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">t</span><span class="p">);</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_ease_reflect</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">.</span><span class="mi">5</span> <span class="o">*</span> <span class="p">(</span><span class="nx">t</span> <span class="o">&lt;</span> <span class="p">.</span><span class="mi">5</span> <span class="o">?</span> <span class="nx">f</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="nx">t</span><span class="p">)</span> <span class="o">:</span> <span class="mi">2</span> <span class="o">-</span> <span class="nx">f</span><span class="p">(</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">*</span> <span class="nx">t</span><span class="p">));</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_ease_quad</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">t</span> <span class="o">*</span> <span class="nx">t</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_ease_cubic</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">t</span> <span class="o">*</span> <span class="nx">t</span> <span class="o">*</span> <span class="nx">t</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_ease_cubicInOut</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">t</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">t</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">t2</span> <span class="o">=</span> <span class="nx">t</span> <span class="o">*</span> <span class="nx">t</span><span class="p">,</span> <span class="nx">t3</span> <span class="o">=</span> <span class="nx">t2</span> <span class="o">*</span> <span class="nx">t</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">4</span> <span class="o">*</span> <span class="p">(</span><span class="nx">t</span> <span class="o">&lt;</span> <span class="p">.</span><span class="mi">5</span> <span class="o">?</span> <span class="nx">t3</span> <span class="o">:</span> <span class="mi">3</span> <span class="o">*</span> <span class="p">(</span><span class="nx">t</span> <span class="o">-</span> <span class="nx">t2</span><span class="p">)</span> <span class="o">+</span> <span class="nx">t3</span> <span class="o">-</span> <span class="p">.</span><span class="mi">75</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_ease_poly</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nx">t</span><span class="p">,</span> <span class="nx">e</span><span class="p">);</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_ease_sin</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="mi">1</span> <span class="o">-</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">t</span> <span class="o">*</span> <span class="nx">half</span><span class="err">π</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_ease_exp</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">10</span> <span class="o">*</span> <span class="p">(</span><span class="nx">t</span> <span class="o">-</span> <span class="mi">1</span><span class="p">));</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_ease_circle</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="mi">1</span> <span class="o">-</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">t</span> <span class="o">*</span> <span class="nx">t</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_ease_elastic</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">s</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="nx">p</span> <span class="o">=</span> <span class="p">.</span><span class="mi">45</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="nx">s</span> <span class="o">=</span> <span class="nx">p</span> <span class="o">/</span> <span class="err">τ</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">asin</span><span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="nx">a</span><span class="p">);</span> <span class="k">else</span> <span class="nx">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">s</span> <span class="o">=</span> <span class="nx">p</span> <span class="o">/</span> <span class="mi">4</span><span class="p">;</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="mi">1</span> <span class="o">+</span> <span class="nx">a</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">10</span> <span class="o">*</span> <span class="nx">t</span><span class="p">)</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">((</span><span class="nx">t</span> <span class="o">-</span> <span class="nx">s</span><span class="p">)</span> <span class="o">*</span> <span class="err">τ</span> <span class="o">/</span> <span class="nx">p</span><span class="p">);</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_ease_back</span><span class="p">(</span><span class="nx">s</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">s</span><span class="p">)</span> <span class="nx">s</span> <span class="o">=</span> <span class="mf">1.70158</span><span class="p">;</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">t</span> <span class="o">*</span> <span class="nx">t</span> <span class="o">*</span> <span class="p">((</span><span class="nx">s</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="nx">t</span> <span class="o">-</span> <span class="nx">s</span><span class="p">);</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_ease_bounce</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">t</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="o">/</span> <span class="mf">2.75</span> <span class="o">?</span> <span class="mf">7.5625</span> <span class="o">*</span> <span class="nx">t</span> <span class="o">*</span> <span class="nx">t</span> <span class="o">:</span> <span class="nx">t</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="o">/</span> <span class="mf">2.75</span> <span class="o">?</span> <span class="mf">7.5625</span> <span class="o">*</span> <span class="p">(</span><span class="nx">t</span> <span class="o">-=</span> <span class="mf">1.5</span> <span class="o">/</span> <span class="mf">2.75</span><span class="p">)</span> <span class="o">*</span> <span class="nx">t</span> <span class="o">+</span> <span class="p">.</span><span class="mi">75</span> <span class="o">:</span> <span class="nx">t</span> <span class="o">&lt;</span> <span class="mf">2.5</span> <span class="o">/</span> <span class="mf">2.75</span> <span class="o">?</span> <span class="mf">7.5625</span> <span class="o">*</span> <span class="p">(</span><span class="nx">t</span> <span class="o">-=</span> <span class="mf">2.25</span> <span class="o">/</span> <span class="mf">2.75</span><span class="p">)</span> <span class="o">*</span> <span class="nx">t</span> <span class="o">+</span> <span class="p">.</span><span class="mi">9375</span> <span class="o">:</span> <span class="mf">7.5625</span> <span class="o">*</span> <span class="p">(</span><span class="nx">t</span> <span class="o">-=</span> <span class="mf">2.625</span> <span class="o">/</span> <span class="mf">2.75</span><span class="p">)</span> <span class="o">*</span> <span class="nx">t</span> <span class="o">+</span> <span class="p">.</span><span class="mi">984375</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">interpolateHcl</span> <span class="o">=</span> <span class="nx">d3_interpolateHcl</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">d3_interpolateHcl</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">a</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">hcl</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
    <span class="nx">b</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">hcl</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">ah</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">h</span><span class="p">,</span> <span class="nx">ac</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">c</span><span class="p">,</span> <span class="nx">al</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">l</span><span class="p">,</span> <span class="nx">bh</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">h</span> <span class="o">-</span> <span class="nx">ah</span><span class="p">,</span> <span class="nx">bc</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">c</span> <span class="o">-</span> <span class="nx">ac</span><span class="p">,</span> <span class="nx">bl</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">l</span> <span class="o">-</span> <span class="nx">al</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">bc</span><span class="p">))</span> <span class="nx">bc</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">ac</span> <span class="o">=</span> <span class="nb">isNaN</span><span class="p">(</span><span class="nx">ac</span><span class="p">)</span> <span class="o">?</span> <span class="nx">b</span><span class="p">.</span><span class="nx">c</span> <span class="o">:</span> <span class="nx">ac</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">bh</span><span class="p">))</span> <span class="nx">bh</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">ah</span> <span class="o">=</span> <span class="nb">isNaN</span><span class="p">(</span><span class="nx">ah</span><span class="p">)</span> <span class="o">?</span> <span class="nx">b</span><span class="p">.</span><span class="nx">h</span> <span class="o">:</span> <span class="nx">ah</span><span class="p">;</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">bh</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">)</span> <span class="nx">bh</span> <span class="o">-=</span> <span class="mi">360</span><span class="p">;</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">bh</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">180</span><span class="p">)</span> <span class="nx">bh</span> <span class="o">+=</span> <span class="mi">360</span><span class="p">;</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_hcl_lab</span><span class="p">(</span><span class="nx">ah</span> <span class="o">+</span> <span class="nx">bh</span> <span class="o">*</span> <span class="nx">t</span><span class="p">,</span> <span class="nx">ac</span> <span class="o">+</span> <span class="nx">bc</span> <span class="o">*</span> <span class="nx">t</span><span class="p">,</span> <span class="nx">al</span> <span class="o">+</span> <span class="nx">bl</span> <span class="o">*</span> <span class="nx">t</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">interpolateHsl</span> <span class="o">=</span> <span class="nx">d3_interpolateHsl</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">d3_interpolateHsl</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">a</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">hsl</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
    <span class="nx">b</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">hsl</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">ah</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">h</span><span class="p">,</span> <span class="nx">as</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">s</span><span class="p">,</span> <span class="nx">al</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">l</span><span class="p">,</span> <span class="nx">bh</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">h</span> <span class="o">-</span> <span class="nx">ah</span><span class="p">,</span> <span class="nx">bs</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">s</span> <span class="o">-</span> <span class="nx">as</span><span class="p">,</span> <span class="nx">bl</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">l</span> <span class="o">-</span> <span class="nx">al</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">bs</span><span class="p">))</span> <span class="nx">bs</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">as</span> <span class="o">=</span> <span class="nb">isNaN</span><span class="p">(</span><span class="nx">as</span><span class="p">)</span> <span class="o">?</span> <span class="nx">b</span><span class="p">.</span><span class="nx">s</span> <span class="o">:</span> <span class="nx">as</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">bh</span><span class="p">))</span> <span class="nx">bh</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">ah</span> <span class="o">=</span> <span class="nb">isNaN</span><span class="p">(</span><span class="nx">ah</span><span class="p">)</span> <span class="o">?</span> <span class="nx">b</span><span class="p">.</span><span class="nx">h</span> <span class="o">:</span> <span class="nx">ah</span><span class="p">;</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">bh</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">)</span> <span class="nx">bh</span> <span class="o">-=</span> <span class="mi">360</span><span class="p">;</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">bh</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">180</span><span class="p">)</span> <span class="nx">bh</span> <span class="o">+=</span> <span class="mi">360</span><span class="p">;</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_hsl_rgb</span><span class="p">(</span><span class="nx">ah</span> <span class="o">+</span> <span class="nx">bh</span> <span class="o">*</span> <span class="nx">t</span><span class="p">,</span> <span class="nx">as</span> <span class="o">+</span> <span class="nx">bs</span> <span class="o">*</span> <span class="nx">t</span><span class="p">,</span> <span class="nx">al</span> <span class="o">+</span> <span class="nx">bl</span> <span class="o">*</span> <span class="nx">t</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">interpolateLab</span> <span class="o">=</span> <span class="nx">d3_interpolateLab</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">d3_interpolateLab</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">a</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">lab</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
    <span class="nx">b</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">lab</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">al</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">l</span><span class="p">,</span> <span class="nx">aa</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">a</span><span class="p">,</span> <span class="nx">ab</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">b</span><span class="p">,</span> <span class="nx">bl</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">l</span> <span class="o">-</span> <span class="nx">al</span><span class="p">,</span> <span class="nx">ba</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">a</span> <span class="o">-</span> <span class="nx">aa</span><span class="p">,</span> <span class="nx">bb</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">b</span> <span class="o">-</span> <span class="nx">ab</span><span class="p">;</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_lab_rgb</span><span class="p">(</span><span class="nx">al</span> <span class="o">+</span> <span class="nx">bl</span> <span class="o">*</span> <span class="nx">t</span><span class="p">,</span> <span class="nx">aa</span> <span class="o">+</span> <span class="nx">ba</span> <span class="o">*</span> <span class="nx">t</span><span class="p">,</span> <span class="nx">ab</span> <span class="o">+</span> <span class="nx">bb</span> <span class="o">*</span> <span class="nx">t</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">interpolateRound</span> <span class="o">=</span> <span class="nx">d3_interpolateRound</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">d3_interpolateRound</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">b</span> <span class="o">-=</span> <span class="nx">a</span><span class="p">;</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">*</span> <span class="nx">t</span><span class="p">);</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">transform</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">g</span> <span class="o">=</span> <span class="nx">d3_document</span><span class="p">.</span><span class="nx">createElementNS</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">ns</span><span class="p">.</span><span class="nx">prefix</span><span class="p">.</span><span class="nx">svg</span><span class="p">,</span> <span class="s2">&quot;g&quot;</span><span class="p">);</span>
    <span class="k">return</span> <span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">transform</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">string</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">g</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="s2">&quot;transform&quot;</span><span class="p">,</span> <span class="nx">string</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">t</span> <span class="o">=</span> <span class="nx">g</span><span class="p">.</span><span class="nx">transform</span><span class="p">.</span><span class="nx">baseVal</span><span class="p">.</span><span class="nx">consolidate</span><span class="p">();</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="k">new</span> <span class="nx">d3_transform</span><span class="p">(</span><span class="nx">t</span> <span class="o">?</span> <span class="nx">t</span><span class="p">.</span><span class="nx">matrix</span> <span class="o">:</span> <span class="nx">d3_transformIdentity</span><span class="p">);</span>
    <span class="p">})(</span><span class="nx">string</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_transform</span><span class="p">(</span><span class="nx">m</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">r0</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">m</span><span class="p">.</span><span class="nx">a</span><span class="p">,</span> <span class="nx">m</span><span class="p">.</span><span class="nx">b</span> <span class="p">],</span> <span class="nx">r1</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">m</span><span class="p">.</span><span class="nx">c</span><span class="p">,</span> <span class="nx">m</span><span class="p">.</span><span class="nx">d</span> <span class="p">],</span> <span class="nx">kx</span> <span class="o">=</span> <span class="nx">d3_transformNormalize</span><span class="p">(</span><span class="nx">r0</span><span class="p">),</span> <span class="nx">kz</span> <span class="o">=</span> <span class="nx">d3_transformDot</span><span class="p">(</span><span class="nx">r0</span><span class="p">,</span> <span class="nx">r1</span><span class="p">),</span> <span class="nx">ky</span> <span class="o">=</span> <span class="nx">d3_transformNormalize</span><span class="p">(</span><span class="nx">d3_transformCombine</span><span class="p">(</span><span class="nx">r1</span><span class="p">,</span> <span class="nx">r0</span><span class="p">,</span> <span class="o">-</span><span class="nx">kz</span><span class="p">))</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">r0</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nx">r1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="nx">r1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nx">r0</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="p">{</span>
      <span class="nx">r0</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
      <span class="nx">r0</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
      <span class="nx">kx</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
      <span class="nx">kz</span> <span class="o">*=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">rotate</span> <span class="o">=</span> <span class="p">(</span><span class="nx">kx</span> <span class="o">?</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan2</span><span class="p">(</span><span class="nx">r0</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">r0</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan2</span><span class="p">(</span><span class="o">-</span><span class="nx">r1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">r1</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span> <span class="o">*</span> <span class="nx">d3_degrees</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">translate</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">m</span><span class="p">.</span><span class="nx">e</span><span class="p">,</span> <span class="nx">m</span><span class="p">.</span><span class="nx">f</span> <span class="p">];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">scale</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">kx</span><span class="p">,</span> <span class="nx">ky</span> <span class="p">];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">skew</span> <span class="o">=</span> <span class="nx">ky</span> <span class="o">?</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">atan2</span><span class="p">(</span><span class="nx">kz</span><span class="p">,</span> <span class="nx">ky</span><span class="p">)</span> <span class="o">*</span> <span class="nx">d3_degrees</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">d3_transform</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toString</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">&quot;translate(&quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">translate</span> <span class="o">+</span> <span class="s2">&quot;)rotate(&quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">rotate</span> <span class="o">+</span> <span class="s2">&quot;)skewX(&quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">skew</span> <span class="o">+</span> <span class="s2">&quot;)scale(&quot;</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">scale</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_transformDot</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_transformNormalize</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">k</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">d3_transformDot</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">a</span><span class="p">));</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">k</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/=</span> <span class="nx">k</span><span class="p">;</span>
      <span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/=</span> <span class="nx">k</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">k</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_transformCombine</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">k</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="nx">k</span> <span class="o">*</span> <span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="nx">k</span> <span class="o">*</span> <span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="k">return</span> <span class="nx">a</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">d3_transformIdentity</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">a</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">b</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">c</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">d</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">e</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
    <span class="nx">f</span><span class="o">:</span> <span class="mi">0</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">interpolateTransform</span> <span class="o">=</span> <span class="nx">d3_interpolateTransform</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">d3_interpolateTransform</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">q</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">n</span><span class="p">,</span> <span class="nx">A</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">transform</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span> <span class="nx">B</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">transform</span><span class="p">(</span><span class="nx">b</span><span class="p">),</span> <span class="nx">ta</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nx">translate</span><span class="p">,</span> <span class="nx">tb</span> <span class="o">=</span> <span class="nx">B</span><span class="p">.</span><span class="nx">translate</span><span class="p">,</span> <span class="nx">ra</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nx">rotate</span><span class="p">,</span> <span class="nx">rb</span> <span class="o">=</span> <span class="nx">B</span><span class="p">.</span><span class="nx">rotate</span><span class="p">,</span> <span class="nx">wa</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nx">skew</span><span class="p">,</span> <span class="nx">wb</span> <span class="o">=</span> <span class="nx">B</span><span class="p">.</span><span class="nx">skew</span><span class="p">,</span> <span class="nx">ka</span> <span class="o">=</span> <span class="nx">A</span><span class="p">.</span><span class="nx">scale</span><span class="p">,</span> <span class="nx">kb</span> <span class="o">=</span> <span class="nx">B</span><span class="p">.</span><span class="nx">scale</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">ta</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="nx">tb</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span> <span class="nx">ta</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="nx">tb</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="p">{</span>
      <span class="nx">s</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;translate(&quot;</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">);</span>
      <span class="nx">q</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
        <span class="nx">i</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nx">x</span><span class="o">:</span> <span class="nx">d3_interpolateNumber</span><span class="p">(</span><span class="nx">ta</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">tb</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
      <span class="p">},</span> <span class="p">{</span>
        <span class="nx">i</span><span class="o">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="nx">x</span><span class="o">:</span> <span class="nx">d3_interpolateNumber</span><span class="p">(</span><span class="nx">ta</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">tb</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
      <span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">tb</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span> <span class="nx">tb</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="p">{</span>
      <span class="nx">s</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;translate(&quot;</span> <span class="o">+</span> <span class="nx">tb</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">s</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">ra</span> <span class="o">!=</span> <span class="nx">rb</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">ra</span> <span class="o">-</span> <span class="nx">rb</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">)</span> <span class="nx">rb</span> <span class="o">+=</span> <span class="mi">360</span><span class="p">;</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">rb</span> <span class="o">-</span> <span class="nx">ra</span> <span class="o">&gt;</span> <span class="mi">180</span><span class="p">)</span> <span class="nx">ra</span> <span class="o">+=</span> <span class="mi">360</span><span class="p">;</span>
      <span class="nx">q</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
        <span class="nx">i</span><span class="o">:</span> <span class="nx">s</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">pop</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;rotate(&quot;</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">)</span> <span class="o">-</span> <span class="mi">2</span><span class="p">,</span>
        <span class="nx">x</span><span class="o">:</span> <span class="nx">d3_interpolateNumber</span><span class="p">(</span><span class="nx">ra</span><span class="p">,</span> <span class="nx">rb</span><span class="p">)</span>
      <span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">rb</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">s</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">pop</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;rotate(&quot;</span> <span class="o">+</span> <span class="nx">rb</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">wa</span> <span class="o">!=</span> <span class="nx">wb</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">q</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
        <span class="nx">i</span><span class="o">:</span> <span class="nx">s</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">pop</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;skewX(&quot;</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">)</span> <span class="o">-</span> <span class="mi">2</span><span class="p">,</span>
        <span class="nx">x</span><span class="o">:</span> <span class="nx">d3_interpolateNumber</span><span class="p">(</span><span class="nx">wa</span><span class="p">,</span> <span class="nx">wb</span><span class="p">)</span>
      <span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">wb</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">s</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">pop</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;skewX(&quot;</span> <span class="o">+</span> <span class="nx">wb</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">ka</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="nx">kb</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span> <span class="nx">ka</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="nx">kb</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="p">{</span>
      <span class="nx">n</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">pop</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;scale(&quot;</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="s2">&quot;)&quot;</span><span class="p">);</span>
      <span class="nx">q</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
        <span class="nx">i</span><span class="o">:</span> <span class="nx">n</span> <span class="o">-</span> <span class="mi">4</span><span class="p">,</span>
        <span class="nx">x</span><span class="o">:</span> <span class="nx">d3_interpolateNumber</span><span class="p">(</span><span class="nx">ka</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">kb</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
      <span class="p">},</span> <span class="p">{</span>
        <span class="nx">i</span><span class="o">:</span> <span class="nx">n</span> <span class="o">-</span> <span class="mi">2</span><span class="p">,</span>
        <span class="nx">x</span><span class="o">:</span> <span class="nx">d3_interpolateNumber</span><span class="p">(</span><span class="nx">ka</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">kb</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
      <span class="p">});</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">kb</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">1</span> <span class="o">||</span> <span class="nx">kb</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">s</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">pop</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;scale(&quot;</span> <span class="o">+</span> <span class="nx">kb</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">n</span> <span class="o">=</span> <span class="nx">q</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">o</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="nx">s</span><span class="p">[(</span><span class="nx">o</span> <span class="o">=</span> <span class="nx">q</span><span class="p">[</span><span class="nx">i</span><span class="p">]).</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">x</span><span class="p">(</span><span class="nx">t</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">s</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">);</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_uninterpolateNumber</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">b</span> <span class="o">=</span> <span class="nx">b</span> <span class="o">-</span> <span class="p">(</span><span class="nx">a</span> <span class="o">=</span> <span class="o">+</span><span class="nx">a</span><span class="p">)</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="nx">b</span> <span class="o">-</span> <span class="nx">a</span><span class="p">)</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">a</span><span class="p">)</span> <span class="o">*</span> <span class="nx">b</span><span class="p">;</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_uninterpolateClamp</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">b</span> <span class="o">=</span> <span class="nx">b</span> <span class="o">-</span> <span class="p">(</span><span class="nx">a</span> <span class="o">=</span> <span class="o">+</span><span class="nx">a</span><span class="p">)</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">/</span> <span class="p">(</span><span class="nx">b</span> <span class="o">-</span> <span class="nx">a</span><span class="p">)</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">a</span><span class="p">)</span> <span class="o">*</span> <span class="nx">b</span><span class="p">));</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">layout</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">layout</span><span class="p">.</span><span class="nx">bundle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">links</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">paths</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">links</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="nx">paths</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">d3_layout_bundlePath</span><span class="p">(</span><span class="nx">links</span><span class="p">[</span><span class="nx">i</span><span class="p">]));</span>
      <span class="k">return</span> <span class="nx">paths</span><span class="p">;</span>
    <span class="p">};</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_layout_bundlePath</span><span class="p">(</span><span class="nx">link</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">start</span> <span class="o">=</span> <span class="nx">link</span><span class="p">.</span><span class="nx">source</span><span class="p">,</span> <span class="nx">end</span> <span class="o">=</span> <span class="nx">link</span><span class="p">.</span><span class="nx">target</span><span class="p">,</span> <span class="nx">lca</span> <span class="o">=</span> <span class="nx">d3_layout_bundleLeastCommonAncestor</span><span class="p">(</span><span class="nx">start</span><span class="p">,</span> <span class="nx">end</span><span class="p">),</span> <span class="nx">points</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">start</span> <span class="p">];</span>
    <span class="k">while</span> <span class="p">(</span><span class="nx">start</span> <span class="o">!==</span> <span class="nx">lca</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">start</span> <span class="o">=</span> <span class="nx">start</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span>
      <span class="nx">points</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">start</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">var</span> <span class="nx">k</span> <span class="o">=</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="nx">end</span> <span class="o">!==</span> <span class="nx">lca</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">points</span><span class="p">.</span><span class="nx">splice</span><span class="p">(</span><span class="nx">k</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">end</span><span class="p">);</span>
      <span class="nx">end</span> <span class="o">=</span> <span class="nx">end</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">points</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_bundleAncestors</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">ancestors</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">parent</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="nx">parent</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">ancestors</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">node</span><span class="p">);</span>
      <span class="nx">node</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">;</span>
      <span class="nx">parent</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">parent</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">ancestors</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">node</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">ancestors</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_bundleLeastCommonAncestor</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">a</span> <span class="o">===</span> <span class="nx">b</span><span class="p">)</span> <span class="k">return</span> <span class="nx">a</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">aNodes</span> <span class="o">=</span> <span class="nx">d3_layout_bundleAncestors</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span> <span class="nx">bNodes</span> <span class="o">=</span> <span class="nx">d3_layout_bundleAncestors</span><span class="p">(</span><span class="nx">b</span><span class="p">),</span> <span class="nx">aNode</span> <span class="o">=</span> <span class="nx">aNodes</span><span class="p">.</span><span class="nx">pop</span><span class="p">(),</span> <span class="nx">bNode</span> <span class="o">=</span> <span class="nx">bNodes</span><span class="p">.</span><span class="nx">pop</span><span class="p">(),</span> <span class="nx">sharedNode</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="nx">aNode</span> <span class="o">===</span> <span class="nx">bNode</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">sharedNode</span> <span class="o">=</span> <span class="nx">aNode</span><span class="p">;</span>
      <span class="nx">aNode</span> <span class="o">=</span> <span class="nx">aNodes</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
      <span class="nx">bNode</span> <span class="o">=</span> <span class="nx">bNodes</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">sharedNode</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">layout</span><span class="p">.</span><span class="nx">chord</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">chord</span> <span class="o">=</span> <span class="p">{},</span> <span class="nx">chords</span><span class="p">,</span> <span class="nx">groups</span><span class="p">,</span> <span class="nx">matrix</span><span class="p">,</span> <span class="nx">n</span><span class="p">,</span> <span class="nx">padding</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">sortGroups</span><span class="p">,</span> <span class="nx">sortSubgroups</span><span class="p">,</span> <span class="nx">sortChords</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">relayout</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">subgroups</span> <span class="o">=</span> <span class="p">{},</span> <span class="nx">groupSums</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">groupIndex</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">n</span><span class="p">),</span> <span class="nx">subgroupIndex</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">x0</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">;</span>
      <span class="nx">chords</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="nx">groups</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="nx">k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">j</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">x</span> <span class="o">+=</span> <span class="nx">matrix</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="nx">groupSums</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
        <span class="nx">subgroupIndex</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">n</span><span class="p">));</span>
        <span class="nx">k</span> <span class="o">+=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">sortGroups</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">groupIndex</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">sortGroups</span><span class="p">(</span><span class="nx">groupSums</span><span class="p">[</span><span class="nx">a</span><span class="p">],</span> <span class="nx">groupSums</span><span class="p">[</span><span class="nx">b</span><span class="p">]);</span>
        <span class="p">});</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">sortSubgroups</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">subgroupIndex</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">d</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">sortSubgroups</span><span class="p">(</span><span class="nx">matrix</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">a</span><span class="p">],</span> <span class="nx">matrix</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">b</span><span class="p">]);</span>
          <span class="p">});</span>
        <span class="p">});</span>
      <span class="p">}</span>
      <span class="nx">k</span> <span class="o">=</span> <span class="p">(</span><span class="err">τ</span> <span class="o">-</span> <span class="nx">padding</span> <span class="o">*</span> <span class="nx">n</span><span class="p">)</span> <span class="o">/</span> <span class="nx">k</span><span class="p">;</span>
      <span class="nx">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">x0</span> <span class="o">=</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">j</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">di</span> <span class="o">=</span> <span class="nx">groupIndex</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">dj</span> <span class="o">=</span> <span class="nx">subgroupIndex</span><span class="p">[</span><span class="nx">di</span><span class="p">][</span><span class="nx">j</span><span class="p">],</span> <span class="nx">v</span> <span class="o">=</span> <span class="nx">matrix</span><span class="p">[</span><span class="nx">di</span><span class="p">][</span><span class="nx">dj</span><span class="p">],</span> <span class="nx">a0</span> <span class="o">=</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">a1</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">+=</span> <span class="nx">v</span> <span class="o">*</span> <span class="nx">k</span><span class="p">;</span>
          <span class="nx">subgroups</span><span class="p">[</span><span class="nx">di</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="nx">dj</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="nx">index</span><span class="o">:</span> <span class="nx">di</span><span class="p">,</span>
            <span class="nx">subindex</span><span class="o">:</span> <span class="nx">dj</span><span class="p">,</span>
            <span class="nx">startAngle</span><span class="o">:</span> <span class="nx">a0</span><span class="p">,</span>
            <span class="nx">endAngle</span><span class="o">:</span> <span class="nx">a1</span><span class="p">,</span>
            <span class="nx">value</span><span class="o">:</span> <span class="nx">v</span>
          <span class="p">};</span>
        <span class="p">}</span>
        <span class="nx">groups</span><span class="p">[</span><span class="nx">di</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
          <span class="nx">index</span><span class="o">:</span> <span class="nx">di</span><span class="p">,</span>
          <span class="nx">startAngle</span><span class="o">:</span> <span class="nx">x0</span><span class="p">,</span>
          <span class="nx">endAngle</span><span class="o">:</span> <span class="nx">x</span><span class="p">,</span>
          <span class="nx">value</span><span class="o">:</span> <span class="p">(</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">x0</span><span class="p">)</span> <span class="o">/</span> <span class="nx">k</span>
        <span class="p">};</span>
        <span class="nx">x</span> <span class="o">+=</span> <span class="nx">padding</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">j</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">source</span> <span class="o">=</span> <span class="nx">subgroups</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="nx">j</span><span class="p">],</span> <span class="nx">target</span> <span class="o">=</span> <span class="nx">subgroups</span><span class="p">[</span><span class="nx">j</span> <span class="o">+</span> <span class="s2">&quot;-&quot;</span> <span class="o">+</span> <span class="nx">i</span><span class="p">];</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">source</span><span class="p">.</span><span class="nx">value</span> <span class="o">||</span> <span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">chords</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">source</span><span class="p">.</span><span class="nx">value</span> <span class="o">&lt;</span> <span class="nx">target</span><span class="p">.</span><span class="nx">value</span> <span class="o">?</span> <span class="p">{</span>
              <span class="nx">source</span><span class="o">:</span> <span class="nx">target</span><span class="p">,</span>
              <span class="nx">target</span><span class="o">:</span> <span class="nx">source</span>
            <span class="p">}</span> <span class="o">:</span> <span class="p">{</span>
              <span class="nx">source</span><span class="o">:</span> <span class="nx">source</span><span class="p">,</span>
              <span class="nx">target</span><span class="o">:</span> <span class="nx">target</span>
            <span class="p">});</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">sortChords</span><span class="p">)</span> <span class="nx">resort</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">resort</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">chords</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">sortChords</span><span class="p">((</span><span class="nx">a</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">value</span> <span class="o">+</span> <span class="nx">a</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="nx">b</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">value</span> <span class="o">+</span> <span class="nx">b</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">value</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>
    <span class="nx">chord</span><span class="p">.</span><span class="nx">matrix</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">matrix</span><span class="p">;</span>
      <span class="nx">n</span> <span class="o">=</span> <span class="p">(</span><span class="nx">matrix</span> <span class="o">=</span> <span class="nx">x</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">matrix</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
      <span class="nx">chords</span> <span class="o">=</span> <span class="nx">groups</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">chord</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">chord</span><span class="p">.</span><span class="nx">padding</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">padding</span><span class="p">;</span>
      <span class="nx">padding</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="nx">chords</span> <span class="o">=</span> <span class="nx">groups</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">chord</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">chord</span><span class="p">.</span><span class="nx">sortGroups</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">sortGroups</span><span class="p">;</span>
      <span class="nx">sortGroups</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="nx">chords</span> <span class="o">=</span> <span class="nx">groups</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">chord</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">chord</span><span class="p">.</span><span class="nx">sortSubgroups</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">sortSubgroups</span><span class="p">;</span>
      <span class="nx">sortSubgroups</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="nx">chords</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">chord</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">chord</span><span class="p">.</span><span class="nx">sortChords</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">sortChords</span><span class="p">;</span>
      <span class="nx">sortChords</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">chords</span><span class="p">)</span> <span class="nx">resort</span><span class="p">();</span>
      <span class="k">return</span> <span class="nx">chord</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">chord</span><span class="p">.</span><span class="nx">chords</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">chords</span><span class="p">)</span> <span class="nx">relayout</span><span class="p">();</span>
      <span class="k">return</span> <span class="nx">chords</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">chord</span><span class="p">.</span><span class="nx">groups</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">groups</span><span class="p">)</span> <span class="nx">relayout</span><span class="p">();</span>
      <span class="k">return</span> <span class="nx">groups</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">chord</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">layout</span><span class="p">.</span><span class="nx">force</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">force</span> <span class="o">=</span> <span class="p">{},</span> <span class="nx">event</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="s2">&quot;start&quot;</span><span class="p">,</span> <span class="s2">&quot;tick&quot;</span><span class="p">,</span> <span class="s2">&quot;end&quot;</span><span class="p">),</span> <span class="nx">size</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span> <span class="p">],</span> <span class="nx">drag</span><span class="p">,</span> <span class="nx">alpha</span><span class="p">,</span> <span class="nx">friction</span> <span class="o">=</span> <span class="p">.</span><span class="mi">9</span><span class="p">,</span> <span class="nx">linkDistance</span> <span class="o">=</span> <span class="nx">d3_layout_forceLinkDistance</span><span class="p">,</span> <span class="nx">linkStrength</span> <span class="o">=</span> <span class="nx">d3_layout_forceLinkStrength</span><span class="p">,</span> <span class="nx">charge</span> <span class="o">=</span> <span class="o">-</span><span class="mi">30</span><span class="p">,</span> <span class="nx">chargeDistance2</span> <span class="o">=</span> <span class="nx">d3_layout_forceChargeDistance2</span><span class="p">,</span> <span class="nx">gravity</span> <span class="o">=</span> <span class="p">.</span><span class="mi">1</span><span class="p">,</span> <span class="nx">theta2</span> <span class="o">=</span> <span class="p">.</span><span class="mi">64</span><span class="p">,</span> <span class="nx">nodes</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">links</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">distances</span><span class="p">,</span> <span class="nx">strengths</span><span class="p">,</span> <span class="nx">charges</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">repulse</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">quad</span><span class="p">,</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">x2</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">quad</span><span class="p">.</span><span class="nx">point</span> <span class="o">!==</span> <span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">dx</span> <span class="o">=</span> <span class="nx">quad</span><span class="p">.</span><span class="nx">cx</span> <span class="o">-</span> <span class="nx">node</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">dy</span> <span class="o">=</span> <span class="nx">quad</span><span class="p">.</span><span class="nx">cy</span> <span class="o">-</span> <span class="nx">node</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">dw</span> <span class="o">=</span> <span class="nx">x2</span> <span class="o">-</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">dn</span> <span class="o">=</span> <span class="nx">dx</span> <span class="o">*</span> <span class="nx">dx</span> <span class="o">+</span> <span class="nx">dy</span> <span class="o">*</span> <span class="nx">dy</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">dw</span> <span class="o">*</span> <span class="nx">dw</span> <span class="o">/</span> <span class="nx">theta2</span> <span class="o">&lt;</span> <span class="nx">dn</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">dn</span> <span class="o">&lt;</span> <span class="nx">chargeDistance2</span><span class="p">)</span> <span class="p">{</span>
              <span class="kd">var</span> <span class="nx">k</span> <span class="o">=</span> <span class="nx">quad</span><span class="p">.</span><span class="nx">charge</span> <span class="o">/</span> <span class="nx">dn</span><span class="p">;</span>
              <span class="nx">node</span><span class="p">.</span><span class="nx">px</span> <span class="o">-=</span> <span class="nx">dx</span> <span class="o">*</span> <span class="nx">k</span><span class="p">;</span>
              <span class="nx">node</span><span class="p">.</span><span class="nx">py</span> <span class="o">-=</span> <span class="nx">dy</span> <span class="o">*</span> <span class="nx">k</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">quad</span><span class="p">.</span><span class="nx">point</span> <span class="o">&amp;&amp;</span> <span class="nx">dn</span> <span class="o">&amp;&amp;</span> <span class="nx">dn</span> <span class="o">&lt;</span> <span class="nx">chargeDistance2</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">k</span> <span class="o">=</span> <span class="nx">quad</span><span class="p">.</span><span class="nx">pointCharge</span> <span class="o">/</span> <span class="nx">dn</span><span class="p">;</span>
            <span class="nx">node</span><span class="p">.</span><span class="nx">px</span> <span class="o">-=</span> <span class="nx">dx</span> <span class="o">*</span> <span class="nx">k</span><span class="p">;</span>
            <span class="nx">node</span><span class="p">.</span><span class="nx">py</span> <span class="o">-=</span> <span class="nx">dy</span> <span class="o">*</span> <span class="nx">k</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="o">!</span><span class="nx">quad</span><span class="p">.</span><span class="nx">charge</span><span class="p">;</span>
      <span class="p">};</span>
    <span class="p">}</span>
    <span class="nx">force</span><span class="p">.</span><span class="nx">tick</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">((</span><span class="nx">alpha</span> <span class="o">*=</span> <span class="p">.</span><span class="mi">99</span><span class="p">)</span> <span class="o">&lt;</span> <span class="p">.</span><span class="mi">005</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">event</span><span class="p">.</span><span class="nx">end</span><span class="p">({</span>
          <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;end&quot;</span><span class="p">,</span>
          <span class="nx">alpha</span><span class="o">:</span> <span class="nx">alpha</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="p">});</span>
        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">nodes</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">links</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">q</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">o</span><span class="p">,</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">t</span><span class="p">,</span> <span class="nx">l</span><span class="p">,</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">;</span>
      <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">o</span> <span class="o">=</span> <span class="nx">links</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="nx">s</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">source</span><span class="p">;</span>
        <span class="nx">t</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">target</span><span class="p">;</span>
        <span class="nx">x</span> <span class="o">=</span> <span class="nx">t</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">s</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
        <span class="nx">y</span> <span class="o">=</span> <span class="nx">t</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">s</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">l</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span> <span class="o">*</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">l</span> <span class="o">=</span> <span class="nx">alpha</span> <span class="o">*</span> <span class="nx">strengths</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">*</span> <span class="p">((</span><span class="nx">l</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">l</span><span class="p">))</span> <span class="o">-</span> <span class="nx">distances</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">/</span> <span class="nx">l</span><span class="p">;</span>
          <span class="nx">x</span> <span class="o">*=</span> <span class="nx">l</span><span class="p">;</span>
          <span class="nx">y</span> <span class="o">*=</span> <span class="nx">l</span><span class="p">;</span>
          <span class="nx">t</span><span class="p">.</span><span class="nx">x</span> <span class="o">-=</span> <span class="nx">x</span> <span class="o">*</span> <span class="p">(</span><span class="nx">k</span> <span class="o">=</span> <span class="nx">s</span><span class="p">.</span><span class="nx">weight</span> <span class="o">/</span> <span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">weight</span> <span class="o">+</span> <span class="nx">s</span><span class="p">.</span><span class="nx">weight</span><span class="p">));</span>
          <span class="nx">t</span><span class="p">.</span><span class="nx">y</span> <span class="o">-=</span> <span class="nx">y</span> <span class="o">*</span> <span class="nx">k</span><span class="p">;</span>
          <span class="nx">s</span><span class="p">.</span><span class="nx">x</span> <span class="o">+=</span> <span class="nx">x</span> <span class="o">*</span> <span class="p">(</span><span class="nx">k</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">-</span> <span class="nx">k</span><span class="p">);</span>
          <span class="nx">s</span><span class="p">.</span><span class="nx">y</span> <span class="o">+=</span> <span class="nx">y</span> <span class="o">*</span> <span class="nx">k</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">k</span> <span class="o">=</span> <span class="nx">alpha</span> <span class="o">*</span> <span class="nx">gravity</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">x</span> <span class="o">=</span> <span class="nx">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
        <span class="nx">y</span> <span class="o">=</span> <span class="nx">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
        <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">k</span><span class="p">)</span> <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">o</span> <span class="o">=</span> <span class="nx">nodes</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
          <span class="nx">o</span><span class="p">.</span><span class="nx">x</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">o</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="o">*</span> <span class="nx">k</span><span class="p">;</span>
          <span class="nx">o</span><span class="p">.</span><span class="nx">y</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">o</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="o">*</span> <span class="nx">k</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">charge</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">d3_layout_forceAccumulate</span><span class="p">(</span><span class="nx">q</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">geom</span><span class="p">.</span><span class="nx">quadtree</span><span class="p">(</span><span class="nx">nodes</span><span class="p">),</span> <span class="nx">alpha</span><span class="p">,</span> <span class="nx">charges</span><span class="p">);</span>
        <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">o</span> <span class="o">=</span> <span class="nx">nodes</span><span class="p">[</span><span class="nx">i</span><span class="p">]).</span><span class="nx">fixed</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">q</span><span class="p">.</span><span class="nx">visit</span><span class="p">(</span><span class="nx">repulse</span><span class="p">(</span><span class="nx">o</span><span class="p">));</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">o</span> <span class="o">=</span> <span class="nx">nodes</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">fixed</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">o</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">px</span><span class="p">;</span>
          <span class="nx">o</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">py</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">o</span><span class="p">.</span><span class="nx">x</span> <span class="o">-=</span> <span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">px</span> <span class="o">-</span> <span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">px</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">x</span><span class="p">))</span> <span class="o">*</span> <span class="nx">friction</span><span class="p">;</span>
          <span class="nx">o</span><span class="p">.</span><span class="nx">y</span> <span class="o">-=</span> <span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">py</span> <span class="o">-</span> <span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">py</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">y</span><span class="p">))</span> <span class="o">*</span> <span class="nx">friction</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="nx">event</span><span class="p">.</span><span class="nx">tick</span><span class="p">({</span>
        <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;tick&quot;</span><span class="p">,</span>
        <span class="nx">alpha</span><span class="o">:</span> <span class="nx">alpha</span>
      <span class="p">});</span>
    <span class="p">};</span>
    <span class="nx">force</span><span class="p">.</span><span class="nx">nodes</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">nodes</span><span class="p">;</span>
      <span class="nx">nodes</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">force</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">force</span><span class="p">.</span><span class="nx">links</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">links</span><span class="p">;</span>
      <span class="nx">links</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">force</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">force</span><span class="p">.</span><span class="nx">size</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">size</span><span class="p">;</span>
      <span class="nx">size</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">force</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">force</span><span class="p">.</span><span class="nx">linkDistance</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">linkDistance</span><span class="p">;</span>
      <span class="nx">linkDistance</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">x</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">?</span> <span class="nx">x</span> <span class="o">:</span> <span class="o">+</span><span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">force</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">force</span><span class="p">.</span><span class="nx">distance</span> <span class="o">=</span> <span class="nx">force</span><span class="p">.</span><span class="nx">linkDistance</span><span class="p">;</span>
    <span class="nx">force</span><span class="p">.</span><span class="nx">linkStrength</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">linkStrength</span><span class="p">;</span>
      <span class="nx">linkStrength</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">x</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">?</span> <span class="nx">x</span> <span class="o">:</span> <span class="o">+</span><span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">force</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">force</span><span class="p">.</span><span class="nx">friction</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">friction</span><span class="p">;</span>
      <span class="nx">friction</span> <span class="o">=</span> <span class="o">+</span><span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">force</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">force</span><span class="p">.</span><span class="nx">charge</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">charge</span><span class="p">;</span>
      <span class="nx">charge</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">x</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">?</span> <span class="nx">x</span> <span class="o">:</span> <span class="o">+</span><span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">force</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">force</span><span class="p">.</span><span class="nx">chargeDistance</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">chargeDistance2</span><span class="p">);</span>
      <span class="nx">chargeDistance2</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">force</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">force</span><span class="p">.</span><span class="nx">gravity</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">gravity</span><span class="p">;</span>
      <span class="nx">gravity</span> <span class="o">=</span> <span class="o">+</span><span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">force</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">force</span><span class="p">.</span><span class="nx">theta</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">theta2</span><span class="p">);</span>
      <span class="nx">theta2</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">force</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">force</span><span class="p">.</span><span class="nx">alpha</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">alpha</span><span class="p">;</span>
      <span class="nx">x</span> <span class="o">=</span> <span class="o">+</span><span class="nx">x</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">alpha</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="nx">alpha</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span> <span class="k">else</span> <span class="nx">alpha</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">event</span><span class="p">.</span><span class="nx">start</span><span class="p">({</span>
          <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;start&quot;</span><span class="p">,</span>
          <span class="nx">alpha</span><span class="o">:</span> <span class="nx">alpha</span> <span class="o">=</span> <span class="nx">x</span>
        <span class="p">});</span>
        <span class="nx">d3</span><span class="p">.</span><span class="nx">timer</span><span class="p">(</span><span class="nx">force</span><span class="p">.</span><span class="nx">tick</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">force</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">force</span><span class="p">.</span><span class="nx">start</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">nodes</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">links</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">w</span> <span class="o">=</span> <span class="nx">size</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">h</span> <span class="o">=</span> <span class="nx">size</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">neighbors</span><span class="p">,</span> <span class="nx">o</span><span class="p">;</span>
      <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="p">(</span><span class="nx">o</span> <span class="o">=</span> <span class="nx">nodes</span><span class="p">[</span><span class="nx">i</span><span class="p">]).</span><span class="nx">index</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span>
        <span class="nx">o</span><span class="p">.</span><span class="nx">weight</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">o</span> <span class="o">=</span> <span class="nx">links</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">o</span><span class="p">.</span><span class="nx">source</span> <span class="o">==</span> <span class="s2">&quot;number&quot;</span><span class="p">)</span> <span class="nx">o</span><span class="p">.</span><span class="nx">source</span> <span class="o">=</span> <span class="nx">nodes</span><span class="p">[</span><span class="nx">o</span><span class="p">.</span><span class="nx">source</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">o</span><span class="p">.</span><span class="nx">target</span> <span class="o">==</span> <span class="s2">&quot;number&quot;</span><span class="p">)</span> <span class="nx">o</span><span class="p">.</span><span class="nx">target</span> <span class="o">=</span> <span class="nx">nodes</span><span class="p">[</span><span class="nx">o</span><span class="p">.</span><span class="nx">target</span><span class="p">];</span>
        <span class="o">++</span><span class="nx">o</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">weight</span><span class="p">;</span>
        <span class="o">++</span><span class="nx">o</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">weight</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">o</span> <span class="o">=</span> <span class="nx">nodes</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">x</span><span class="p">))</span> <span class="nx">o</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">position</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nx">w</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">y</span><span class="p">))</span> <span class="nx">o</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">position</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">h</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">px</span><span class="p">))</span> <span class="nx">o</span><span class="p">.</span><span class="nx">px</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">py</span><span class="p">))</span> <span class="nx">o</span><span class="p">.</span><span class="nx">py</span> <span class="o">=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="nx">distances</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">linkDistance</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="nx">distances</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="o">+</span><span class="nx">linkDistance</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">links</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">);</span> <span class="k">else</span> <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="nx">distances</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">linkDistance</span><span class="p">;</span>
      <span class="nx">strengths</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">linkStrength</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="nx">strengths</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="o">+</span><span class="nx">linkStrength</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">links</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">);</span> <span class="k">else</span> <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="nx">strengths</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">linkStrength</span><span class="p">;</span>
      <span class="nx">charges</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">charge</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="nx">charges</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="o">+</span><span class="nx">charge</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">nodes</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">);</span> <span class="k">else</span> <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="nx">charges</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">charge</span><span class="p">;</span>
      <span class="kd">function</span> <span class="nx">position</span><span class="p">(</span><span class="nx">dimension</span><span class="p">,</span> <span class="nx">size</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">neighbors</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">neighbors</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Array</span><span class="p">(</span><span class="nx">n</span><span class="p">);</span>
          <span class="k">for</span> <span class="p">(</span><span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="o">++</span><span class="nx">j</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">neighbors</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="o">=</span> <span class="p">[];</span>
          <span class="p">}</span>
          <span class="k">for</span> <span class="p">(</span><span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="o">++</span><span class="nx">j</span><span class="p">)</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">o</span> <span class="o">=</span> <span class="nx">links</span><span class="p">[</span><span class="nx">j</span><span class="p">];</span>
            <span class="nx">neighbors</span><span class="p">[</span><span class="nx">o</span><span class="p">.</span><span class="nx">source</span><span class="p">.</span><span class="nx">index</span><span class="p">].</span><span class="nx">push</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">target</span><span class="p">);</span>
            <span class="nx">neighbors</span><span class="p">[</span><span class="nx">o</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">index</span><span class="p">].</span><span class="nx">push</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">source</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="kd">var</span> <span class="nx">candidates</span> <span class="o">=</span> <span class="nx">neighbors</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">j</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">candidates</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">x</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">candidates</span><span class="p">[</span><span class="nx">j</span><span class="p">][</span><span class="nx">dimension</span><span class="p">]))</span> <span class="k">return</span> <span class="nx">x</span><span class="p">;</span>
        <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="nx">size</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">force</span><span class="p">.</span><span class="nx">resume</span><span class="p">();</span>
    <span class="p">};</span>
    <span class="nx">force</span><span class="p">.</span><span class="nx">resume</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">force</span><span class="p">.</span><span class="nx">alpha</span><span class="p">(.</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="nx">force</span><span class="p">.</span><span class="nx">stop</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">force</span><span class="p">.</span><span class="nx">alpha</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="nx">force</span><span class="p">.</span><span class="nx">drag</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">drag</span><span class="p">)</span> <span class="nx">drag</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">behavior</span><span class="p">.</span><span class="nx">drag</span><span class="p">().</span><span class="nx">origin</span><span class="p">(</span><span class="nx">d3_identity</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;dragstart.force&quot;</span><span class="p">,</span> <span class="nx">d3_layout_forceDragstart</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;drag.force&quot;</span><span class="p">,</span> <span class="nx">dragmove</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;dragend.force&quot;</span><span class="p">,</span> <span class="nx">d3_layout_forceDragend</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">drag</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;mouseover.force&quot;</span><span class="p">,</span> <span class="nx">d3_layout_forceMouseover</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;mouseout.force&quot;</span><span class="p">,</span> <span class="nx">d3_layout_forceMouseout</span><span class="p">).</span><span class="nx">call</span><span class="p">(</span><span class="nx">drag</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="kd">function</span> <span class="nx">dragmove</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">d</span><span class="p">.</span><span class="nx">px</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">d</span><span class="p">.</span><span class="nx">py</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
      <span class="nx">force</span><span class="p">.</span><span class="nx">resume</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">rebind</span><span class="p">(</span><span class="nx">force</span><span class="p">,</span> <span class="nx">event</span><span class="p">,</span> <span class="s2">&quot;on&quot;</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_layout_forceDragstart</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">d</span><span class="p">.</span><span class="nx">fixed</span> <span class="o">|=</span> <span class="mi">2</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_forceDragend</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">d</span><span class="p">.</span><span class="nx">fixed</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="mi">6</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_forceMouseover</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">d</span><span class="p">.</span><span class="nx">fixed</span> <span class="o">|=</span> <span class="mi">4</span><span class="p">;</span>
    <span class="nx">d</span><span class="p">.</span><span class="nx">px</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">d</span><span class="p">.</span><span class="nx">py</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_forceMouseout</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">d</span><span class="p">.</span><span class="nx">fixed</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="mi">4</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_forceAccumulate</span><span class="p">(</span><span class="nx">quad</span><span class="p">,</span> <span class="nx">alpha</span><span class="p">,</span> <span class="nx">charges</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">cx</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">cy</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nx">quad</span><span class="p">.</span><span class="nx">charge</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">quad</span><span class="p">.</span><span class="nx">leaf</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">nodes</span> <span class="o">=</span> <span class="nx">quad</span><span class="p">.</span><span class="nx">nodes</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">nodes</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">c</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">c</span> <span class="o">=</span> <span class="nx">nodes</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">c</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="k">continue</span><span class="p">;</span>
        <span class="nx">d3_layout_forceAccumulate</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span> <span class="nx">alpha</span><span class="p">,</span> <span class="nx">charges</span><span class="p">);</span>
        <span class="nx">quad</span><span class="p">.</span><span class="nx">charge</span> <span class="o">+=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">charge</span><span class="p">;</span>
        <span class="nx">cx</span> <span class="o">+=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">charge</span> <span class="o">*</span> <span class="nx">c</span><span class="p">.</span><span class="nx">cx</span><span class="p">;</span>
        <span class="nx">cy</span> <span class="o">+=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">charge</span> <span class="o">*</span> <span class="nx">c</span><span class="p">.</span><span class="nx">cy</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">quad</span><span class="p">.</span><span class="nx">point</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">quad</span><span class="p">.</span><span class="nx">leaf</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">quad</span><span class="p">.</span><span class="nx">point</span><span class="p">.</span><span class="nx">x</span> <span class="o">+=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">-</span> <span class="p">.</span><span class="mi">5</span><span class="p">;</span>
        <span class="nx">quad</span><span class="p">.</span><span class="nx">point</span><span class="p">.</span><span class="nx">y</span> <span class="o">+=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">-</span> <span class="p">.</span><span class="mi">5</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="kd">var</span> <span class="nx">k</span> <span class="o">=</span> <span class="nx">alpha</span> <span class="o">*</span> <span class="nx">charges</span><span class="p">[</span><span class="nx">quad</span><span class="p">.</span><span class="nx">point</span><span class="p">.</span><span class="nx">index</span><span class="p">];</span>
      <span class="nx">quad</span><span class="p">.</span><span class="nx">charge</span> <span class="o">+=</span> <span class="nx">quad</span><span class="p">.</span><span class="nx">pointCharge</span> <span class="o">=</span> <span class="nx">k</span><span class="p">;</span>
      <span class="nx">cx</span> <span class="o">+=</span> <span class="nx">k</span> <span class="o">*</span> <span class="nx">quad</span><span class="p">.</span><span class="nx">point</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
      <span class="nx">cy</span> <span class="o">+=</span> <span class="nx">k</span> <span class="o">*</span> <span class="nx">quad</span><span class="p">.</span><span class="nx">point</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">quad</span><span class="p">.</span><span class="nx">cx</span> <span class="o">=</span> <span class="nx">cx</span> <span class="o">/</span> <span class="nx">quad</span><span class="p">.</span><span class="nx">charge</span><span class="p">;</span>
    <span class="nx">quad</span><span class="p">.</span><span class="nx">cy</span> <span class="o">=</span> <span class="nx">cy</span> <span class="o">/</span> <span class="nx">quad</span><span class="p">.</span><span class="nx">charge</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">d3_layout_forceLinkDistance</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span> <span class="nx">d3_layout_forceLinkStrength</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">d3_layout_forceChargeDistance2</span> <span class="o">=</span> <span class="kc">Infinity</span><span class="p">;</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">layout</span><span class="p">.</span><span class="nx">hierarchy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">sort</span> <span class="o">=</span> <span class="nx">d3_layout_hierarchySort</span><span class="p">,</span> <span class="nx">children</span> <span class="o">=</span> <span class="nx">d3_layout_hierarchyChildren</span><span class="p">,</span> <span class="nx">value</span> <span class="o">=</span> <span class="nx">d3_layout_hierarchyValue</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">hierarchy</span><span class="p">(</span><span class="nx">root</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">stack</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">root</span> <span class="p">],</span> <span class="nx">nodes</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">node</span><span class="p">;</span>
      <span class="nx">root</span><span class="p">.</span><span class="nx">depth</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">((</span><span class="nx">node</span> <span class="o">=</span> <span class="nx">stack</span><span class="p">.</span><span class="nx">pop</span><span class="p">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">nodes</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">node</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">((</span><span class="nx">childs</span> <span class="o">=</span> <span class="nx">children</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">hierarchy</span><span class="p">,</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">node</span><span class="p">.</span><span class="nx">depth</span><span class="p">))</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">n</span> <span class="o">=</span> <span class="nx">childs</span><span class="p">.</span><span class="nx">length</span><span class="p">))</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">n</span><span class="p">,</span> <span class="nx">childs</span><span class="p">,</span> <span class="nx">child</span><span class="p">;</span>
          <span class="k">while</span> <span class="p">(</span><span class="o">--</span><span class="nx">n</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">stack</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">child</span> <span class="o">=</span> <span class="nx">childs</span><span class="p">[</span><span class="nx">n</span><span class="p">]);</span>
            <span class="nx">child</span><span class="p">.</span><span class="nx">parent</span> <span class="o">=</span> <span class="nx">node</span><span class="p">;</span>
            <span class="nx">child</span><span class="p">.</span><span class="nx">depth</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">depth</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="nx">node</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
          <span class="nx">node</span><span class="p">.</span><span class="nx">children</span> <span class="o">=</span> <span class="nx">childs</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="nx">node</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="o">+</span><span class="nx">value</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">hierarchy</span><span class="p">,</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">node</span><span class="p">.</span><span class="nx">depth</span><span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
          <span class="k">delete</span> <span class="nx">node</span><span class="p">.</span><span class="nx">children</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="nx">d3_layout_hierarchyVisitAfter</span><span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">childs</span><span class="p">,</span> <span class="nx">parent</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">sort</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">childs</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">children</span><span class="p">))</span> <span class="nx">childs</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="nx">sort</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">parent</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">parent</span><span class="p">))</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">value</span> <span class="o">+=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
      <span class="p">});</span>
      <span class="k">return</span> <span class="nx">nodes</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">hierarchy</span><span class="p">.</span><span class="nx">sort</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">sort</span><span class="p">;</span>
      <span class="nx">sort</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">hierarchy</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">hierarchy</span><span class="p">.</span><span class="nx">children</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">children</span><span class="p">;</span>
      <span class="nx">children</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">hierarchy</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">hierarchy</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
      <span class="nx">value</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">hierarchy</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">hierarchy</span><span class="p">.</span><span class="nx">revalue</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">root</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">d3_layout_hierarchyVisitBefore</span><span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">children</span><span class="p">)</span> <span class="nx">node</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">});</span>
        <span class="nx">d3_layout_hierarchyVisitAfter</span><span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">parent</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">node</span><span class="p">.</span><span class="nx">children</span><span class="p">)</span> <span class="nx">node</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="o">+</span><span class="nx">value</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">hierarchy</span><span class="p">,</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">node</span><span class="p">.</span><span class="nx">depth</span><span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">parent</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">parent</span><span class="p">)</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">value</span> <span class="o">+=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
        <span class="p">});</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">root</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">hierarchy</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_layout_hierarchyRebind</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">hierarchy</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">d3</span><span class="p">.</span><span class="nx">rebind</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="nx">hierarchy</span><span class="p">,</span> <span class="s2">&quot;sort&quot;</span><span class="p">,</span> <span class="s2">&quot;children&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">);</span>
    <span class="nx">object</span><span class="p">.</span><span class="nx">nodes</span> <span class="o">=</span> <span class="nx">object</span><span class="p">;</span>
    <span class="nx">object</span><span class="p">.</span><span class="nx">links</span> <span class="o">=</span> <span class="nx">d3_layout_hierarchyLinks</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">object</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_hierarchyVisitBefore</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">nodes</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">node</span> <span class="p">];</span>
    <span class="k">while</span> <span class="p">((</span><span class="nx">node</span> <span class="o">=</span> <span class="nx">nodes</span><span class="p">.</span><span class="nx">pop</span><span class="p">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">callback</span><span class="p">(</span><span class="nx">node</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">((</span><span class="nx">children</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">children</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">n</span> <span class="o">=</span> <span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">))</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">n</span><span class="p">,</span> <span class="nx">children</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="o">--</span><span class="nx">n</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="nx">nodes</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">children</span><span class="p">[</span><span class="nx">n</span><span class="p">]);</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_hierarchyVisitAfter</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">nodes</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">node</span> <span class="p">],</span> <span class="nx">nodes2</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">while</span> <span class="p">((</span><span class="nx">node</span> <span class="o">=</span> <span class="nx">nodes</span><span class="p">.</span><span class="nx">pop</span><span class="p">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">nodes2</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">node</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">((</span><span class="nx">children</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">children</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">n</span> <span class="o">=</span> <span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">))</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span><span class="p">,</span> <span class="nx">children</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="nx">nodes</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">while</span> <span class="p">((</span><span class="nx">node</span> <span class="o">=</span> <span class="nx">nodes2</span><span class="p">.</span><span class="nx">pop</span><span class="p">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">callback</span><span class="p">(</span><span class="nx">node</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_hierarchyChildren</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">children</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_hierarchyValue</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_hierarchySort</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">b</span><span class="p">.</span><span class="nx">value</span> <span class="o">-</span> <span class="nx">a</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_hierarchyLinks</span><span class="p">(</span><span class="nx">nodes</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">merge</span><span class="p">(</span><span class="nx">nodes</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">parent</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span><span class="nx">parent</span><span class="p">.</span><span class="nx">children</span> <span class="o">||</span> <span class="p">[]).</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">child</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">{</span>
          <span class="nx">source</span><span class="o">:</span> <span class="nx">parent</span><span class="p">,</span>
          <span class="nx">target</span><span class="o">:</span> <span class="nx">child</span>
        <span class="p">};</span>
      <span class="p">});</span>
    <span class="p">}));</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">layout</span><span class="p">.</span><span class="nx">partition</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">hierarchy</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">layout</span><span class="p">.</span><span class="nx">hierarchy</span><span class="p">(),</span> <span class="nx">size</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span> <span class="p">];</span>
    <span class="kd">function</span> <span class="nx">position</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">dx</span><span class="p">,</span> <span class="nx">dy</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">children</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">children</span><span class="p">;</span>
      <span class="nx">node</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="nx">node</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">depth</span> <span class="o">*</span> <span class="nx">dy</span><span class="p">;</span>
      <span class="nx">node</span><span class="p">.</span><span class="nx">dx</span> <span class="o">=</span> <span class="nx">dx</span><span class="p">;</span>
      <span class="nx">node</span><span class="p">.</span><span class="nx">dy</span> <span class="o">=</span> <span class="nx">dy</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">children</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">n</span> <span class="o">=</span> <span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">))</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span><span class="p">,</span> <span class="nx">c</span><span class="p">,</span> <span class="nx">d</span><span class="p">;</span>
        <span class="nx">dx</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">value</span> <span class="o">?</span> <span class="nx">dx</span> <span class="o">/</span> <span class="nx">node</span><span class="p">.</span><span class="nx">value</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">position</span><span class="p">(</span><span class="nx">c</span> <span class="o">=</span> <span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">c</span><span class="p">.</span><span class="nx">value</span> <span class="o">*</span> <span class="nx">dx</span><span class="p">,</span> <span class="nx">dy</span><span class="p">);</span>
          <span class="nx">x</span> <span class="o">+=</span> <span class="nx">d</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">depth</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">children</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">children</span><span class="p">,</span> <span class="nx">d</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">children</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">n</span> <span class="o">=</span> <span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">))</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="nx">d</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">depth</span><span class="p">(</span><span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">]));</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="mi">1</span> <span class="o">+</span> <span class="nx">d</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">partition</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">nodes</span> <span class="o">=</span> <span class="nx">hierarchy</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">);</span>
      <span class="nx">position</span><span class="p">(</span><span class="nx">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">size</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="nx">depth</span><span class="p">(</span><span class="nx">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">]));</span>
      <span class="k">return</span> <span class="nx">nodes</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">partition</span><span class="p">.</span><span class="nx">size</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">size</span><span class="p">;</span>
      <span class="nx">size</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">partition</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">d3_layout_hierarchyRebind</span><span class="p">(</span><span class="nx">partition</span><span class="p">,</span> <span class="nx">hierarchy</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">layout</span><span class="p">.</span><span class="nx">pie</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">value</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">,</span> <span class="nx">sort</span> <span class="o">=</span> <span class="nx">d3_layout_pieSortByValue</span><span class="p">,</span> <span class="nx">startAngle</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">endAngle</span> <span class="o">=</span> <span class="err">τ</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">pie</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">values</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">+</span><span class="nx">value</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">pie</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">);</span>
      <span class="p">});</span>
      <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="o">+</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">startAngle</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">?</span> <span class="nx">startAngle</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span> <span class="o">:</span> <span class="nx">startAngle</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">k</span> <span class="o">=</span> <span class="p">((</span><span class="k">typeof</span> <span class="nx">endAngle</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">?</span> <span class="nx">endAngle</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span> <span class="o">:</span> <span class="nx">endAngle</span><span class="p">)</span> <span class="o">-</span> <span class="nx">a</span><span class="p">)</span> <span class="o">/</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">sum</span><span class="p">(</span><span class="nx">values</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">index</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">sort</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="nx">index</span><span class="p">.</span><span class="nx">sort</span><span class="p">(</span><span class="nx">sort</span> <span class="o">===</span> <span class="nx">d3_layout_pieSortByValue</span> <span class="o">?</span> <span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">values</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="o">-</span> <span class="nx">values</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
      <span class="p">}</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">sort</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">data</span><span class="p">[</span><span class="nx">j</span><span class="p">]);</span>
      <span class="p">});</span>
      <span class="kd">var</span> <span class="nx">arcs</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="nx">index</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">d</span><span class="p">;</span>
        <span class="nx">arcs</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
          <span class="nx">data</span><span class="o">:</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span>
          <span class="nx">value</span><span class="o">:</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">values</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span>
          <span class="nx">startAngle</span><span class="o">:</span> <span class="nx">a</span><span class="p">,</span>
          <span class="nx">endAngle</span><span class="o">:</span> <span class="nx">a</span> <span class="o">+=</span> <span class="nx">d</span> <span class="o">*</span> <span class="nx">k</span>
        <span class="p">};</span>
      <span class="p">});</span>
      <span class="k">return</span> <span class="nx">arcs</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">pie</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
      <span class="nx">value</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">pie</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">pie</span><span class="p">.</span><span class="nx">sort</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">sort</span><span class="p">;</span>
      <span class="nx">sort</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">pie</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">pie</span><span class="p">.</span><span class="nx">startAngle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">startAngle</span><span class="p">;</span>
      <span class="nx">startAngle</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">pie</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">pie</span><span class="p">.</span><span class="nx">endAngle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">endAngle</span><span class="p">;</span>
      <span class="nx">endAngle</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">pie</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">pie</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">d3_layout_pieSortByValue</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">layout</span><span class="p">.</span><span class="nx">stack</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">values</span> <span class="o">=</span> <span class="nx">d3_identity</span><span class="p">,</span> <span class="nx">order</span> <span class="o">=</span> <span class="nx">d3_layout_stackOrderDefault</span><span class="p">,</span> <span class="nx">offset</span> <span class="o">=</span> <span class="nx">d3_layout_stackOffsetZero</span><span class="p">,</span> <span class="nx">out</span> <span class="o">=</span> <span class="nx">d3_layout_stackOut</span><span class="p">,</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">d3_layout_stackX</span><span class="p">,</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">d3_layout_stackY</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">stack</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">series</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">values</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">stack</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">);</span>
      <span class="p">});</span>
      <span class="kd">var</span> <span class="nx">points</span> <span class="o">=</span> <span class="nx">series</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">v</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="p">[</span> <span class="nx">x</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">stack</span><span class="p">,</span> <span class="nx">v</span><span class="p">,</span> <span class="nx">i</span><span class="p">),</span> <span class="nx">y</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">stack</span><span class="p">,</span> <span class="nx">v</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">];</span>
        <span class="p">});</span>
      <span class="p">});</span>
      <span class="kd">var</span> <span class="nx">orders</span> <span class="o">=</span> <span class="nx">order</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">stack</span><span class="p">,</span> <span class="nx">points</span><span class="p">,</span> <span class="nx">index</span><span class="p">);</span>
      <span class="nx">series</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">permute</span><span class="p">(</span><span class="nx">series</span><span class="p">,</span> <span class="nx">orders</span><span class="p">);</span>
      <span class="nx">points</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">permute</span><span class="p">(</span><span class="nx">points</span><span class="p">,</span> <span class="nx">orders</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">offsets</span> <span class="o">=</span> <span class="nx">offset</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">stack</span><span class="p">,</span> <span class="nx">points</span><span class="p">,</span> <span class="nx">index</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">series</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">series</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">o</span><span class="p">;</span>
      <span class="k">for</span> <span class="p">(</span><span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="o">++</span><span class="nx">j</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">out</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">stack</span><span class="p">,</span> <span class="nx">series</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="nx">j</span><span class="p">],</span> <span class="nx">o</span> <span class="o">=</span> <span class="nx">offsets</span><span class="p">[</span><span class="nx">j</span><span class="p">],</span> <span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="nx">j</span><span class="p">][</span><span class="mi">1</span><span class="p">]);</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">out</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">stack</span><span class="p">,</span> <span class="nx">series</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">],</span> <span class="nx">o</span> <span class="o">+=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="nx">j</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">][</span><span class="mi">1</span><span class="p">]);</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">data</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">stack</span><span class="p">.</span><span class="nx">values</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">values</span><span class="p">;</span>
      <span class="nx">values</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">stack</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">stack</span><span class="p">.</span><span class="nx">order</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">order</span><span class="p">;</span>
      <span class="nx">order</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">x</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">?</span> <span class="nx">x</span> <span class="o">:</span> <span class="nx">d3_layout_stackOrders</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="o">||</span> <span class="nx">d3_layout_stackOrderDefault</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">stack</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">stack</span><span class="p">.</span><span class="nx">offset</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">offset</span><span class="p">;</span>
      <span class="nx">offset</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">x</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">?</span> <span class="nx">x</span> <span class="o">:</span> <span class="nx">d3_layout_stackOffsets</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="o">||</span> <span class="nx">d3_layout_stackOffsetZero</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">stack</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">stack</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">z</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">x</span><span class="p">;</span>
      <span class="nx">x</span> <span class="o">=</span> <span class="nx">z</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">stack</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">stack</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">z</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">y</span><span class="p">;</span>
      <span class="nx">y</span> <span class="o">=</span> <span class="nx">z</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">stack</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">stack</span><span class="p">.</span><span class="nx">out</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">z</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">out</span><span class="p">;</span>
      <span class="nx">out</span> <span class="o">=</span> <span class="nx">z</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">stack</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">stack</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_layout_stackX</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_stackY</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_stackOut</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">y0</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">d</span><span class="p">.</span><span class="nx">y0</span> <span class="o">=</span> <span class="nx">y0</span><span class="p">;</span>
    <span class="nx">d</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">d3_layout_stackOrders</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">map</span><span class="p">({</span>
    <span class="s2">&quot;inside-out&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">max</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">d3_layout_stackMaxIndex</span><span class="p">),</span> <span class="nx">sums</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">d3_layout_stackReduceSum</span><span class="p">),</span> <span class="nx">index</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">n</span><span class="p">).</span><span class="nx">sort</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">max</span><span class="p">[</span><span class="nx">a</span><span class="p">]</span> <span class="o">-</span> <span class="nx">max</span><span class="p">[</span><span class="nx">b</span><span class="p">];</span>
      <span class="p">}),</span> <span class="nx">top</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">bottom</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">tops</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">bottoms</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">j</span> <span class="o">=</span> <span class="nx">index</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">top</span> <span class="o">&lt;</span> <span class="nx">bottom</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">top</span> <span class="o">+=</span> <span class="nx">sums</span><span class="p">[</span><span class="nx">j</span><span class="p">];</span>
          <span class="nx">tops</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">j</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">bottom</span> <span class="o">+=</span> <span class="nx">sums</span><span class="p">[</span><span class="nx">j</span><span class="p">];</span>
          <span class="nx">bottoms</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">j</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">bottoms</span><span class="p">.</span><span class="nx">reverse</span><span class="p">().</span><span class="nx">concat</span><span class="p">(</span><span class="nx">tops</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">reverse</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nx">reverse</span><span class="p">();</span>
    <span class="p">},</span>
    <span class="s2">&quot;default&quot;</span><span class="o">:</span> <span class="nx">d3_layout_stackOrderDefault</span>
  <span class="p">});</span>
  <span class="kd">var</span> <span class="nx">d3_layout_stackOffsets</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">map</span><span class="p">({</span>
    <span class="nx">silhouette</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">data</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="p">,</span> <span class="nx">sums</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">max</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">o</span><span class="p">,</span> <span class="nx">y0</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="k">for</span> <span class="p">(</span><span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="o">++</span><span class="nx">j</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">o</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="nx">o</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">][</span><span class="mi">1</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">o</span> <span class="o">&gt;</span> <span class="nx">max</span><span class="p">)</span> <span class="nx">max</span> <span class="o">=</span> <span class="nx">o</span><span class="p">;</span>
        <span class="nx">sums</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">o</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">for</span> <span class="p">(</span><span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="o">++</span><span class="nx">j</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">y0</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">max</span> <span class="o">-</span> <span class="nx">sums</span><span class="p">[</span><span class="nx">j</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">y0</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">wiggle</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">data</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">x</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">s1</span><span class="p">,</span> <span class="nx">s2</span><span class="p">,</span> <span class="nx">s3</span><span class="p">,</span> <span class="nx">dx</span><span class="p">,</span> <span class="nx">o</span><span class="p">,</span> <span class="nx">o0</span><span class="p">,</span> <span class="nx">y0</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="nx">y0</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">o</span> <span class="o">=</span> <span class="nx">o0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="k">for</span> <span class="p">(</span><span class="nx">j</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="o">++</span><span class="nx">j</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">s1</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="nx">s1</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">][</span><span class="mi">1</span><span class="p">];</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">s2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">dx</span> <span class="o">=</span> <span class="nx">x</span><span class="p">[</span><span class="nx">j</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">x</span><span class="p">[</span><span class="nx">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">];</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">for</span> <span class="p">(</span><span class="nx">k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">s3</span> <span class="o">=</span> <span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="nx">dx</span><span class="p">);</span> <span class="nx">k</span> <span class="o">&lt;</span> <span class="nx">i</span><span class="p">;</span> <span class="o">++</span><span class="nx">k</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">s3</span> <span class="o">+=</span> <span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="nx">k</span><span class="p">][</span><span class="nx">j</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">data</span><span class="p">[</span><span class="nx">k</span><span class="p">][</span><span class="nx">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="nx">dx</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="nx">s2</span> <span class="o">+=</span> <span class="nx">s3</span> <span class="o">*</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">][</span><span class="mi">1</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="nx">y0</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="o">=</span> <span class="nx">o</span> <span class="o">-=</span> <span class="nx">s1</span> <span class="o">?</span> <span class="nx">s2</span> <span class="o">/</span> <span class="nx">s1</span> <span class="o">*</span> <span class="nx">dx</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">o</span> <span class="o">&lt;</span> <span class="nx">o0</span><span class="p">)</span> <span class="nx">o0</span> <span class="o">=</span> <span class="nx">o</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">for</span> <span class="p">(</span><span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="o">++</span><span class="nx">j</span><span class="p">)</span> <span class="nx">y0</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="o">-=</span> <span class="nx">o0</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">y0</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">expand</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">data</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="p">,</span> <span class="nx">k</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="nx">n</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">o</span><span class="p">,</span> <span class="nx">y0</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="k">for</span> <span class="p">(</span><span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="o">++</span><span class="nx">j</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">o</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="nx">o</span> <span class="o">+=</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">][</span><span class="mi">1</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">o</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">/=</span> <span class="nx">o</span><span class="p">;</span> <span class="k">else</span> <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="nx">j</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">k</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">for</span> <span class="p">(</span><span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="o">++</span><span class="nx">j</span><span class="p">)</span> <span class="nx">y0</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">y0</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">zero</span><span class="o">:</span> <span class="nx">d3_layout_stackOffsetZero</span>
  <span class="p">});</span>
  <span class="kd">function</span> <span class="nx">d3_layout_stackOrderDefault</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_stackOffsetZero</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">data</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">length</span><span class="p">,</span> <span class="nx">y0</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">)</span> <span class="nx">y0</span><span class="p">[</span><span class="nx">j</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">y0</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_stackMaxIndex</span><span class="p">(</span><span class="nx">array</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">v</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">array</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(;</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">((</span><span class="nx">k</span> <span class="o">=</span> <span class="nx">array</span><span class="p">[</span><span class="nx">i</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span> <span class="o">&gt;</span> <span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">j</span> <span class="o">=</span> <span class="nx">i</span><span class="p">;</span>
        <span class="nx">v</span> <span class="o">=</span> <span class="nx">k</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">j</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_stackReduceSum</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="nx">d3_layout_stackSum</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_stackSum</span><span class="p">(</span><span class="nx">p</span><span class="p">,</span> <span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">p</span> <span class="o">+</span> <span class="nx">d</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">layout</span><span class="p">.</span><span class="nx">histogram</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">frequency</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">valuer</span> <span class="o">=</span> <span class="nb">Number</span><span class="p">,</span> <span class="nx">ranger</span> <span class="o">=</span> <span class="nx">d3_layout_histogramRange</span><span class="p">,</span> <span class="nx">binner</span> <span class="o">=</span> <span class="nx">d3_layout_histogramBinSturges</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">histogram</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">bins</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">values</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">valuer</span><span class="p">,</span> <span class="k">this</span><span class="p">),</span> <span class="nx">range</span> <span class="o">=</span> <span class="nx">ranger</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">values</span><span class="p">,</span> <span class="nx">i</span><span class="p">),</span> <span class="nx">thresholds</span> <span class="o">=</span> <span class="nx">binner</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">range</span><span class="p">,</span> <span class="nx">values</span><span class="p">,</span> <span class="nx">i</span><span class="p">),</span> <span class="nx">bin</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">values</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">thresholds</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">k</span> <span class="o">=</span> <span class="nx">frequency</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">1</span> <span class="o">/</span> <span class="nx">n</span><span class="p">,</span> <span class="nx">x</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">bin</span> <span class="o">=</span> <span class="nx">bins</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="nx">bin</span><span class="p">.</span><span class="nx">dx</span> <span class="o">=</span> <span class="nx">thresholds</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="p">(</span><span class="nx">bin</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">thresholds</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
        <span class="nx">bin</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">m</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">x</span> <span class="o">=</span> <span class="nx">values</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">x</span> <span class="o">&gt;=</span> <span class="nx">range</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;&amp;</span> <span class="nx">x</span> <span class="o">&lt;=</span> <span class="nx">range</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="p">{</span>
            <span class="nx">bin</span> <span class="o">=</span> <span class="nx">bins</span><span class="p">[</span><span class="nx">d3</span><span class="p">.</span><span class="nx">bisect</span><span class="p">(</span><span class="nx">thresholds</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">m</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
            <span class="nx">bin</span><span class="p">.</span><span class="nx">y</span> <span class="o">+=</span> <span class="nx">k</span><span class="p">;</span>
            <span class="nx">bin</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">bins</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">histogram</span><span class="p">.</span><span class="nx">value</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">valuer</span><span class="p">;</span>
      <span class="nx">valuer</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">histogram</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">histogram</span><span class="p">.</span><span class="nx">range</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">ranger</span><span class="p">;</span>
      <span class="nx">ranger</span> <span class="o">=</span> <span class="nx">d3_functor</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">histogram</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">histogram</span><span class="p">.</span><span class="nx">bins</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">binner</span><span class="p">;</span>
      <span class="nx">binner</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">x</span> <span class="o">===</span> <span class="s2">&quot;number&quot;</span> <span class="o">?</span> <span class="kd">function</span><span class="p">(</span><span class="nx">range</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">d3_layout_histogramBinFixed</span><span class="p">(</span><span class="nx">range</span><span class="p">,</span> <span class="nx">x</span><span class="p">);</span>
      <span class="p">}</span> <span class="o">:</span> <span class="nx">d3_functor</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">histogram</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">histogram</span><span class="p">.</span><span class="nx">frequency</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">frequency</span><span class="p">;</span>
      <span class="nx">frequency</span> <span class="o">=</span> <span class="o">!!</span><span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">histogram</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">histogram</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_layout_histogramBinSturges</span><span class="p">(</span><span class="nx">range</span><span class="p">,</span> <span class="nx">values</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_layout_histogramBinFixed</span><span class="p">(</span><span class="nx">range</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">values</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="o">/</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">LN2</span> <span class="o">+</span> <span class="mi">1</span><span class="p">));</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_histogramBinFixed</span><span class="p">(</span><span class="nx">range</span><span class="p">,</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">b</span> <span class="o">=</span> <span class="o">+</span><span class="nx">range</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">m</span> <span class="o">=</span> <span class="p">(</span><span class="nx">range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">b</span><span class="p">)</span> <span class="o">/</span> <span class="nx">n</span><span class="p">,</span> <span class="nx">f</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">x</span> <span class="o">&lt;=</span> <span class="nx">n</span><span class="p">)</span> <span class="nx">f</span><span class="p">[</span><span class="nx">x</span><span class="p">]</span> <span class="o">=</span> <span class="nx">m</span> <span class="o">*</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">b</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">f</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_histogramRange</span><span class="p">(</span><span class="nx">values</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">values</span><span class="p">),</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">values</span><span class="p">)</span> <span class="p">];</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">layout</span><span class="p">.</span><span class="nx">pack</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">hierarchy</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">layout</span><span class="p">.</span><span class="nx">hierarchy</span><span class="p">().</span><span class="nx">sort</span><span class="p">(</span><span class="nx">d3_layout_packSort</span><span class="p">),</span> <span class="nx">padding</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">size</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span> <span class="p">],</span> <span class="nx">radius</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">pack</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">nodes</span> <span class="o">=</span> <span class="nx">hierarchy</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">),</span> <span class="nx">root</span> <span class="o">=</span> <span class="nx">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">w</span> <span class="o">=</span> <span class="nx">size</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">h</span> <span class="o">=</span> <span class="nx">size</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">r</span> <span class="o">=</span> <span class="nx">radius</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span> <span class="o">:</span> <span class="k">typeof</span> <span class="nx">radius</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">?</span> <span class="nx">radius</span> <span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">radius</span><span class="p">;</span>
      <span class="p">};</span>
      <span class="nx">root</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">root</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">d3_layout_hierarchyVisitAfter</span><span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">d</span><span class="p">.</span><span class="nx">r</span> <span class="o">=</span> <span class="o">+</span><span class="nx">r</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
      <span class="p">});</span>
      <span class="nx">d3_layout_hierarchyVisitAfter</span><span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="nx">d3_layout_packSiblings</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">padding</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">dr</span> <span class="o">=</span> <span class="nx">padding</span> <span class="o">*</span> <span class="p">(</span><span class="nx">radius</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="nx">root</span><span class="p">.</span><span class="nx">r</span> <span class="o">/</span> <span class="nx">w</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="nx">root</span><span class="p">.</span><span class="nx">r</span> <span class="o">/</span> <span class="nx">h</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
        <span class="nx">d3_layout_hierarchyVisitAfter</span><span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">d</span><span class="p">.</span><span class="nx">r</span> <span class="o">+=</span> <span class="nx">dr</span><span class="p">;</span>
        <span class="p">});</span>
        <span class="nx">d3_layout_hierarchyVisitAfter</span><span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="nx">d3_layout_packSiblings</span><span class="p">);</span>
        <span class="nx">d3_layout_hierarchyVisitAfter</span><span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">d</span><span class="p">.</span><span class="nx">r</span> <span class="o">-=</span> <span class="nx">dr</span><span class="p">;</span>
        <span class="p">});</span>
      <span class="p">}</span>
      <span class="nx">d3_layout_packTransform</span><span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="nx">w</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">h</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">radius</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">1</span> <span class="o">/</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="nx">root</span><span class="p">.</span><span class="nx">r</span> <span class="o">/</span> <span class="nx">w</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="nx">root</span><span class="p">.</span><span class="nx">r</span> <span class="o">/</span> <span class="nx">h</span><span class="p">));</span>
      <span class="k">return</span> <span class="nx">nodes</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">pack</span><span class="p">.</span><span class="nx">size</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">size</span><span class="p">;</span>
      <span class="nx">size</span> <span class="o">=</span> <span class="nx">_</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">pack</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">pack</span><span class="p">.</span><span class="nx">radius</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">radius</span><span class="p">;</span>
      <span class="nx">radius</span> <span class="o">=</span> <span class="nx">_</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">||</span> <span class="k">typeof</span> <span class="nx">_</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">?</span> <span class="nx">_</span> <span class="o">:</span> <span class="o">+</span><span class="nx">_</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">pack</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">pack</span><span class="p">.</span><span class="nx">padding</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">padding</span><span class="p">;</span>
      <span class="nx">padding</span> <span class="o">=</span> <span class="o">+</span><span class="nx">_</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">pack</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">d3_layout_hierarchyRebind</span><span class="p">(</span><span class="nx">pack</span><span class="p">,</span> <span class="nx">hierarchy</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_layout_packSort</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">value</span> <span class="o">-</span> <span class="nx">b</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_packInsert</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">_pack_next</span><span class="p">;</span>
    <span class="nx">a</span><span class="p">.</span><span class="nx">_pack_next</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
    <span class="nx">b</span><span class="p">.</span><span class="nx">_pack_prev</span> <span class="o">=</span> <span class="nx">a</span><span class="p">;</span>
    <span class="nx">b</span><span class="p">.</span><span class="nx">_pack_next</span> <span class="o">=</span> <span class="nx">c</span><span class="p">;</span>
    <span class="nx">c</span><span class="p">.</span><span class="nx">_pack_prev</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_packSplice</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">a</span><span class="p">.</span><span class="nx">_pack_next</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
    <span class="nx">b</span><span class="p">.</span><span class="nx">_pack_prev</span> <span class="o">=</span> <span class="nx">a</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_packIntersects</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">dx</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">a</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">dy</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">a</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">dr</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">r</span> <span class="o">+</span> <span class="nx">b</span><span class="p">.</span><span class="nx">r</span><span class="p">;</span>
    <span class="k">return</span> <span class="p">.</span><span class="mi">999</span> <span class="o">*</span> <span class="nx">dr</span> <span class="o">*</span> <span class="nx">dr</span> <span class="o">&gt;</span> <span class="nx">dx</span> <span class="o">*</span> <span class="nx">dx</span> <span class="o">+</span> <span class="nx">dy</span> <span class="o">*</span> <span class="nx">dy</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_packSiblings</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">nodes</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">children</span><span class="p">)</span> <span class="o">||</span> <span class="o">!</span><span class="p">(</span><span class="nx">n</span> <span class="o">=</span> <span class="nx">nodes</span><span class="p">.</span><span class="nx">length</span><span class="p">))</span> <span class="k">return</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">nodes</span><span class="p">,</span> <span class="nx">xMin</span> <span class="o">=</span> <span class="kc">Infinity</span><span class="p">,</span> <span class="nx">xMax</span> <span class="o">=</span> <span class="o">-</span><span class="kc">Infinity</span><span class="p">,</span> <span class="nx">yMin</span> <span class="o">=</span> <span class="kc">Infinity</span><span class="p">,</span> <span class="nx">yMax</span> <span class="o">=</span> <span class="o">-</span><span class="kc">Infinity</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">,</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">n</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">bound</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">xMin</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">node</span><span class="p">.</span><span class="nx">r</span><span class="p">,</span> <span class="nx">xMin</span><span class="p">);</span>
      <span class="nx">xMax</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">node</span><span class="p">.</span><span class="nx">r</span><span class="p">,</span> <span class="nx">xMax</span><span class="p">);</span>
      <span class="nx">yMin</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">node</span><span class="p">.</span><span class="nx">r</span><span class="p">,</span> <span class="nx">yMin</span><span class="p">);</span>
      <span class="nx">yMax</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">node</span><span class="p">.</span><span class="nx">r</span><span class="p">,</span> <span class="nx">yMax</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">nodes</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">d3_layout_packLink</span><span class="p">);</span>
    <span class="nx">a</span> <span class="o">=</span> <span class="nx">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="nx">a</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="o">-</span><span class="nx">a</span><span class="p">.</span><span class="nx">r</span><span class="p">;</span>
    <span class="nx">a</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="nx">bound</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">n</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">b</span> <span class="o">=</span> <span class="nx">nodes</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
      <span class="nx">b</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">r</span><span class="p">;</span>
      <span class="nx">b</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">bound</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">n</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">c</span> <span class="o">=</span> <span class="nx">nodes</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
        <span class="nx">d3_layout_packPlace</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">);</span>
        <span class="nx">bound</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span>
        <span class="nx">d3_layout_packInsert</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">c</span><span class="p">);</span>
        <span class="nx">a</span><span class="p">.</span><span class="nx">_pack_prev</span> <span class="o">=</span> <span class="nx">c</span><span class="p">;</span>
        <span class="nx">d3_layout_packInsert</span><span class="p">(</span><span class="nx">c</span><span class="p">,</span> <span class="nx">b</span><span class="p">);</span>
        <span class="nx">b</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">_pack_next</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">d3_layout_packPlace</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span> <span class="o">=</span> <span class="nx">nodes</span><span class="p">[</span><span class="nx">i</span><span class="p">]);</span>
          <span class="kd">var</span> <span class="nx">isect</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">s1</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">s2</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
          <span class="k">for</span> <span class="p">(</span><span class="nx">j</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">_pack_next</span><span class="p">;</span> <span class="nx">j</span> <span class="o">!==</span> <span class="nx">b</span><span class="p">;</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">j</span><span class="p">.</span><span class="nx">_pack_next</span><span class="p">,</span> <span class="nx">s1</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">d3_layout_packIntersects</span><span class="p">(</span><span class="nx">j</span><span class="p">,</span> <span class="nx">c</span><span class="p">))</span> <span class="p">{</span>
              <span class="nx">isect</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
              <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">isect</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="nx">k</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">_pack_prev</span><span class="p">;</span> <span class="nx">k</span> <span class="o">!==</span> <span class="nx">j</span><span class="p">.</span><span class="nx">_pack_prev</span><span class="p">;</span> <span class="nx">k</span> <span class="o">=</span> <span class="nx">k</span><span class="p">.</span><span class="nx">_pack_prev</span><span class="p">,</span> <span class="nx">s2</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
              <span class="k">if</span> <span class="p">(</span><span class="nx">d3_layout_packIntersects</span><span class="p">(</span><span class="nx">k</span><span class="p">,</span> <span class="nx">c</span><span class="p">))</span> <span class="p">{</span>
                <span class="k">break</span><span class="p">;</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">isect</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">s1</span> <span class="o">&lt;</span> <span class="nx">s2</span> <span class="o">||</span> <span class="nx">s1</span> <span class="o">==</span> <span class="nx">s2</span> <span class="o">&amp;&amp;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">r</span> <span class="o">&lt;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">r</span><span class="p">)</span> <span class="nx">d3_layout_packSplice</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="o">=</span> <span class="nx">j</span><span class="p">);</span> <span class="k">else</span> <span class="nx">d3_layout_packSplice</span><span class="p">(</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">b</span><span class="p">);</span>
            <span class="nx">i</span><span class="o">--</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">d3_layout_packInsert</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">c</span><span class="p">);</span>
            <span class="nx">b</span> <span class="o">=</span> <span class="nx">c</span><span class="p">;</span>
            <span class="nx">bound</span><span class="p">(</span><span class="nx">c</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="kd">var</span> <span class="nx">cx</span> <span class="o">=</span> <span class="p">(</span><span class="nx">xMin</span> <span class="o">+</span> <span class="nx">xMax</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">cy</span> <span class="o">=</span> <span class="p">(</span><span class="nx">yMin</span> <span class="o">+</span> <span class="nx">yMax</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">cr</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">c</span> <span class="o">=</span> <span class="nx">nodes</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">x</span> <span class="o">-=</span> <span class="nx">cx</span><span class="p">;</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">y</span> <span class="o">-=</span> <span class="nx">cy</span><span class="p">;</span>
      <span class="nx">cr</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">cr</span><span class="p">,</span> <span class="nx">c</span><span class="p">.</span><span class="nx">r</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">x</span> <span class="o">*</span> <span class="nx">c</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">c</span><span class="p">.</span><span class="nx">y</span> <span class="o">*</span> <span class="nx">c</span><span class="p">.</span><span class="nx">y</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="nx">node</span><span class="p">.</span><span class="nx">r</span> <span class="o">=</span> <span class="nx">cr</span><span class="p">;</span>
    <span class="nx">nodes</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">d3_layout_packUnlink</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_packLink</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">node</span><span class="p">.</span><span class="nx">_pack_next</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">_pack_prev</span> <span class="o">=</span> <span class="nx">node</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_packUnlink</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">delete</span> <span class="nx">node</span><span class="p">.</span><span class="nx">_pack_next</span><span class="p">;</span>
    <span class="k">delete</span> <span class="nx">node</span><span class="p">.</span><span class="nx">_pack_prev</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_packTransform</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">k</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">children</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">children</span><span class="p">;</span>
    <span class="nx">node</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">+=</span> <span class="nx">k</span> <span class="o">*</span> <span class="nx">node</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
    <span class="nx">node</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">+=</span> <span class="nx">k</span> <span class="o">*</span> <span class="nx">node</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
    <span class="nx">node</span><span class="p">.</span><span class="nx">r</span> <span class="o">*=</span> <span class="nx">k</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">children</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="nx">d3_layout_packTransform</span><span class="p">(</span><span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">k</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_packPlace</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">c</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">db</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">r</span> <span class="o">+</span> <span class="nx">c</span><span class="p">.</span><span class="nx">r</span><span class="p">,</span> <span class="nx">dx</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">a</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">dy</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">a</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">db</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">dx</span> <span class="o">||</span> <span class="nx">dy</span><span class="p">))</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">da</span> <span class="o">=</span> <span class="nx">b</span><span class="p">.</span><span class="nx">r</span> <span class="o">+</span> <span class="nx">c</span><span class="p">.</span><span class="nx">r</span><span class="p">,</span> <span class="nx">dc</span> <span class="o">=</span> <span class="nx">dx</span> <span class="o">*</span> <span class="nx">dx</span> <span class="o">+</span> <span class="nx">dy</span> <span class="o">*</span> <span class="nx">dy</span><span class="p">;</span>
      <span class="nx">da</span> <span class="o">*=</span> <span class="nx">da</span><span class="p">;</span>
      <span class="nx">db</span> <span class="o">*=</span> <span class="nx">db</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="p">.</span><span class="mi">5</span> <span class="o">+</span> <span class="p">(</span><span class="nx">db</span> <span class="o">-</span> <span class="nx">da</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="nx">dc</span><span class="p">),</span> <span class="nx">y</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="nx">da</span> <span class="o">*</span> <span class="p">(</span><span class="nx">db</span> <span class="o">+</span> <span class="nx">dc</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="nx">db</span> <span class="o">-=</span> <span class="nx">dc</span><span class="p">)</span> <span class="o">*</span> <span class="nx">db</span> <span class="o">-</span> <span class="nx">da</span> <span class="o">*</span> <span class="nx">da</span><span class="p">))</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="nx">dc</span><span class="p">);</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">dx</span> <span class="o">+</span> <span class="nx">y</span> <span class="o">*</span> <span class="nx">dy</span><span class="p">;</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">dy</span> <span class="o">-</span> <span class="nx">y</span> <span class="o">*</span> <span class="nx">dx</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">db</span><span class="p">;</span>
      <span class="nx">c</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">a</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">layout</span><span class="p">.</span><span class="nx">tree</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">hierarchy</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">layout</span><span class="p">.</span><span class="nx">hierarchy</span><span class="p">().</span><span class="nx">sort</span><span class="p">(</span><span class="kc">null</span><span class="p">).</span><span class="nx">value</span><span class="p">(</span><span class="kc">null</span><span class="p">),</span> <span class="nx">separation</span> <span class="o">=</span> <span class="nx">d3_layout_treeSeparation</span><span class="p">,</span> <span class="nx">size</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span> <span class="p">],</span> <span class="nx">nodeSize</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">tree</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">nodes</span> <span class="o">=</span> <span class="nx">hierarchy</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">),</span> <span class="nx">root0</span> <span class="o">=</span> <span class="nx">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">root1</span> <span class="o">=</span> <span class="nx">wrapTree</span><span class="p">(</span><span class="nx">root0</span><span class="p">);</span>
      <span class="nx">d3_layout_hierarchyVisitAfter</span><span class="p">(</span><span class="nx">root1</span><span class="p">,</span> <span class="nx">firstWalk</span><span class="p">),</span> <span class="nx">root1</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">m</span> <span class="o">=</span> <span class="o">-</span><span class="nx">root1</span><span class="p">.</span><span class="nx">z</span><span class="p">;</span>
      <span class="nx">d3_layout_hierarchyVisitBefore</span><span class="p">(</span><span class="nx">root1</span><span class="p">,</span> <span class="nx">secondWalk</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">nodeSize</span><span class="p">)</span> <span class="nx">d3_layout_hierarchyVisitBefore</span><span class="p">(</span><span class="nx">root0</span><span class="p">,</span> <span class="nx">sizeNode</span><span class="p">);</span> <span class="k">else</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">left</span> <span class="o">=</span> <span class="nx">root0</span><span class="p">,</span> <span class="nx">right</span> <span class="o">=</span> <span class="nx">root0</span><span class="p">,</span> <span class="nx">bottom</span> <span class="o">=</span> <span class="nx">root0</span><span class="p">;</span>
        <span class="nx">d3_layout_hierarchyVisitBefore</span><span class="p">(</span><span class="nx">root0</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">x</span> <span class="o">&lt;</span> <span class="nx">left</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="nx">left</span> <span class="o">=</span> <span class="nx">node</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">x</span> <span class="o">&gt;</span> <span class="nx">right</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="nx">right</span> <span class="o">=</span> <span class="nx">node</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">depth</span> <span class="o">&gt;</span> <span class="nx">bottom</span><span class="p">.</span><span class="nx">depth</span><span class="p">)</span> <span class="nx">bottom</span> <span class="o">=</span> <span class="nx">node</span><span class="p">;</span>
        <span class="p">});</span>
        <span class="kd">var</span> <span class="nx">tx</span> <span class="o">=</span> <span class="nx">separation</span><span class="p">(</span><span class="nx">left</span><span class="p">,</span> <span class="nx">right</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="nx">left</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">kx</span> <span class="o">=</span> <span class="nx">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="p">(</span><span class="nx">right</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">separation</span><span class="p">(</span><span class="nx">right</span><span class="p">,</span> <span class="nx">left</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="nx">tx</span><span class="p">),</span> <span class="nx">ky</span> <span class="o">=</span> <span class="nx">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="p">(</span><span class="nx">bottom</span><span class="p">.</span><span class="nx">depth</span> <span class="o">||</span> <span class="mi">1</span><span class="p">);</span>
        <span class="nx">d3_layout_hierarchyVisitBefore</span><span class="p">(</span><span class="nx">root0</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">node</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">tx</span><span class="p">)</span> <span class="o">*</span> <span class="nx">kx</span><span class="p">;</span>
          <span class="nx">node</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">depth</span> <span class="o">*</span> <span class="nx">ky</span><span class="p">;</span>
        <span class="p">});</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">nodes</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">wrapTree</span><span class="p">(</span><span class="nx">root0</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">root1</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">A</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="nx">children</span><span class="o">:</span> <span class="p">[</span> <span class="nx">root0</span> <span class="p">]</span>
      <span class="p">},</span> <span class="nx">queue</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">root1</span> <span class="p">],</span> <span class="nx">node1</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">((</span><span class="nx">node1</span> <span class="o">=</span> <span class="nx">queue</span><span class="p">.</span><span class="nx">pop</span><span class="p">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">children</span> <span class="o">=</span> <span class="nx">node1</span><span class="p">.</span><span class="nx">children</span><span class="p">,</span> <span class="nx">child</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">queue</span><span class="p">.</span><span class="nx">push</span><span class="p">((</span><span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">child</span> <span class="o">=</span> <span class="p">{</span>
            <span class="nx">_</span><span class="o">:</span> <span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span>
            <span class="nx">parent</span><span class="o">:</span> <span class="nx">node1</span><span class="p">,</span>
            <span class="nx">children</span><span class="o">:</span> <span class="p">(</span><span class="nx">child</span> <span class="o">=</span> <span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">children</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">child</span><span class="p">.</span><span class="nx">slice</span><span class="p">()</span> <span class="o">||</span> <span class="p">[],</span>
            <span class="nx">A</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
            <span class="nx">a</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
            <span class="nx">z</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nx">m</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nx">c</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nx">s</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
            <span class="nx">t</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
            <span class="nx">i</span><span class="o">:</span> <span class="nx">i</span>
          <span class="p">}).</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">child</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">root1</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">firstWalk</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">children</span> <span class="o">=</span> <span class="nx">v</span><span class="p">.</span><span class="nx">children</span><span class="p">,</span> <span class="nx">siblings</span> <span class="o">=</span> <span class="nx">v</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">children</span><span class="p">,</span> <span class="nx">w</span> <span class="o">=</span> <span class="nx">v</span><span class="p">.</span><span class="nx">i</span> <span class="o">?</span> <span class="nx">siblings</span><span class="p">[</span><span class="nx">v</span><span class="p">.</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">d3_layout_treeShift</span><span class="p">(</span><span class="nx">v</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">midpoint</span> <span class="o">=</span> <span class="p">(</span><span class="nx">children</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">z</span> <span class="o">+</span> <span class="nx">children</span><span class="p">[</span><span class="nx">children</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">].</span><span class="nx">z</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">w</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">v</span><span class="p">.</span><span class="nx">z</span> <span class="o">=</span> <span class="nx">w</span><span class="p">.</span><span class="nx">z</span> <span class="o">+</span> <span class="nx">separation</span><span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">_</span><span class="p">,</span> <span class="nx">w</span><span class="p">.</span><span class="nx">_</span><span class="p">);</span>
          <span class="nx">v</span><span class="p">.</span><span class="nx">m</span> <span class="o">=</span> <span class="nx">v</span><span class="p">.</span><span class="nx">z</span> <span class="o">-</span> <span class="nx">midpoint</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">v</span><span class="p">.</span><span class="nx">z</span> <span class="o">=</span> <span class="nx">midpoint</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">w</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">v</span><span class="p">.</span><span class="nx">z</span> <span class="o">=</span> <span class="nx">w</span><span class="p">.</span><span class="nx">z</span> <span class="o">+</span> <span class="nx">separation</span><span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">_</span><span class="p">,</span> <span class="nx">w</span><span class="p">.</span><span class="nx">_</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="nx">v</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">A</span> <span class="o">=</span> <span class="nx">apportion</span><span class="p">(</span><span class="nx">v</span><span class="p">,</span> <span class="nx">w</span><span class="p">,</span> <span class="nx">v</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">A</span> <span class="o">||</span> <span class="nx">siblings</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">secondWalk</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">v</span><span class="p">.</span><span class="nx">_</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">v</span><span class="p">.</span><span class="nx">z</span> <span class="o">+</span> <span class="nx">v</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">m</span><span class="p">;</span>
      <span class="nx">v</span><span class="p">.</span><span class="nx">m</span> <span class="o">+=</span> <span class="nx">v</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">m</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">apportion</span><span class="p">(</span><span class="nx">v</span><span class="p">,</span> <span class="nx">w</span><span class="p">,</span> <span class="nx">ancestor</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">w</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">vip</span> <span class="o">=</span> <span class="nx">v</span><span class="p">,</span> <span class="nx">vop</span> <span class="o">=</span> <span class="nx">v</span><span class="p">,</span> <span class="nx">vim</span> <span class="o">=</span> <span class="nx">w</span><span class="p">,</span> <span class="nx">vom</span> <span class="o">=</span> <span class="nx">vip</span><span class="p">.</span><span class="nx">parent</span><span class="p">.</span><span class="nx">children</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">sip</span> <span class="o">=</span> <span class="nx">vip</span><span class="p">.</span><span class="nx">m</span><span class="p">,</span> <span class="nx">sop</span> <span class="o">=</span> <span class="nx">vop</span><span class="p">.</span><span class="nx">m</span><span class="p">,</span> <span class="nx">sim</span> <span class="o">=</span> <span class="nx">vim</span><span class="p">.</span><span class="nx">m</span><span class="p">,</span> <span class="nx">som</span> <span class="o">=</span> <span class="nx">vom</span><span class="p">.</span><span class="nx">m</span><span class="p">,</span> <span class="nx">shift</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">vim</span> <span class="o">=</span> <span class="nx">d3_layout_treeRight</span><span class="p">(</span><span class="nx">vim</span><span class="p">),</span> <span class="nx">vip</span> <span class="o">=</span> <span class="nx">d3_layout_treeLeft</span><span class="p">(</span><span class="nx">vip</span><span class="p">),</span> <span class="nx">vim</span> <span class="o">&amp;&amp;</span> <span class="nx">vip</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">vom</span> <span class="o">=</span> <span class="nx">d3_layout_treeLeft</span><span class="p">(</span><span class="nx">vom</span><span class="p">);</span>
          <span class="nx">vop</span> <span class="o">=</span> <span class="nx">d3_layout_treeRight</span><span class="p">(</span><span class="nx">vop</span><span class="p">);</span>
          <span class="nx">vop</span><span class="p">.</span><span class="nx">a</span> <span class="o">=</span> <span class="nx">v</span><span class="p">;</span>
          <span class="nx">shift</span> <span class="o">=</span> <span class="nx">vim</span><span class="p">.</span><span class="nx">z</span> <span class="o">+</span> <span class="nx">sim</span> <span class="o">-</span> <span class="nx">vip</span><span class="p">.</span><span class="nx">z</span> <span class="o">-</span> <span class="nx">sip</span> <span class="o">+</span> <span class="nx">separation</span><span class="p">(</span><span class="nx">vim</span><span class="p">.</span><span class="nx">_</span><span class="p">,</span> <span class="nx">vip</span><span class="p">.</span><span class="nx">_</span><span class="p">);</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">shift</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">d3_layout_treeMove</span><span class="p">(</span><span class="nx">d3_layout_treeAncestor</span><span class="p">(</span><span class="nx">vim</span><span class="p">,</span> <span class="nx">v</span><span class="p">,</span> <span class="nx">ancestor</span><span class="p">),</span> <span class="nx">v</span><span class="p">,</span> <span class="nx">shift</span><span class="p">);</span>
            <span class="nx">sip</span> <span class="o">+=</span> <span class="nx">shift</span><span class="p">;</span>
            <span class="nx">sop</span> <span class="o">+=</span> <span class="nx">shift</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="nx">sim</span> <span class="o">+=</span> <span class="nx">vim</span><span class="p">.</span><span class="nx">m</span><span class="p">;</span>
          <span class="nx">sip</span> <span class="o">+=</span> <span class="nx">vip</span><span class="p">.</span><span class="nx">m</span><span class="p">;</span>
          <span class="nx">som</span> <span class="o">+=</span> <span class="nx">vom</span><span class="p">.</span><span class="nx">m</span><span class="p">;</span>
          <span class="nx">sop</span> <span class="o">+=</span> <span class="nx">vop</span><span class="p">.</span><span class="nx">m</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">vim</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">d3_layout_treeRight</span><span class="p">(</span><span class="nx">vop</span><span class="p">))</span> <span class="p">{</span>
          <span class="nx">vop</span><span class="p">.</span><span class="nx">t</span> <span class="o">=</span> <span class="nx">vim</span><span class="p">;</span>
          <span class="nx">vop</span><span class="p">.</span><span class="nx">m</span> <span class="o">+=</span> <span class="nx">sim</span> <span class="o">-</span> <span class="nx">sop</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">vip</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">d3_layout_treeLeft</span><span class="p">(</span><span class="nx">vom</span><span class="p">))</span> <span class="p">{</span>
          <span class="nx">vom</span><span class="p">.</span><span class="nx">t</span> <span class="o">=</span> <span class="nx">vip</span><span class="p">;</span>
          <span class="nx">vom</span><span class="p">.</span><span class="nx">m</span> <span class="o">+=</span> <span class="nx">sip</span> <span class="o">-</span> <span class="nx">som</span><span class="p">;</span>
          <span class="nx">ancestor</span> <span class="o">=</span> <span class="nx">v</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">ancestor</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">sizeNode</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">node</span><span class="p">.</span><span class="nx">x</span> <span class="o">*=</span> <span class="nx">size</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
      <span class="nx">node</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">depth</span> <span class="o">*</span> <span class="nx">size</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="nx">tree</span><span class="p">.</span><span class="nx">separation</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">separation</span><span class="p">;</span>
      <span class="nx">separation</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">tree</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">tree</span><span class="p">.</span><span class="nx">size</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">nodeSize</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="nx">size</span><span class="p">;</span>
      <span class="nx">nodeSize</span> <span class="o">=</span> <span class="p">(</span><span class="nx">size</span> <span class="o">=</span> <span class="nx">x</span><span class="p">)</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">sizeNode</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">tree</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">tree</span><span class="p">.</span><span class="nx">nodeSize</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">nodeSize</span> <span class="o">?</span> <span class="nx">size</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>
      <span class="nx">nodeSize</span> <span class="o">=</span> <span class="p">(</span><span class="nx">size</span> <span class="o">=</span> <span class="nx">x</span><span class="p">)</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="nx">sizeNode</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">tree</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">d3_layout_hierarchyRebind</span><span class="p">(</span><span class="nx">tree</span><span class="p">,</span> <span class="nx">hierarchy</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_layout_treeSeparation</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">parent</span> <span class="o">==</span> <span class="nx">b</span><span class="p">.</span><span class="nx">parent</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">2</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_treeLeft</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">children</span> <span class="o">=</span> <span class="nx">v</span><span class="p">.</span><span class="nx">children</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">children</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">children</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">:</span> <span class="nx">v</span><span class="p">.</span><span class="nx">t</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_treeRight</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">children</span> <span class="o">=</span> <span class="nx">v</span><span class="p">.</span><span class="nx">children</span><span class="p">,</span> <span class="nx">n</span><span class="p">;</span>
    <span class="k">return</span> <span class="p">(</span><span class="nx">n</span> <span class="o">=</span> <span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="o">?</span> <span class="nx">children</span><span class="p">[</span><span class="nx">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">:</span> <span class="nx">v</span><span class="p">.</span><span class="nx">t</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_treeMove</span><span class="p">(</span><span class="nx">wm</span><span class="p">,</span> <span class="nx">wp</span><span class="p">,</span> <span class="nx">shift</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">change</span> <span class="o">=</span> <span class="nx">shift</span> <span class="o">/</span> <span class="p">(</span><span class="nx">wp</span><span class="p">.</span><span class="nx">i</span> <span class="o">-</span> <span class="nx">wm</span><span class="p">.</span><span class="nx">i</span><span class="p">);</span>
    <span class="nx">wp</span><span class="p">.</span><span class="nx">c</span> <span class="o">-=</span> <span class="nx">change</span><span class="p">;</span>
    <span class="nx">wp</span><span class="p">.</span><span class="nx">s</span> <span class="o">+=</span> <span class="nx">shift</span><span class="p">;</span>
    <span class="nx">wm</span><span class="p">.</span><span class="nx">c</span> <span class="o">+=</span> <span class="nx">change</span><span class="p">;</span>
    <span class="nx">wp</span><span class="p">.</span><span class="nx">z</span> <span class="o">+=</span> <span class="nx">shift</span><span class="p">;</span>
    <span class="nx">wp</span><span class="p">.</span><span class="nx">m</span> <span class="o">+=</span> <span class="nx">shift</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_treeShift</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">shift</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">change</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">children</span> <span class="o">=</span> <span class="nx">v</span><span class="p">.</span><span class="nx">children</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">w</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">--</span><span class="nx">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">w</span> <span class="o">=</span> <span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
      <span class="nx">w</span><span class="p">.</span><span class="nx">z</span> <span class="o">+=</span> <span class="nx">shift</span><span class="p">;</span>
      <span class="nx">w</span><span class="p">.</span><span class="nx">m</span> <span class="o">+=</span> <span class="nx">shift</span><span class="p">;</span>
      <span class="nx">shift</span> <span class="o">+=</span> <span class="nx">w</span><span class="p">.</span><span class="nx">s</span> <span class="o">+</span> <span class="p">(</span><span class="nx">change</span> <span class="o">+=</span> <span class="nx">w</span><span class="p">.</span><span class="nx">c</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_treeAncestor</span><span class="p">(</span><span class="nx">vim</span><span class="p">,</span> <span class="nx">v</span><span class="p">,</span> <span class="nx">ancestor</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">vim</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">parent</span> <span class="o">===</span> <span class="nx">v</span><span class="p">.</span><span class="nx">parent</span> <span class="o">?</span> <span class="nx">vim</span><span class="p">.</span><span class="nx">a</span> <span class="o">:</span> <span class="nx">ancestor</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">layout</span><span class="p">.</span><span class="nx">cluster</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">hierarchy</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">layout</span><span class="p">.</span><span class="nx">hierarchy</span><span class="p">().</span><span class="nx">sort</span><span class="p">(</span><span class="kc">null</span><span class="p">).</span><span class="nx">value</span><span class="p">(</span><span class="kc">null</span><span class="p">),</span> <span class="nx">separation</span> <span class="o">=</span> <span class="nx">d3_layout_treeSeparation</span><span class="p">,</span> <span class="nx">size</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span> <span class="p">],</span> <span class="nx">nodeSize</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">cluster</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">nodes</span> <span class="o">=</span> <span class="nx">hierarchy</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">),</span> <span class="nx">root</span> <span class="o">=</span> <span class="nx">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">previousNode</span><span class="p">,</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">d3_layout_hierarchyVisitAfter</span><span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">children</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">children</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">children</span> <span class="o">&amp;&amp;</span> <span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">node</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">d3_layout_clusterX</span><span class="p">(</span><span class="nx">children</span><span class="p">);</span>
          <span class="nx">node</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">d3_layout_clusterY</span><span class="p">(</span><span class="nx">children</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">node</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">previousNode</span> <span class="o">?</span> <span class="nx">x</span> <span class="o">+=</span> <span class="nx">separation</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">previousNode</span><span class="p">)</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
          <span class="nx">node</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
          <span class="nx">previousNode</span> <span class="o">=</span> <span class="nx">node</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">});</span>
      <span class="kd">var</span> <span class="nx">left</span> <span class="o">=</span> <span class="nx">d3_layout_clusterLeft</span><span class="p">(</span><span class="nx">root</span><span class="p">),</span> <span class="nx">right</span> <span class="o">=</span> <span class="nx">d3_layout_clusterRight</span><span class="p">(</span><span class="nx">root</span><span class="p">),</span> <span class="nx">x0</span> <span class="o">=</span> <span class="nx">left</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">separation</span><span class="p">(</span><span class="nx">left</span><span class="p">,</span> <span class="nx">right</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">x1</span> <span class="o">=</span> <span class="nx">right</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">separation</span><span class="p">(</span><span class="nx">right</span><span class="p">,</span> <span class="nx">left</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
      <span class="nx">d3_layout_hierarchyVisitAfter</span><span class="p">(</span><span class="nx">root</span><span class="p">,</span> <span class="nx">nodeSize</span> <span class="o">?</span> <span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">node</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">root</span><span class="p">.</span><span class="nx">x</span><span class="p">)</span> <span class="o">*</span> <span class="nx">size</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="nx">node</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="p">(</span><span class="nx">root</span><span class="p">.</span><span class="nx">y</span> <span class="o">-</span> <span class="nx">node</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="o">*</span> <span class="nx">size</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
      <span class="p">}</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">node</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">x0</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nx">x1</span> <span class="o">-</span> <span class="nx">x0</span><span class="p">)</span> <span class="o">*</span> <span class="nx">size</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="nx">node</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="p">(</span><span class="nx">root</span><span class="p">.</span><span class="nx">y</span> <span class="o">?</span> <span class="nx">node</span><span class="p">.</span><span class="nx">y</span> <span class="o">/</span> <span class="nx">root</span><span class="p">.</span><span class="nx">y</span> <span class="o">:</span> <span class="mi">1</span><span class="p">))</span> <span class="o">*</span> <span class="nx">size</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
      <span class="p">});</span>
      <span class="k">return</span> <span class="nx">nodes</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">cluster</span><span class="p">.</span><span class="nx">separation</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">separation</span><span class="p">;</span>
      <span class="nx">separation</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">cluster</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">cluster</span><span class="p">.</span><span class="nx">size</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">nodeSize</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="nx">size</span><span class="p">;</span>
      <span class="nx">nodeSize</span> <span class="o">=</span> <span class="p">(</span><span class="nx">size</span> <span class="o">=</span> <span class="nx">x</span><span class="p">)</span> <span class="o">==</span> <span class="kc">null</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">cluster</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">cluster</span><span class="p">.</span><span class="nx">nodeSize</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">nodeSize</span> <span class="o">?</span> <span class="nx">size</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>
      <span class="nx">nodeSize</span> <span class="o">=</span> <span class="p">(</span><span class="nx">size</span> <span class="o">=</span> <span class="nx">x</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">cluster</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">d3_layout_hierarchyRebind</span><span class="p">(</span><span class="nx">cluster</span><span class="p">,</span> <span class="nx">hierarchy</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_layout_clusterY</span><span class="p">(</span><span class="nx">children</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="mi">1</span> <span class="o">+</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">children</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">child</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">child</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
    <span class="p">});</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_clusterX</span><span class="p">(</span><span class="nx">children</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">children</span><span class="p">.</span><span class="nx">reduce</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">child</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">child</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
    <span class="p">},</span> <span class="mi">0</span><span class="p">)</span> <span class="o">/</span> <span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_clusterLeft</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">children</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">children</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">children</span> <span class="o">&amp;&amp;</span> <span class="nx">children</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">d3_layout_clusterLeft</span><span class="p">(</span><span class="nx">children</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">:</span> <span class="nx">node</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_clusterRight</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">children</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">children</span><span class="p">,</span> <span class="nx">n</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">children</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">n</span> <span class="o">=</span> <span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="o">?</span> <span class="nx">d3_layout_clusterRight</span><span class="p">(</span><span class="nx">children</span><span class="p">[</span><span class="nx">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">])</span> <span class="o">:</span> <span class="nx">node</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">layout</span><span class="p">.</span><span class="nx">treemap</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">hierarchy</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">layout</span><span class="p">.</span><span class="nx">hierarchy</span><span class="p">(),</span> <span class="nx">round</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">,</span> <span class="nx">size</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span> <span class="p">],</span> <span class="nx">padding</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">pad</span> <span class="o">=</span> <span class="nx">d3_layout_treemapPadNull</span><span class="p">,</span> <span class="nx">sticky</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">stickies</span><span class="p">,</span> <span class="nx">mode</span> <span class="o">=</span> <span class="s2">&quot;squarify&quot;</span><span class="p">,</span> <span class="nx">ratio</span> <span class="o">=</span> <span class="p">.</span><span class="mi">5</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="mi">5</span><span class="p">));</span>
    <span class="kd">function</span> <span class="nx">scale</span><span class="p">(</span><span class="nx">children</span><span class="p">,</span> <span class="nx">k</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">child</span><span class="p">,</span> <span class="nx">area</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">area</span> <span class="o">=</span> <span class="p">(</span><span class="nx">child</span> <span class="o">=</span> <span class="nx">children</span><span class="p">[</span><span class="nx">i</span><span class="p">]).</span><span class="nx">value</span> <span class="o">*</span> <span class="p">(</span><span class="nx">k</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="nx">k</span><span class="p">);</span>
        <span class="nx">child</span><span class="p">.</span><span class="nx">area</span> <span class="o">=</span> <span class="nb">isNaN</span><span class="p">(</span><span class="nx">area</span><span class="p">)</span> <span class="o">||</span> <span class="nx">area</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="nx">area</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">squarify</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">children</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">children</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">children</span> <span class="o">&amp;&amp;</span> <span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">rect</span> <span class="o">=</span> <span class="nx">pad</span><span class="p">(</span><span class="nx">node</span><span class="p">),</span> <span class="nx">row</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">remaining</span> <span class="o">=</span> <span class="nx">children</span><span class="p">.</span><span class="nx">slice</span><span class="p">(),</span> <span class="nx">child</span><span class="p">,</span> <span class="nx">best</span> <span class="o">=</span> <span class="kc">Infinity</span><span class="p">,</span> <span class="nx">score</span><span class="p">,</span> <span class="nx">u</span> <span class="o">=</span> <span class="nx">mode</span> <span class="o">===</span> <span class="s2">&quot;slice&quot;</span> <span class="o">?</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">dx</span> <span class="o">:</span> <span class="nx">mode</span> <span class="o">===</span> <span class="s2">&quot;dice&quot;</span> <span class="o">?</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">dy</span> <span class="o">:</span> <span class="nx">mode</span> <span class="o">===</span> <span class="s2">&quot;slice-dice&quot;</span> <span class="o">?</span> <span class="nx">node</span><span class="p">.</span><span class="nx">depth</span> <span class="o">&amp;</span> <span class="mi">1</span> <span class="o">?</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">dy</span> <span class="o">:</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">dx</span> <span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">rect</span><span class="p">.</span><span class="nx">dx</span><span class="p">,</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">dy</span><span class="p">),</span> <span class="nx">n</span><span class="p">;</span>
        <span class="nx">scale</span><span class="p">(</span><span class="nx">remaining</span><span class="p">,</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">dx</span> <span class="o">*</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">dy</span> <span class="o">/</span> <span class="nx">node</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
        <span class="nx">row</span><span class="p">.</span><span class="nx">area</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">((</span><span class="nx">n</span> <span class="o">=</span> <span class="nx">remaining</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">row</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">child</span> <span class="o">=</span> <span class="nx">remaining</span><span class="p">[</span><span class="nx">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]);</span>
          <span class="nx">row</span><span class="p">.</span><span class="nx">area</span> <span class="o">+=</span> <span class="nx">child</span><span class="p">.</span><span class="nx">area</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">mode</span> <span class="o">!==</span> <span class="s2">&quot;squarify&quot;</span> <span class="o">||</span> <span class="p">(</span><span class="nx">score</span> <span class="o">=</span> <span class="nx">worst</span><span class="p">(</span><span class="nx">row</span><span class="p">,</span> <span class="nx">u</span><span class="p">))</span> <span class="o">&lt;=</span> <span class="nx">best</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">remaining</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
            <span class="nx">best</span> <span class="o">=</span> <span class="nx">score</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">row</span><span class="p">.</span><span class="nx">area</span> <span class="o">-=</span> <span class="nx">row</span><span class="p">.</span><span class="nx">pop</span><span class="p">().</span><span class="nx">area</span><span class="p">;</span>
            <span class="nx">position</span><span class="p">(</span><span class="nx">row</span><span class="p">,</span> <span class="nx">u</span><span class="p">,</span> <span class="nx">rect</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
            <span class="nx">u</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">rect</span><span class="p">.</span><span class="nx">dx</span><span class="p">,</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">dy</span><span class="p">);</span>
            <span class="nx">row</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="nx">row</span><span class="p">.</span><span class="nx">area</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="nx">best</span> <span class="o">=</span> <span class="kc">Infinity</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">row</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">position</span><span class="p">(</span><span class="nx">row</span><span class="p">,</span> <span class="nx">u</span><span class="p">,</span> <span class="nx">rect</span><span class="p">,</span> <span class="kc">true</span><span class="p">);</span>
          <span class="nx">row</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="nx">row</span><span class="p">.</span><span class="nx">area</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">children</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">squarify</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">stickify</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">children</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">children</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">children</span> <span class="o">&amp;&amp;</span> <span class="nx">children</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">rect</span> <span class="o">=</span> <span class="nx">pad</span><span class="p">(</span><span class="nx">node</span><span class="p">),</span> <span class="nx">remaining</span> <span class="o">=</span> <span class="nx">children</span><span class="p">.</span><span class="nx">slice</span><span class="p">(),</span> <span class="nx">child</span><span class="p">,</span> <span class="nx">row</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="nx">scale</span><span class="p">(</span><span class="nx">remaining</span><span class="p">,</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">dx</span> <span class="o">*</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">dy</span> <span class="o">/</span> <span class="nx">node</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
        <span class="nx">row</span><span class="p">.</span><span class="nx">area</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="nx">child</span> <span class="o">=</span> <span class="nx">remaining</span><span class="p">.</span><span class="nx">pop</span><span class="p">())</span> <span class="p">{</span>
          <span class="nx">row</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">child</span><span class="p">);</span>
          <span class="nx">row</span><span class="p">.</span><span class="nx">area</span> <span class="o">+=</span> <span class="nx">child</span><span class="p">.</span><span class="nx">area</span><span class="p">;</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">child</span><span class="p">.</span><span class="nx">z</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">position</span><span class="p">(</span><span class="nx">row</span><span class="p">,</span> <span class="nx">child</span><span class="p">.</span><span class="nx">z</span> <span class="o">?</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">dx</span> <span class="o">:</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">dy</span><span class="p">,</span> <span class="nx">rect</span><span class="p">,</span> <span class="o">!</span><span class="nx">remaining</span><span class="p">.</span><span class="nx">length</span><span class="p">);</span>
            <span class="nx">row</span><span class="p">.</span><span class="nx">length</span> <span class="o">=</span> <span class="nx">row</span><span class="p">.</span><span class="nx">area</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="nx">children</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="nx">stickify</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">worst</span><span class="p">(</span><span class="nx">row</span><span class="p">,</span> <span class="nx">u</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="nx">row</span><span class="p">.</span><span class="nx">area</span><span class="p">,</span> <span class="nx">r</span><span class="p">,</span> <span class="nx">rmax</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">rmin</span> <span class="o">=</span> <span class="kc">Infinity</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">row</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="nx">r</span> <span class="o">=</span> <span class="nx">row</span><span class="p">[</span><span class="nx">i</span><span class="p">].</span><span class="nx">area</span><span class="p">))</span> <span class="k">continue</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">r</span> <span class="o">&lt;</span> <span class="nx">rmin</span><span class="p">)</span> <span class="nx">rmin</span> <span class="o">=</span> <span class="nx">r</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">r</span> <span class="o">&gt;</span> <span class="nx">rmax</span><span class="p">)</span> <span class="nx">rmax</span> <span class="o">=</span> <span class="nx">r</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="nx">s</span> <span class="o">*=</span> <span class="nx">s</span><span class="p">;</span>
      <span class="nx">u</span> <span class="o">*=</span> <span class="nx">u</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">s</span> <span class="o">?</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">u</span> <span class="o">*</span> <span class="nx">rmax</span> <span class="o">*</span> <span class="nx">ratio</span> <span class="o">/</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">s</span> <span class="o">/</span> <span class="p">(</span><span class="nx">u</span> <span class="o">*</span> <span class="nx">rmin</span> <span class="o">*</span> <span class="nx">ratio</span><span class="p">))</span> <span class="o">:</span> <span class="kc">Infinity</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">position</span><span class="p">(</span><span class="nx">row</span><span class="p">,</span> <span class="nx">u</span><span class="p">,</span> <span class="nx">rect</span><span class="p">,</span> <span class="nx">flush</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">row</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="nx">v</span> <span class="o">=</span> <span class="nx">u</span> <span class="o">?</span> <span class="nx">round</span><span class="p">(</span><span class="nx">row</span><span class="p">.</span><span class="nx">area</span> <span class="o">/</span> <span class="nx">u</span><span class="p">)</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">o</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">u</span> <span class="o">==</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">dx</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">flush</span> <span class="o">||</span> <span class="nx">v</span> <span class="o">&gt;</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">dy</span><span class="p">)</span> <span class="nx">v</span> <span class="o">=</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">dy</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">o</span> <span class="o">=</span> <span class="nx">row</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
          <span class="nx">o</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
          <span class="nx">o</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>
          <span class="nx">o</span><span class="p">.</span><span class="nx">dy</span> <span class="o">=</span> <span class="nx">v</span><span class="p">;</span>
          <span class="nx">x</span> <span class="o">+=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">dx</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">rect</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">dx</span> <span class="o">-</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">v</span> <span class="o">?</span> <span class="nx">round</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">area</span> <span class="o">/</span> <span class="nx">v</span><span class="p">)</span> <span class="o">:</span> <span class="mi">0</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="nx">o</span><span class="p">.</span><span class="nx">z</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="nx">o</span><span class="p">.</span><span class="nx">dx</span> <span class="o">+=</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">dx</span> <span class="o">-</span> <span class="nx">x</span><span class="p">;</span>
        <span class="nx">rect</span><span class="p">.</span><span class="nx">y</span> <span class="o">+=</span> <span class="nx">v</span><span class="p">;</span>
        <span class="nx">rect</span><span class="p">.</span><span class="nx">dy</span> <span class="o">-=</span> <span class="nx">v</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">flush</span> <span class="o">||</span> <span class="nx">v</span> <span class="o">&gt;</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">dx</span><span class="p">)</span> <span class="nx">v</span> <span class="o">=</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">dx</span><span class="p">;</span>
        <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">o</span> <span class="o">=</span> <span class="nx">row</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
          <span class="nx">o</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
          <span class="nx">o</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>
          <span class="nx">o</span><span class="p">.</span><span class="nx">dx</span> <span class="o">=</span> <span class="nx">v</span><span class="p">;</span>
          <span class="nx">y</span> <span class="o">+=</span> <span class="nx">o</span><span class="p">.</span><span class="nx">dy</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">rect</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">dy</span> <span class="o">-</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">v</span> <span class="o">?</span> <span class="nx">round</span><span class="p">(</span><span class="nx">o</span><span class="p">.</span><span class="nx">area</span> <span class="o">/</span> <span class="nx">v</span><span class="p">)</span> <span class="o">:</span> <span class="mi">0</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="nx">o</span><span class="p">.</span><span class="nx">z</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="nx">o</span><span class="p">.</span><span class="nx">dy</span> <span class="o">+=</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">rect</span><span class="p">.</span><span class="nx">dy</span> <span class="o">-</span> <span class="nx">y</span><span class="p">;</span>
        <span class="nx">rect</span><span class="p">.</span><span class="nx">x</span> <span class="o">+=</span> <span class="nx">v</span><span class="p">;</span>
        <span class="nx">rect</span><span class="p">.</span><span class="nx">dx</span> <span class="o">-=</span> <span class="nx">v</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">treemap</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">nodes</span> <span class="o">=</span> <span class="nx">stickies</span> <span class="o">||</span> <span class="nx">hierarchy</span><span class="p">(</span><span class="nx">d</span><span class="p">),</span> <span class="nx">root</span> <span class="o">=</span> <span class="nx">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
      <span class="nx">root</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">root</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">root</span><span class="p">.</span><span class="nx">dx</span> <span class="o">=</span> <span class="nx">size</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
      <span class="nx">root</span><span class="p">.</span><span class="nx">dy</span> <span class="o">=</span> <span class="nx">size</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">stickies</span><span class="p">)</span> <span class="nx">hierarchy</span><span class="p">.</span><span class="nx">revalue</span><span class="p">(</span><span class="nx">root</span><span class="p">);</span>
      <span class="nx">scale</span><span class="p">([</span> <span class="nx">root</span> <span class="p">],</span> <span class="nx">root</span><span class="p">.</span><span class="nx">dx</span> <span class="o">*</span> <span class="nx">root</span><span class="p">.</span><span class="nx">dy</span> <span class="o">/</span> <span class="nx">root</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
      <span class="p">(</span><span class="nx">stickies</span> <span class="o">?</span> <span class="nx">stickify</span> <span class="o">:</span> <span class="nx">squarify</span><span class="p">)(</span><span class="nx">root</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">sticky</span><span class="p">)</span> <span class="nx">stickies</span> <span class="o">=</span> <span class="nx">nodes</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">nodes</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">treemap</span><span class="p">.</span><span class="nx">size</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">size</span><span class="p">;</span>
      <span class="nx">size</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">treemap</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">treemap</span><span class="p">.</span><span class="nx">padding</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">padding</span><span class="p">;</span>
      <span class="kd">function</span> <span class="nx">padFunction</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">p</span> <span class="o">=</span> <span class="nx">x</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">treemap</span><span class="p">,</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">node</span><span class="p">.</span><span class="nx">depth</span><span class="p">);</span>
        <span class="k">return</span> <span class="nx">p</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">d3_layout_treemapPadNull</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="o">:</span> <span class="nx">d3_layout_treemapPad</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="k">typeof</span> <span class="nx">p</span> <span class="o">===</span> <span class="s2">&quot;number&quot;</span> <span class="o">?</span> <span class="p">[</span> <span class="nx">p</span><span class="p">,</span> <span class="nx">p</span><span class="p">,</span> <span class="nx">p</span><span class="p">,</span> <span class="nx">p</span> <span class="p">]</span> <span class="o">:</span> <span class="nx">p</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="kd">function</span> <span class="nx">padConstant</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">d3_layout_treemapPad</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">x</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="kd">var</span> <span class="nx">type</span><span class="p">;</span>
      <span class="nx">pad</span> <span class="o">=</span> <span class="p">(</span><span class="nx">padding</span> <span class="o">=</span> <span class="nx">x</span><span class="p">)</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">d3_layout_treemapPadNull</span> <span class="o">:</span> <span class="p">(</span><span class="nx">type</span> <span class="o">=</span> <span class="k">typeof</span> <span class="nx">x</span><span class="p">)</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">?</span> <span class="nx">padFunction</span> <span class="o">:</span> <span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;number&quot;</span> <span class="o">?</span> <span class="p">(</span><span class="nx">x</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">x</span> <span class="p">],</span> 
      <span class="nx">padConstant</span><span class="p">)</span> <span class="o">:</span> <span class="nx">padConstant</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">treemap</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">treemap</span><span class="p">.</span><span class="nx">round</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">round</span> <span class="o">!=</span> <span class="nb">Number</span><span class="p">;</span>
      <span class="nx">round</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">?</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span> <span class="o">:</span> <span class="nb">Number</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">treemap</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">treemap</span><span class="p">.</span><span class="nx">sticky</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">sticky</span><span class="p">;</span>
      <span class="nx">sticky</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="nx">stickies</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">treemap</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">treemap</span><span class="p">.</span><span class="nx">ratio</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">ratio</span><span class="p">;</span>
      <span class="nx">ratio</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">treemap</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">treemap</span><span class="p">.</span><span class="nx">mode</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">mode</span><span class="p">;</span>
      <span class="nx">mode</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">treemap</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">d3_layout_hierarchyRebind</span><span class="p">(</span><span class="nx">treemap</span><span class="p">,</span> <span class="nx">hierarchy</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_layout_treemapPadNull</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">x</span><span class="o">:</span> <span class="nx">node</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
      <span class="nx">y</span><span class="o">:</span> <span class="nx">node</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span>
      <span class="nx">dx</span><span class="o">:</span> <span class="nx">node</span><span class="p">.</span><span class="nx">dx</span><span class="p">,</span>
      <span class="nx">dy</span><span class="o">:</span> <span class="nx">node</span><span class="p">.</span><span class="nx">dy</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_layout_treemapPad</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">padding</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">x</span> <span class="o">+</span> <span class="nx">padding</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">padding</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">dx</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">dx</span> <span class="o">-</span> <span class="nx">padding</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">padding</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="nx">dy</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">dy</span> <span class="o">-</span> <span class="nx">padding</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">padding</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">dx</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">x</span> <span class="o">+=</span> <span class="nx">dx</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
      <span class="nx">dx</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">dy</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">y</span> <span class="o">+=</span> <span class="nx">dy</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
      <span class="nx">dy</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="nx">x</span><span class="o">:</span> <span class="nx">x</span><span class="p">,</span>
      <span class="nx">y</span><span class="o">:</span> <span class="nx">y</span><span class="p">,</span>
      <span class="nx">dx</span><span class="o">:</span> <span class="nx">dx</span><span class="p">,</span>
      <span class="nx">dy</span><span class="o">:</span> <span class="nx">dy</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">random</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">normal</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="err">µ</span><span class="p">,</span> <span class="err">σ</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">n</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="err">σ</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">n</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="err">µ</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="k">return</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">r</span><span class="p">;</span>
        <span class="k">do</span> <span class="p">{</span>
          <span class="nx">x</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
          <span class="nx">y</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">()</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
          <span class="nx">r</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">y</span> <span class="o">*</span> <span class="nx">y</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="o">!</span><span class="nx">r</span> <span class="o">||</span> <span class="nx">r</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">);</span>
        <span class="k">return</span> <span class="err">µ</span> <span class="o">+</span> <span class="err">σ</span> <span class="o">*</span> <span class="nx">x</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="o">/</span> <span class="nx">r</span><span class="p">);</span>
      <span class="p">};</span>
    <span class="p">},</span>
    <span class="nx">logNormal</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">random</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">random</span><span class="p">.</span><span class="nx">normal</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">d3</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
      <span class="k">return</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">exp</span><span class="p">(</span><span class="nx">random</span><span class="p">());</span>
      <span class="p">};</span>
    <span class="p">},</span>
    <span class="nx">bates</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">m</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">random</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">random</span><span class="p">.</span><span class="nx">irwinHall</span><span class="p">(</span><span class="nx">m</span><span class="p">);</span>
      <span class="k">return</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">random</span><span class="p">()</span> <span class="o">/</span> <span class="nx">m</span><span class="p">;</span>
      <span class="p">};</span>
    <span class="p">},</span>
    <span class="nx">irwinHall</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">m</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="nx">s</span> <span class="o">+=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">random</span><span class="p">();</span>
        <span class="k">return</span> <span class="nx">s</span><span class="p">;</span>
      <span class="p">};</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">scale</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="kd">function</span> <span class="nx">d3_scaleExtent</span><span class="p">(</span><span class="nx">domain</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">start</span> <span class="o">=</span> <span class="nx">domain</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">stop</span> <span class="o">=</span> <span class="nx">domain</span><span class="p">[</span><span class="nx">domain</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
    <span class="k">return</span> <span class="nx">start</span> <span class="o">&lt;</span> <span class="nx">stop</span> <span class="o">?</span> <span class="p">[</span> <span class="nx">start</span><span class="p">,</span> <span class="nx">stop</span> <span class="p">]</span> <span class="o">:</span> <span class="p">[</span> <span class="nx">stop</span><span class="p">,</span> <span class="nx">start</span> <span class="p">];</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_scaleRange</span><span class="p">(</span><span class="nx">scale</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">scale</span><span class="p">.</span><span class="nx">rangeExtent</span> <span class="o">?</span> <span class="nx">scale</span><span class="p">.</span><span class="nx">rangeExtent</span><span class="p">()</span> <span class="o">:</span> <span class="nx">d3_scaleExtent</span><span class="p">(</span><span class="nx">scale</span><span class="p">.</span><span class="nx">range</span><span class="p">());</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_scale_bilinear</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">range</span><span class="p">,</span> <span class="nx">uninterpolate</span><span class="p">,</span> <span class="nx">interpolate</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">u</span> <span class="o">=</span> <span class="nx">uninterpolate</span><span class="p">(</span><span class="nx">domain</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">domain</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">interpolate</span><span class="p">(</span><span class="nx">range</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">range</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">i</span><span class="p">(</span><span class="nx">u</span><span class="p">(</span><span class="nx">x</span><span class="p">));</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_scale_nice</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">nice</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">i0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">i1</span> <span class="o">=</span> <span class="nx">domain</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">x0</span> <span class="o">=</span> <span class="nx">domain</span><span class="p">[</span><span class="nx">i0</span><span class="p">],</span> <span class="nx">x1</span> <span class="o">=</span> <span class="nx">domain</span><span class="p">[</span><span class="nx">i1</span><span class="p">],</span> <span class="nx">dx</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">x1</span> <span class="o">&lt;</span> <span class="nx">x0</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">dx</span> <span class="o">=</span> <span class="nx">i0</span><span class="p">,</span> <span class="nx">i0</span> <span class="o">=</span> <span class="nx">i1</span><span class="p">,</span> <span class="nx">i1</span> <span class="o">=</span> <span class="nx">dx</span><span class="p">;</span>
      <span class="nx">dx</span> <span class="o">=</span> <span class="nx">x0</span><span class="p">,</span> <span class="nx">x0</span> <span class="o">=</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">x1</span> <span class="o">=</span> <span class="nx">dx</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">domain</span><span class="p">[</span><span class="nx">i0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">nice</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">x0</span><span class="p">);</span>
    <span class="nx">domain</span><span class="p">[</span><span class="nx">i1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">nice</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="nx">x1</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">domain</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_scale_niceStep</span><span class="p">(</span><span class="nx">step</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">step</span> <span class="o">?</span> <span class="p">{</span>
      <span class="nx">floor</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">x</span> <span class="o">/</span> <span class="nx">step</span><span class="p">)</span> <span class="o">*</span> <span class="nx">step</span><span class="p">;</span>
      <span class="p">},</span>
      <span class="nx">ceil</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="nx">x</span> <span class="o">/</span> <span class="nx">step</span><span class="p">)</span> <span class="o">*</span> <span class="nx">step</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="o">:</span> <span class="nx">d3_scale_niceIdentity</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">d3_scale_niceIdentity</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">floor</span><span class="o">:</span> <span class="nx">d3_identity</span><span class="p">,</span>
    <span class="nx">ceil</span><span class="o">:</span> <span class="nx">d3_identity</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_scale_polylinear</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">range</span><span class="p">,</span> <span class="nx">uninterpolate</span><span class="p">,</span> <span class="nx">interpolate</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">u</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">i</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">k</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">domain</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">range</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">domain</span><span class="p">[</span><span class="nx">k</span><span class="p">]</span> <span class="o">&lt;</span> <span class="nx">domain</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="p">{</span>
      <span class="nx">domain</span> <span class="o">=</span> <span class="nx">domain</span><span class="p">.</span><span class="nx">slice</span><span class="p">().</span><span class="nx">reverse</span><span class="p">();</span>
      <span class="nx">range</span> <span class="o">=</span> <span class="nx">range</span><span class="p">.</span><span class="nx">slice</span><span class="p">().</span><span class="nx">reverse</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">j</span> <span class="o">&lt;=</span> <span class="nx">k</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">u</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">uninterpolate</span><span class="p">(</span><span class="nx">domain</span><span class="p">[</span><span class="nx">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">],</span> <span class="nx">domain</span><span class="p">[</span><span class="nx">j</span><span class="p">]));</span>
      <span class="nx">i</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">interpolate</span><span class="p">(</span><span class="nx">range</span><span class="p">[</span><span class="nx">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">],</span> <span class="nx">range</span><span class="p">[</span><span class="nx">j</span><span class="p">]));</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">bisect</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">k</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">i</span><span class="p">[</span><span class="nx">j</span><span class="p">](</span><span class="nx">u</span><span class="p">[</span><span class="nx">j</span><span class="p">](</span><span class="nx">x</span><span class="p">));</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">linear</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_scale_linear</span><span class="p">([</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span> <span class="p">],</span> <span class="p">[</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span> <span class="p">],</span> <span class="nx">d3_interpolate</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_scale_linear</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">range</span><span class="p">,</span> <span class="nx">interpolate</span><span class="p">,</span> <span class="nx">clamp</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">output</span><span class="p">,</span> <span class="nx">input</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">rescale</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">linear</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">domain</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">range</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="o">?</span> <span class="nx">d3_scale_polylinear</span> <span class="o">:</span> <span class="nx">d3_scale_bilinear</span><span class="p">,</span> <span class="nx">uninterpolate</span> <span class="o">=</span> <span class="nx">clamp</span> <span class="o">?</span> <span class="nx">d3_uninterpolateClamp</span> <span class="o">:</span> <span class="nx">d3_uninterpolateNumber</span><span class="p">;</span>
      <span class="nx">output</span> <span class="o">=</span> <span class="nx">linear</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">range</span><span class="p">,</span> <span class="nx">uninterpolate</span><span class="p">,</span> <span class="nx">interpolate</span><span class="p">);</span>
      <span class="nx">input</span> <span class="o">=</span> <span class="nx">linear</span><span class="p">(</span><span class="nx">range</span><span class="p">,</span> <span class="nx">domain</span><span class="p">,</span> <span class="nx">uninterpolate</span><span class="p">,</span> <span class="nx">d3_interpolate</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">scale</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">scale</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">output</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">invert</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">input</span><span class="p">(</span><span class="nx">y</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">domain</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">domain</span><span class="p">;</span>
      <span class="nx">domain</span> <span class="o">=</span> <span class="nx">x</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nb">Number</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">rescale</span><span class="p">();</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">range</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">range</span><span class="p">;</span>
      <span class="nx">range</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">rescale</span><span class="p">();</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">rangeRound</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">scale</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">x</span><span class="p">).</span><span class="nx">interpolate</span><span class="p">(</span><span class="nx">d3_interpolateRound</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">clamp</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">clamp</span><span class="p">;</span>
      <span class="nx">clamp</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">rescale</span><span class="p">();</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">interpolate</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">interpolate</span><span class="p">;</span>
      <span class="nx">interpolate</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">rescale</span><span class="p">();</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">ticks</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">m</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_scale_linearTicks</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">m</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">tickFormat</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">m</span><span class="p">,</span> <span class="nx">format</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_scale_linearTickFormat</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">m</span><span class="p">,</span> <span class="nx">format</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">nice</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">m</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">d3_scale_linearNice</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">m</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">rescale</span><span class="p">();</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">copy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_scale_linear</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">range</span><span class="p">,</span> <span class="nx">interpolate</span><span class="p">,</span> <span class="nx">clamp</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">rescale</span><span class="p">();</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_scale_linearRebind</span><span class="p">(</span><span class="nx">scale</span><span class="p">,</span> <span class="nx">linear</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">rebind</span><span class="p">(</span><span class="nx">scale</span><span class="p">,</span> <span class="nx">linear</span><span class="p">,</span> <span class="s2">&quot;range&quot;</span><span class="p">,</span> <span class="s2">&quot;rangeRound&quot;</span><span class="p">,</span> <span class="s2">&quot;interpolate&quot;</span><span class="p">,</span> <span class="s2">&quot;clamp&quot;</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_scale_linearNice</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">m</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_scale_nice</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">d3_scale_niceStep</span><span class="p">(</span><span class="nx">d3_scale_linearTickRange</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">m</span><span class="p">)[</span><span class="mi">2</span><span class="p">]));</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_scale_linearTickRange</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">m</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">m</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="nx">m</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">extent</span> <span class="o">=</span> <span class="nx">d3_scaleExtent</span><span class="p">(</span><span class="nx">domain</span><span class="p">),</span> <span class="nx">span</span> <span class="o">=</span> <span class="nx">extent</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">extent</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">step</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">span</span> <span class="o">/</span> <span class="nx">m</span><span class="p">)</span> <span class="o">/</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">LN10</span><span class="p">)),</span> <span class="nx">err</span> <span class="o">=</span> <span class="nx">m</span> <span class="o">/</span> <span class="nx">span</span> <span class="o">*</span> <span class="nx">step</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span> <span class="o">&lt;=</span> <span class="p">.</span><span class="mi">15</span><span class="p">)</span> <span class="nx">step</span> <span class="o">*=</span> <span class="mi">10</span><span class="p">;</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">err</span> <span class="o">&lt;=</span> <span class="p">.</span><span class="mi">35</span><span class="p">)</span> <span class="nx">step</span> <span class="o">*=</span> <span class="mi">5</span><span class="p">;</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">err</span> <span class="o">&lt;=</span> <span class="p">.</span><span class="mi">75</span><span class="p">)</span> <span class="nx">step</span> <span class="o">*=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="nx">extent</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="nx">extent</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="nx">step</span><span class="p">)</span> <span class="o">*</span> <span class="nx">step</span><span class="p">;</span>
    <span class="nx">extent</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">extent</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="nx">step</span><span class="p">)</span> <span class="o">*</span> <span class="nx">step</span> <span class="o">+</span> <span class="nx">step</span> <span class="o">*</span> <span class="p">.</span><span class="mi">5</span><span class="p">;</span>
    <span class="nx">extent</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nx">step</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">extent</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_scale_linearTicks</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">m</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">d3</span><span class="p">,</span> <span class="nx">d3_scale_linearTickRange</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">m</span><span class="p">));</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_scale_linearTickFormat</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">m</span><span class="p">,</span> <span class="nx">format</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">range</span> <span class="o">=</span> <span class="nx">d3_scale_linearTickRange</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">m</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">format</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">match</span> <span class="o">=</span> <span class="nx">d3_format_re</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">format</span><span class="p">);</span>
      <span class="nx">match</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">match</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">===</span> <span class="s2">&quot;s&quot;</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">prefix</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">formatPrefix</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">abs</span><span class="p">(</span><span class="nx">range</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">range</span><span class="p">[</span><span class="mi">1</span><span class="p">])));</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">match</span><span class="p">[</span><span class="mi">7</span><span class="p">])</span> <span class="nx">match</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">d3_scale_linearPrecision</span><span class="p">(</span><span class="nx">prefix</span><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="nx">range</span><span class="p">[</span><span class="mi">2</span><span class="p">]));</span>
        <span class="nx">match</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;f&quot;</span><span class="p">;</span>
        <span class="nx">format</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="nx">match</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">));</span>
        <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">format</span><span class="p">(</span><span class="nx">prefix</span><span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="nx">d</span><span class="p">))</span> <span class="o">+</span> <span class="nx">prefix</span><span class="p">.</span><span class="nx">symbol</span><span class="p">;</span>
        <span class="p">};</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">match</span><span class="p">[</span><span class="mi">7</span><span class="p">])</span> <span class="nx">match</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;.&quot;</span> <span class="o">+</span> <span class="nx">d3_scale_linearFormatPrecision</span><span class="p">(</span><span class="nx">match</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span> <span class="nx">range</span><span class="p">);</span>
      <span class="nx">format</span> <span class="o">=</span> <span class="nx">match</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">format</span> <span class="o">=</span> <span class="s2">&quot;,.&quot;</span> <span class="o">+</span> <span class="nx">d3_scale_linearPrecision</span><span class="p">(</span><span class="nx">range</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;f&quot;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="nx">format</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">d3_scale_linearFormatSignificant</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">s</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">g</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">p</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">r</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">e</span><span class="o">:</span> <span class="mi">1</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_scale_linearPrecision</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="o">-</span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">/</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">LN10</span> <span class="o">+</span> <span class="p">.</span><span class="mi">01</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_scale_linearFormatPrecision</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">range</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">p</span> <span class="o">=</span> <span class="nx">d3_scale_linearPrecision</span><span class="p">(</span><span class="nx">range</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
    <span class="k">return</span> <span class="nx">type</span> <span class="k">in</span> <span class="nx">d3_scale_linearFormatSignificant</span> <span class="o">?</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">p</span> <span class="o">-</span> <span class="nx">d3_scale_linearPrecision</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">abs</span><span class="p">(</span><span class="nx">range</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nx">abs</span><span class="p">(</span><span class="nx">range</span><span class="p">[</span><span class="mi">1</span><span class="p">]))))</span> <span class="o">+</span> <span class="o">+</span><span class="p">(</span><span class="nx">type</span> <span class="o">!==</span> <span class="s2">&quot;e&quot;</span><span class="p">)</span> <span class="o">:</span> <span class="nx">p</span> <span class="o">-</span> <span class="p">(</span><span class="nx">type</span> <span class="o">===</span> <span class="s2">&quot;%&quot;</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">log</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_scale_log</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">linear</span><span class="p">().</span><span class="nx">domain</span><span class="p">([</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span> <span class="p">]),</span> <span class="mi">10</span><span class="p">,</span> <span class="kc">true</span><span class="p">,</span> <span class="p">[</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">10</span> <span class="p">]);</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_scale_log</span><span class="p">(</span><span class="nx">linear</span><span class="p">,</span> <span class="nx">base</span><span class="p">,</span> <span class="nx">positive</span><span class="p">,</span> <span class="nx">domain</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">function</span> <span class="nx">log</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span><span class="nx">positive</span> <span class="o">?</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">x</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="nx">x</span><span class="p">)</span> <span class="o">:</span> <span class="o">-</span><span class="nb">Math</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">x</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="o">-</span><span class="nx">x</span><span class="p">))</span> <span class="o">/</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">base</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">pow</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">positive</span> <span class="o">?</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nx">base</span><span class="p">,</span> <span class="nx">x</span><span class="p">)</span> <span class="o">:</span> <span class="o">-</span><span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nx">base</span><span class="p">,</span> <span class="o">-</span><span class="nx">x</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">scale</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">linear</span><span class="p">(</span><span class="nx">log</span><span class="p">(</span><span class="nx">x</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">invert</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">pow</span><span class="p">(</span><span class="nx">linear</span><span class="p">.</span><span class="nx">invert</span><span class="p">(</span><span class="nx">x</span><span class="p">));</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">domain</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">domain</span><span class="p">;</span>
      <span class="nx">positive</span> <span class="o">=</span> <span class="nx">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">linear</span><span class="p">.</span><span class="nx">domain</span><span class="p">((</span><span class="nx">domain</span> <span class="o">=</span> <span class="nx">x</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nb">Number</span><span class="p">)).</span><span class="nx">map</span><span class="p">(</span><span class="nx">log</span><span class="p">));</span>
      <span class="k">return</span> <span class="nx">scale</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">base</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">base</span><span class="p">;</span>
      <span class="nx">base</span> <span class="o">=</span> <span class="o">+</span><span class="nx">_</span><span class="p">;</span>
      <span class="nx">linear</span><span class="p">.</span><span class="nx">domain</span><span class="p">(</span><span class="nx">domain</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">log</span><span class="p">));</span>
      <span class="k">return</span> <span class="nx">scale</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">nice</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">niced</span> <span class="o">=</span> <span class="nx">d3_scale_nice</span><span class="p">(</span><span class="nx">domain</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">log</span><span class="p">),</span> <span class="nx">positive</span> <span class="o">?</span> <span class="nb">Math</span> <span class="o">:</span> <span class="nx">d3_scale_logNiceNegative</span><span class="p">);</span>
      <span class="nx">linear</span><span class="p">.</span><span class="nx">domain</span><span class="p">(</span><span class="nx">niced</span><span class="p">);</span>
      <span class="nx">domain</span> <span class="o">=</span> <span class="nx">niced</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">pow</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">scale</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">ticks</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">extent</span> <span class="o">=</span> <span class="nx">d3_scaleExtent</span><span class="p">(</span><span class="nx">domain</span><span class="p">),</span> <span class="nx">ticks</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">u</span> <span class="o">=</span> <span class="nx">extent</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">v</span> <span class="o">=</span> <span class="nx">extent</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">i</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">log</span><span class="p">(</span><span class="nx">u</span><span class="p">)),</span> <span class="nx">j</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="nx">log</span><span class="p">(</span><span class="nx">v</span><span class="p">)),</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">base</span> <span class="o">%</span> <span class="mi">1</span> <span class="o">?</span> <span class="mi">2</span> <span class="o">:</span> <span class="nx">base</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nb">isFinite</span><span class="p">(</span><span class="nx">j</span> <span class="o">-</span> <span class="nx">i</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">positive</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">for</span> <span class="p">(;</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">j</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">k</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">k</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">k</span><span class="o">++</span><span class="p">)</span> <span class="nx">ticks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">pow</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="o">*</span> <span class="nx">k</span><span class="p">);</span>
          <span class="nx">ticks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">pow</span><span class="p">(</span><span class="nx">i</span><span class="p">));</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">ticks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">pow</span><span class="p">(</span><span class="nx">i</span><span class="p">));</span>
          <span class="k">for</span> <span class="p">(;</span><span class="nx">i</span><span class="o">++</span> <span class="o">&lt;</span> <span class="nx">j</span><span class="p">;</span> <span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">k</span> <span class="o">=</span> <span class="nx">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="nx">k</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">k</span><span class="o">--</span><span class="p">)</span> <span class="nx">ticks</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">pow</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="o">*</span> <span class="nx">k</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">ticks</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">&lt;</span> <span class="nx">u</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">j</span> <span class="o">=</span> <span class="nx">ticks</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">ticks</span><span class="p">[</span><span class="nx">j</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="nx">v</span><span class="p">;</span> <span class="nx">j</span><span class="o">--</span><span class="p">)</span> <span class="p">{}</span>
        <span class="nx">ticks</span> <span class="o">=</span> <span class="nx">ticks</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">ticks</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">tickFormat</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">n</span><span class="p">,</span> <span class="nx">format</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">d3_scale_logFormat</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="nx">format</span> <span class="o">=</span> <span class="nx">d3_scale_logFormat</span><span class="p">;</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">format</span> <span class="o">!==</span> <span class="s2">&quot;function&quot;</span><span class="p">)</span> <span class="nx">format</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="nx">format</span><span class="p">);</span>
      <span class="kd">var</span> <span class="nx">k</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(.</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">/</span> <span class="nx">scale</span><span class="p">.</span><span class="nx">ticks</span><span class="p">().</span><span class="nx">length</span><span class="p">),</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">positive</span> <span class="o">?</span> <span class="p">(</span><span class="nx">e</span> <span class="o">=</span> <span class="mi">1</span><span class="nx">e</span><span class="o">-</span><span class="mi">12</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">)</span> <span class="o">:</span> <span class="p">(</span><span class="nx">e</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="nx">e</span><span class="o">-</span><span class="mi">12</span><span class="p">,</span> 
      <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">),</span> <span class="nx">e</span><span class="p">;</span>
      <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">d</span> <span class="o">/</span> <span class="nx">pow</span><span class="p">(</span><span class="nx">f</span><span class="p">(</span><span class="nx">log</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="o">+</span> <span class="nx">e</span><span class="p">))</span> <span class="o">&lt;=</span> <span class="nx">k</span> <span class="o">?</span> <span class="nx">format</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
      <span class="p">};</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">copy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_scale_log</span><span class="p">(</span><span class="nx">linear</span><span class="p">.</span><span class="nx">copy</span><span class="p">(),</span> <span class="nx">base</span><span class="p">,</span> <span class="nx">positive</span><span class="p">,</span> <span class="nx">domain</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">d3_scale_linearRebind</span><span class="p">(</span><span class="nx">scale</span><span class="p">,</span> <span class="nx">linear</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">d3_scale_logFormat</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">format</span><span class="p">(</span><span class="s2">&quot;.0e&quot;</span><span class="p">),</span> <span class="nx">d3_scale_logNiceNegative</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">floor</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="o">-</span><span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="o">-</span><span class="nx">x</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">ceil</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="o">-</span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="o">-</span><span class="nx">x</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">pow</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_scale_pow</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">linear</span><span class="p">(),</span> <span class="mi">1</span><span class="p">,</span> <span class="p">[</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span> <span class="p">]);</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_scale_pow</span><span class="p">(</span><span class="nx">linear</span><span class="p">,</span> <span class="nx">exponent</span><span class="p">,</span> <span class="nx">domain</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">powp</span> <span class="o">=</span> <span class="nx">d3_scale_powPow</span><span class="p">(</span><span class="nx">exponent</span><span class="p">),</span> <span class="nx">powb</span> <span class="o">=</span> <span class="nx">d3_scale_powPow</span><span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="nx">exponent</span><span class="p">);</span>
    <span class="kd">function</span> <span class="nx">scale</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">linear</span><span class="p">(</span><span class="nx">powp</span><span class="p">(</span><span class="nx">x</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">invert</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">powb</span><span class="p">(</span><span class="nx">linear</span><span class="p">.</span><span class="nx">invert</span><span class="p">(</span><span class="nx">x</span><span class="p">));</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">domain</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">domain</span><span class="p">;</span>
      <span class="nx">linear</span><span class="p">.</span><span class="nx">domain</span><span class="p">((</span><span class="nx">domain</span> <span class="o">=</span> <span class="nx">x</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nb">Number</span><span class="p">)).</span><span class="nx">map</span><span class="p">(</span><span class="nx">powp</span><span class="p">));</span>
      <span class="k">return</span> <span class="nx">scale</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">ticks</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">m</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_scale_linearTicks</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">m</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">tickFormat</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">m</span><span class="p">,</span> <span class="nx">format</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_scale_linearTickFormat</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">m</span><span class="p">,</span> <span class="nx">format</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">nice</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">m</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">scale</span><span class="p">.</span><span class="nx">domain</span><span class="p">(</span><span class="nx">d3_scale_linearNice</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">m</span><span class="p">));</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">exponent</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">exponent</span><span class="p">;</span>
      <span class="nx">powp</span> <span class="o">=</span> <span class="nx">d3_scale_powPow</span><span class="p">(</span><span class="nx">exponent</span> <span class="o">=</span> <span class="nx">x</span><span class="p">);</span>
      <span class="nx">powb</span> <span class="o">=</span> <span class="nx">d3_scale_powPow</span><span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="nx">exponent</span><span class="p">);</span>
      <span class="nx">linear</span><span class="p">.</span><span class="nx">domain</span><span class="p">(</span><span class="nx">domain</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">powp</span><span class="p">));</span>
      <span class="k">return</span> <span class="nx">scale</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">copy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_scale_pow</span><span class="p">(</span><span class="nx">linear</span><span class="p">.</span><span class="nx">copy</span><span class="p">(),</span> <span class="nx">exponent</span><span class="p">,</span> <span class="nx">domain</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">d3_scale_linearRebind</span><span class="p">(</span><span class="nx">scale</span><span class="p">,</span> <span class="nx">linear</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_scale_powPow</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">x</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="o">-</span><span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="o">-</span><span class="nx">x</span><span class="p">,</span> <span class="nx">e</span><span class="p">)</span> <span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">pow</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">e</span><span class="p">);</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">sqrt</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">pow</span><span class="p">().</span><span class="nx">exponent</span><span class="p">(.</span><span class="mi">5</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">ordinal</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_scale_ordinal</span><span class="p">([],</span> <span class="p">{</span>
      <span class="nx">t</span><span class="o">:</span> <span class="s2">&quot;range&quot;</span><span class="p">,</span>
      <span class="nx">a</span><span class="o">:</span> <span class="p">[</span> <span class="p">[]</span> <span class="p">]</span>
    <span class="p">});</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_scale_ordinal</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">ranger</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">range</span><span class="p">,</span> <span class="nx">rangeBand</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">scale</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">range</span><span class="p">[((</span><span class="nx">index</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="nx">ranger</span><span class="p">.</span><span class="nx">t</span> <span class="o">===</span> <span class="s2">&quot;range&quot;</span> <span class="o">?</span> <span class="nx">index</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">domain</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">x</span><span class="p">))</span> <span class="o">:</span> <span class="kc">NaN</span><span class="p">))</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="nx">range</span><span class="p">.</span><span class="nx">length</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">steps</span><span class="p">(</span><span class="nx">start</span><span class="p">,</span> <span class="nx">step</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">domain</span><span class="p">.</span><span class="nx">length</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">start</span> <span class="o">+</span> <span class="nx">step</span> <span class="o">*</span> <span class="nx">i</span><span class="p">;</span>
      <span class="p">});</span>
    <span class="p">}</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">domain</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">domain</span><span class="p">;</span>
      <span class="nx">domain</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="nx">index</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">d3_Map</span><span class="p">();</span>
      <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">x</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">xi</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">index</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">xi</span> <span class="o">=</span> <span class="nx">x</span><span class="p">[</span><span class="nx">i</span><span class="p">]))</span> <span class="nx">index</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">xi</span><span class="p">,</span> <span class="nx">domain</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">xi</span><span class="p">));</span>
      <span class="k">return</span> <span class="nx">scale</span><span class="p">[</span><span class="nx">ranger</span><span class="p">.</span><span class="nx">t</span><span class="p">].</span><span class="nx">apply</span><span class="p">(</span><span class="nx">scale</span><span class="p">,</span> <span class="nx">ranger</span><span class="p">.</span><span class="nx">a</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">range</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">range</span><span class="p">;</span>
      <span class="nx">range</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="nx">rangeBand</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">ranger</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">t</span><span class="o">:</span> <span class="s2">&quot;range&quot;</span><span class="p">,</span>
        <span class="nx">a</span><span class="o">:</span> <span class="nx">arguments</span>
      <span class="p">};</span>
      <span class="k">return</span> <span class="nx">scale</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">rangePoints</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">padding</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="nx">padding</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">start</span> <span class="o">=</span> <span class="nx">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">stop</span> <span class="o">=</span> <span class="nx">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">step</span> <span class="o">=</span> <span class="p">(</span><span class="nx">stop</span> <span class="o">-</span> <span class="nx">start</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nx">domain</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="nx">padding</span><span class="p">);</span>
      <span class="nx">range</span> <span class="o">=</span> <span class="nx">steps</span><span class="p">(</span><span class="nx">domain</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="o">?</span> <span class="p">(</span><span class="nx">start</span> <span class="o">+</span> <span class="nx">stop</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">:</span> <span class="nx">start</span> <span class="o">+</span> <span class="nx">step</span> <span class="o">*</span> <span class="nx">padding</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">step</span><span class="p">);</span>
      <span class="nx">rangeBand</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="nx">ranger</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">t</span><span class="o">:</span> <span class="s2">&quot;rangePoints&quot;</span><span class="p">,</span>
        <span class="nx">a</span><span class="o">:</span> <span class="nx">arguments</span>
      <span class="p">};</span>
      <span class="k">return</span> <span class="nx">scale</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">rangeBands</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">padding</span><span class="p">,</span> <span class="nx">outerPadding</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="nx">padding</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="nx">outerPadding</span> <span class="o">=</span> <span class="nx">padding</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">reverse</span> <span class="o">=</span> <span class="nx">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="nx">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">start</span> <span class="o">=</span> <span class="nx">x</span><span class="p">[</span><span class="nx">reverse</span> <span class="o">-</span> <span class="mi">0</span><span class="p">],</span> <span class="nx">stop</span> <span class="o">=</span> <span class="nx">x</span><span class="p">[</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">reverse</span><span class="p">],</span> <span class="nx">step</span> <span class="o">=</span> <span class="p">(</span><span class="nx">stop</span> <span class="o">-</span> <span class="nx">start</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nx">domain</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="nx">padding</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="nx">outerPadding</span><span class="p">);</span>
      <span class="nx">range</span> <span class="o">=</span> <span class="nx">steps</span><span class="p">(</span><span class="nx">start</span> <span class="o">+</span> <span class="nx">step</span> <span class="o">*</span> <span class="nx">outerPadding</span><span class="p">,</span> <span class="nx">step</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">reverse</span><span class="p">)</span> <span class="nx">range</span><span class="p">.</span><span class="nx">reverse</span><span class="p">();</span>
      <span class="nx">rangeBand</span> <span class="o">=</span> <span class="nx">step</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">padding</span><span class="p">);</span>
      <span class="nx">ranger</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">t</span><span class="o">:</span> <span class="s2">&quot;rangeBands&quot;</span><span class="p">,</span>
        <span class="nx">a</span><span class="o">:</span> <span class="nx">arguments</span>
      <span class="p">};</span>
      <span class="k">return</span> <span class="nx">scale</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">rangeRoundBands</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">padding</span><span class="p">,</span> <span class="nx">outerPadding</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="nx">padding</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="nx">outerPadding</span> <span class="o">=</span> <span class="nx">padding</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">reverse</span> <span class="o">=</span> <span class="nx">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="nx">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">start</span> <span class="o">=</span> <span class="nx">x</span><span class="p">[</span><span class="nx">reverse</span> <span class="o">-</span> <span class="mi">0</span><span class="p">],</span> <span class="nx">stop</span> <span class="o">=</span> <span class="nx">x</span><span class="p">[</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">reverse</span><span class="p">],</span> <span class="nx">step</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">((</span><span class="nx">stop</span> <span class="o">-</span> <span class="nx">start</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nx">domain</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="nx">padding</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="nx">outerPadding</span><span class="p">)),</span> <span class="nx">error</span> <span class="o">=</span> <span class="nx">stop</span> <span class="o">-</span> <span class="nx">start</span> <span class="o">-</span> <span class="p">(</span><span class="nx">domain</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="nx">padding</span><span class="p">)</span> <span class="o">*</span> <span class="nx">step</span><span class="p">;</span>
      <span class="nx">range</span> <span class="o">=</span> <span class="nx">steps</span><span class="p">(</span><span class="nx">start</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">error</span> <span class="o">/</span> <span class="mi">2</span><span class="p">),</span> <span class="nx">step</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">reverse</span><span class="p">)</span> <span class="nx">range</span><span class="p">.</span><span class="nx">reverse</span><span class="p">();</span>
      <span class="nx">rangeBand</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">round</span><span class="p">(</span><span class="nx">step</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">padding</span><span class="p">));</span>
      <span class="nx">ranger</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">t</span><span class="o">:</span> <span class="s2">&quot;rangeRoundBands&quot;</span><span class="p">,</span>
        <span class="nx">a</span><span class="o">:</span> <span class="nx">arguments</span>
      <span class="p">};</span>
      <span class="k">return</span> <span class="nx">scale</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">rangeBand</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">rangeBand</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">rangeExtent</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_scaleExtent</span><span class="p">(</span><span class="nx">ranger</span><span class="p">.</span><span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">copy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_scale_ordinal</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">ranger</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">scale</span><span class="p">.</span><span class="nx">domain</span><span class="p">(</span><span class="nx">domain</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">category10</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">ordinal</span><span class="p">().</span><span class="nx">range</span><span class="p">(</span><span class="nx">d3_category10</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">category20</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">ordinal</span><span class="p">().</span><span class="nx">range</span><span class="p">(</span><span class="nx">d3_category20</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">category20b</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">ordinal</span><span class="p">().</span><span class="nx">range</span><span class="p">(</span><span class="nx">d3_category20b</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">category20c</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">ordinal</span><span class="p">().</span><span class="nx">range</span><span class="p">(</span><span class="nx">d3_category20c</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">d3_category10</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">2062260</span><span class="p">,</span> <span class="mi">16744206</span><span class="p">,</span> <span class="mi">2924588</span><span class="p">,</span> <span class="mi">14034728</span><span class="p">,</span> <span class="mi">9725885</span><span class="p">,</span> <span class="mi">9197131</span><span class="p">,</span> <span class="mi">14907330</span><span class="p">,</span> <span class="mi">8355711</span><span class="p">,</span> <span class="mi">12369186</span><span class="p">,</span> <span class="mi">1556175</span> <span class="p">].</span><span class="nx">map</span><span class="p">(</span><span class="nx">d3_rgbString</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">d3_category20</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">2062260</span><span class="p">,</span> <span class="mi">11454440</span><span class="p">,</span> <span class="mi">16744206</span><span class="p">,</span> <span class="mi">16759672</span><span class="p">,</span> <span class="mi">2924588</span><span class="p">,</span> <span class="mi">10018698</span><span class="p">,</span> <span class="mi">14034728</span><span class="p">,</span> <span class="mi">16750742</span><span class="p">,</span> <span class="mi">9725885</span><span class="p">,</span> <span class="mi">12955861</span><span class="p">,</span> <span class="mi">9197131</span><span class="p">,</span> <span class="mi">12885140</span><span class="p">,</span> <span class="mi">14907330</span><span class="p">,</span> <span class="mi">16234194</span><span class="p">,</span> <span class="mi">8355711</span><span class="p">,</span> <span class="mi">13092807</span><span class="p">,</span> <span class="mi">12369186</span><span class="p">,</span> <span class="mi">14408589</span><span class="p">,</span> <span class="mi">1556175</span><span class="p">,</span> <span class="mi">10410725</span> <span class="p">].</span><span class="nx">map</span><span class="p">(</span><span class="nx">d3_rgbString</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">d3_category20b</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">3750777</span><span class="p">,</span> <span class="mi">5395619</span><span class="p">,</span> <span class="mi">7040719</span><span class="p">,</span> <span class="mi">10264286</span><span class="p">,</span> <span class="mi">6519097</span><span class="p">,</span> <span class="mi">9216594</span><span class="p">,</span> <span class="mi">11915115</span><span class="p">,</span> <span class="mi">13556636</span><span class="p">,</span> <span class="mi">9202993</span><span class="p">,</span> <span class="mi">12426809</span><span class="p">,</span> <span class="mi">15186514</span><span class="p">,</span> <span class="mi">15190932</span><span class="p">,</span> <span class="mi">8666169</span><span class="p">,</span> <span class="mi">11356490</span><span class="p">,</span> <span class="mi">14049643</span><span class="p">,</span> <span class="mi">15177372</span><span class="p">,</span> <span class="mi">8077683</span><span class="p">,</span> <span class="mi">10834324</span><span class="p">,</span> <span class="mi">13528509</span><span class="p">,</span> <span class="mi">14589654</span> <span class="p">].</span><span class="nx">map</span><span class="p">(</span><span class="nx">d3_rgbString</span><span class="p">);</span>
  <span class="kd">var</span> <span class="nx">d3_category20c</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">3244733</span><span class="p">,</span> <span class="mi">7057110</span><span class="p">,</span> <span class="mi">10406625</span><span class="p">,</span> <span class="mi">13032431</span><span class="p">,</span> <span class="mi">15095053</span><span class="p">,</span> <span class="mi">16616764</span><span class="p">,</span> <span class="mi">16625259</span><span class="p">,</span> <span class="mi">16634018</span><span class="p">,</span> <span class="mi">3253076</span><span class="p">,</span> <span class="mi">7652470</span><span class="p">,</span> <span class="mi">10607003</span><span class="p">,</span> <span class="mi">13101504</span><span class="p">,</span> <span class="mi">7695281</span><span class="p">,</span> <span class="mi">10394312</span><span class="p">,</span> <span class="mi">12369372</span><span class="p">,</span> <span class="mi">14342891</span><span class="p">,</span> <span class="mi">6513507</span><span class="p">,</span> <span class="mi">9868950</span><span class="p">,</span> <span class="mi">12434877</span><span class="p">,</span> <span class="mi">14277081</span> <span class="p">].</span><span class="nx">map</span><span class="p">(</span><span class="nx">d3_rgbString</span><span class="p">);</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">quantile</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_scale_quantile</span><span class="p">([],</span> <span class="p">[]);</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_scale_quantile</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">range</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">thresholds</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">rescale</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">k</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">q</span> <span class="o">=</span> <span class="nx">range</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
      <span class="nx">thresholds</span> <span class="o">=</span> <span class="p">[];</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">k</span> <span class="o">&lt;</span> <span class="nx">q</span><span class="p">)</span> <span class="nx">thresholds</span><span class="p">[</span><span class="nx">k</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">quantile</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">k</span> <span class="o">/</span> <span class="nx">q</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">scale</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">scale</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">x</span> <span class="o">=</span> <span class="o">+</span><span class="nx">x</span><span class="p">))</span> <span class="k">return</span> <span class="nx">range</span><span class="p">[</span><span class="nx">d3</span><span class="p">.</span><span class="nx">bisect</span><span class="p">(</span><span class="nx">thresholds</span><span class="p">,</span> <span class="nx">x</span><span class="p">)];</span>
    <span class="p">}</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">domain</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">domain</span><span class="p">;</span>
      <span class="nx">domain</span> <span class="o">=</span> <span class="nx">x</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">d3_number</span><span class="p">).</span><span class="nx">sort</span><span class="p">(</span><span class="nx">d3_ascending</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">rescale</span><span class="p">();</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">range</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">range</span><span class="p">;</span>
      <span class="nx">range</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">rescale</span><span class="p">();</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">quantiles</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">thresholds</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">invertExtent</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">y</span> <span class="o">=</span> <span class="nx">range</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">y</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">y</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="p">[</span> <span class="kc">NaN</span><span class="p">,</span> <span class="kc">NaN</span> <span class="p">]</span> <span class="o">:</span> <span class="p">[</span> <span class="nx">y</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="nx">thresholds</span><span class="p">[</span><span class="nx">y</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">:</span> <span class="nx">domain</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y</span> <span class="o">&lt;</span> <span class="nx">thresholds</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">thresholds</span><span class="p">[</span><span class="nx">y</span><span class="p">]</span> <span class="o">:</span> <span class="nx">domain</span><span class="p">[</span><span class="nx">domain</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="p">];</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">copy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_scale_quantile</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">range</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">rescale</span><span class="p">();</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">quantize</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_scale_quantize</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="p">[</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span> <span class="p">]);</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_scale_quantize</span><span class="p">(</span><span class="nx">x0</span><span class="p">,</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">range</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">kx</span><span class="p">,</span> <span class="nx">i</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">scale</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">range</span><span class="p">[</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">kx</span> <span class="o">*</span> <span class="p">(</span><span class="nx">x</span> <span class="o">-</span> <span class="nx">x0</span><span class="p">))))];</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">rescale</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">kx</span> <span class="o">=</span> <span class="nx">range</span><span class="p">.</span><span class="nx">length</span> <span class="o">/</span> <span class="p">(</span><span class="nx">x1</span> <span class="o">-</span> <span class="nx">x0</span><span class="p">);</span>
      <span class="nx">i</span> <span class="o">=</span> <span class="nx">range</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">scale</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">domain</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="p">[</span> <span class="nx">x0</span><span class="p">,</span> <span class="nx">x1</span> <span class="p">];</span>
      <span class="nx">x0</span> <span class="o">=</span> <span class="o">+</span><span class="nx">x</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
      <span class="nx">x1</span> <span class="o">=</span> <span class="o">+</span><span class="nx">x</span><span class="p">[</span><span class="nx">x</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
      <span class="k">return</span> <span class="nx">rescale</span><span class="p">();</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">range</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">range</span><span class="p">;</span>
      <span class="nx">range</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">rescale</span><span class="p">();</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">invertExtent</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">y</span> <span class="o">=</span> <span class="nx">range</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">y</span><span class="p">);</span>
      <span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="kc">NaN</span> <span class="o">:</span> <span class="nx">y</span> <span class="o">/</span> <span class="nx">kx</span> <span class="o">+</span> <span class="nx">x0</span><span class="p">;</span>
      <span class="k">return</span> <span class="p">[</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">y</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">/</span> <span class="nx">kx</span> <span class="p">];</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">copy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_scale_quantize</span><span class="p">(</span><span class="nx">x0</span><span class="p">,</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">range</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">rescale</span><span class="p">();</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">threshold</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_scale_threshold</span><span class="p">([</span> <span class="p">.</span><span class="mi">5</span> <span class="p">],</span> <span class="p">[</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span> <span class="p">]);</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_scale_threshold</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">range</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">function</span> <span class="nx">scale</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">x</span> <span class="o">&lt;=</span> <span class="nx">x</span><span class="p">)</span> <span class="k">return</span> <span class="nx">range</span><span class="p">[</span><span class="nx">d3</span><span class="p">.</span><span class="nx">bisect</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">x</span><span class="p">)];</span>
    <span class="p">}</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">domain</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">domain</span><span class="p">;</span>
      <span class="nx">domain</span> <span class="o">=</span> <span class="nx">_</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">scale</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">range</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">range</span><span class="p">;</span>
      <span class="nx">range</span> <span class="o">=</span> <span class="nx">_</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">scale</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">invertExtent</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">y</span> <span class="o">=</span> <span class="nx">range</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="nx">y</span><span class="p">);</span>
      <span class="k">return</span> <span class="p">[</span> <span class="nx">domain</span><span class="p">[</span><span class="nx">y</span> <span class="o">-</span> <span class="mi">1</span><span class="p">],</span> <span class="nx">domain</span><span class="p">[</span><span class="nx">y</span><span class="p">]</span> <span class="p">];</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">copy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_scale_threshold</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">range</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">scale</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">identity</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_scale_identity</span><span class="p">([</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span> <span class="p">]);</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_scale_identity</span><span class="p">(</span><span class="nx">domain</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">function</span> <span class="nx">identity</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="o">+</span><span class="nx">x</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">identity</span><span class="p">.</span><span class="nx">invert</span> <span class="o">=</span> <span class="nx">identity</span><span class="p">;</span>
    <span class="nx">identity</span><span class="p">.</span><span class="nx">domain</span> <span class="o">=</span> <span class="nx">identity</span><span class="p">.</span><span class="nx">range</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">domain</span><span class="p">;</span>
      <span class="nx">domain</span> <span class="o">=</span> <span class="nx">x</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">identity</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">identity</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">identity</span><span class="p">.</span><span class="nx">ticks</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">m</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_scale_linearTicks</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">m</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="nx">identity</span><span class="p">.</span><span class="nx">tickFormat</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">m</span><span class="p">,</span> <span class="nx">format</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_scale_linearTickFormat</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">m</span><span class="p">,</span> <span class="nx">format</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="nx">identity</span><span class="p">.</span><span class="nx">copy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_scale_identity</span><span class="p">(</span><span class="nx">domain</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">identity</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">svg</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">svg</span><span class="p">.</span><span class="nx">arc</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">innerRadius</span> <span class="o">=</span> <span class="nx">d3_svg_arcInnerRadius</span><span class="p">,</span> <span class="nx">outerRadius</span> <span class="o">=</span> <span class="nx">d3_svg_arcOuterRadius</span><span class="p">,</span> <span class="nx">startAngle</span> <span class="o">=</span> <span class="nx">d3_svg_arcStartAngle</span><span class="p">,</span> <span class="nx">endAngle</span> <span class="o">=</span> <span class="nx">d3_svg_arcEndAngle</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">arc</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">r0</span> <span class="o">=</span> <span class="nx">innerRadius</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">),</span> <span class="nx">r1</span> <span class="o">=</span> <span class="nx">outerRadius</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">),</span> <span class="nx">a0</span> <span class="o">=</span> <span class="nx">startAngle</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span> <span class="o">+</span> <span class="nx">d3_svg_arcOffset</span><span class="p">,</span> <span class="nx">a1</span> <span class="o">=</span> <span class="nx">endAngle</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span> <span class="o">+</span> <span class="nx">d3_svg_arcOffset</span><span class="p">,</span> <span class="nx">da</span> <span class="o">=</span> <span class="p">(</span><span class="nx">a1</span> <span class="o">&lt;</span> <span class="nx">a0</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">da</span> <span class="o">=</span> <span class="nx">a0</span><span class="p">,</span> 
      <span class="nx">a0</span> <span class="o">=</span> <span class="nx">a1</span><span class="p">,</span> <span class="nx">a1</span> <span class="o">=</span> <span class="nx">da</span><span class="p">),</span> <span class="nx">a1</span> <span class="o">-</span> <span class="nx">a0</span><span class="p">),</span> <span class="nx">df</span> <span class="o">=</span> <span class="nx">da</span> <span class="o">&lt;</span> <span class="err">π</span> <span class="o">?</span> <span class="s2">&quot;0&quot;</span> <span class="o">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="nx">c0</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">a0</span><span class="p">),</span> <span class="nx">s0</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">a0</span><span class="p">),</span> <span class="nx">c1</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">a1</span><span class="p">),</span> <span class="nx">s1</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">a1</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">da</span> <span class="o">&gt;=</span> <span class="nx">d3_svg_arcMax</span> <span class="o">?</span> <span class="nx">r0</span> <span class="o">?</span> <span class="s2">&quot;M0,&quot;</span> <span class="o">+</span> <span class="nx">r1</span> <span class="o">+</span> <span class="s2">&quot;A&quot;</span> <span class="o">+</span> <span class="nx">r1</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">r1</span> <span class="o">+</span> <span class="s2">&quot; 0 1,1 0,&quot;</span> <span class="o">+</span> <span class="o">-</span><span class="nx">r1</span> <span class="o">+</span> <span class="s2">&quot;A&quot;</span> <span class="o">+</span> <span class="nx">r1</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">r1</span> <span class="o">+</span> <span class="s2">&quot; 0 1,1 0,&quot;</span> <span class="o">+</span> <span class="nx">r1</span> <span class="o">+</span> <span class="s2">&quot;M0,&quot;</span> <span class="o">+</span> <span class="nx">r0</span> <span class="o">+</span> <span class="s2">&quot;A&quot;</span> <span class="o">+</span> <span class="nx">r0</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">r0</span> <span class="o">+</span> <span class="s2">&quot; 0 1,0 0,&quot;</span> <span class="o">+</span> <span class="o">-</span><span class="nx">r0</span> <span class="o">+</span> <span class="s2">&quot;A&quot;</span> <span class="o">+</span> <span class="nx">r0</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">r0</span> <span class="o">+</span> <span class="s2">&quot; 0 1,0 0,&quot;</span> <span class="o">+</span> <span class="nx">r0</span> <span class="o">+</span> <span class="s2">&quot;Z&quot;</span> <span class="o">:</span> <span class="s2">&quot;M0,&quot;</span> <span class="o">+</span> <span class="nx">r1</span> <span class="o">+</span> <span class="s2">&quot;A&quot;</span> <span class="o">+</span> <span class="nx">r1</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">r1</span> <span class="o">+</span> <span class="s2">&quot; 0 1,1 0,&quot;</span> <span class="o">+</span> <span class="o">-</span><span class="nx">r1</span> <span class="o">+</span> <span class="s2">&quot;A&quot;</span> <span class="o">+</span> <span class="nx">r1</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">r1</span> <span class="o">+</span> <span class="s2">&quot; 0 1,1 0,&quot;</span> <span class="o">+</span> <span class="nx">r1</span> <span class="o">+</span> <span class="s2">&quot;Z&quot;</span> <span class="o">:</span> <span class="nx">r0</span> <span class="o">?</span> <span class="s2">&quot;M&quot;</span> <span class="o">+</span> <span class="nx">r1</span> <span class="o">*</span> <span class="nx">c0</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">r1</span> <span class="o">*</span> <span class="nx">s0</span> <span class="o">+</span> <span class="s2">&quot;A&quot;</span> <span class="o">+</span> <span class="nx">r1</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">r1</span> <span class="o">+</span> <span class="s2">&quot; 0 &quot;</span> <span class="o">+</span> <span class="nx">df</span> <span class="o">+</span> <span class="s2">&quot;,1 &quot;</span> <span class="o">+</span> <span class="nx">r1</span> <span class="o">*</span> <span class="nx">c1</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">r1</span> <span class="o">*</span> <span class="nx">s1</span> <span class="o">+</span> <span class="s2">&quot;L&quot;</span> <span class="o">+</span> <span class="nx">r0</span> <span class="o">*</span> <span class="nx">c1</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">r0</span> <span class="o">*</span> <span class="nx">s1</span> <span class="o">+</span> <span class="s2">&quot;A&quot;</span> <span class="o">+</span> <span class="nx">r0</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">r0</span> <span class="o">+</span> <span class="s2">&quot; 0 &quot;</span> <span class="o">+</span> <span class="nx">df</span> <span class="o">+</span> <span class="s2">&quot;,0 &quot;</span> <span class="o">+</span> <span class="nx">r0</span> <span class="o">*</span> <span class="nx">c0</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">r0</span> <span class="o">*</span> <span class="nx">s0</span> <span class="o">+</span> <span class="s2">&quot;Z&quot;</span> <span class="o">:</span> <span class="s2">&quot;M&quot;</span> <span class="o">+</span> <span class="nx">r1</span> <span class="o">*</span> <span class="nx">c0</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">r1</span> <span class="o">*</span> <span class="nx">s0</span> <span class="o">+</span> <span class="s2">&quot;A&quot;</span> <span class="o">+</span> <span class="nx">r1</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">r1</span> <span class="o">+</span> <span class="s2">&quot; 0 &quot;</span> <span class="o">+</span> <span class="nx">df</span> <span class="o">+</span> <span class="s2">&quot;,1 &quot;</span> <span class="o">+</span> <span class="nx">r1</span> <span class="o">*</span> <span class="nx">c1</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">r1</span> <span class="o">*</span> <span class="nx">s1</span> <span class="o">+</span> <span class="s2">&quot;L0,0&quot;</span> <span class="o">+</span> <span class="s2">&quot;Z&quot;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">arc</span><span class="p">.</span><span class="nx">innerRadius</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">innerRadius</span><span class="p">;</span>
      <span class="nx">innerRadius</span> <span class="o">=</span> <span class="nx">d3_functor</span><span class="p">(</span><span class="nx">v</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">arc</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">arc</span><span class="p">.</span><span class="nx">outerRadius</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">outerRadius</span><span class="p">;</span>
      <span class="nx">outerRadius</span> <span class="o">=</span> <span class="nx">d3_functor</span><span class="p">(</span><span class="nx">v</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">arc</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">arc</span><span class="p">.</span><span class="nx">startAngle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">startAngle</span><span class="p">;</span>
      <span class="nx">startAngle</span> <span class="o">=</span> <span class="nx">d3_functor</span><span class="p">(</span><span class="nx">v</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">arc</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">arc</span><span class="p">.</span><span class="nx">endAngle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">endAngle</span><span class="p">;</span>
      <span class="nx">endAngle</span> <span class="o">=</span> <span class="nx">d3_functor</span><span class="p">(</span><span class="nx">v</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">arc</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">arc</span><span class="p">.</span><span class="nx">centroid</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="p">(</span><span class="nx">innerRadius</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span> <span class="o">+</span> <span class="nx">outerRadius</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">(</span><span class="nx">startAngle</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span> <span class="o">+</span> <span class="nx">endAngle</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">+</span> <span class="nx">d3_svg_arcOffset</span><span class="p">;</span>
      <span class="k">return</span> <span class="p">[</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">*</span> <span class="nx">r</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">*</span> <span class="nx">r</span> <span class="p">];</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">arc</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">d3_svg_arcOffset</span> <span class="o">=</span> <span class="o">-</span><span class="nx">half</span><span class="err">π</span><span class="p">,</span> <span class="nx">d3_svg_arcMax</span> <span class="o">=</span> <span class="err">τ</span> <span class="o">-</span> <span class="err">ε</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">d3_svg_arcInnerRadius</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">innerRadius</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_svg_arcOuterRadius</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">outerRadius</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_svg_arcStartAngle</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">startAngle</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_svg_arcEndAngle</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">endAngle</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_svg_line</span><span class="p">(</span><span class="nx">projection</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">d3_geom_pointX</span><span class="p">,</span> <span class="nx">y</span> <span class="o">=</span> <span class="nx">d3_geom_pointY</span><span class="p">,</span> <span class="nx">defined</span> <span class="o">=</span> <span class="nx">d3_true</span><span class="p">,</span> <span class="nx">interpolate</span> <span class="o">=</span> <span class="nx">d3_svg_lineLinear</span><span class="p">,</span> <span class="nx">interpolateKey</span> <span class="o">=</span> <span class="nx">interpolate</span><span class="p">.</span><span class="nx">key</span><span class="p">,</span> <span class="nx">tension</span> <span class="o">=</span> <span class="p">.</span><span class="mi">7</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">line</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">segments</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">points</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">fx</span> <span class="o">=</span> <span class="nx">d3_functor</span><span class="p">(</span><span class="nx">x</span><span class="p">),</span> <span class="nx">fy</span> <span class="o">=</span> <span class="nx">d3_functor</span><span class="p">(</span><span class="nx">y</span><span class="p">);</span>
      <span class="kd">function</span> <span class="nx">segment</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">segments</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;M&quot;</span><span class="p">,</span> <span class="nx">interpolate</span><span class="p">(</span><span class="nx">projection</span><span class="p">(</span><span class="nx">points</span><span class="p">),</span> <span class="nx">tension</span><span class="p">));</span>
      <span class="p">}</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">defined</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">))</span> <span class="p">{</span>
          <span class="nx">points</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span> <span class="o">+</span><span class="nx">fx</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">),</span> <span class="o">+</span><span class="nx">fy</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">]);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">segment</span><span class="p">();</span>
          <span class="nx">points</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="nx">segment</span><span class="p">();</span>
      <span class="k">return</span> <span class="nx">segments</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">segments</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">line</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">x</span><span class="p">;</span>
      <span class="nx">x</span> <span class="o">=</span> <span class="nx">_</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">line</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">line</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">y</span><span class="p">;</span>
      <span class="nx">y</span> <span class="o">=</span> <span class="nx">_</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">line</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">line</span><span class="p">.</span><span class="nx">defined</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">defined</span><span class="p">;</span>
      <span class="nx">defined</span> <span class="o">=</span> <span class="nx">_</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">line</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">line</span><span class="p">.</span><span class="nx">interpolate</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">interpolateKey</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">_</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span><span class="p">)</span> <span class="nx">interpolateKey</span> <span class="o">=</span> <span class="nx">interpolate</span> <span class="o">=</span> <span class="nx">_</span><span class="p">;</span> <span class="k">else</span> <span class="nx">interpolateKey</span> <span class="o">=</span> <span class="p">(</span><span class="nx">interpolate</span> <span class="o">=</span> <span class="nx">d3_svg_lineInterpolators</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="o">||</span> <span class="nx">d3_svg_lineLinear</span><span class="p">).</span><span class="nx">key</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">line</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">line</span><span class="p">.</span><span class="nx">tension</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">tension</span><span class="p">;</span>
      <span class="nx">tension</span> <span class="o">=</span> <span class="nx">_</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">line</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">line</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">svg</span><span class="p">.</span><span class="nx">line</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_svg_line</span><span class="p">(</span><span class="nx">d3_identity</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">d3_svg_lineInterpolators</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">map</span><span class="p">({</span>
    <span class="nx">linear</span><span class="o">:</span> <span class="nx">d3_svg_lineLinear</span><span class="p">,</span>
    <span class="s2">&quot;linear-closed&quot;</span><span class="o">:</span> <span class="nx">d3_svg_lineLinearClosed</span><span class="p">,</span>
    <span class="nx">step</span><span class="o">:</span> <span class="nx">d3_svg_lineStep</span><span class="p">,</span>
    <span class="s2">&quot;step-before&quot;</span><span class="o">:</span> <span class="nx">d3_svg_lineStepBefore</span><span class="p">,</span>
    <span class="s2">&quot;step-after&quot;</span><span class="o">:</span> <span class="nx">d3_svg_lineStepAfter</span><span class="p">,</span>
    <span class="nx">basis</span><span class="o">:</span> <span class="nx">d3_svg_lineBasis</span><span class="p">,</span>
    <span class="s2">&quot;basis-open&quot;</span><span class="o">:</span> <span class="nx">d3_svg_lineBasisOpen</span><span class="p">,</span>
    <span class="s2">&quot;basis-closed&quot;</span><span class="o">:</span> <span class="nx">d3_svg_lineBasisClosed</span><span class="p">,</span>
    <span class="nx">bundle</span><span class="o">:</span> <span class="nx">d3_svg_lineBundle</span><span class="p">,</span>
    <span class="nx">cardinal</span><span class="o">:</span> <span class="nx">d3_svg_lineCardinal</span><span class="p">,</span>
    <span class="s2">&quot;cardinal-open&quot;</span><span class="o">:</span> <span class="nx">d3_svg_lineCardinalOpen</span><span class="p">,</span>
    <span class="s2">&quot;cardinal-closed&quot;</span><span class="o">:</span> <span class="nx">d3_svg_lineCardinalClosed</span><span class="p">,</span>
    <span class="nx">monotone</span><span class="o">:</span> <span class="nx">d3_svg_lineMonotone</span>
  <span class="p">});</span>
  <span class="nx">d3_svg_lineInterpolators</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">value</span><span class="p">.</span><span class="nx">key</span> <span class="o">=</span> <span class="nx">key</span><span class="p">;</span>
    <span class="nx">value</span><span class="p">.</span><span class="nx">closed</span> <span class="o">=</span> <span class="sr">/-closed$/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
  <span class="p">});</span>
  <span class="kd">function</span> <span class="nx">d3_svg_lineLinear</span><span class="p">(</span><span class="nx">points</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">points</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;L&quot;</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_svg_lineLinearClosed</span><span class="p">(</span><span class="nx">points</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_svg_lineLinear</span><span class="p">(</span><span class="nx">points</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;Z&quot;</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_svg_lineStep</span><span class="p">(</span><span class="nx">points</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">p</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">path</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">p</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="nx">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">];</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="nx">path</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;H&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="nx">p</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">])[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;V&quot;</span><span class="p">,</span> <span class="nx">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">n</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="nx">path</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;H&quot;</span><span class="p">,</span> <span class="nx">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
    <span class="k">return</span> <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_svg_lineStepBefore</span><span class="p">(</span><span class="nx">points</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">p</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">path</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">p</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="nx">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">];</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="nx">path</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;V&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">p</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">])[</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;H&quot;</span><span class="p">,</span> <span class="nx">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
    <span class="k">return</span> <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_svg_lineStepAfter</span><span class="p">(</span><span class="nx">points</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">p</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">path</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">p</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="nx">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">];</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="nx">path</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;H&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">p</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">])[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;V&quot;</span><span class="p">,</span> <span class="nx">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
    <span class="k">return</span> <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_svg_lineCardinalOpen</span><span class="p">(</span><span class="nx">points</span><span class="p">,</span> <span class="nx">tension</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">4</span> <span class="o">?</span> <span class="nx">d3_svg_lineLinear</span><span class="p">(</span><span class="nx">points</span><span class="p">)</span> <span class="o">:</span> <span class="nx">points</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="nx">d3_svg_lineHermite</span><span class="p">(</span><span class="nx">points</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span> <span class="nx">d3_svg_lineCardinalTangents</span><span class="p">(</span><span class="nx">points</span><span class="p">,</span> <span class="nx">tension</span><span class="p">));</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_svg_lineCardinalClosed</span><span class="p">(</span><span class="nx">points</span><span class="p">,</span> <span class="nx">tension</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">3</span> <span class="o">?</span> <span class="nx">d3_svg_lineLinear</span><span class="p">(</span><span class="nx">points</span><span class="p">)</span> <span class="o">:</span> <span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">d3_svg_lineHermite</span><span class="p">((</span><span class="nx">points</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> 
    <span class="nx">points</span><span class="p">),</span> <span class="nx">d3_svg_lineCardinalTangents</span><span class="p">([</span> <span class="nx">points</span><span class="p">[</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">2</span><span class="p">]</span> <span class="p">].</span><span class="nx">concat</span><span class="p">(</span><span class="nx">points</span><span class="p">,</span> <span class="p">[</span> <span class="nx">points</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">]),</span> <span class="nx">tension</span><span class="p">));</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_svg_lineCardinal</span><span class="p">(</span><span class="nx">points</span><span class="p">,</span> <span class="nx">tension</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">3</span> <span class="o">?</span> <span class="nx">d3_svg_lineLinear</span><span class="p">(</span><span class="nx">points</span><span class="p">)</span> <span class="o">:</span> <span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">d3_svg_lineHermite</span><span class="p">(</span><span class="nx">points</span><span class="p">,</span> <span class="nx">d3_svg_lineCardinalTangents</span><span class="p">(</span><span class="nx">points</span><span class="p">,</span> <span class="nx">tension</span><span class="p">));</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_svg_lineHermite</span><span class="p">(</span><span class="nx">points</span><span class="p">,</span> <span class="nx">tangents</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">tangents</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="o">||</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">!=</span> <span class="nx">tangents</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">!=</span> <span class="nx">tangents</span><span class="p">.</span><span class="nx">length</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_svg_lineLinear</span><span class="p">(</span><span class="nx">points</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">var</span> <span class="nx">quad</span> <span class="o">=</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">!=</span> <span class="nx">tangents</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">path</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="nx">p0</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">p</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">t0</span> <span class="o">=</span> <span class="nx">tangents</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">t</span> <span class="o">=</span> <span class="nx">t0</span><span class="p">,</span> <span class="nx">pi</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">quad</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">path</span> <span class="o">+=</span> <span class="s2">&quot;Q&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">t0</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">t0</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">p</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
      <span class="nx">p0</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
      <span class="nx">pi</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">tangents</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">t</span> <span class="o">=</span> <span class="nx">tangents</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
      <span class="nx">p</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">pi</span><span class="p">];</span>
      <span class="nx">pi</span><span class="o">++</span><span class="p">;</span>
      <span class="nx">path</span> <span class="o">+=</span> <span class="s2">&quot;C&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">p0</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">t0</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">p0</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="nx">t0</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">t</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">t</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">p</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">tangents</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">,</span> <span class="nx">pi</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">p</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">pi</span><span class="p">];</span>
        <span class="nx">t</span> <span class="o">=</span> <span class="nx">tangents</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="nx">path</span> <span class="o">+=</span> <span class="s2">&quot;S&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">t</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">t</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">p</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">quad</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">lp</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">pi</span><span class="p">];</span>
      <span class="nx">path</span> <span class="o">+=</span> <span class="s2">&quot;Q&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">t</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="nx">t</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">lp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">lp</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">path</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_svg_lineCardinalTangents</span><span class="p">(</span><span class="nx">points</span><span class="p">,</span> <span class="nx">tension</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">tangents</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">tension</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">p0</span><span class="p">,</span> <span class="nx">p1</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">p2</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">p0</span> <span class="o">=</span> <span class="nx">p1</span><span class="p">;</span>
      <span class="nx">p1</span> <span class="o">=</span> <span class="nx">p2</span><span class="p">;</span>
      <span class="nx">p2</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
      <span class="nx">tangents</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span> <span class="nx">a</span> <span class="o">*</span> <span class="p">(</span><span class="nx">p2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">p0</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nx">a</span> <span class="o">*</span> <span class="p">(</span><span class="nx">p2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">p0</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="p">]);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">tangents</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_svg_lineBasis</span><span class="p">(</span><span class="nx">points</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="k">return</span> <span class="nx">d3_svg_lineLinear</span><span class="p">(</span><span class="nx">points</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">pi</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">x0</span> <span class="o">=</span> <span class="nx">pi</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y0</span> <span class="o">=</span> <span class="nx">pi</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">px</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">x0</span><span class="p">,</span> <span class="nx">x0</span><span class="p">,</span> <span class="nx">x0</span><span class="p">,</span> <span class="p">(</span><span class="nx">pi</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">1</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span> <span class="p">],</span> <span class="nx">py</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">y0</span><span class="p">,</span> <span class="nx">y0</span><span class="p">,</span> <span class="nx">y0</span><span class="p">,</span> <span class="nx">pi</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">],</span> <span class="nx">path</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">x0</span><span class="p">,</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="nx">y0</span><span class="p">,</span> <span class="s2">&quot;L&quot;</span><span class="p">,</span> <span class="nx">d3_svg_lineDot4</span><span class="p">(</span><span class="nx">d3_svg_lineBasisBezier3</span><span class="p">,</span> <span class="nx">px</span><span class="p">),</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="nx">d3_svg_lineDot4</span><span class="p">(</span><span class="nx">d3_svg_lineBasisBezier3</span><span class="p">,</span> <span class="nx">py</span><span class="p">)</span> <span class="p">];</span>
    <span class="nx">points</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">points</span><span class="p">[</span><span class="nx">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]);</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;=</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">pi</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
      <span class="nx">px</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
      <span class="nx">px</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">pi</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
      <span class="nx">py</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
      <span class="nx">py</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">pi</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
      <span class="nx">d3_svg_lineBasisBezier</span><span class="p">(</span><span class="nx">path</span><span class="p">,</span> <span class="nx">px</span><span class="p">,</span> <span class="nx">py</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">points</span><span class="p">.</span><span class="nx">pop</span><span class="p">();</span>
    <span class="nx">path</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;L&quot;</span><span class="p">,</span> <span class="nx">pi</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_svg_lineBasisOpen</span><span class="p">(</span><span class="nx">points</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">)</span> <span class="k">return</span> <span class="nx">d3_svg_lineLinear</span><span class="p">(</span><span class="nx">points</span><span class="p">);</span>
    <span class="kd">var</span> <span class="nx">path</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">pi</span><span class="p">,</span> <span class="nx">px</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">0</span> <span class="p">],</span> <span class="nx">py</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">0</span> <span class="p">];</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">pi</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
      <span class="nx">px</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">pi</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
      <span class="nx">py</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">pi</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
    <span class="p">}</span>
    <span class="nx">path</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">d3_svg_lineDot4</span><span class="p">(</span><span class="nx">d3_svg_lineBasisBezier3</span><span class="p">,</span> <span class="nx">px</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">d3_svg_lineDot4</span><span class="p">(</span><span class="nx">d3_svg_lineBasisBezier3</span><span class="p">,</span> <span class="nx">py</span><span class="p">));</span>
    <span class="o">--</span><span class="nx">i</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">pi</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
      <span class="nx">px</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
      <span class="nx">px</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">pi</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
      <span class="nx">py</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
      <span class="nx">py</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">pi</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
      <span class="nx">d3_svg_lineBasisBezier</span><span class="p">(</span><span class="nx">path</span><span class="p">,</span> <span class="nx">px</span><span class="p">,</span> <span class="nx">py</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_svg_lineBasisClosed</span><span class="p">(</span><span class="nx">points</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">path</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">n</span> <span class="o">+</span> <span class="mi">4</span><span class="p">,</span> <span class="nx">pi</span><span class="p">,</span> <span class="nx">px</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">py</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">pi</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span> <span class="o">%</span> <span class="nx">n</span><span class="p">];</span>
      <span class="nx">px</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">pi</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
      <span class="nx">py</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">pi</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
    <span class="p">}</span>
    <span class="nx">path</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">d3_svg_lineDot4</span><span class="p">(</span><span class="nx">d3_svg_lineBasisBezier3</span><span class="p">,</span> <span class="nx">px</span><span class="p">),</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="nx">d3_svg_lineDot4</span><span class="p">(</span><span class="nx">d3_svg_lineBasisBezier3</span><span class="p">,</span> <span class="nx">py</span><span class="p">)</span> <span class="p">];</span>
    <span class="o">--</span><span class="nx">i</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">pi</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span> <span class="o">%</span> <span class="nx">n</span><span class="p">];</span>
      <span class="nx">px</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
      <span class="nx">px</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">pi</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
      <span class="nx">py</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span>
      <span class="nx">py</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">pi</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
      <span class="nx">d3_svg_lineBasisBezier</span><span class="p">(</span><span class="nx">path</span><span class="p">,</span> <span class="nx">px</span><span class="p">,</span> <span class="nx">py</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_svg_lineBundle</span><span class="p">(</span><span class="nx">points</span><span class="p">,</span> <span class="nx">tension</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">x0</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y0</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="nx">dx</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">n</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">x0</span><span class="p">,</span> <span class="nx">dy</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">n</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">y0</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">p</span><span class="p">,</span> <span class="nx">t</span><span class="p">;</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;=</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">p</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="nx">t</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">/</span> <span class="nx">n</span><span class="p">;</span>
        <span class="nx">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">tension</span> <span class="o">*</span> <span class="nx">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">tension</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="nx">x0</span> <span class="o">+</span> <span class="nx">t</span> <span class="o">*</span> <span class="nx">dx</span><span class="p">);</span>
        <span class="nx">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">tension</span> <span class="o">*</span> <span class="nx">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">tension</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="nx">y0</span> <span class="o">+</span> <span class="nx">t</span> <span class="o">*</span> <span class="nx">dy</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">d3_svg_lineBasis</span><span class="p">(</span><span class="nx">points</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_svg_lineDot4</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nx">b</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">a</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="nx">b</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="nx">a</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="nx">b</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="nx">a</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">*</span> <span class="nx">b</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">d3_svg_lineBasisBezier1</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span> <span class="o">/</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span> <span class="p">],</span> <span class="nx">d3_svg_lineBasisBezier2</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span> <span class="o">/</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">0</span> <span class="p">],</span> <span class="nx">d3_svg_lineBasisBezier3</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span> <span class="o">/</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span> <span class="o">/</span> <span class="mi">6</span> <span class="p">];</span>
  <span class="kd">function</span> <span class="nx">d3_svg_lineBasisBezier</span><span class="p">(</span><span class="nx">path</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">path</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;C&quot;</span><span class="p">,</span> <span class="nx">d3_svg_lineDot4</span><span class="p">(</span><span class="nx">d3_svg_lineBasisBezier1</span><span class="p">,</span> <span class="nx">x</span><span class="p">),</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="nx">d3_svg_lineDot4</span><span class="p">(</span><span class="nx">d3_svg_lineBasisBezier1</span><span class="p">,</span> <span class="nx">y</span><span class="p">),</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="nx">d3_svg_lineDot4</span><span class="p">(</span><span class="nx">d3_svg_lineBasisBezier2</span><span class="p">,</span> <span class="nx">x</span><span class="p">),</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="nx">d3_svg_lineDot4</span><span class="p">(</span><span class="nx">d3_svg_lineBasisBezier2</span><span class="p">,</span> <span class="nx">y</span><span class="p">),</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="nx">d3_svg_lineDot4</span><span class="p">(</span><span class="nx">d3_svg_lineBasisBezier3</span><span class="p">,</span> <span class="nx">x</span><span class="p">),</span> <span class="s2">&quot;,&quot;</span><span class="p">,</span> <span class="nx">d3_svg_lineDot4</span><span class="p">(</span><span class="nx">d3_svg_lineBasisBezier3</span><span class="p">,</span> <span class="nx">y</span><span class="p">));</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_svg_lineSlope</span><span class="p">(</span><span class="nx">p0</span><span class="p">,</span> <span class="nx">p1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="nx">p1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">p0</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="p">(</span><span class="nx">p1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">p0</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_svg_lineFiniteDifferences</span><span class="p">(</span><span class="nx">points</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">m</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">p0</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">p1</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">d3_svg_lineSlope</span><span class="p">(</span><span class="nx">p0</span><span class="p">,</span> <span class="nx">p1</span><span class="p">);</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">j</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">m</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="nx">d</span> <span class="o">+</span> <span class="p">(</span><span class="nx">d</span> <span class="o">=</span> <span class="nx">d3_svg_lineSlope</span><span class="p">(</span><span class="nx">p0</span> <span class="o">=</span> <span class="nx">p1</span><span class="p">,</span> <span class="nx">p1</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])))</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">m</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">d</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">m</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_svg_lineMonotoneTangents</span><span class="p">(</span><span class="nx">points</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">tangents</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">,</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">m</span> <span class="o">=</span> <span class="nx">d3_svg_lineFiniteDifferences</span><span class="p">(</span><span class="nx">points</span><span class="p">),</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">j</span> <span class="o">=</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">j</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">d</span> <span class="o">=</span> <span class="nx">d3_svg_lineSlope</span><span class="p">(</span><span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">abs</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="o">&lt;</span> <span class="err">ε</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">m</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">m</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">a</span> <span class="o">=</span> <span class="nx">m</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">/</span> <span class="nx">d</span><span class="p">;</span>
        <span class="nx">b</span> <span class="o">=</span> <span class="nx">m</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="nx">d</span><span class="p">;</span>
        <span class="nx">s</span> <span class="o">=</span> <span class="nx">a</span> <span class="o">*</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span> <span class="o">*</span> <span class="nx">b</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">s</span> <span class="o">&gt;</span> <span class="mi">9</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">s</span> <span class="o">=</span> <span class="nx">d</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">/</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">s</span><span class="p">);</span>
          <span class="nx">m</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">=</span> <span class="nx">s</span> <span class="o">*</span> <span class="nx">a</span><span class="p">;</span>
          <span class="nx">m</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">s</span> <span class="o">*</span> <span class="nx">b</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;=</span> <span class="nx">j</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">s</span> <span class="o">=</span> <span class="p">(</span><span class="nx">points</span><span class="p">[</span><span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">j</span><span class="p">,</span> <span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">points</span><span class="p">[</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)][</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="p">(</span><span class="mi">6</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="nx">m</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">*</span> <span class="nx">m</span><span class="p">[</span><span class="nx">i</span><span class="p">]));</span>
      <span class="nx">tangents</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span> <span class="nx">s</span> <span class="o">||</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">m</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">*</span> <span class="nx">s</span> <span class="o">||</span> <span class="mi">0</span> <span class="p">]);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">tangents</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_svg_lineMonotone</span><span class="p">(</span><span class="nx">points</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">3</span> <span class="o">?</span> <span class="nx">d3_svg_lineLinear</span><span class="p">(</span><span class="nx">points</span><span class="p">)</span> <span class="o">:</span> <span class="nx">points</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">d3_svg_lineHermite</span><span class="p">(</span><span class="nx">points</span><span class="p">,</span> <span class="nx">d3_svg_lineMonotoneTangents</span><span class="p">(</span><span class="nx">points</span><span class="p">));</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">svg</span><span class="p">.</span><span class="nx">line</span><span class="p">.</span><span class="nx">radial</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">line</span> <span class="o">=</span> <span class="nx">d3_svg_line</span><span class="p">(</span><span class="nx">d3_svg_lineRadial</span><span class="p">);</span>
    <span class="nx">line</span><span class="p">.</span><span class="nx">radius</span> <span class="o">=</span> <span class="nx">line</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="k">delete</span> <span class="nx">line</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
    <span class="nx">line</span><span class="p">.</span><span class="nx">angle</span> <span class="o">=</span> <span class="nx">line</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="k">delete</span> <span class="nx">line</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">line</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_svg_lineRadial</span><span class="p">(</span><span class="nx">points</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">point</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">points</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">r</span><span class="p">,</span> <span class="nx">a</span><span class="p">;</span>
    <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">point</span> <span class="o">=</span> <span class="nx">points</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
      <span class="nx">r</span> <span class="o">=</span> <span class="nx">point</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
      <span class="nx">a</span> <span class="o">=</span> <span class="nx">point</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="nx">d3_svg_arcOffset</span><span class="p">;</span>
      <span class="nx">point</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">r</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
      <span class="nx">point</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">r</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">points</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_svg_area</span><span class="p">(</span><span class="nx">projection</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">x0</span> <span class="o">=</span> <span class="nx">d3_geom_pointX</span><span class="p">,</span> <span class="nx">x1</span> <span class="o">=</span> <span class="nx">d3_geom_pointX</span><span class="p">,</span> <span class="nx">y0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">y1</span> <span class="o">=</span> <span class="nx">d3_geom_pointY</span><span class="p">,</span> <span class="nx">defined</span> <span class="o">=</span> <span class="nx">d3_true</span><span class="p">,</span> <span class="nx">interpolate</span> <span class="o">=</span> <span class="nx">d3_svg_lineLinear</span><span class="p">,</span> <span class="nx">interpolateKey</span> <span class="o">=</span> <span class="nx">interpolate</span><span class="p">.</span><span class="nx">key</span><span class="p">,</span> <span class="nx">interpolateReverse</span> <span class="o">=</span> <span class="nx">interpolate</span><span class="p">,</span> <span class="nx">L</span> <span class="o">=</span> <span class="s2">&quot;L&quot;</span><span class="p">,</span> <span class="nx">tension</span> <span class="o">=</span> <span class="p">.</span><span class="mi">7</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">area</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">segments</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">points0</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">points1</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">fx0</span> <span class="o">=</span> <span class="nx">d3_functor</span><span class="p">(</span><span class="nx">x0</span><span class="p">),</span> <span class="nx">fy0</span> <span class="o">=</span> <span class="nx">d3_functor</span><span class="p">(</span><span class="nx">y0</span><span class="p">),</span> <span class="nx">fx1</span> <span class="o">=</span> <span class="nx">x0</span> <span class="o">===</span> <span class="nx">x1</span> <span class="o">?</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">x</span><span class="p">;</span>
      <span class="p">}</span> <span class="o">:</span> <span class="nx">d3_functor</span><span class="p">(</span><span class="nx">x1</span><span class="p">),</span> <span class="nx">fy1</span> <span class="o">=</span> <span class="nx">y0</span> <span class="o">===</span> <span class="nx">y1</span> <span class="o">?</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">y</span><span class="p">;</span>
      <span class="p">}</span> <span class="o">:</span> <span class="nx">d3_functor</span><span class="p">(</span><span class="nx">y1</span><span class="p">),</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">;</span>
      <span class="kd">function</span> <span class="nx">segment</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">segments</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s2">&quot;M&quot;</span><span class="p">,</span> <span class="nx">interpolate</span><span class="p">(</span><span class="nx">projection</span><span class="p">(</span><span class="nx">points1</span><span class="p">),</span> <span class="nx">tension</span><span class="p">),</span> <span class="nx">L</span><span class="p">,</span> <span class="nx">interpolateReverse</span><span class="p">(</span><span class="nx">projection</span><span class="p">(</span><span class="nx">points0</span><span class="p">.</span><span class="nx">reverse</span><span class="p">()),</span> <span class="nx">tension</span><span class="p">),</span> <span class="s2">&quot;Z&quot;</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="k">while</span> <span class="p">(</span><span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">defined</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">data</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">i</span><span class="p">))</span> <span class="p">{</span>
          <span class="nx">points0</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span> <span class="nx">x</span> <span class="o">=</span> <span class="o">+</span><span class="nx">fx0</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">),</span> <span class="nx">y</span> <span class="o">=</span> <span class="o">+</span><span class="nx">fy0</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">]);</span>
          <span class="nx">points1</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span> <span class="o">+</span><span class="nx">fx1</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">),</span> <span class="o">+</span><span class="nx">fy1</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">]);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">points0</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">segment</span><span class="p">();</span>
          <span class="nx">points0</span> <span class="o">=</span> <span class="p">[];</span>
          <span class="nx">points1</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">points0</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="nx">segment</span><span class="p">();</span>
      <span class="k">return</span> <span class="nx">segments</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">segments</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">area</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">x1</span><span class="p">;</span>
      <span class="nx">x0</span> <span class="o">=</span> <span class="nx">x1</span> <span class="o">=</span> <span class="nx">_</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">area</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">area</span><span class="p">.</span><span class="nx">x0</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">x0</span><span class="p">;</span>
      <span class="nx">x0</span> <span class="o">=</span> <span class="nx">_</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">area</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">area</span><span class="p">.</span><span class="nx">x1</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">x1</span><span class="p">;</span>
      <span class="nx">x1</span> <span class="o">=</span> <span class="nx">_</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">area</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">area</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">y1</span><span class="p">;</span>
      <span class="nx">y0</span> <span class="o">=</span> <span class="nx">y1</span> <span class="o">=</span> <span class="nx">_</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">area</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">area</span><span class="p">.</span><span class="nx">y0</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">y0</span><span class="p">;</span>
      <span class="nx">y0</span> <span class="o">=</span> <span class="nx">_</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">area</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">area</span><span class="p">.</span><span class="nx">y1</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">y1</span><span class="p">;</span>
      <span class="nx">y1</span> <span class="o">=</span> <span class="nx">_</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">area</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">area</span><span class="p">.</span><span class="nx">defined</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">defined</span><span class="p">;</span>
      <span class="nx">defined</span> <span class="o">=</span> <span class="nx">_</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">area</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">area</span><span class="p">.</span><span class="nx">interpolate</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">interpolateKey</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">_</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span><span class="p">)</span> <span class="nx">interpolateKey</span> <span class="o">=</span> <span class="nx">interpolate</span> <span class="o">=</span> <span class="nx">_</span><span class="p">;</span> <span class="k">else</span> <span class="nx">interpolateKey</span> <span class="o">=</span> <span class="p">(</span><span class="nx">interpolate</span> <span class="o">=</span> <span class="nx">d3_svg_lineInterpolators</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="o">||</span> <span class="nx">d3_svg_lineLinear</span><span class="p">).</span><span class="nx">key</span><span class="p">;</span>
      <span class="nx">interpolateReverse</span> <span class="o">=</span> <span class="nx">interpolate</span><span class="p">.</span><span class="nx">reverse</span> <span class="o">||</span> <span class="nx">interpolate</span><span class="p">;</span>
      <span class="nx">L</span> <span class="o">=</span> <span class="nx">interpolate</span><span class="p">.</span><span class="nx">closed</span> <span class="o">?</span> <span class="s2">&quot;M&quot;</span> <span class="o">:</span> <span class="s2">&quot;L&quot;</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">area</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">area</span><span class="p">.</span><span class="nx">tension</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">_</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">tension</span><span class="p">;</span>
      <span class="nx">tension</span> <span class="o">=</span> <span class="nx">_</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">area</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">area</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">d3_svg_lineStepBefore</span><span class="p">.</span><span class="nx">reverse</span> <span class="o">=</span> <span class="nx">d3_svg_lineStepAfter</span><span class="p">;</span>
  <span class="nx">d3_svg_lineStepAfter</span><span class="p">.</span><span class="nx">reverse</span> <span class="o">=</span> <span class="nx">d3_svg_lineStepBefore</span><span class="p">;</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">svg</span><span class="p">.</span><span class="nx">area</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_svg_area</span><span class="p">(</span><span class="nx">d3_identity</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">svg</span><span class="p">.</span><span class="nx">area</span><span class="p">.</span><span class="nx">radial</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">area</span> <span class="o">=</span> <span class="nx">d3_svg_area</span><span class="p">(</span><span class="nx">d3_svg_lineRadial</span><span class="p">);</span>
    <span class="nx">area</span><span class="p">.</span><span class="nx">radius</span> <span class="o">=</span> <span class="nx">area</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="k">delete</span> <span class="nx">area</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
    <span class="nx">area</span><span class="p">.</span><span class="nx">innerRadius</span> <span class="o">=</span> <span class="nx">area</span><span class="p">.</span><span class="nx">x0</span><span class="p">,</span> <span class="k">delete</span> <span class="nx">area</span><span class="p">.</span><span class="nx">x0</span><span class="p">;</span>
    <span class="nx">area</span><span class="p">.</span><span class="nx">outerRadius</span> <span class="o">=</span> <span class="nx">area</span><span class="p">.</span><span class="nx">x1</span><span class="p">,</span> <span class="k">delete</span> <span class="nx">area</span><span class="p">.</span><span class="nx">x1</span><span class="p">;</span>
    <span class="nx">area</span><span class="p">.</span><span class="nx">angle</span> <span class="o">=</span> <span class="nx">area</span><span class="p">.</span><span class="nx">y</span><span class="p">,</span> <span class="k">delete</span> <span class="nx">area</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
    <span class="nx">area</span><span class="p">.</span><span class="nx">startAngle</span> <span class="o">=</span> <span class="nx">area</span><span class="p">.</span><span class="nx">y0</span><span class="p">,</span> <span class="k">delete</span> <span class="nx">area</span><span class="p">.</span><span class="nx">y0</span><span class="p">;</span>
    <span class="nx">area</span><span class="p">.</span><span class="nx">endAngle</span> <span class="o">=</span> <span class="nx">area</span><span class="p">.</span><span class="nx">y1</span><span class="p">,</span> <span class="k">delete</span> <span class="nx">area</span><span class="p">.</span><span class="nx">y1</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">area</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">svg</span><span class="p">.</span><span class="nx">chord</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">source</span> <span class="o">=</span> <span class="nx">d3_source</span><span class="p">,</span> <span class="nx">target</span> <span class="o">=</span> <span class="nx">d3_target</span><span class="p">,</span> <span class="nx">radius</span> <span class="o">=</span> <span class="nx">d3_svg_chordRadius</span><span class="p">,</span> <span class="nx">startAngle</span> <span class="o">=</span> <span class="nx">d3_svg_arcStartAngle</span><span class="p">,</span> <span class="nx">endAngle</span> <span class="o">=</span> <span class="nx">d3_svg_arcEndAngle</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">chord</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">s</span> <span class="o">=</span> <span class="nx">subgroup</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">source</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">),</span> <span class="nx">t</span> <span class="o">=</span> <span class="nx">subgroup</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">target</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">);</span>
      <span class="k">return</span> <span class="s2">&quot;M&quot;</span> <span class="o">+</span> <span class="nx">s</span><span class="p">.</span><span class="nx">p0</span> <span class="o">+</span> <span class="nx">arc</span><span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">r</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">p1</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">a1</span> <span class="o">-</span> <span class="nx">s</span><span class="p">.</span><span class="nx">a0</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="nx">equals</span><span class="p">(</span><span class="nx">s</span><span class="p">,</span> <span class="nx">t</span><span class="p">)</span> <span class="o">?</span> <span class="nx">curve</span><span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">r</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">p1</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">r</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">p0</span><span class="p">)</span> <span class="o">:</span> <span class="nx">curve</span><span class="p">(</span><span class="nx">s</span><span class="p">.</span><span class="nx">r</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">p1</span><span class="p">,</span> <span class="nx">t</span><span class="p">.</span><span class="nx">r</span><span class="p">,</span> <span class="nx">t</span><span class="p">.</span><span class="nx">p0</span><span class="p">)</span> <span class="o">+</span> <span class="nx">arc</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">r</span><span class="p">,</span> <span class="nx">t</span><span class="p">.</span><span class="nx">p1</span><span class="p">,</span> <span class="nx">t</span><span class="p">.</span><span class="nx">a1</span> <span class="o">-</span> <span class="nx">t</span><span class="p">.</span><span class="nx">a0</span><span class="p">)</span> <span class="o">+</span> <span class="nx">curve</span><span class="p">(</span><span class="nx">t</span><span class="p">.</span><span class="nx">r</span><span class="p">,</span> <span class="nx">t</span><span class="p">.</span><span class="nx">p1</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">r</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nx">p0</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot;Z&quot;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">subgroup</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="nx">f</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">subgroup</span> <span class="o">=</span> <span class="nx">f</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">),</span> <span class="nx">r</span> <span class="o">=</span> <span class="nx">radius</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="nx">subgroup</span><span class="p">,</span> <span class="nx">i</span><span class="p">),</span> <span class="nx">a0</span> <span class="o">=</span> <span class="nx">startAngle</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="nx">subgroup</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="o">+</span> <span class="nx">d3_svg_arcOffset</span><span class="p">,</span> <span class="nx">a1</span> <span class="o">=</span> <span class="nx">endAngle</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="nx">subgroup</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="o">+</span> <span class="nx">d3_svg_arcOffset</span><span class="p">;</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="nx">r</span><span class="o">:</span> <span class="nx">r</span><span class="p">,</span>
        <span class="nx">a0</span><span class="o">:</span> <span class="nx">a0</span><span class="p">,</span>
        <span class="nx">a1</span><span class="o">:</span> <span class="nx">a1</span><span class="p">,</span>
        <span class="nx">p0</span><span class="o">:</span> <span class="p">[</span> <span class="nx">r</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">a0</span><span class="p">),</span> <span class="nx">r</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">a0</span><span class="p">)</span> <span class="p">],</span>
        <span class="nx">p1</span><span class="o">:</span> <span class="p">[</span> <span class="nx">r</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">a1</span><span class="p">),</span> <span class="nx">r</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">a1</span><span class="p">)</span> <span class="p">]</span>
      <span class="p">};</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">equals</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">a0</span> <span class="o">==</span> <span class="nx">b</span><span class="p">.</span><span class="nx">a0</span> <span class="o">&amp;&amp;</span> <span class="nx">a</span><span class="p">.</span><span class="nx">a1</span> <span class="o">==</span> <span class="nx">b</span><span class="p">.</span><span class="nx">a1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">arc</span><span class="p">(</span><span class="nx">r</span><span class="p">,</span> <span class="nx">p</span><span class="p">,</span> <span class="nx">a</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="s2">&quot;A&quot;</span> <span class="o">+</span> <span class="nx">r</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">r</span> <span class="o">+</span> <span class="s2">&quot; 0 &quot;</span> <span class="o">+</span> <span class="o">+</span><span class="p">(</span><span class="nx">a</span> <span class="o">&gt;</span> <span class="err">π</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;,1 &quot;</span> <span class="o">+</span> <span class="nx">p</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">curve</span><span class="p">(</span><span class="nx">r0</span><span class="p">,</span> <span class="nx">p0</span><span class="p">,</span> <span class="nx">r1</span><span class="p">,</span> <span class="nx">p1</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="s2">&quot;Q 0,0 &quot;</span> <span class="o">+</span> <span class="nx">p1</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">chord</span><span class="p">.</span><span class="nx">radius</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">radius</span><span class="p">;</span>
      <span class="nx">radius</span> <span class="o">=</span> <span class="nx">d3_functor</span><span class="p">(</span><span class="nx">v</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">chord</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">chord</span><span class="p">.</span><span class="nx">source</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">source</span><span class="p">;</span>
      <span class="nx">source</span> <span class="o">=</span> <span class="nx">d3_functor</span><span class="p">(</span><span class="nx">v</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">chord</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">chord</span><span class="p">.</span><span class="nx">target</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">target</span><span class="p">;</span>
      <span class="nx">target</span> <span class="o">=</span> <span class="nx">d3_functor</span><span class="p">(</span><span class="nx">v</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">chord</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">chord</span><span class="p">.</span><span class="nx">startAngle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">startAngle</span><span class="p">;</span>
      <span class="nx">startAngle</span> <span class="o">=</span> <span class="nx">d3_functor</span><span class="p">(</span><span class="nx">v</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">chord</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">chord</span><span class="p">.</span><span class="nx">endAngle</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">endAngle</span><span class="p">;</span>
      <span class="nx">endAngle</span> <span class="o">=</span> <span class="nx">d3_functor</span><span class="p">(</span><span class="nx">v</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">chord</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">chord</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_svg_chordRadius</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">radius</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">svg</span><span class="p">.</span><span class="nx">diagonal</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">source</span> <span class="o">=</span> <span class="nx">d3_source</span><span class="p">,</span> <span class="nx">target</span> <span class="o">=</span> <span class="nx">d3_target</span><span class="p">,</span> <span class="nx">projection</span> <span class="o">=</span> <span class="nx">d3_svg_diagonalProjection</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">diagonal</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">p0</span> <span class="o">=</span> <span class="nx">source</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">),</span> <span class="nx">p3</span> <span class="o">=</span> <span class="nx">target</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">),</span> <span class="nx">m</span> <span class="o">=</span> <span class="p">(</span><span class="nx">p0</span><span class="p">.</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">p3</span><span class="p">.</span><span class="nx">y</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="nx">p</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">p0</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">x</span><span class="o">:</span> <span class="nx">p0</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
        <span class="nx">y</span><span class="o">:</span> <span class="nx">m</span>
      <span class="p">},</span> <span class="p">{</span>
        <span class="nx">x</span><span class="o">:</span> <span class="nx">p3</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span>
        <span class="nx">y</span><span class="o">:</span> <span class="nx">m</span>
      <span class="p">},</span> <span class="nx">p3</span> <span class="p">];</span>
      <span class="nx">p</span> <span class="o">=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">projection</span><span class="p">);</span>
      <span class="k">return</span> <span class="s2">&quot;M&quot;</span> <span class="o">+</span> <span class="nx">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;C&quot;</span> <span class="o">+</span> <span class="nx">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">p</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="nx">diagonal</span><span class="p">.</span><span class="nx">source</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">source</span><span class="p">;</span>
      <span class="nx">source</span> <span class="o">=</span> <span class="nx">d3_functor</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">diagonal</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">diagonal</span><span class="p">.</span><span class="nx">target</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">target</span><span class="p">;</span>
      <span class="nx">target</span> <span class="o">=</span> <span class="nx">d3_functor</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">diagonal</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">diagonal</span><span class="p">.</span><span class="nx">projection</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">projection</span><span class="p">;</span>
      <span class="nx">projection</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">diagonal</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">diagonal</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_svg_diagonalProjection</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span> <span class="nx">d</span><span class="p">.</span><span class="nx">x</span><span class="p">,</span> <span class="nx">d</span><span class="p">.</span><span class="nx">y</span> <span class="p">];</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">svg</span><span class="p">.</span><span class="nx">diagonal</span><span class="p">.</span><span class="nx">radial</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">diagonal</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">svg</span><span class="p">.</span><span class="nx">diagonal</span><span class="p">(),</span> <span class="nx">projection</span> <span class="o">=</span> <span class="nx">d3_svg_diagonalProjection</span><span class="p">,</span> <span class="nx">projection_</span> <span class="o">=</span> <span class="nx">diagonal</span><span class="p">.</span><span class="nx">projection</span><span class="p">;</span>
    <span class="nx">diagonal</span><span class="p">.</span><span class="nx">projection</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">projection_</span><span class="p">(</span><span class="nx">d3_svg_diagonalRadialProjection</span><span class="p">(</span><span class="nx">projection</span> <span class="o">=</span> <span class="nx">x</span><span class="p">))</span> <span class="o">:</span> <span class="nx">projection</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">diagonal</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_svg_diagonalRadialProjection</span><span class="p">(</span><span class="nx">projection</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">projection</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">),</span> <span class="nx">r</span> <span class="o">=</span> <span class="nx">d</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">d</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="nx">d3_svg_arcOffset</span><span class="p">;</span>
      <span class="k">return</span> <span class="p">[</span> <span class="nx">r</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">cos</span><span class="p">(</span><span class="nx">a</span><span class="p">),</span> <span class="nx">r</span> <span class="o">*</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sin</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="p">];</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">svg</span><span class="p">.</span><span class="nx">symbol</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">type</span> <span class="o">=</span> <span class="nx">d3_svg_symbolType</span><span class="p">,</span> <span class="nx">size</span> <span class="o">=</span> <span class="nx">d3_svg_symbolSize</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">symbol</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">(</span><span class="nx">d3_svg_symbols</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">type</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">))</span> <span class="o">||</span> <span class="nx">d3_svg_symbolCircle</span><span class="p">)(</span><span class="nx">size</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="nx">symbol</span><span class="p">.</span><span class="nx">type</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">type</span><span class="p">;</span>
      <span class="nx">type</span> <span class="o">=</span> <span class="nx">d3_functor</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">symbol</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">symbol</span><span class="p">.</span><span class="nx">size</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">size</span><span class="p">;</span>
      <span class="nx">size</span> <span class="o">=</span> <span class="nx">d3_functor</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">symbol</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">symbol</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_svg_symbolSize</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="mi">64</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_svg_symbolType</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s2">&quot;circle&quot;</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_svg_symbolCircle</span><span class="p">(</span><span class="nx">size</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">size</span> <span class="o">/</span> <span class="err">π</span><span class="p">);</span>
    <span class="k">return</span> <span class="s2">&quot;M0,&quot;</span> <span class="o">+</span> <span class="nx">r</span> <span class="o">+</span> <span class="s2">&quot;A&quot;</span> <span class="o">+</span> <span class="nx">r</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">r</span> <span class="o">+</span> <span class="s2">&quot; 0 1,1 0,&quot;</span> <span class="o">+</span> <span class="o">-</span><span class="nx">r</span> <span class="o">+</span> <span class="s2">&quot;A&quot;</span> <span class="o">+</span> <span class="nx">r</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">r</span> <span class="o">+</span> <span class="s2">&quot; 0 1,1 0,&quot;</span> <span class="o">+</span> <span class="nx">r</span> <span class="o">+</span> <span class="s2">&quot;Z&quot;</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">d3_svg_symbols</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">map</span><span class="p">({</span>
    <span class="nx">circle</span><span class="o">:</span> <span class="nx">d3_svg_symbolCircle</span><span class="p">,</span>
    <span class="nx">cross</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">size</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">size</span> <span class="o">/</span> <span class="mi">5</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
      <span class="k">return</span> <span class="s2">&quot;M&quot;</span> <span class="o">+</span> <span class="o">-</span><span class="mi">3</span> <span class="o">*</span> <span class="nx">r</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="o">-</span><span class="nx">r</span> <span class="o">+</span> <span class="s2">&quot;H&quot;</span> <span class="o">+</span> <span class="o">-</span><span class="nx">r</span> <span class="o">+</span> <span class="s2">&quot;V&quot;</span> <span class="o">+</span> <span class="o">-</span><span class="mi">3</span> <span class="o">*</span> <span class="nx">r</span> <span class="o">+</span> <span class="s2">&quot;H&quot;</span> <span class="o">+</span> <span class="nx">r</span> <span class="o">+</span> <span class="s2">&quot;V&quot;</span> <span class="o">+</span> <span class="o">-</span><span class="nx">r</span> <span class="o">+</span> <span class="s2">&quot;H&quot;</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="nx">r</span> <span class="o">+</span> <span class="s2">&quot;V&quot;</span> <span class="o">+</span> <span class="nx">r</span> <span class="o">+</span> <span class="s2">&quot;H&quot;</span> <span class="o">+</span> <span class="nx">r</span> <span class="o">+</span> <span class="s2">&quot;V&quot;</span> <span class="o">+</span> <span class="mi">3</span> <span class="o">*</span> <span class="nx">r</span> <span class="o">+</span> <span class="s2">&quot;H&quot;</span> <span class="o">+</span> <span class="o">-</span><span class="nx">r</span> <span class="o">+</span> <span class="s2">&quot;V&quot;</span> <span class="o">+</span> <span class="nx">r</span> <span class="o">+</span> <span class="s2">&quot;H&quot;</span> <span class="o">+</span> <span class="o">-</span><span class="mi">3</span> <span class="o">*</span> <span class="nx">r</span> <span class="o">+</span> <span class="s2">&quot;Z&quot;</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">diamond</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">size</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">ry</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">size</span> <span class="o">/</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="nx">d3_svg_symbolTan30</span><span class="p">)),</span> <span class="nx">rx</span> <span class="o">=</span> <span class="nx">ry</span> <span class="o">*</span> <span class="nx">d3_svg_symbolTan30</span><span class="p">;</span>
      <span class="k">return</span> <span class="s2">&quot;M0,&quot;</span> <span class="o">+</span> <span class="o">-</span><span class="nx">ry</span> <span class="o">+</span> <span class="s2">&quot;L&quot;</span> <span class="o">+</span> <span class="nx">rx</span> <span class="o">+</span> <span class="s2">&quot;,0&quot;</span> <span class="o">+</span> <span class="s2">&quot; 0,&quot;</span> <span class="o">+</span> <span class="nx">ry</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="o">-</span><span class="nx">rx</span> <span class="o">+</span> <span class="s2">&quot;,0&quot;</span> <span class="o">+</span> <span class="s2">&quot;Z&quot;</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">square</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">size</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">size</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
      <span class="k">return</span> <span class="s2">&quot;M&quot;</span> <span class="o">+</span> <span class="o">-</span><span class="nx">r</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="o">-</span><span class="nx">r</span> <span class="o">+</span> <span class="s2">&quot;L&quot;</span> <span class="o">+</span> <span class="nx">r</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="o">-</span><span class="nx">r</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="nx">r</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">r</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="o">-</span><span class="nx">r</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">r</span> <span class="o">+</span> <span class="s2">&quot;Z&quot;</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="s2">&quot;triangle-down&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">size</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">rx</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">size</span> <span class="o">/</span> <span class="nx">d3_svg_symbolSqrt3</span><span class="p">),</span> <span class="nx">ry</span> <span class="o">=</span> <span class="nx">rx</span> <span class="o">*</span> <span class="nx">d3_svg_symbolSqrt3</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
      <span class="k">return</span> <span class="s2">&quot;M0,&quot;</span> <span class="o">+</span> <span class="nx">ry</span> <span class="o">+</span> <span class="s2">&quot;L&quot;</span> <span class="o">+</span> <span class="nx">rx</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="o">-</span><span class="nx">ry</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="o">-</span><span class="nx">rx</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="o">-</span><span class="nx">ry</span> <span class="o">+</span> <span class="s2">&quot;Z&quot;</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="s2">&quot;triangle-up&quot;</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">size</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">rx</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="nx">size</span> <span class="o">/</span> <span class="nx">d3_svg_symbolSqrt3</span><span class="p">),</span> <span class="nx">ry</span> <span class="o">=</span> <span class="nx">rx</span> <span class="o">*</span> <span class="nx">d3_svg_symbolSqrt3</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
      <span class="k">return</span> <span class="s2">&quot;M0,&quot;</span> <span class="o">+</span> <span class="o">-</span><span class="nx">ry</span> <span class="o">+</span> <span class="s2">&quot;L&quot;</span> <span class="o">+</span> <span class="nx">rx</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">ry</span> <span class="o">+</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="o">-</span><span class="nx">rx</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">ry</span> <span class="o">+</span> <span class="s2">&quot;Z&quot;</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">});</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">svg</span><span class="p">.</span><span class="nx">symbolTypes</span> <span class="o">=</span> <span class="nx">d3_svg_symbols</span><span class="p">.</span><span class="nx">keys</span><span class="p">();</span>
  <span class="kd">var</span> <span class="nx">d3_svg_symbolSqrt3</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">sqrt</span><span class="p">(</span><span class="mi">3</span><span class="p">),</span> <span class="nx">d3_svg_symbolTan30</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">tan</span><span class="p">(</span><span class="mi">30</span> <span class="o">*</span> <span class="nx">d3_radians</span><span class="p">);</span>
  <span class="kd">function</span> <span class="nx">d3_transition</span><span class="p">(</span><span class="nx">groups</span><span class="p">,</span> <span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">d3_subclass</span><span class="p">(</span><span class="nx">groups</span><span class="p">,</span> <span class="nx">d3_transitionPrototype</span><span class="p">);</span>
    <span class="nx">groups</span><span class="p">.</span><span class="nx">id</span> <span class="o">=</span> <span class="nx">id</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">groups</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">d3_transitionPrototype</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">d3_transitionId</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">d3_transitionInheritId</span><span class="p">,</span> <span class="nx">d3_transitionInherit</span><span class="p">;</span>
  <span class="nx">d3_transitionPrototype</span><span class="p">.</span><span class="nx">call</span> <span class="o">=</span> <span class="nx">d3_selectionPrototype</span><span class="p">.</span><span class="nx">call</span><span class="p">;</span>
  <span class="nx">d3_transitionPrototype</span><span class="p">.</span><span class="nx">empty</span> <span class="o">=</span> <span class="nx">d3_selectionPrototype</span><span class="p">.</span><span class="nx">empty</span><span class="p">;</span>
  <span class="nx">d3_transitionPrototype</span><span class="p">.</span><span class="nx">node</span> <span class="o">=</span> <span class="nx">d3_selectionPrototype</span><span class="p">.</span><span class="nx">node</span><span class="p">;</span>
  <span class="nx">d3_transitionPrototype</span><span class="p">.</span><span class="nx">size</span> <span class="o">=</span> <span class="nx">d3_selectionPrototype</span><span class="p">.</span><span class="nx">size</span><span class="p">;</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">transition</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">selection</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="nx">d3_transitionInheritId</span> <span class="o">?</span> <span class="nx">selection</span><span class="p">.</span><span class="nx">transition</span><span class="p">()</span> <span class="o">:</span> <span class="nx">selection</span> <span class="o">:</span> <span class="nx">d3_selectionRoot</span><span class="p">.</span><span class="nx">transition</span><span class="p">();</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">transition</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nx">d3_transitionPrototype</span><span class="p">;</span>
  <span class="nx">d3_transitionPrototype</span><span class="p">.</span><span class="nx">select</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">selector</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="nx">subgroups</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">subgroup</span><span class="p">,</span> <span class="nx">subnode</span><span class="p">,</span> <span class="nx">node</span><span class="p">;</span>
    <span class="nx">selector</span> <span class="o">=</span> <span class="nx">d3_selection_selector</span><span class="p">(</span><span class="nx">selector</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">m</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="o">++</span><span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="nx">subgroups</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">subgroup</span> <span class="o">=</span> <span class="p">[]);</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">group</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">j</span><span class="p">],</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">group</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">((</span><span class="nx">node</span> <span class="o">=</span> <span class="nx">group</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">subnode</span> <span class="o">=</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">node</span><span class="p">.</span><span class="nx">__data__</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">)))</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="s2">&quot;__data__&quot;</span> <span class="k">in</span> <span class="nx">node</span><span class="p">)</span> <span class="nx">subnode</span><span class="p">.</span><span class="nx">__data__</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">__data__</span><span class="p">;</span>
          <span class="nx">d3_transitionNode</span><span class="p">(</span><span class="nx">subnode</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">node</span><span class="p">.</span><span class="nx">__transition__</span><span class="p">[</span><span class="nx">id</span><span class="p">]);</span>
          <span class="nx">subgroup</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">subnode</span><span class="p">);</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">subgroup</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">d3_transition</span><span class="p">(</span><span class="nx">subgroups</span><span class="p">,</span> <span class="nx">id</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nx">d3_transitionPrototype</span><span class="p">.</span><span class="nx">selectAll</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">selector</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="nx">subgroups</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">subgroup</span><span class="p">,</span> <span class="nx">subnodes</span><span class="p">,</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">subnode</span><span class="p">,</span> <span class="nx">transition</span><span class="p">;</span>
    <span class="nx">selector</span> <span class="o">=</span> <span class="nx">d3_selection_selectorAll</span><span class="p">(</span><span class="nx">selector</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">m</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="o">++</span><span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">group</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">j</span><span class="p">],</span> <span class="nx">i</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">group</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="o">++</span><span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">node</span> <span class="o">=</span> <span class="nx">group</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="p">{</span>
          <span class="nx">transition</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">__transition__</span><span class="p">[</span><span class="nx">id</span><span class="p">];</span>
          <span class="nx">subnodes</span> <span class="o">=</span> <span class="nx">selector</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">node</span><span class="p">.</span><span class="nx">__data__</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">);</span>
          <span class="nx">subgroups</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">subgroup</span> <span class="o">=</span> <span class="p">[]);</span>
          <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">k</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="nx">o</span> <span class="o">=</span> <span class="nx">subnodes</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="o">++</span><span class="nx">k</span> <span class="o">&lt;</span> <span class="nx">o</span><span class="p">;</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">subnode</span> <span class="o">=</span> <span class="nx">subnodes</span><span class="p">[</span><span class="nx">k</span><span class="p">])</span> <span class="nx">d3_transitionNode</span><span class="p">(</span><span class="nx">subnode</span><span class="p">,</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">transition</span><span class="p">);</span>
            <span class="nx">subgroup</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">subnode</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">d3_transition</span><span class="p">(</span><span class="nx">subgroups</span><span class="p">,</span> <span class="nx">id</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nx">d3_transitionPrototype</span><span class="p">.</span><span class="nx">filter</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">filter</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">subgroups</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">subgroup</span><span class="p">,</span> <span class="nx">group</span><span class="p">,</span> <span class="nx">node</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">filter</span> <span class="o">!==</span> <span class="s2">&quot;function&quot;</span><span class="p">)</span> <span class="nx">filter</span> <span class="o">=</span> <span class="nx">d3_selection_filter</span><span class="p">(</span><span class="nx">filter</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">m</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">subgroups</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">subgroup</span> <span class="o">=</span> <span class="p">[]);</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">group</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">j</span><span class="p">],</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">group</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">((</span><span class="nx">node</span> <span class="o">=</span> <span class="nx">group</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="o">&amp;&amp;</span> <span class="nx">filter</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">node</span><span class="p">.</span><span class="nx">__data__</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">))</span> <span class="p">{</span>
          <span class="nx">subgroup</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">node</span><span class="p">);</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">d3_transition</span><span class="p">(</span><span class="nx">subgroups</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nx">d3_transitionPrototype</span><span class="p">.</span><span class="nx">tween</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">tween</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">node</span><span class="p">().</span><span class="nx">__transition__</span><span class="p">[</span><span class="nx">id</span><span class="p">].</span><span class="nx">tween</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">d3_selection_each</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">tween</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">node</span><span class="p">.</span><span class="nx">__transition__</span><span class="p">[</span><span class="nx">id</span><span class="p">].</span><span class="nx">tween</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
    <span class="p">}</span> <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">node</span><span class="p">.</span><span class="nx">__transition__</span><span class="p">[</span><span class="nx">id</span><span class="p">].</span><span class="nx">tween</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">tween</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_transition_tween</span><span class="p">(</span><span class="nx">groups</span><span class="p">,</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">tween</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="nx">groups</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">d3_selection_each</span><span class="p">(</span><span class="nx">groups</span><span class="p">,</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">?</span> <span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">node</span><span class="p">.</span><span class="nx">__transition__</span><span class="p">[</span><span class="nx">id</span><span class="p">].</span><span class="nx">tween</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">tween</span><span class="p">(</span><span class="nx">value</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">node</span><span class="p">.</span><span class="nx">__data__</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">)));</span>
    <span class="p">}</span> <span class="o">:</span> <span class="p">(</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">tween</span><span class="p">(</span><span class="nx">value</span><span class="p">),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">node</span><span class="p">.</span><span class="nx">__transition__</span><span class="p">[</span><span class="nx">id</span><span class="p">].</span><span class="nx">tween</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
    <span class="p">}));</span>
  <span class="p">}</span>
  <span class="nx">d3_transitionPrototype</span><span class="p">.</span><span class="nx">attr</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">nameNS</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="nx">value</span> <span class="k">in</span> <span class="nx">nameNS</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="nx">value</span><span class="p">,</span> <span class="nx">nameNS</span><span class="p">[</span><span class="nx">value</span><span class="p">]);</span>
      <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">var</span> <span class="nx">interpolate</span> <span class="o">=</span> <span class="nx">nameNS</span> <span class="o">==</span> <span class="s2">&quot;transform&quot;</span> <span class="o">?</span> <span class="nx">d3_interpolateTransform</span> <span class="o">:</span> <span class="nx">d3_interpolate</span><span class="p">,</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">ns</span><span class="p">.</span><span class="nx">qualify</span><span class="p">(</span><span class="nx">nameNS</span><span class="p">);</span>
    <span class="kd">function</span> <span class="nx">attrNull</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">removeAttribute</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">attrNullNS</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">removeAttributeNS</span><span class="p">(</span><span class="nx">name</span><span class="p">.</span><span class="nx">space</span><span class="p">,</span> <span class="nx">name</span><span class="p">.</span><span class="nx">local</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">attrTween</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">b</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">attrNull</span> <span class="o">:</span> <span class="p">(</span><span class="nx">b</span> <span class="o">+=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="nx">name</span><span class="p">),</span> <span class="nx">i</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">a</span> <span class="o">!==</span> <span class="nx">b</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="nx">interpolate</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">i</span><span class="p">(</span><span class="nx">t</span><span class="p">));</span>
        <span class="p">});</span>
      <span class="p">});</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">attrTweenNS</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">b</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">attrNullNS</span> <span class="o">:</span> <span class="p">(</span><span class="nx">b</span> <span class="o">+=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">getAttributeNS</span><span class="p">(</span><span class="nx">name</span><span class="p">.</span><span class="nx">space</span><span class="p">,</span> <span class="nx">name</span><span class="p">.</span><span class="nx">local</span><span class="p">),</span> <span class="nx">i</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">a</span> <span class="o">!==</span> <span class="nx">b</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="nx">interpolate</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">setAttributeNS</span><span class="p">(</span><span class="nx">name</span><span class="p">.</span><span class="nx">space</span><span class="p">,</span> <span class="nx">name</span><span class="p">.</span><span class="nx">local</span><span class="p">,</span> <span class="nx">i</span><span class="p">(</span><span class="nx">t</span><span class="p">));</span>
        <span class="p">});</span>
      <span class="p">});</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">d3_transition_tween</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;attr.&quot;</span> <span class="o">+</span> <span class="nx">nameNS</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">name</span><span class="p">.</span><span class="nx">local</span> <span class="o">?</span> <span class="nx">attrTweenNS</span> <span class="o">:</span> <span class="nx">attrTween</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nx">d3_transitionPrototype</span><span class="p">.</span><span class="nx">attrTween</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">nameNS</span><span class="p">,</span> <span class="nx">tween</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">name</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">ns</span><span class="p">.</span><span class="nx">qualify</span><span class="p">(</span><span class="nx">nameNS</span><span class="p">);</span>
    <span class="kd">function</span> <span class="nx">attrTween</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">tween</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="nx">name</span><span class="p">));</span>
      <span class="k">return</span> <span class="nx">f</span> <span class="o">&amp;&amp;</span> <span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">f</span><span class="p">(</span><span class="nx">t</span><span class="p">));</span>
      <span class="p">};</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">attrTweenNS</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">tween</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">getAttributeNS</span><span class="p">(</span><span class="nx">name</span><span class="p">.</span><span class="nx">space</span><span class="p">,</span> <span class="nx">name</span><span class="p">.</span><span class="nx">local</span><span class="p">));</span>
      <span class="k">return</span> <span class="nx">f</span> <span class="o">&amp;&amp;</span> <span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">setAttributeNS</span><span class="p">(</span><span class="nx">name</span><span class="p">.</span><span class="nx">space</span><span class="p">,</span> <span class="nx">name</span><span class="p">.</span><span class="nx">local</span><span class="p">,</span> <span class="nx">f</span><span class="p">(</span><span class="nx">t</span><span class="p">));</span>
      <span class="p">};</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">tween</span><span class="p">(</span><span class="s2">&quot;attr.&quot;</span> <span class="o">+</span> <span class="nx">nameNS</span><span class="p">,</span> <span class="nx">name</span><span class="p">.</span><span class="nx">local</span> <span class="o">?</span> <span class="nx">attrTweenNS</span> <span class="o">:</span> <span class="nx">attrTween</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nx">d3_transitionPrototype</span><span class="p">.</span><span class="nx">style</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">priority</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">n</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">name</span> <span class="o">!==</span> <span class="s2">&quot;string&quot;</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">n</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="nx">value</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
        <span class="k">for</span> <span class="p">(</span><span class="nx">priority</span> <span class="k">in</span> <span class="nx">name</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="nx">priority</span><span class="p">,</span> <span class="nx">name</span><span class="p">[</span><span class="nx">priority</span><span class="p">],</span> <span class="nx">value</span><span class="p">);</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="nx">priority</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">styleNull</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">removeProperty</span><span class="p">(</span><span class="nx">name</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">styleString</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">b</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">styleNull</span> <span class="o">:</span> <span class="p">(</span><span class="nx">b</span> <span class="o">+=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">d3_window</span><span class="p">.</span><span class="nx">getComputedStyle</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="kc">null</span><span class="p">).</span><span class="nx">getPropertyValue</span><span class="p">(</span><span class="nx">name</span><span class="p">),</span> <span class="nx">i</span><span class="p">;</span>
        <span class="k">return</span> <span class="nx">a</span> <span class="o">!==</span> <span class="nx">b</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="nx">d3_interpolate</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">setProperty</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">i</span><span class="p">(</span><span class="nx">t</span><span class="p">),</span> <span class="nx">priority</span><span class="p">);</span>
        <span class="p">});</span>
      <span class="p">});</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">d3_transition_tween</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;style.&quot;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">styleString</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nx">d3_transitionPrototype</span><span class="p">.</span><span class="nx">styleTween</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">tween</span><span class="p">,</span> <span class="nx">priority</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">)</span> <span class="nx">priority</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">styleTween</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="nx">tween</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">d3_window</span><span class="p">.</span><span class="nx">getComputedStyle</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="kc">null</span><span class="p">).</span><span class="nx">getPropertyValue</span><span class="p">(</span><span class="nx">name</span><span class="p">));</span>
      <span class="k">return</span> <span class="nx">f</span> <span class="o">&amp;&amp;</span> <span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">setProperty</span><span class="p">(</span><span class="nx">name</span><span class="p">,</span> <span class="nx">f</span><span class="p">(</span><span class="nx">t</span><span class="p">),</span> <span class="nx">priority</span><span class="p">);</span>
      <span class="p">};</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">tween</span><span class="p">(</span><span class="s2">&quot;style.&quot;</span> <span class="o">+</span> <span class="nx">name</span><span class="p">,</span> <span class="nx">styleTween</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nx">d3_transitionPrototype</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_transition_tween</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">d3_transition_text</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_transition_text</span><span class="p">(</span><span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">b</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="nx">b</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
    <span class="k">return</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">textContent</span> <span class="o">=</span> <span class="nx">b</span><span class="p">;</span>
    <span class="p">};</span>
  <span class="p">}</span>
  <span class="nx">d3_transitionPrototype</span><span class="p">.</span><span class="nx">remove</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="s2">&quot;end.transition&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">p</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">__transition__</span><span class="p">.</span><span class="nx">count</span> <span class="o">&lt;</span> <span class="mi">2</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">p</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">))</span> <span class="nx">p</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="p">};</span>
  <span class="nx">d3_transitionPrototype</span><span class="p">.</span><span class="nx">ease</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">node</span><span class="p">().</span><span class="nx">__transition__</span><span class="p">[</span><span class="nx">id</span><span class="p">].</span><span class="nx">ease</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">value</span> <span class="o">!==</span> <span class="s2">&quot;function&quot;</span><span class="p">)</span> <span class="nx">value</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">ease</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">d3</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">d3_selection_each</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">node</span><span class="p">.</span><span class="nx">__transition__</span><span class="p">[</span><span class="nx">id</span><span class="p">].</span><span class="nx">ease</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">});</span>
  <span class="p">};</span>
  <span class="nx">d3_transitionPrototype</span><span class="p">.</span><span class="nx">delay</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">node</span><span class="p">().</span><span class="nx">__transition__</span><span class="p">[</span><span class="nx">id</span><span class="p">].</span><span class="nx">delay</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">d3_selection_each</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">?</span> <span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">node</span><span class="p">.</span><span class="nx">__transition__</span><span class="p">[</span><span class="nx">id</span><span class="p">].</span><span class="nx">delay</span> <span class="o">=</span> <span class="o">+</span><span class="nx">value</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">node</span><span class="p">.</span><span class="nx">__data__</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">);</span>
    <span class="p">}</span> <span class="o">:</span> <span class="p">(</span><span class="nx">value</span> <span class="o">=</span> <span class="o">+</span><span class="nx">value</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">node</span><span class="p">.</span><span class="nx">__transition__</span><span class="p">[</span><span class="nx">id</span><span class="p">].</span><span class="nx">delay</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}));</span>
  <span class="p">};</span>
  <span class="nx">d3_transitionPrototype</span><span class="p">.</span><span class="nx">duration</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">node</span><span class="p">().</span><span class="nx">__transition__</span><span class="p">[</span><span class="nx">id</span><span class="p">].</span><span class="nx">duration</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">d3_selection_each</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="k">typeof</span> <span class="nx">value</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">?</span> <span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">node</span><span class="p">.</span><span class="nx">__transition__</span><span class="p">[</span><span class="nx">id</span><span class="p">].</span><span class="nx">duration</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nx">value</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">node</span><span class="p">.</span><span class="nx">__data__</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">));</span>
    <span class="p">}</span> <span class="o">:</span> <span class="p">(</span><span class="nx">value</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nx">value</span><span class="p">),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">node</span><span class="p">.</span><span class="nx">__transition__</span><span class="p">[</span><span class="nx">id</span><span class="p">].</span><span class="nx">duration</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
    <span class="p">}));</span>
  <span class="p">};</span>
  <span class="nx">d3_transitionPrototype</span><span class="p">.</span><span class="nx">each</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">listener</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">id</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">inherit</span> <span class="o">=</span> <span class="nx">d3_transitionInherit</span><span class="p">,</span> <span class="nx">inheritId</span> <span class="o">=</span> <span class="nx">d3_transitionInheritId</span><span class="p">;</span>
      <span class="nx">d3_transitionInheritId</span> <span class="o">=</span> <span class="nx">id</span><span class="p">;</span>
      <span class="nx">d3_selection_each</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">d3_transitionInherit</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">__transition__</span><span class="p">[</span><span class="nx">id</span><span class="p">];</span>
        <span class="nx">type</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">node</span><span class="p">.</span><span class="nx">__data__</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">j</span><span class="p">);</span>
      <span class="p">});</span>
      <span class="nx">d3_transitionInherit</span> <span class="o">=</span> <span class="nx">inherit</span><span class="p">;</span>
      <span class="nx">d3_transitionInheritId</span> <span class="o">=</span> <span class="nx">inheritId</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">d3_selection_each</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">transition</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">__transition__</span><span class="p">[</span><span class="nx">id</span><span class="p">];</span>
        <span class="p">(</span><span class="nx">transition</span><span class="p">.</span><span class="nx">event</span> <span class="o">||</span> <span class="p">(</span><span class="nx">transition</span><span class="p">.</span><span class="nx">event</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="s2">&quot;start&quot;</span><span class="p">,</span> <span class="s2">&quot;end&quot;</span><span class="p">))).</span><span class="nx">on</span><span class="p">(</span><span class="nx">type</span><span class="p">,</span> <span class="nx">listener</span><span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nx">d3_transitionPrototype</span><span class="p">.</span><span class="nx">transition</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">id0</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="nx">id1</span> <span class="o">=</span> <span class="o">++</span><span class="nx">d3_transitionId</span><span class="p">,</span> <span class="nx">subgroups</span> <span class="o">=</span> <span class="p">[],</span> <span class="nx">subgroup</span><span class="p">,</span> <span class="nx">group</span><span class="p">,</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">transition</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">m</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">j</span> <span class="o">&lt;</span> <span class="nx">m</span><span class="p">;</span> <span class="nx">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">subgroups</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">subgroup</span> <span class="o">=</span> <span class="p">[]);</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">group</span> <span class="o">=</span> <span class="k">this</span><span class="p">[</span><span class="nx">j</span><span class="p">],</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">group</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">node</span> <span class="o">=</span> <span class="nx">group</span><span class="p">[</span><span class="nx">i</span><span class="p">])</span> <span class="p">{</span>
          <span class="nx">transition</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">__transition__</span><span class="p">[</span><span class="nx">id0</span><span class="p">]);</span>
          <span class="nx">transition</span><span class="p">.</span><span class="nx">delay</span> <span class="o">+=</span> <span class="nx">transition</span><span class="p">.</span><span class="nx">duration</span><span class="p">;</span>
          <span class="nx">d3_transitionNode</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">id1</span><span class="p">,</span> <span class="nx">transition</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="nx">subgroup</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">node</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">d3_transition</span><span class="p">(</span><span class="nx">subgroups</span><span class="p">,</span> <span class="nx">id1</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_transitionNode</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">i</span><span class="p">,</span> <span class="nx">id</span><span class="p">,</span> <span class="nx">inherit</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">lock</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">__transition__</span> <span class="o">||</span> <span class="p">(</span><span class="nx">node</span><span class="p">.</span><span class="nx">__transition__</span> <span class="o">=</span> <span class="p">{</span>
      <span class="nx">active</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="nx">count</span><span class="o">:</span> <span class="mi">0</span>
    <span class="p">}),</span> <span class="nx">transition</span> <span class="o">=</span> <span class="nx">lock</span><span class="p">[</span><span class="nx">id</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">transition</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">time</span> <span class="o">=</span> <span class="nx">inherit</span><span class="p">.</span><span class="nx">time</span><span class="p">;</span>
      <span class="nx">transition</span> <span class="o">=</span> <span class="nx">lock</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="nx">tween</span><span class="o">:</span> <span class="k">new</span> <span class="nx">d3_Map</span><span class="p">(),</span>
        <span class="nx">time</span><span class="o">:</span> <span class="nx">time</span><span class="p">,</span>
        <span class="nx">ease</span><span class="o">:</span> <span class="nx">inherit</span><span class="p">.</span><span class="nx">ease</span><span class="p">,</span>
        <span class="nx">delay</span><span class="o">:</span> <span class="nx">inherit</span><span class="p">.</span><span class="nx">delay</span><span class="p">,</span>
        <span class="nx">duration</span><span class="o">:</span> <span class="nx">inherit</span><span class="p">.</span><span class="nx">duration</span>
      <span class="p">};</span>
      <span class="o">++</span><span class="nx">lock</span><span class="p">.</span><span class="nx">count</span><span class="p">;</span>
      <span class="nx">d3</span><span class="p">.</span><span class="nx">timer</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">elapsed</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">node</span><span class="p">.</span><span class="nx">__data__</span><span class="p">,</span> <span class="nx">ease</span> <span class="o">=</span> <span class="nx">transition</span><span class="p">.</span><span class="nx">ease</span><span class="p">,</span> <span class="nx">delay</span> <span class="o">=</span> <span class="nx">transition</span><span class="p">.</span><span class="nx">delay</span><span class="p">,</span> <span class="nx">duration</span> <span class="o">=</span> <span class="nx">transition</span><span class="p">.</span><span class="nx">duration</span><span class="p">,</span> <span class="nx">timer</span> <span class="o">=</span> <span class="nx">d3_timer_active</span><span class="p">,</span> <span class="nx">tweened</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="nx">timer</span><span class="p">.</span><span class="nx">t</span> <span class="o">=</span> <span class="nx">delay</span> <span class="o">+</span> <span class="nx">time</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">delay</span> <span class="o">&lt;=</span> <span class="nx">elapsed</span><span class="p">)</span> <span class="k">return</span> <span class="nx">start</span><span class="p">(</span><span class="nx">elapsed</span> <span class="o">-</span> <span class="nx">delay</span><span class="p">);</span>
        <span class="nx">timer</span><span class="p">.</span><span class="nx">c</span> <span class="o">=</span> <span class="nx">start</span><span class="p">;</span>
        <span class="kd">function</span> <span class="nx">start</span><span class="p">(</span><span class="nx">elapsed</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">lock</span><span class="p">.</span><span class="nx">active</span> <span class="o">&gt;</span> <span class="nx">id</span><span class="p">)</span> <span class="k">return</span> <span class="nx">stop</span><span class="p">();</span>
          <span class="nx">lock</span><span class="p">.</span><span class="nx">active</span> <span class="o">=</span> <span class="nx">id</span><span class="p">;</span>
          <span class="nx">transition</span><span class="p">.</span><span class="nx">event</span> <span class="o">&amp;&amp;</span> <span class="nx">transition</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">start</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">);</span>
          <span class="nx">transition</span><span class="p">.</span><span class="nx">tween</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="o">=</span> <span class="nx">value</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">))</span> <span class="p">{</span>
              <span class="nx">tweened</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">value</span><span class="p">);</span>
            <span class="p">}</span>
          <span class="p">});</span>
          <span class="nx">d3</span><span class="p">.</span><span class="nx">timer</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">timer</span><span class="p">.</span><span class="nx">c</span> <span class="o">=</span> <span class="nx">tick</span><span class="p">(</span><span class="nx">elapsed</span> <span class="o">||</span> <span class="mi">1</span><span class="p">)</span> <span class="o">?</span> <span class="nx">d3_true</span> <span class="o">:</span> <span class="nx">tick</span><span class="p">;</span>
            <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
          <span class="p">},</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">time</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="kd">function</span> <span class="nx">tick</span><span class="p">(</span><span class="nx">elapsed</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">lock</span><span class="p">.</span><span class="nx">active</span> <span class="o">!==</span> <span class="nx">id</span><span class="p">)</span> <span class="k">return</span> <span class="nx">stop</span><span class="p">();</span>
          <span class="kd">var</span> <span class="nx">t</span> <span class="o">=</span> <span class="nx">elapsed</span> <span class="o">/</span> <span class="nx">duration</span><span class="p">,</span> <span class="nx">e</span> <span class="o">=</span> <span class="nx">ease</span><span class="p">(</span><span class="nx">t</span><span class="p">),</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">tweened</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
          <span class="k">while</span> <span class="p">(</span><span class="nx">n</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">tweened</span><span class="p">[</span><span class="o">--</span><span class="nx">n</span><span class="p">].</span><span class="nx">call</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">e</span><span class="p">);</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">t</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">transition</span><span class="p">.</span><span class="nx">event</span> <span class="o">&amp;&amp;</span> <span class="nx">transition</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">end</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">);</span>
            <span class="k">return</span> <span class="nx">stop</span><span class="p">();</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="kd">function</span> <span class="nx">stop</span><span class="p">()</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="o">--</span><span class="nx">lock</span><span class="p">.</span><span class="nx">count</span><span class="p">)</span> <span class="k">delete</span> <span class="nx">lock</span><span class="p">[</span><span class="nx">id</span><span class="p">];</span> <span class="k">else</span> <span class="k">delete</span> <span class="nx">node</span><span class="p">.</span><span class="nx">__transition__</span><span class="p">;</span>
          <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">},</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">time</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">svg</span><span class="p">.</span><span class="nx">axis</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">scale</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">linear</span><span class="p">(),</span> <span class="nx">orient</span> <span class="o">=</span> <span class="nx">d3_svg_axisDefaultOrient</span><span class="p">,</span> <span class="nx">innerTickSize</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span> <span class="nx">outerTickSize</span> <span class="o">=</span> <span class="mi">6</span><span class="p">,</span> <span class="nx">tickPadding</span> <span class="o">=</span> <span class="mi">3</span><span class="p">,</span> <span class="nx">tickArguments_</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">10</span> <span class="p">],</span> <span class="nx">tickValues</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">tickFormat_</span><span class="p">;</span>
    <span class="kd">function</span> <span class="nx">axis</span><span class="p">(</span><span class="nx">g</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">g</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">g</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">scale0</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">__chart__</span> <span class="o">||</span> <span class="nx">scale</span><span class="p">,</span> <span class="nx">scale1</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">__chart__</span> <span class="o">=</span> <span class="nx">scale</span><span class="p">.</span><span class="nx">copy</span><span class="p">();</span>
        <span class="kd">var</span> <span class="nx">ticks</span> <span class="o">=</span> <span class="nx">tickValues</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">scale1</span><span class="p">.</span><span class="nx">ticks</span> <span class="o">?</span> <span class="nx">scale1</span><span class="p">.</span><span class="nx">ticks</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">scale1</span><span class="p">,</span> <span class="nx">tickArguments_</span><span class="p">)</span> <span class="o">:</span> <span class="nx">scale1</span><span class="p">.</span><span class="nx">domain</span><span class="p">()</span> <span class="o">:</span> <span class="nx">tickValues</span><span class="p">,</span> <span class="nx">tickFormat</span> <span class="o">=</span> <span class="nx">tickFormat_</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">scale1</span><span class="p">.</span><span class="nx">tickFormat</span> <span class="o">?</span> <span class="nx">scale1</span><span class="p">.</span><span class="nx">tickFormat</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">scale1</span><span class="p">,</span> <span class="nx">tickArguments_</span><span class="p">)</span> <span class="o">:</span> <span class="nx">d3_identity</span> <span class="o">:</span> <span class="nx">tickFormat_</span><span class="p">,</span> <span class="nx">tick</span> <span class="o">=</span> <span class="nx">g</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;.tick&quot;</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="nx">ticks</span><span class="p">,</span> <span class="nx">scale1</span><span class="p">),</span> <span class="nx">tickEnter</span> <span class="o">=</span> <span class="nx">tick</span><span class="p">.</span><span class="nx">enter</span><span class="p">().</span><span class="nx">insert</span><span class="p">(</span><span class="s2">&quot;g&quot;</span><span class="p">,</span> <span class="s2">&quot;.domain&quot;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;tick&quot;</span><span class="p">).</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;opacity&quot;</span><span class="p">,</span> <span class="err">ε</span><span class="p">),</span> <span class="nx">tickExit</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="nx">tick</span><span class="p">.</span><span class="nx">exit</span><span class="p">()).</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;opacity&quot;</span><span class="p">,</span> <span class="err">ε</span><span class="p">).</span><span class="nx">remove</span><span class="p">(),</span> <span class="nx">tickUpdate</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="nx">tick</span><span class="p">.</span><span class="nx">order</span><span class="p">()).</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;opacity&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="nx">tickTransform</span><span class="p">;</span>
        <span class="kd">var</span> <span class="nx">range</span> <span class="o">=</span> <span class="nx">d3_scaleRange</span><span class="p">(</span><span class="nx">scale1</span><span class="p">),</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">g</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;.domain&quot;</span><span class="p">).</span><span class="nx">data</span><span class="p">([</span> <span class="mi">0</span> <span class="p">]),</span> <span class="nx">pathUpdate</span> <span class="o">=</span> <span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">enter</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;path&quot;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;domain&quot;</span><span class="p">),</span> 
        <span class="nx">d3</span><span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="nx">path</span><span class="p">));</span>
        <span class="nx">tickEnter</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">);</span>
        <span class="nx">tickEnter</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">lineEnter</span> <span class="o">=</span> <span class="nx">tickEnter</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">),</span> <span class="nx">lineUpdate</span> <span class="o">=</span> <span class="nx">tickUpdate</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;line&quot;</span><span class="p">),</span> <span class="nx">text</span> <span class="o">=</span> <span class="nx">tick</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="nx">tickFormat</span><span class="p">),</span> <span class="nx">textEnter</span> <span class="o">=</span> <span class="nx">tickEnter</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">),</span> <span class="nx">textUpdate</span> <span class="o">=</span> <span class="nx">tickUpdate</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;text&quot;</span><span class="p">);</span>
        <span class="k">switch</span> <span class="p">(</span><span class="nx">orient</span><span class="p">)</span> <span class="p">{</span>
         <span class="k">case</span> <span class="s2">&quot;bottom&quot;</span><span class="o">:</span>
          <span class="p">{</span>
            <span class="nx">tickTransform</span> <span class="o">=</span> <span class="nx">d3_svg_axisX</span><span class="p">;</span>
            <span class="nx">lineEnter</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="nx">innerTickSize</span><span class="p">);</span>
            <span class="nx">textEnter</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">innerTickSize</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="nx">tickPadding</span><span class="p">);</span>
            <span class="nx">lineUpdate</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="nx">innerTickSize</span><span class="p">);</span>
            <span class="nx">textUpdate</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">innerTickSize</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="nx">tickPadding</span><span class="p">);</span>
            <span class="nx">text</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;dy&quot;</span><span class="p">,</span> <span class="s2">&quot;.71em&quot;</span><span class="p">).</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">);</span>
            <span class="nx">pathUpdate</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="s2">&quot;M&quot;</span> <span class="o">+</span> <span class="nx">range</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">outerTickSize</span> <span class="o">+</span> <span class="s2">&quot;V0H&quot;</span> <span class="o">+</span> <span class="nx">range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;V&quot;</span> <span class="o">+</span> <span class="nx">outerTickSize</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
          <span class="p">}</span>

         <span class="k">case</span> <span class="s2">&quot;top&quot;</span><span class="o">:</span>
          <span class="p">{</span>
            <span class="nx">tickTransform</span> <span class="o">=</span> <span class="nx">d3_svg_axisX</span><span class="p">;</span>
            <span class="nx">lineEnter</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="o">-</span><span class="nx">innerTickSize</span><span class="p">);</span>
            <span class="nx">textEnter</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="o">-</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">innerTickSize</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="nx">tickPadding</span><span class="p">));</span>
            <span class="nx">lineUpdate</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="o">-</span><span class="nx">innerTickSize</span><span class="p">);</span>
            <span class="nx">textUpdate</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="o">-</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">innerTickSize</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="nx">tickPadding</span><span class="p">));</span>
            <span class="nx">text</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;dy&quot;</span><span class="p">,</span> <span class="s2">&quot;0em&quot;</span><span class="p">).</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;middle&quot;</span><span class="p">);</span>
            <span class="nx">pathUpdate</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="s2">&quot;M&quot;</span> <span class="o">+</span> <span class="nx">range</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="o">-</span><span class="nx">outerTickSize</span> <span class="o">+</span> <span class="s2">&quot;V0H&quot;</span> <span class="o">+</span> <span class="nx">range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;V&quot;</span> <span class="o">+</span> <span class="o">-</span><span class="nx">outerTickSize</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
          <span class="p">}</span>

         <span class="k">case</span> <span class="s2">&quot;left&quot;</span><span class="o">:</span>
          <span class="p">{</span>
            <span class="nx">tickTransform</span> <span class="o">=</span> <span class="nx">d3_svg_axisY</span><span class="p">;</span>
            <span class="nx">lineEnter</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="o">-</span><span class="nx">innerTickSize</span><span class="p">);</span>
            <span class="nx">textEnter</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="o">-</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">innerTickSize</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="nx">tickPadding</span><span class="p">));</span>
            <span class="nx">lineUpdate</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="o">-</span><span class="nx">innerTickSize</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
            <span class="nx">textUpdate</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="o">-</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">innerTickSize</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="nx">tickPadding</span><span class="p">)).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
            <span class="nx">text</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;dy&quot;</span><span class="p">,</span> <span class="s2">&quot;.32em&quot;</span><span class="p">).</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;end&quot;</span><span class="p">);</span>
            <span class="nx">pathUpdate</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="s2">&quot;M&quot;</span> <span class="o">+</span> <span class="o">-</span><span class="nx">outerTickSize</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">range</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;H0V&quot;</span> <span class="o">+</span> <span class="nx">range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;H&quot;</span> <span class="o">+</span> <span class="o">-</span><span class="nx">outerTickSize</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
          <span class="p">}</span>

         <span class="k">case</span> <span class="s2">&quot;right&quot;</span><span class="o">:</span>
          <span class="p">{</span>
            <span class="nx">tickTransform</span> <span class="o">=</span> <span class="nx">d3_svg_axisY</span><span class="p">;</span>
            <span class="nx">lineEnter</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="nx">innerTickSize</span><span class="p">);</span>
            <span class="nx">textEnter</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">innerTickSize</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="nx">tickPadding</span><span class="p">);</span>
            <span class="nx">lineUpdate</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x2&quot;</span><span class="p">,</span> <span class="nx">innerTickSize</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y2&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
            <span class="nx">textUpdate</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">innerTickSize</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="nx">tickPadding</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
            <span class="nx">text</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;dy&quot;</span><span class="p">,</span> <span class="s2">&quot;.32em&quot;</span><span class="p">).</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;text-anchor&quot;</span><span class="p">,</span> <span class="s2">&quot;start&quot;</span><span class="p">);</span>
            <span class="nx">pathUpdate</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="s2">&quot;M&quot;</span> <span class="o">+</span> <span class="nx">outerTickSize</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">range</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;H0V&quot;</span> <span class="o">+</span> <span class="nx">range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;H&quot;</span> <span class="o">+</span> <span class="nx">outerTickSize</span><span class="p">);</span>
            <span class="k">break</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">scale1</span><span class="p">.</span><span class="nx">rangeBand</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nx">scale1</span><span class="p">,</span> <span class="nx">dx</span> <span class="o">=</span> <span class="nx">x</span><span class="p">.</span><span class="nx">rangeBand</span><span class="p">()</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
          <span class="nx">scale0</span> <span class="o">=</span> <span class="nx">scale1</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nx">x</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="o">+</span> <span class="nx">dx</span><span class="p">;</span>
          <span class="p">};</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">scale0</span><span class="p">.</span><span class="nx">rangeBand</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">scale0</span> <span class="o">=</span> <span class="nx">scale1</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">tickExit</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">tickTransform</span><span class="p">,</span> <span class="nx">scale1</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="nx">tickEnter</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">tickTransform</span><span class="p">,</span> <span class="nx">scale0</span><span class="p">);</span>
        <span class="nx">tickUpdate</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">tickTransform</span><span class="p">,</span> <span class="nx">scale1</span><span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>
    <span class="nx">axis</span><span class="p">.</span><span class="nx">scale</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">scale</span><span class="p">;</span>
      <span class="nx">scale</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">axis</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">axis</span><span class="p">.</span><span class="nx">orient</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">orient</span><span class="p">;</span>
      <span class="nx">orient</span> <span class="o">=</span> <span class="nx">x</span> <span class="k">in</span> <span class="nx">d3_svg_axisOrients</span> <span class="o">?</span> <span class="nx">x</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span> <span class="o">:</span> <span class="nx">d3_svg_axisDefaultOrient</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">axis</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">axis</span><span class="p">.</span><span class="nx">ticks</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">tickArguments_</span><span class="p">;</span>
      <span class="nx">tickArguments_</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">axis</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">axis</span><span class="p">.</span><span class="nx">tickValues</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">tickValues</span><span class="p">;</span>
      <span class="nx">tickValues</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">axis</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">axis</span><span class="p">.</span><span class="nx">tickFormat</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">tickFormat_</span><span class="p">;</span>
      <span class="nx">tickFormat_</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">axis</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">axis</span><span class="p">.</span><span class="nx">tickSize</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">n</span><span class="p">)</span> <span class="k">return</span> <span class="nx">innerTickSize</span><span class="p">;</span>
      <span class="nx">innerTickSize</span> <span class="o">=</span> <span class="o">+</span><span class="nx">x</span><span class="p">;</span>
      <span class="nx">outerTickSize</span> <span class="o">=</span> <span class="o">+</span><span class="nx">arguments</span><span class="p">[</span><span class="nx">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
      <span class="k">return</span> <span class="nx">axis</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">axis</span><span class="p">.</span><span class="nx">innerTickSize</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">innerTickSize</span><span class="p">;</span>
      <span class="nx">innerTickSize</span> <span class="o">=</span> <span class="o">+</span><span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">axis</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">axis</span><span class="p">.</span><span class="nx">outerTickSize</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">outerTickSize</span><span class="p">;</span>
      <span class="nx">outerTickSize</span> <span class="o">=</span> <span class="o">+</span><span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">axis</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">axis</span><span class="p">.</span><span class="nx">tickPadding</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">tickPadding</span><span class="p">;</span>
      <span class="nx">tickPadding</span> <span class="o">=</span> <span class="o">+</span><span class="nx">x</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">axis</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">axis</span><span class="p">.</span><span class="nx">tickSubdivide</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">axis</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">axis</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">d3_svg_axisDefaultOrient</span> <span class="o">=</span> <span class="s2">&quot;bottom&quot;</span><span class="p">,</span> <span class="nx">d3_svg_axisOrients</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">top</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">right</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">bottom</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nx">left</span><span class="o">:</span> <span class="mi">1</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_svg_axisX</span><span class="p">(</span><span class="nx">selection</span><span class="p">,</span> <span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">selection</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;transform&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="s2">&quot;translate(&quot;</span> <span class="o">+</span> <span class="nx">x</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;,0)&quot;</span><span class="p">;</span>
    <span class="p">});</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_svg_axisY</span><span class="p">(</span><span class="nx">selection</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">selection</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;transform&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="s2">&quot;translate(0,&quot;</span> <span class="o">+</span> <span class="nx">y</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">;</span>
    <span class="p">});</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">svg</span><span class="p">.</span><span class="nx">brush</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">event</span> <span class="o">=</span> <span class="nx">d3_eventDispatch</span><span class="p">(</span><span class="nx">brush</span><span class="p">,</span> <span class="s2">&quot;brushstart&quot;</span><span class="p">,</span> <span class="s2">&quot;brush&quot;</span><span class="p">,</span> <span class="s2">&quot;brushend&quot;</span><span class="p">),</span> <span class="nx">x</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">y</span> <span class="o">=</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">xExtent</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">],</span> <span class="nx">yExtent</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">],</span> <span class="nx">xExtentDomain</span><span class="p">,</span> <span class="nx">yExtentDomain</span><span class="p">,</span> <span class="nx">xClamp</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">yClamp</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span> <span class="nx">resizes</span> <span class="o">=</span> <span class="nx">d3_svg_brushResizes</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="kd">function</span> <span class="nx">brush</span><span class="p">(</span><span class="nx">g</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">g</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">g</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;pointer-events&quot;</span><span class="p">,</span> <span class="s2">&quot;all&quot;</span><span class="p">).</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;-webkit-tap-highlight-color&quot;</span><span class="p">,</span> <span class="s2">&quot;rgba(0,0,0,0)&quot;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;mousedown.brush&quot;</span><span class="p">,</span> <span class="nx">brushstart</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;touchstart.brush&quot;</span><span class="p">,</span> <span class="nx">brushstart</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">background</span> <span class="o">=</span> <span class="nx">g</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;.background&quot;</span><span class="p">).</span><span class="nx">data</span><span class="p">([</span> <span class="mi">0</span> <span class="p">]);</span>
        <span class="nx">background</span><span class="p">.</span><span class="nx">enter</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;rect&quot;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;background&quot;</span><span class="p">).</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;visibility&quot;</span><span class="p">,</span> <span class="s2">&quot;hidden&quot;</span><span class="p">).</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;cursor&quot;</span><span class="p">,</span> <span class="s2">&quot;crosshair&quot;</span><span class="p">);</span>
        <span class="nx">g</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;.extent&quot;</span><span class="p">).</span><span class="nx">data</span><span class="p">([</span> <span class="mi">0</span> <span class="p">]).</span><span class="nx">enter</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;rect&quot;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;extent&quot;</span><span class="p">).</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;cursor&quot;</span><span class="p">,</span> <span class="s2">&quot;move&quot;</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">resize</span> <span class="o">=</span> <span class="nx">g</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;.resize&quot;</span><span class="p">).</span><span class="nx">data</span><span class="p">(</span><span class="nx">resizes</span><span class="p">,</span> <span class="nx">d3_identity</span><span class="p">);</span>
        <span class="nx">resize</span><span class="p">.</span><span class="nx">exit</span><span class="p">().</span><span class="nx">remove</span><span class="p">();</span>
        <span class="nx">resize</span><span class="p">.</span><span class="nx">enter</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;g&quot;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="s2">&quot;resize &quot;</span> <span class="o">+</span> <span class="nx">d</span><span class="p">;</span>
        <span class="p">}).</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;cursor&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="nx">d3_svg_brushCursor</span><span class="p">[</span><span class="nx">d</span><span class="p">];</span>
        <span class="p">}).</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;rect&quot;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="sr">/[ew]$/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="o">?</span> <span class="o">-</span><span class="mi">3</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">}).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">return</span> <span class="sr">/^[ns]/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="o">?</span> <span class="o">-</span><span class="mi">3</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">}).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="mi">6</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="mi">6</span><span class="p">).</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;visibility&quot;</span><span class="p">,</span> <span class="s2">&quot;hidden&quot;</span><span class="p">);</span>
        <span class="nx">resize</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;display&quot;</span><span class="p">,</span> <span class="nx">brush</span><span class="p">.</span><span class="nx">empty</span><span class="p">()</span> <span class="o">?</span> <span class="s2">&quot;none&quot;</span> <span class="o">:</span> <span class="kc">null</span><span class="p">);</span>
        <span class="kd">var</span> <span class="nx">gUpdate</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="nx">g</span><span class="p">),</span> <span class="nx">backgroundUpdate</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">transition</span><span class="p">(</span><span class="nx">background</span><span class="p">),</span> <span class="nx">range</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">range</span> <span class="o">=</span> <span class="nx">d3_scaleRange</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
          <span class="nx">backgroundUpdate</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nx">range</span><span class="p">[</span><span class="mi">0</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="nx">range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">range</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
          <span class="nx">redrawX</span><span class="p">(</span><span class="nx">gUpdate</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">range</span> <span class="o">=</span> <span class="nx">d3_scaleRange</span><span class="p">(</span><span class="nx">y</span><span class="p">);</span>
          <span class="nx">backgroundUpdate</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">range</span><span class="p">[</span><span class="mi">0</span><span class="p">]).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="nx">range</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">range</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
          <span class="nx">redrawY</span><span class="p">(</span><span class="nx">gUpdate</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="nx">redraw</span><span class="p">(</span><span class="nx">gUpdate</span><span class="p">);</span>
      <span class="p">});</span>
    <span class="p">}</span>
    <span class="nx">brush</span><span class="p">.</span><span class="nx">event</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">g</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">g</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">event_</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">of</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">),</span> <span class="nx">extent1</span> <span class="o">=</span> <span class="p">{</span>
          <span class="nx">x</span><span class="o">:</span> <span class="nx">xExtent</span><span class="p">,</span>
          <span class="nx">y</span><span class="o">:</span> <span class="nx">yExtent</span><span class="p">,</span>
          <span class="nx">i</span><span class="o">:</span> <span class="nx">xExtentDomain</span><span class="p">,</span>
          <span class="nx">j</span><span class="o">:</span> <span class="nx">yExtentDomain</span>
        <span class="p">},</span> <span class="nx">extent0</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">__chart__</span> <span class="o">||</span> <span class="nx">extent1</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">__chart__</span> <span class="o">=</span> <span class="nx">extent1</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">d3_transitionInheritId</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">transition</span><span class="p">().</span><span class="nx">each</span><span class="p">(</span><span class="s2">&quot;start.brush&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">xExtentDomain</span> <span class="o">=</span> <span class="nx">extent0</span><span class="p">.</span><span class="nx">i</span><span class="p">;</span>
            <span class="nx">yExtentDomain</span> <span class="o">=</span> <span class="nx">extent0</span><span class="p">.</span><span class="nx">j</span><span class="p">;</span>
            <span class="nx">xExtent</span> <span class="o">=</span> <span class="nx">extent0</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
            <span class="nx">yExtent</span> <span class="o">=</span> <span class="nx">extent0</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
            <span class="nx">event_</span><span class="p">({</span>
              <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;brushstart&quot;</span>
            <span class="p">});</span>
          <span class="p">}).</span><span class="nx">tween</span><span class="p">(</span><span class="s2">&quot;brush:brush&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">xi</span> <span class="o">=</span> <span class="nx">d3_interpolateArray</span><span class="p">(</span><span class="nx">xExtent</span><span class="p">,</span> <span class="nx">extent1</span><span class="p">.</span><span class="nx">x</span><span class="p">),</span> <span class="nx">yi</span> <span class="o">=</span> <span class="nx">d3_interpolateArray</span><span class="p">(</span><span class="nx">yExtent</span><span class="p">,</span> <span class="nx">extent1</span><span class="p">.</span><span class="nx">y</span><span class="p">);</span>
            <span class="nx">xExtentDomain</span> <span class="o">=</span> <span class="nx">yExtentDomain</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="k">return</span> <span class="kd">function</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
              <span class="nx">xExtent</span> <span class="o">=</span> <span class="nx">extent1</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">xi</span><span class="p">(</span><span class="nx">t</span><span class="p">);</span>
              <span class="nx">yExtent</span> <span class="o">=</span> <span class="nx">extent1</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">yi</span><span class="p">(</span><span class="nx">t</span><span class="p">);</span>
              <span class="nx">event_</span><span class="p">({</span>
                <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;brush&quot;</span><span class="p">,</span>
                <span class="nx">mode</span><span class="o">:</span> <span class="s2">&quot;resize&quot;</span>
              <span class="p">});</span>
            <span class="p">};</span>
          <span class="p">}).</span><span class="nx">each</span><span class="p">(</span><span class="s2">&quot;end.brush&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
            <span class="nx">xExtentDomain</span> <span class="o">=</span> <span class="nx">extent1</span><span class="p">.</span><span class="nx">i</span><span class="p">;</span>
            <span class="nx">yExtentDomain</span> <span class="o">=</span> <span class="nx">extent1</span><span class="p">.</span><span class="nx">j</span><span class="p">;</span>
            <span class="nx">event_</span><span class="p">({</span>
              <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;brush&quot;</span><span class="p">,</span>
              <span class="nx">mode</span><span class="o">:</span> <span class="s2">&quot;resize&quot;</span>
            <span class="p">});</span>
            <span class="nx">event_</span><span class="p">({</span>
              <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;brushend&quot;</span>
            <span class="p">});</span>
          <span class="p">});</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="nx">event_</span><span class="p">({</span>
            <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;brushstart&quot;</span>
          <span class="p">});</span>
          <span class="nx">event_</span><span class="p">({</span>
            <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;brush&quot;</span><span class="p">,</span>
            <span class="nx">mode</span><span class="o">:</span> <span class="s2">&quot;resize&quot;</span>
          <span class="p">});</span>
          <span class="nx">event_</span><span class="p">({</span>
            <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;brushend&quot;</span>
          <span class="p">});</span>
        <span class="p">}</span>
      <span class="p">});</span>
    <span class="p">};</span>
    <span class="kd">function</span> <span class="nx">redraw</span><span class="p">(</span><span class="nx">g</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">g</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;.resize&quot;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;transform&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s2">&quot;translate(&quot;</span> <span class="o">+</span> <span class="nx">xExtent</span><span class="p">[</span><span class="o">+</span><span class="sr">/e$/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">d</span><span class="p">)]</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">yExtent</span><span class="p">[</span><span class="o">+</span><span class="sr">/^s/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">d</span><span class="p">)]</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">;</span>
      <span class="p">});</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">redrawX</span><span class="p">(</span><span class="nx">g</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">g</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;.extent&quot;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="nx">xExtent</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
      <span class="nx">g</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;.extent,.n&gt;rect,.s&gt;rect&quot;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="nx">xExtent</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">xExtent</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">redrawY</span><span class="p">(</span><span class="nx">g</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">g</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;.extent&quot;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="nx">yExtent</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
      <span class="nx">g</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;.extent,.e&gt;rect,.w&gt;rect&quot;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="nx">yExtent</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">yExtent</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
    <span class="p">}</span>
    <span class="kd">function</span> <span class="nx">brushstart</span><span class="p">()</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">target</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span> <span class="nx">eventTarget</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">),</span> <span class="nx">event_</span> <span class="o">=</span> <span class="nx">event</span><span class="p">.</span><span class="nx">of</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">),</span> <span class="nx">g</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="nx">target</span><span class="p">),</span> <span class="nx">resizing</span> <span class="o">=</span> <span class="nx">eventTarget</span><span class="p">.</span><span class="nx">datum</span><span class="p">(),</span> <span class="nx">resizingX</span> <span class="o">=</span> <span class="o">!</span><span class="sr">/^(n|s)$/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">resizing</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">resizingY</span> <span class="o">=</span> <span class="o">!</span><span class="sr">/^(e|w)$/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">resizing</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">dragging</span> <span class="o">=</span> <span class="nx">eventTarget</span><span class="p">.</span><span class="nx">classed</span><span class="p">(</span><span class="s2">&quot;extent&quot;</span><span class="p">),</span> <span class="nx">dragRestore</span> <span class="o">=</span> <span class="nx">d3_event_dragSuppress</span><span class="p">(),</span> <span class="nx">center</span><span class="p">,</span> <span class="nx">origin</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">mouse</span><span class="p">(</span><span class="nx">target</span><span class="p">),</span> <span class="nx">offset</span><span class="p">;</span>
      <span class="kd">var</span> <span class="nx">w</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="nx">d3_window</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;keydown.brush&quot;</span><span class="p">,</span> <span class="nx">keydown</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;keyup.brush&quot;</span><span class="p">,</span> <span class="nx">keyup</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">changedTouches</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">w</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;touchmove.brush&quot;</span><span class="p">,</span> <span class="nx">brushmove</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;touchend.brush&quot;</span><span class="p">,</span> <span class="nx">brushend</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">w</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;mousemove.brush&quot;</span><span class="p">,</span> <span class="nx">brushmove</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;mouseup.brush&quot;</span><span class="p">,</span> <span class="nx">brushend</span><span class="p">);</span>
      <span class="p">}</span>
      <span class="nx">g</span><span class="p">.</span><span class="nx">interrupt</span><span class="p">().</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;*&quot;</span><span class="p">).</span><span class="nx">interrupt</span><span class="p">();</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">dragging</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">origin</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">xExtent</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">origin</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="nx">origin</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">yExtent</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="nx">origin</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">resizing</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">ex</span> <span class="o">=</span> <span class="o">+</span><span class="sr">/w$/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">resizing</span><span class="p">),</span> <span class="nx">ey</span> <span class="o">=</span> <span class="o">+</span><span class="sr">/^n/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">resizing</span><span class="p">);</span>
        <span class="nx">offset</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">xExtent</span><span class="p">[</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">ex</span><span class="p">]</span> <span class="o">-</span> <span class="nx">origin</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">yExtent</span><span class="p">[</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">ey</span><span class="p">]</span> <span class="o">-</span> <span class="nx">origin</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">];</span>
        <span class="nx">origin</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">xExtent</span><span class="p">[</span><span class="nx">ex</span><span class="p">];</span>
        <span class="nx">origin</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">yExtent</span><span class="p">[</span><span class="nx">ey</span><span class="p">];</span>
      <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">altKey</span><span class="p">)</span> <span class="nx">center</span> <span class="o">=</span> <span class="nx">origin</span><span class="p">.</span><span class="nx">slice</span><span class="p">();</span>
      <span class="nx">g</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;pointer-events&quot;</span><span class="p">,</span> <span class="s2">&quot;none&quot;</span><span class="p">).</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;.resize&quot;</span><span class="p">).</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;display&quot;</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>
      <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;body&quot;</span><span class="p">).</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;cursor&quot;</span><span class="p">,</span> <span class="nx">eventTarget</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;cursor&quot;</span><span class="p">));</span>
      <span class="nx">event_</span><span class="p">({</span>
        <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;brushstart&quot;</span>
      <span class="p">});</span>
      <span class="nx">brushmove</span><span class="p">();</span>
      <span class="kd">function</span> <span class="nx">keydown</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">==</span> <span class="mi">32</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">dragging</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">center</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
            <span class="nx">origin</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-=</span> <span class="nx">xExtent</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="nx">origin</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-=</span> <span class="nx">yExtent</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="nx">dragging</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="nx">d3_eventPreventDefault</span><span class="p">();</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="kd">function</span> <span class="nx">keyup</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">==</span> <span class="mi">32</span> <span class="o">&amp;&amp;</span> <span class="nx">dragging</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">origin</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="nx">xExtent</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
          <span class="nx">origin</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="nx">yExtent</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
          <span class="nx">dragging</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
          <span class="nx">d3_eventPreventDefault</span><span class="p">();</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="kd">function</span> <span class="nx">brushmove</span><span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">point</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">mouse</span><span class="p">(</span><span class="nx">target</span><span class="p">),</span> <span class="nx">moved</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">offset</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">point</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="nx">offset</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
          <span class="nx">point</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="nx">offset</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">dragging</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">event</span><span class="p">.</span><span class="nx">altKey</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">center</span><span class="p">)</span> <span class="nx">center</span> <span class="o">=</span> <span class="p">[</span> <span class="p">(</span><span class="nx">xExtent</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">xExtent</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="nx">yExtent</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="nx">yExtent</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="mi">2</span> <span class="p">];</span>
            <span class="nx">origin</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">xExtent</span><span class="p">[</span><span class="o">+</span><span class="p">(</span><span class="nx">point</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&lt;</span> <span class="nx">center</span><span class="p">[</span><span class="mi">0</span><span class="p">])];</span>
            <span class="nx">origin</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">yExtent</span><span class="p">[</span><span class="o">+</span><span class="p">(</span><span class="nx">point</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="nx">center</span><span class="p">[</span><span class="mi">1</span><span class="p">])];</span>
          <span class="p">}</span> <span class="k">else</span> <span class="nx">center</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">resizingX</span> <span class="o">&amp;&amp;</span> <span class="nx">move1</span><span class="p">(</span><span class="nx">point</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> <span class="p">{</span>
          <span class="nx">redrawX</span><span class="p">(</span><span class="nx">g</span><span class="p">);</span>
          <span class="nx">moved</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">resizingY</span> <span class="o">&amp;&amp;</span> <span class="nx">move1</span><span class="p">(</span><span class="nx">point</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="p">{</span>
          <span class="nx">redrawY</span><span class="p">(</span><span class="nx">g</span><span class="p">);</span>
          <span class="nx">moved</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">moved</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">redraw</span><span class="p">(</span><span class="nx">g</span><span class="p">);</span>
          <span class="nx">event_</span><span class="p">({</span>
            <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;brush&quot;</span><span class="p">,</span>
            <span class="nx">mode</span><span class="o">:</span> <span class="nx">dragging</span> <span class="o">?</span> <span class="s2">&quot;move&quot;</span> <span class="o">:</span> <span class="s2">&quot;resize&quot;</span>
          <span class="p">});</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="kd">function</span> <span class="nx">move1</span><span class="p">(</span><span class="nx">point</span><span class="p">,</span> <span class="nx">scale</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">range</span> <span class="o">=</span> <span class="nx">d3_scaleRange</span><span class="p">(</span><span class="nx">scale</span><span class="p">),</span> <span class="nx">r0</span> <span class="o">=</span> <span class="nx">range</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">r1</span> <span class="o">=</span> <span class="nx">range</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">position</span> <span class="o">=</span> <span class="nx">origin</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">extent</span> <span class="o">=</span> <span class="nx">i</span> <span class="o">?</span> <span class="nx">yExtent</span> <span class="o">:</span> <span class="nx">xExtent</span><span class="p">,</span> <span class="nx">size</span> <span class="o">=</span> <span class="nx">extent</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">extent</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">min</span><span class="p">,</span> <span class="nx">max</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">dragging</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">r0</span> <span class="o">-=</span> <span class="nx">position</span><span class="p">;</span>
          <span class="nx">r1</span> <span class="o">-=</span> <span class="nx">size</span> <span class="o">+</span> <span class="nx">position</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="nx">min</span> <span class="o">=</span> <span class="p">(</span><span class="nx">i</span> <span class="o">?</span> <span class="nx">yClamp</span> <span class="o">:</span> <span class="nx">xClamp</span><span class="p">)</span> <span class="o">?</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">r0</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">r1</span><span class="p">,</span> <span class="nx">point</span><span class="p">[</span><span class="nx">i</span><span class="p">]))</span> <span class="o">:</span> <span class="nx">point</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">dragging</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">max</span> <span class="o">=</span> <span class="p">(</span><span class="nx">min</span> <span class="o">+=</span> <span class="nx">position</span><span class="p">)</span> <span class="o">+</span> <span class="nx">size</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">center</span><span class="p">)</span> <span class="nx">position</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">r0</span><span class="p">,</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">min</span><span class="p">(</span><span class="nx">r1</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="nx">center</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">-</span> <span class="nx">min</span><span class="p">));</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">position</span> <span class="o">&lt;</span> <span class="nx">min</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">max</span> <span class="o">=</span> <span class="nx">min</span><span class="p">;</span>
            <span class="nx">min</span> <span class="o">=</span> <span class="nx">position</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">max</span> <span class="o">=</span> <span class="nx">position</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">extent</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">!=</span> <span class="nx">min</span> <span class="o">||</span> <span class="nx">extent</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="nx">max</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">i</span><span class="p">)</span> <span class="nx">yExtentDomain</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span> <span class="k">else</span> <span class="nx">xExtentDomain</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
          <span class="nx">extent</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nx">min</span><span class="p">;</span>
          <span class="nx">extent</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nx">max</span><span class="p">;</span>
          <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span>
      <span class="kd">function</span> <span class="nx">brushend</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">brushmove</span><span class="p">();</span>
        <span class="nx">g</span><span class="p">.</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;pointer-events&quot;</span><span class="p">,</span> <span class="s2">&quot;all&quot;</span><span class="p">).</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;.resize&quot;</span><span class="p">).</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;display&quot;</span><span class="p">,</span> <span class="nx">brush</span><span class="p">.</span><span class="nx">empty</span><span class="p">()</span> <span class="o">?</span> <span class="s2">&quot;none&quot;</span> <span class="o">:</span> <span class="kc">null</span><span class="p">);</span>
        <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;body&quot;</span><span class="p">).</span><span class="nx">style</span><span class="p">(</span><span class="s2">&quot;cursor&quot;</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>
        <span class="nx">w</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;mousemove.brush&quot;</span><span class="p">,</span> <span class="kc">null</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;mouseup.brush&quot;</span><span class="p">,</span> <span class="kc">null</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;touchmove.brush&quot;</span><span class="p">,</span> <span class="kc">null</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;touchend.brush&quot;</span><span class="p">,</span> <span class="kc">null</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;keydown.brush&quot;</span><span class="p">,</span> <span class="kc">null</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;keyup.brush&quot;</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>
        <span class="nx">dragRestore</span><span class="p">();</span>
        <span class="nx">event_</span><span class="p">({</span>
          <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;brushend&quot;</span>
        <span class="p">});</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="nx">brush</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">z</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">x</span><span class="p">;</span>
      <span class="nx">x</span> <span class="o">=</span> <span class="nx">z</span><span class="p">;</span>
      <span class="nx">resizes</span> <span class="o">=</span> <span class="nx">d3_svg_brushResizes</span><span class="p">[</span><span class="o">!</span><span class="nx">x</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span> <span class="o">|</span> <span class="o">!</span><span class="nx">y</span><span class="p">];</span>
      <span class="k">return</span> <span class="nx">brush</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">brush</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">z</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">y</span><span class="p">;</span>
      <span class="nx">y</span> <span class="o">=</span> <span class="nx">z</span><span class="p">;</span>
      <span class="nx">resizes</span> <span class="o">=</span> <span class="nx">d3_svg_brushResizes</span><span class="p">[</span><span class="o">!</span><span class="nx">x</span> <span class="o">&lt;&lt;</span> <span class="mi">1</span> <span class="o">|</span> <span class="o">!</span><span class="nx">y</span><span class="p">];</span>
      <span class="k">return</span> <span class="nx">brush</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">brush</span><span class="p">.</span><span class="nx">clamp</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">z</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">x</span> <span class="o">&amp;&amp;</span> <span class="nx">y</span> <span class="o">?</span> <span class="p">[</span> <span class="nx">xClamp</span><span class="p">,</span> <span class="nx">yClamp</span> <span class="p">]</span> <span class="o">:</span> <span class="nx">x</span> <span class="o">?</span> <span class="nx">xClamp</span> <span class="o">:</span> <span class="nx">y</span> <span class="o">?</span> <span class="nx">yClamp</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">x</span> <span class="o">&amp;&amp;</span> <span class="nx">y</span><span class="p">)</span> <span class="nx">xClamp</span> <span class="o">=</span> <span class="o">!!</span><span class="nx">z</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">yClamp</span> <span class="o">=</span> <span class="o">!!</span><span class="nx">z</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="nx">xClamp</span> <span class="o">=</span> <span class="o">!!</span><span class="nx">z</span><span class="p">;</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">y</span><span class="p">)</span> <span class="nx">yClamp</span> <span class="o">=</span> <span class="o">!!</span><span class="nx">z</span><span class="p">;</span>
      <span class="k">return</span> <span class="nx">brush</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">brush</span><span class="p">.</span><span class="nx">extent</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">z</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">x0</span><span class="p">,</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">y0</span><span class="p">,</span> <span class="nx">y1</span><span class="p">,</span> <span class="nx">t</span><span class="p">;</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">xExtentDomain</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">x0</span> <span class="o">=</span> <span class="nx">xExtentDomain</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">x1</span> <span class="o">=</span> <span class="nx">xExtentDomain</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">x0</span> <span class="o">=</span> <span class="nx">xExtent</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">x1</span> <span class="o">=</span> <span class="nx">xExtent</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">invert</span><span class="p">)</span> <span class="nx">x0</span> <span class="o">=</span> <span class="nx">x</span><span class="p">.</span><span class="nx">invert</span><span class="p">(</span><span class="nx">x0</span><span class="p">),</span> <span class="nx">x1</span> <span class="o">=</span> <span class="nx">x</span><span class="p">.</span><span class="nx">invert</span><span class="p">(</span><span class="nx">x1</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">x1</span> <span class="o">&lt;</span> <span class="nx">x0</span><span class="p">)</span> <span class="nx">t</span> <span class="o">=</span> <span class="nx">x0</span><span class="p">,</span> <span class="nx">x0</span> <span class="o">=</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">x1</span> <span class="o">=</span> <span class="nx">t</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">yExtentDomain</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">y0</span> <span class="o">=</span> <span class="nx">yExtentDomain</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y1</span> <span class="o">=</span> <span class="nx">yExtentDomain</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">y0</span> <span class="o">=</span> <span class="nx">yExtent</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y1</span> <span class="o">=</span> <span class="nx">yExtent</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">y</span><span class="p">.</span><span class="nx">invert</span><span class="p">)</span> <span class="nx">y0</span> <span class="o">=</span> <span class="nx">y</span><span class="p">.</span><span class="nx">invert</span><span class="p">(</span><span class="nx">y0</span><span class="p">),</span> <span class="nx">y1</span> <span class="o">=</span> <span class="nx">y</span><span class="p">.</span><span class="nx">invert</span><span class="p">(</span><span class="nx">y1</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">y1</span> <span class="o">&lt;</span> <span class="nx">y0</span><span class="p">)</span> <span class="nx">t</span> <span class="o">=</span> <span class="nx">y0</span><span class="p">,</span> <span class="nx">y0</span> <span class="o">=</span> <span class="nx">y1</span><span class="p">,</span> <span class="nx">y1</span> <span class="o">=</span> <span class="nx">t</span><span class="p">;</span>
          <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">x</span> <span class="o">&amp;&amp;</span> <span class="nx">y</span> <span class="o">?</span> <span class="p">[</span> <span class="p">[</span> <span class="nx">x0</span><span class="p">,</span> <span class="nx">y0</span> <span class="p">],</span> <span class="p">[</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">y1</span> <span class="p">]</span> <span class="p">]</span> <span class="o">:</span> <span class="nx">x</span> <span class="o">?</span> <span class="p">[</span> <span class="nx">x0</span><span class="p">,</span> <span class="nx">x1</span> <span class="p">]</span> <span class="o">:</span> <span class="nx">y</span> <span class="o">&amp;&amp;</span> <span class="p">[</span> <span class="nx">y0</span><span class="p">,</span> <span class="nx">y1</span> <span class="p">];</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">x0</span> <span class="o">=</span> <span class="nx">z</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">x1</span> <span class="o">=</span> <span class="nx">z</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">y</span><span class="p">)</span> <span class="nx">x0</span> <span class="o">=</span> <span class="nx">x0</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">x1</span> <span class="o">=</span> <span class="nx">x1</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
        <span class="nx">xExtentDomain</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">x0</span><span class="p">,</span> <span class="nx">x1</span> <span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">x</span><span class="p">.</span><span class="nx">invert</span><span class="p">)</span> <span class="nx">x0</span> <span class="o">=</span> <span class="nx">x</span><span class="p">(</span><span class="nx">x0</span><span class="p">),</span> <span class="nx">x1</span> <span class="o">=</span> <span class="nx">x</span><span class="p">(</span><span class="nx">x1</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">x1</span> <span class="o">&lt;</span> <span class="nx">x0</span><span class="p">)</span> <span class="nx">t</span> <span class="o">=</span> <span class="nx">x0</span><span class="p">,</span> <span class="nx">x0</span> <span class="o">=</span> <span class="nx">x1</span><span class="p">,</span> <span class="nx">x1</span> <span class="o">=</span> <span class="nx">t</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">x0</span> <span class="o">!=</span> <span class="nx">xExtent</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span> <span class="nx">x1</span> <span class="o">!=</span> <span class="nx">xExtent</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="nx">xExtent</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">x0</span><span class="p">,</span> <span class="nx">x1</span> <span class="p">];</span>
      <span class="p">}</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">y</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">y0</span> <span class="o">=</span> <span class="nx">z</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">y1</span> <span class="o">=</span> <span class="nx">z</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="nx">y0</span> <span class="o">=</span> <span class="nx">y0</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="nx">y1</span> <span class="o">=</span> <span class="nx">y1</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
        <span class="nx">yExtentDomain</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">y0</span><span class="p">,</span> <span class="nx">y1</span> <span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">y</span><span class="p">.</span><span class="nx">invert</span><span class="p">)</span> <span class="nx">y0</span> <span class="o">=</span> <span class="nx">y</span><span class="p">(</span><span class="nx">y0</span><span class="p">),</span> <span class="nx">y1</span> <span class="o">=</span> <span class="nx">y</span><span class="p">(</span><span class="nx">y1</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">y1</span> <span class="o">&lt;</span> <span class="nx">y0</span><span class="p">)</span> <span class="nx">t</span> <span class="o">=</span> <span class="nx">y0</span><span class="p">,</span> <span class="nx">y0</span> <span class="o">=</span> <span class="nx">y1</span><span class="p">,</span> <span class="nx">y1</span> <span class="o">=</span> <span class="nx">t</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">y0</span> <span class="o">!=</span> <span class="nx">yExtent</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">||</span> <span class="nx">y1</span> <span class="o">!=</span> <span class="nx">yExtent</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="nx">yExtent</span> <span class="o">=</span> <span class="p">[</span> <span class="nx">y0</span><span class="p">,</span> <span class="nx">y1</span> <span class="p">];</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">brush</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">brush</span><span class="p">.</span><span class="nx">clear</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">brush</span><span class="p">.</span><span class="nx">empty</span><span class="p">())</span> <span class="p">{</span>
        <span class="nx">xExtent</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">],</span> <span class="nx">yExtent</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">];</span>
        <span class="nx">xExtentDomain</span> <span class="o">=</span> <span class="nx">yExtentDomain</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">brush</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">brush</span><span class="p">.</span><span class="nx">empty</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="o">!!</span><span class="nx">x</span> <span class="o">&amp;&amp;</span> <span class="nx">xExtent</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="nx">xExtent</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">||</span> <span class="o">!!</span><span class="nx">y</span> <span class="o">&amp;&amp;</span> <span class="nx">yExtent</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="nx">yExtent</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">rebind</span><span class="p">(</span><span class="nx">brush</span><span class="p">,</span> <span class="nx">event</span><span class="p">,</span> <span class="s2">&quot;on&quot;</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">d3_svg_brushCursor</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">n</span><span class="o">:</span> <span class="s2">&quot;ns-resize&quot;</span><span class="p">,</span>
    <span class="nx">e</span><span class="o">:</span> <span class="s2">&quot;ew-resize&quot;</span><span class="p">,</span>
    <span class="nx">s</span><span class="o">:</span> <span class="s2">&quot;ns-resize&quot;</span><span class="p">,</span>
    <span class="nx">w</span><span class="o">:</span> <span class="s2">&quot;ew-resize&quot;</span><span class="p">,</span>
    <span class="nx">nw</span><span class="o">:</span> <span class="s2">&quot;nwse-resize&quot;</span><span class="p">,</span>
    <span class="nx">ne</span><span class="o">:</span> <span class="s2">&quot;nesw-resize&quot;</span><span class="p">,</span>
    <span class="nx">se</span><span class="o">:</span> <span class="s2">&quot;nwse-resize&quot;</span><span class="p">,</span>
    <span class="nx">sw</span><span class="o">:</span> <span class="s2">&quot;nesw-resize&quot;</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">d3_svg_brushResizes</span> <span class="o">=</span> <span class="p">[</span> <span class="p">[</span> <span class="s2">&quot;n&quot;</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="s2">&quot;nw&quot;</span><span class="p">,</span> <span class="s2">&quot;ne&quot;</span><span class="p">,</span> <span class="s2">&quot;se&quot;</span><span class="p">,</span> <span class="s2">&quot;sw&quot;</span> <span class="p">],</span> <span class="p">[</span> <span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span> <span class="p">],</span> <span class="p">[</span> <span class="s2">&quot;n&quot;</span><span class="p">,</span> <span class="s2">&quot;s&quot;</span> <span class="p">],</span> <span class="p">[]</span> <span class="p">];</span>
  <span class="kd">var</span> <span class="nx">d3_time_format</span> <span class="o">=</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">format</span> <span class="o">=</span> <span class="nx">d3_locale_enUS</span><span class="p">.</span><span class="nx">timeFormat</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">d3_time_formatUtc</span> <span class="o">=</span> <span class="nx">d3_time_format</span><span class="p">.</span><span class="nx">utc</span><span class="p">;</span>
  <span class="kd">var</span> <span class="nx">d3_time_formatIso</span> <span class="o">=</span> <span class="nx">d3_time_formatUtc</span><span class="p">(</span><span class="s2">&quot;%Y-%m-%dT%H:%M:%S.%LZ&quot;</span><span class="p">);</span>
  <span class="nx">d3_time_format</span><span class="p">.</span><span class="nx">iso</span> <span class="o">=</span> <span class="nb">Date</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">toISOString</span> <span class="o">&amp;&amp;</span> <span class="o">+</span><span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="s2">&quot;2000-01-01T00:00:00.000Z&quot;</span><span class="p">)</span> <span class="o">?</span> <span class="nx">d3_time_formatIsoNative</span> <span class="o">:</span> <span class="nx">d3_time_formatIso</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">d3_time_formatIsoNative</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">date</span><span class="p">.</span><span class="nx">toISOString</span><span class="p">();</span>
  <span class="p">}</span>
  <span class="nx">d3_time_formatIsoNative</span><span class="p">.</span><span class="nx">parse</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">string</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">string</span><span class="p">);</span>
    <span class="k">return</span> <span class="nb">isNaN</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="nx">date</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="nx">d3_time_formatIsoNative</span><span class="p">.</span><span class="nx">toString</span> <span class="o">=</span> <span class="nx">d3_time_formatIso</span><span class="p">.</span><span class="nx">toString</span><span class="p">;</span>
  <span class="nx">d3_time</span><span class="p">.</span><span class="nx">second</span> <span class="o">=</span> <span class="nx">d3_time_interval</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">d3_date</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">date</span> <span class="o">/</span> <span class="mi">1</span><span class="nx">e3</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1</span><span class="nx">e3</span><span class="p">);</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">offset</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">date</span><span class="p">.</span><span class="nx">setTime</span><span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">offset</span><span class="p">)</span> <span class="o">*</span> <span class="mi">1</span><span class="nx">e3</span><span class="p">);</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getSeconds</span><span class="p">();</span>
  <span class="p">});</span>
  <span class="nx">d3_time</span><span class="p">.</span><span class="nx">seconds</span> <span class="o">=</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">second</span><span class="p">.</span><span class="nx">range</span><span class="p">;</span>
  <span class="nx">d3_time</span><span class="p">.</span><span class="nx">seconds</span><span class="p">.</span><span class="nx">utc</span> <span class="o">=</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">second</span><span class="p">.</span><span class="nx">utc</span><span class="p">.</span><span class="nx">range</span><span class="p">;</span>
  <span class="nx">d3_time</span><span class="p">.</span><span class="nx">minute</span> <span class="o">=</span> <span class="nx">d3_time_interval</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">d3_date</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">date</span> <span class="o">/</span> <span class="mi">6</span><span class="nx">e4</span><span class="p">)</span> <span class="o">*</span> <span class="mi">6</span><span class="nx">e4</span><span class="p">);</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">offset</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">date</span><span class="p">.</span><span class="nx">setTime</span><span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">offset</span><span class="p">)</span> <span class="o">*</span> <span class="mi">6</span><span class="nx">e4</span><span class="p">);</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getMinutes</span><span class="p">();</span>
  <span class="p">});</span>
  <span class="nx">d3_time</span><span class="p">.</span><span class="nx">minutes</span> <span class="o">=</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">minute</span><span class="p">.</span><span class="nx">range</span><span class="p">;</span>
  <span class="nx">d3_time</span><span class="p">.</span><span class="nx">minutes</span><span class="p">.</span><span class="nx">utc</span> <span class="o">=</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">minute</span><span class="p">.</span><span class="nx">utc</span><span class="p">.</span><span class="nx">range</span><span class="p">;</span>
  <span class="nx">d3_time</span><span class="p">.</span><span class="nx">hour</span> <span class="o">=</span> <span class="nx">d3_time_interval</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">timezone</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getTimezoneOffset</span><span class="p">()</span> <span class="o">/</span> <span class="mi">60</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">d3_date</span><span class="p">((</span><span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">date</span> <span class="o">/</span> <span class="mi">36</span><span class="nx">e5</span> <span class="o">-</span> <span class="nx">timezone</span><span class="p">)</span> <span class="o">+</span> <span class="nx">timezone</span><span class="p">)</span> <span class="o">*</span> <span class="mi">36</span><span class="nx">e5</span><span class="p">);</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">offset</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">date</span><span class="p">.</span><span class="nx">setTime</span><span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">getTime</span><span class="p">()</span> <span class="o">+</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">offset</span><span class="p">)</span> <span class="o">*</span> <span class="mi">36</span><span class="nx">e5</span><span class="p">);</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getHours</span><span class="p">();</span>
  <span class="p">});</span>
  <span class="nx">d3_time</span><span class="p">.</span><span class="nx">hours</span> <span class="o">=</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">hour</span><span class="p">.</span><span class="nx">range</span><span class="p">;</span>
  <span class="nx">d3_time</span><span class="p">.</span><span class="nx">hours</span><span class="p">.</span><span class="nx">utc</span> <span class="o">=</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">hour</span><span class="p">.</span><span class="nx">utc</span><span class="p">.</span><span class="nx">range</span><span class="p">;</span>
  <span class="nx">d3_time</span><span class="p">.</span><span class="nx">month</span> <span class="o">=</span> <span class="nx">d3_time_interval</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">date</span> <span class="o">=</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">day</span><span class="p">(</span><span class="nx">date</span><span class="p">);</span>
    <span class="nx">date</span><span class="p">.</span><span class="nx">setDate</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">date</span><span class="p">;</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">offset</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">date</span><span class="p">.</span><span class="nx">setMonth</span><span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">()</span> <span class="o">+</span> <span class="nx">offset</span><span class="p">);</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">date</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">();</span>
  <span class="p">});</span>
  <span class="nx">d3_time</span><span class="p">.</span><span class="nx">months</span> <span class="o">=</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">month</span><span class="p">.</span><span class="nx">range</span><span class="p">;</span>
  <span class="nx">d3_time</span><span class="p">.</span><span class="nx">months</span><span class="p">.</span><span class="nx">utc</span> <span class="o">=</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">month</span><span class="p">.</span><span class="nx">utc</span><span class="p">.</span><span class="nx">range</span><span class="p">;</span>
  <span class="kd">function</span> <span class="nx">d3_time_scale</span><span class="p">(</span><span class="nx">linear</span><span class="p">,</span> <span class="nx">methods</span><span class="p">,</span> <span class="nx">format</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">function</span> <span class="nx">scale</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">linear</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">invert</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_time_scaleDate</span><span class="p">(</span><span class="nx">linear</span><span class="p">.</span><span class="nx">invert</span><span class="p">(</span><span class="nx">x</span><span class="p">));</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">domain</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">arguments</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="k">return</span> <span class="nx">linear</span><span class="p">.</span><span class="nx">domain</span><span class="p">().</span><span class="nx">map</span><span class="p">(</span><span class="nx">d3_time_scaleDate</span><span class="p">);</span>
      <span class="nx">linear</span><span class="p">.</span><span class="nx">domain</span><span class="p">(</span><span class="nx">x</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">scale</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="kd">function</span> <span class="nx">tickMethod</span><span class="p">(</span><span class="nx">extent</span><span class="p">,</span> <span class="nx">count</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">span</span> <span class="o">=</span> <span class="nx">extent</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="nx">extent</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">target</span> <span class="o">=</span> <span class="nx">span</span> <span class="o">/</span> <span class="nx">count</span><span class="p">,</span> <span class="nx">i</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">bisect</span><span class="p">(</span><span class="nx">d3_time_scaleSteps</span><span class="p">,</span> <span class="nx">target</span><span class="p">);</span>
      <span class="k">return</span> <span class="nx">i</span> <span class="o">==</span> <span class="nx">d3_time_scaleSteps</span><span class="p">.</span><span class="nx">length</span> <span class="o">?</span> <span class="p">[</span> <span class="nx">methods</span><span class="p">.</span><span class="nx">year</span><span class="p">,</span> <span class="nx">d3_scale_linearTickRange</span><span class="p">(</span><span class="nx">extent</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">d</span> <span class="o">/</span> <span class="mi">31536</span><span class="nx">e6</span><span class="p">;</span>
      <span class="p">}),</span> <span class="nx">count</span><span class="p">)[</span><span class="mi">2</span><span class="p">]</span> <span class="p">]</span> <span class="o">:</span> <span class="o">!</span><span class="nx">i</span> <span class="o">?</span> <span class="p">[</span> <span class="nx">d3_time_scaleMilliseconds</span><span class="p">,</span> <span class="nx">d3_scale_linearTickRange</span><span class="p">(</span><span class="nx">extent</span><span class="p">,</span> <span class="nx">count</span><span class="p">)[</span><span class="mi">2</span><span class="p">]</span> <span class="p">]</span> <span class="o">:</span> <span class="nx">methods</span><span class="p">[</span><span class="nx">target</span> <span class="o">/</span> <span class="nx">d3_time_scaleSteps</span><span class="p">[</span><span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">&lt;</span> <span class="nx">d3_time_scaleSteps</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span> <span class="o">/</span> <span class="nx">target</span> <span class="o">?</span> <span class="nx">i</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">:</span> <span class="nx">i</span><span class="p">];</span>
    <span class="p">}</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">nice</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">interval</span><span class="p">,</span> <span class="nx">skip</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">domain</span> <span class="o">=</span> <span class="nx">scale</span><span class="p">.</span><span class="nx">domain</span><span class="p">(),</span> <span class="nx">extent</span> <span class="o">=</span> <span class="nx">d3_scaleExtent</span><span class="p">(</span><span class="nx">domain</span><span class="p">),</span> <span class="nx">method</span> <span class="o">=</span> <span class="nx">interval</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">tickMethod</span><span class="p">(</span><span class="nx">extent</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="o">:</span> <span class="k">typeof</span> <span class="nx">interval</span> <span class="o">===</span> <span class="s2">&quot;number&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">tickMethod</span><span class="p">(</span><span class="nx">extent</span><span class="p">,</span> <span class="nx">interval</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">method</span><span class="p">)</span> <span class="nx">interval</span> <span class="o">=</span> <span class="nx">method</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">skip</span> <span class="o">=</span> <span class="nx">method</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
      <span class="kd">function</span> <span class="nx">skipped</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">interval</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">date</span><span class="p">,</span> <span class="nx">d3_time_scaleDate</span><span class="p">(</span><span class="o">+</span><span class="nx">date</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="nx">skip</span><span class="p">).</span><span class="nx">length</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="k">return</span> <span class="nx">scale</span><span class="p">.</span><span class="nx">domain</span><span class="p">(</span><span class="nx">d3_scale_nice</span><span class="p">(</span><span class="nx">domain</span><span class="p">,</span> <span class="nx">skip</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">?</span> <span class="p">{</span>
        <span class="nx">floor</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">while</span> <span class="p">(</span><span class="nx">skipped</span><span class="p">(</span><span class="nx">date</span> <span class="o">=</span> <span class="nx">interval</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">date</span><span class="p">)))</span> <span class="nx">date</span> <span class="o">=</span> <span class="nx">d3_time_scaleDate</span><span class="p">(</span><span class="nx">date</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
          <span class="k">return</span> <span class="nx">date</span><span class="p">;</span>
        <span class="p">},</span>
        <span class="nx">ceil</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">date</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">while</span> <span class="p">(</span><span class="nx">skipped</span><span class="p">(</span><span class="nx">date</span> <span class="o">=</span> <span class="nx">interval</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="nx">date</span><span class="p">)))</span> <span class="nx">date</span> <span class="o">=</span> <span class="nx">d3_time_scaleDate</span><span class="p">(</span><span class="o">+</span><span class="nx">date</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
          <span class="k">return</span> <span class="nx">date</span><span class="p">;</span>
        <span class="p">}</span>
      <span class="p">}</span> <span class="o">:</span> <span class="nx">interval</span><span class="p">));</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">ticks</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">interval</span><span class="p">,</span> <span class="nx">skip</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">extent</span> <span class="o">=</span> <span class="nx">d3_scaleExtent</span><span class="p">(</span><span class="nx">scale</span><span class="p">.</span><span class="nx">domain</span><span class="p">()),</span> <span class="nx">method</span> <span class="o">=</span> <span class="nx">interval</span> <span class="o">==</span> <span class="kc">null</span> <span class="o">?</span> <span class="nx">tickMethod</span><span class="p">(</span><span class="nx">extent</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="o">:</span> <span class="k">typeof</span> <span class="nx">interval</span> <span class="o">===</span> <span class="s2">&quot;number&quot;</span> <span class="o">?</span> <span class="nx">tickMethod</span><span class="p">(</span><span class="nx">extent</span><span class="p">,</span> <span class="nx">interval</span><span class="p">)</span> <span class="o">:</span> <span class="o">!</span><span class="nx">interval</span><span class="p">.</span><span class="nx">range</span> <span class="o">&amp;&amp;</span> <span class="p">[</span> <span class="p">{</span>
        <span class="nx">range</span><span class="o">:</span> <span class="nx">interval</span>
      <span class="p">},</span> <span class="nx">skip</span> <span class="p">];</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">method</span><span class="p">)</span> <span class="nx">interval</span> <span class="o">=</span> <span class="nx">method</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">skip</span> <span class="o">=</span> <span class="nx">method</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
      <span class="k">return</span> <span class="nx">interval</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nx">extent</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">d3_time_scaleDate</span><span class="p">(</span><span class="o">+</span><span class="nx">extent</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="nx">skip</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="nx">skip</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">tickFormat</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">format</span><span class="p">;</span>
    <span class="p">};</span>
    <span class="nx">scale</span><span class="p">.</span><span class="nx">copy</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3_time_scale</span><span class="p">(</span><span class="nx">linear</span><span class="p">.</span><span class="nx">copy</span><span class="p">(),</span> <span class="nx">methods</span><span class="p">,</span> <span class="nx">format</span><span class="p">);</span>
    <span class="p">};</span>
    <span class="k">return</span> <span class="nx">d3_scale_linearRebind</span><span class="p">(</span><span class="nx">scale</span><span class="p">,</span> <span class="nx">linear</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">function</span> <span class="nx">d3_time_scaleDate</span><span class="p">(</span><span class="nx">t</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="nx">t</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="kd">var</span> <span class="nx">d3_time_scaleSteps</span> <span class="o">=</span> <span class="p">[</span> <span class="mi">1</span><span class="nx">e3</span><span class="p">,</span> <span class="mi">5</span><span class="nx">e3</span><span class="p">,</span> <span class="mi">15</span><span class="nx">e3</span><span class="p">,</span> <span class="mi">3</span><span class="nx">e4</span><span class="p">,</span> <span class="mi">6</span><span class="nx">e4</span><span class="p">,</span> <span class="mi">3</span><span class="nx">e5</span><span class="p">,</span> <span class="mi">9</span><span class="nx">e5</span><span class="p">,</span> <span class="mi">18</span><span class="nx">e5</span><span class="p">,</span> <span class="mi">36</span><span class="nx">e5</span><span class="p">,</span> <span class="mi">108</span><span class="nx">e5</span><span class="p">,</span> <span class="mi">216</span><span class="nx">e5</span><span class="p">,</span> <span class="mi">432</span><span class="nx">e5</span><span class="p">,</span> <span class="mi">864</span><span class="nx">e5</span><span class="p">,</span> <span class="mi">1728</span><span class="nx">e5</span><span class="p">,</span> <span class="mi">6048</span><span class="nx">e5</span><span class="p">,</span> <span class="mi">2592</span><span class="nx">e6</span><span class="p">,</span> <span class="mi">7776</span><span class="nx">e6</span><span class="p">,</span> <span class="mi">31536</span><span class="nx">e6</span> <span class="p">];</span>
  <span class="kd">var</span> <span class="nx">d3_time_scaleLocalMethods</span> <span class="o">=</span> <span class="p">[</span> <span class="p">[</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">second</span><span class="p">,</span> <span class="mi">1</span> <span class="p">],</span> <span class="p">[</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">second</span><span class="p">,</span> <span class="mi">5</span> <span class="p">],</span> <span class="p">[</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">second</span><span class="p">,</span> <span class="mi">15</span> <span class="p">],</span> <span class="p">[</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">second</span><span class="p">,</span> <span class="mi">30</span> <span class="p">],</span> <span class="p">[</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">minute</span><span class="p">,</span> <span class="mi">1</span> <span class="p">],</span> <span class="p">[</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">minute</span><span class="p">,</span> <span class="mi">5</span> <span class="p">],</span> <span class="p">[</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">minute</span><span class="p">,</span> <span class="mi">15</span> <span class="p">],</span> <span class="p">[</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">minute</span><span class="p">,</span> <span class="mi">30</span> <span class="p">],</span> <span class="p">[</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">hour</span><span class="p">,</span> <span class="mi">1</span> <span class="p">],</span> <span class="p">[</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">hour</span><span class="p">,</span> <span class="mi">3</span> <span class="p">],</span> <span class="p">[</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">hour</span><span class="p">,</span> <span class="mi">6</span> <span class="p">],</span> <span class="p">[</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">hour</span><span class="p">,</span> <span class="mi">12</span> <span class="p">],</span> <span class="p">[</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">day</span><span class="p">,</span> <span class="mi">1</span> <span class="p">],</span> <span class="p">[</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">day</span><span class="p">,</span> <span class="mi">2</span> <span class="p">],</span> <span class="p">[</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">week</span><span class="p">,</span> <span class="mi">1</span> <span class="p">],</span> <span class="p">[</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">month</span><span class="p">,</span> <span class="mi">1</span> <span class="p">],</span> <span class="p">[</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">month</span><span class="p">,</span> <span class="mi">3</span> <span class="p">],</span> <span class="p">[</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">year</span><span class="p">,</span> <span class="mi">1</span> <span class="p">]</span> <span class="p">];</span>
  <span class="kd">var</span> <span class="nx">d3_time_scaleLocalFormat</span> <span class="o">=</span> <span class="nx">d3_time_format</span><span class="p">.</span><span class="nx">multi</span><span class="p">([</span> <span class="p">[</span> <span class="s2">&quot;.%L&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getMilliseconds</span><span class="p">();</span>
  <span class="p">}</span> <span class="p">],</span> <span class="p">[</span> <span class="s2">&quot;:%S&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getSeconds</span><span class="p">();</span>
  <span class="p">}</span> <span class="p">],</span> <span class="p">[</span> <span class="s2">&quot;%I:%M&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getMinutes</span><span class="p">();</span>
  <span class="p">}</span> <span class="p">],</span> <span class="p">[</span> <span class="s2">&quot;%I %p&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getHours</span><span class="p">();</span>
  <span class="p">}</span> <span class="p">],</span> <span class="p">[</span> <span class="s2">&quot;%a %d&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getDay</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span> <span class="p">],</span> <span class="p">[</span> <span class="s2">&quot;%b %d&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span> <span class="p">],</span> <span class="p">[</span> <span class="s2">&quot;%B&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getMonth</span><span class="p">();</span>
  <span class="p">}</span> <span class="p">],</span> <span class="p">[</span> <span class="s2">&quot;%Y&quot;</span><span class="p">,</span> <span class="nx">d3_true</span> <span class="p">]</span> <span class="p">]);</span>
  <span class="kd">var</span> <span class="nx">d3_time_scaleMilliseconds</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">range</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">start</span><span class="p">,</span> <span class="nx">stop</span><span class="p">,</span> <span class="nx">step</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">range</span><span class="p">(</span><span class="nb">Math</span><span class="p">.</span><span class="nx">ceil</span><span class="p">(</span><span class="nx">start</span> <span class="o">/</span> <span class="nx">step</span><span class="p">)</span> <span class="o">*</span> <span class="nx">step</span><span class="p">,</span> <span class="o">+</span><span class="nx">stop</span><span class="p">,</span> <span class="nx">step</span><span class="p">).</span><span class="nx">map</span><span class="p">(</span><span class="nx">d3_time_scaleDate</span><span class="p">);</span>
    <span class="p">},</span>
    <span class="nx">floor</span><span class="o">:</span> <span class="nx">d3_identity</span><span class="p">,</span>
    <span class="nx">ceil</span><span class="o">:</span> <span class="nx">d3_identity</span>
  <span class="p">};</span>
  <span class="nx">d3_time_scaleLocalMethods</span><span class="p">.</span><span class="nx">year</span> <span class="o">=</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">year</span><span class="p">;</span>
  <span class="nx">d3_time</span><span class="p">.</span><span class="nx">scale</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_time_scale</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">linear</span><span class="p">(),</span> <span class="nx">d3_time_scaleLocalMethods</span><span class="p">,</span> <span class="nx">d3_time_scaleLocalFormat</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="kd">var</span> <span class="nx">d3_time_scaleUtcMethods</span> <span class="o">=</span> <span class="nx">d3_time_scaleLocalMethods</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">m</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span> <span class="nx">m</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">utc</span><span class="p">,</span> <span class="nx">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">];</span>
  <span class="p">});</span>
  <span class="kd">var</span> <span class="nx">d3_time_scaleUtcFormat</span> <span class="o">=</span> <span class="nx">d3_time_formatUtc</span><span class="p">.</span><span class="nx">multi</span><span class="p">([</span> <span class="p">[</span> <span class="s2">&quot;.%L&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getUTCMilliseconds</span><span class="p">();</span>
  <span class="p">}</span> <span class="p">],</span> <span class="p">[</span> <span class="s2">&quot;:%S&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getUTCSeconds</span><span class="p">();</span>
  <span class="p">}</span> <span class="p">],</span> <span class="p">[</span> <span class="s2">&quot;%I:%M&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getUTCMinutes</span><span class="p">();</span>
  <span class="p">}</span> <span class="p">],</span> <span class="p">[</span> <span class="s2">&quot;%I %p&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getUTCHours</span><span class="p">();</span>
  <span class="p">}</span> <span class="p">],</span> <span class="p">[</span> <span class="s2">&quot;%a %d&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getUTCDay</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getUTCDate</span><span class="p">()</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span> <span class="p">],</span> <span class="p">[</span> <span class="s2">&quot;%b %d&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getUTCDate</span><span class="p">()</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span> <span class="p">],</span> <span class="p">[</span> <span class="s2">&quot;%B&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getUTCMonth</span><span class="p">();</span>
  <span class="p">}</span> <span class="p">],</span> <span class="p">[</span> <span class="s2">&quot;%Y&quot;</span><span class="p">,</span> <span class="nx">d3_true</span> <span class="p">]</span> <span class="p">]);</span>
  <span class="nx">d3_time_scaleUtcMethods</span><span class="p">.</span><span class="nx">year</span> <span class="o">=</span> <span class="nx">d3_time</span><span class="p">.</span><span class="nx">year</span><span class="p">.</span><span class="nx">utc</span><span class="p">;</span>
  <span class="nx">d3_time</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">utc</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_time_scale</span><span class="p">(</span><span class="nx">d3</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">linear</span><span class="p">(),</span> <span class="nx">d3_time_scaleUtcMethods</span><span class="p">,</span> <span class="nx">d3_time_scaleUtcFormat</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">d3_xhrType</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span><span class="p">;</span>
  <span class="p">});</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">json</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_xhr</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="s2">&quot;application/json&quot;</span><span class="p">,</span> <span class="nx">d3_json</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_json</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">html</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">callback</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">d3_xhr</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="s2">&quot;text/html&quot;</span><span class="p">,</span> <span class="nx">d3_html</span><span class="p">,</span> <span class="nx">callback</span><span class="p">);</span>
  <span class="p">};</span>
  <span class="kd">function</span> <span class="nx">d3_html</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">range</span> <span class="o">=</span> <span class="nx">d3_document</span><span class="p">.</span><span class="nx">createRange</span><span class="p">();</span>
    <span class="nx">range</span><span class="p">.</span><span class="nx">selectNode</span><span class="p">(</span><span class="nx">d3_document</span><span class="p">.</span><span class="nx">body</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">range</span><span class="p">.</span><span class="nx">createContextualFragment</span><span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="nx">d3</span><span class="p">.</span><span class="nx">xml</span> <span class="o">=</span> <span class="nx">d3_xhrType</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">request</span><span class="p">.</span><span class="nx">responseXML</span><span class="p">;</span>
  <span class="p">});</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">define</span> <span class="o">===</span> <span class="s2">&quot;function&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">define</span><span class="p">.</span><span class="nx">amd</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">define</span><span class="p">(</span><span class="nx">d3</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">module</span> <span class="o">===</span> <span class="s2">&quot;object&quot;</span> <span class="o">&amp;&amp;</span> <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">;</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">d3</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}();</span>

</pre></div></td></tr></tbody></table><div id="generated">generated Wed Jul 02 2014 12:31:51 GMT-0400 (EDT)  </div></div></body></html>